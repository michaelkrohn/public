!function(e){var t=window._walkmeWebpackJP;window._walkmeWebpackJP=function(n,o){for(var a,s,u=0,l=[];u<n.length;u++)s=n[u],r[s]&&l.push.apply(l,r[s]),r[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);for(t&&t(n,o);l.length;)l.shift().call(null,i)};var n={},r={0:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={exports:{},id:t,loaded:!1};return e[t].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}return i.e=function(e,t){if(0===r[e])return t.call(null,i);if(void 0!==r[e])r[e].push(t);else{r[e]=[t];var n=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.charset="utf-8",o.async=!0,o.src=i.p+""+e+".maketutorial_lib.js",n.appendChild(o)}},i.m=e,i.c=n,i.p="",i(0)}([function(module,exports,__webpack_require__){(function(__extends){(function(){/*!
	 * WalkMe
	 * http://www.walkme.com/
	 *
	 * Copyright 2012, WalkMe LTD
	 */
window._walkmeInternals=window._walkmeInternals||{},_walkmeInternals.addTimeStamp&&_walkmeInternals.addTimeStamp("libCodeStart"),window.wmjQuery=mtjQuery,mtjQuery&&(mtjQuery.expr&&mtjQuery.expr.filters&&(mtjQuery.expr.filters.mt_hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!mtjQuery.support.reliableHiddenOffsets&&"none"===(e.style.display||mtjQuery.css(e,"display"))||"hidden"===mtjQuery.css(e,"visibility")},mtjQuery.expr.filters.mt_visible=function(e){return!mtjQuery.expr.filters.mt_hidden(e)},mtjQuery.expr.filters.wm_can_embed=function(e){var t=wmjQuery(e);return!t.hasClass("walkme-not-embed")&&"static"!=t.css("position")}),mtjQuery.trim=function(e){var t=/^\s+/,n=/\s+$/;return null==e?"":e.toString().replace(t,"").replace(n,"")}),function(e){function t(e){if(window._walkmeInternals.jQueryCompatability=window._walkmeInternals.jQueryCompatability||{},e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return void(_walkmeInternals.jQueryCompatability.wmIECorsSupport=!1);var t=/^(https?:)?\/\//i,n=/^get|post$/i,r=new RegExp("^(//|"+location.protocol+")","i");_walkmeInternals.jQueryCompatability.wmIECorsSupport=!0,e.ajaxTransport("* text html xml json",function(i,o,a){if(!(i.crossDomain&&i.async&&n.test(i.type)&&t.test(i.url)&&r.test(i.url)))return;var s=null;return{send:function(t,n){var r="",a=(o.dataType||"").toLowerCase();s=new XDomainRequest,/^\d+$/.test(o.timeout)&&(s.timeout=o.timeout),s.ontimeout=function(){n(500,"timeout")},s.onload=function(){var t="Content-Length: "+s.responseText.length+"\r\nContent-Type: "+s.contentType,r={code:200,message:"success"},i={text:s.responseText};try{if("html"===a||/text\/html/i.test(s.contentType))i.html=s.responseText;else if("json"===a||"text"!==a&&/\/json/i.test(s.contentType))try{i.json=e.parseJSON(s.responseText)}catch(o){r.code=500,r.message="parseerror"}else if("xml"===a||"text"!==a&&/\/xml/i.test(s.contentType)){var u=new ActiveXObject("Microsoft.XMLDOM");u.async=!1;try{u.loadXML(s.responseText)}catch(o){u=void 0}if(!u||!u.documentElement||u.getElementsByTagName("parsererror").length)throw r.code=500,r.message="parseerror","Invalid XML: "+s.responseText;i.xml=u}}catch(l){throw l}finally{n(r.code,r.message,i,t)}},s.onprogress=function(){},s.onerror=function(){n(500,"error",{text:s.responseText})},o.data&&(r="string"===e.type(o.data)?o.data:e.param(o.data)),s.open(i.type,i.url),s.send(r)},abort:function(){s&&s.abort()}}})}e.extend({safeEach:function(t,n){return e.each(t,function(e,r){t.hasOwnProperty(e)&&n(e,r)})}}),e.fn.safeEach=function(t){return e.safeEach(this,t)},e.fn.important=function(t,n){var r=this;if("object"==typeof t)return e.safeEach(t,function(e,t){r.important(e,t)}),r;return r.safeEach(function(r,i){e(i).css(t,"").attr("style",function(e,r){var i=new RegExp("(^|;)\\s*"+t+"\\s*:[^;]*(;|$)","gi");return(r||"").replace(i,"$1").replace(/;$/gi,"")+";"+(void 0!=n?t+": "+n+" !important;":"")})})},e.fn.cssReset=function(t,r){if(!t)return;var i=this;if("object"==typeof t)return e.safeEach(t,function(e,t){i.cssReset(e,t)}),i;var o;return"string"==typeof r&&(o=r.indexOf("!important")>-1,r=e.trim(r.replace("!important",""))),i.safeEach(function(i,a){a.style[t]||a.style[n(t)]||(o?e(a).important(t,r):e(a).css(t,r))})};function n(e){return e.replace(/^-+$/g,"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}e.fn.exist=function(){return!!this.length},e.fn.or=function(t,n){return this.length?this:e(t,n)},e.fn.allCss=function(){if(1!=this.length)return;var t={},n=this.attr("style");if(!n)return t;for(var r=n.split(";"),i=r.length-1;i>=0;i--){var o=r[i].split(":"),a=e.trim(o[0]);a&&(t[a]=e.trim(o[1]))}return t},e.extend(e.expr[":"],{textEquals:function(t,n,r){return e(t).text()==r[3]}}),e.fn.reduce=function(e,t){return this.each(function(n,r){t=e.apply(r,[t,r])}),t};function r(e){var t={},n=0,r=e.camelCase;e.camelCase=function(e){return void 0===t[e]&&(t[e]=r(e),++n>1e3&&(n=0,t={})),t[e]}}t(e),r(e)}(wmjQuery),function(e,t,n){n(window.wmjQuery,e,t)}(this,document,function(e,t,n,r){!function(e,t,n,r){var i,o,a="virtualMouseBindings",s="virtualTouchID",u="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),l="clientX clientY pageX pageY screenX screenY".split(" "),c=e.event.mouseHooks?e.event.mouseHooks.props:[],d=e.event.props.concat(c),f={},p=0,g=0,h=0,m=!1,v=[],y=!1,E=!1,S="addEventListener"in n,T=e(n),C=1,b=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};function w(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function I(t,n){var i,o,a,s,u,c,f,p,g,h=t.type;if(t=e.Event(t),t.type=n,i=t.originalEvent,o=e.event.props,h.search(/^(mouse|click)/)>-1&&(o=d),i)for(f=o.length,s;f;)s=o[--f],t[s]=i[s];if(h.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),h.search(/^touch/)!==-1&&(a=w(i),h=a.touches,u=a.changedTouches,c=h&&h.length?h[0]:u&&u.length?u[0]:r))for(p=0,g=l.length;p<g;p++)s=l[p],t[s]=c[s];return t}function P(t){for(var n,r,i={};t;){n=e.data(t,a);for(r in n)n[r]&&(i[r]=i.hasVirtualBinding=!0);t=t.parentNode}return i}function _(t,n){for(var r;t;){if(r=e.data(t,a),r&&(!n||r[n]))return t;t=t.parentNode}return null}function k(){E=!1}function A(){E=!0}function D(){b=0,v.length=0,y=!1,A()}function O(){k()}function N(){x(),p=setTimeout(function(){p=0,D()},e.vmouse.resetTimerDuration)}function x(){p&&(clearTimeout(p),p=0)}function L(t,n,r){var i;return(r&&r[t]||!r&&_(n.target,t))&&(i=I(n,t),e(n.target).trigger(i)),i}function F(t){var n,r=e.data(t.target,s);y||b&&b===r||(n=L("v"+t.type,t),n&&(n.isDefaultPrevented()&&t.preventDefault(),n.isPropagationStopped()&&t.stopPropagation(),n.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function M(t){var n,r,i,o=w(t).touches;o&&1===o.length&&(n=t.target,r=P(n),r.hasVirtualBinding&&(b=C++,e.data(n,s,b),x(),O(),m=!1,i=w(t).touches[0],g=i.pageX,h=i.pageY,L("vmouseover",t,r),L("vmousedown",t,r)))}function B(e){if(E)return;m||L("vmousecancel",e,P(e.target)),m=!0,N()}function R(t){if(E)return;var n=w(t).touches[0],r=m,i=e.vmouse.moveDistanceThreshold,o=P(t.target);m=m||Math.abs(n.pageX-g)>i||Math.abs(n.pageY-h)>i,m&&!r&&L("vmousecancel",t,o),L("vmousemove",t,o),N()}function U(e){if(E)return;A();var t,n,r=P(e.target);L("vmouseup",e,r),m||(t=L("vclick",e,r),t&&t.isDefaultPrevented()&&(n=w(e).changedTouches[0],v.push({touchID:b,x:n.clientX,y:n.clientY}),y=!0)),L("vmouseout",e,r),m=!1,N()}function V(t){var n,r=e.data(t,a);if(r)for(n in r)if(r[n])return!0;return!1}function W(){}function G(t){var n=t.substr(1);return{setup:function(){V(this)||e.data(this,a,{});var r=e.data(this,a);r[t]=!0,f[t]=(f[t]||0)+1,1===f[t]&&T.bind(n,F),e(this).bind(n,W),S&&(f.touchstart=(f.touchstart||0)+1,1===f.touchstart&&T.bind("touchstart",M).bind("touchend",U).bind("touchmove",R).bind("scroll",B))},teardown:function(){--f[t],f[t]||T.unbind(n,F),S&&(--f.touchstart,f.touchstart||T.unbind("touchstart",M).unbind("touchmove",R).unbind("touchend",U).unbind("scroll",B));var r=e(this),i=e.data(this,a);i&&(i[t]=!1),r.unbind(n,W),V(this)||r.removeData(a)}}}for(o=0;o<u.length;o++)e.event.special[u[o]]=G(u[o]);if(S){var H=function(t){var n,r,o,a,u,l,c=v.length,d=t.target;if(c)for(n=t.clientX,r=t.clientY,i=e.vmouse.clickDistanceThreshold,o=d;o;){for(a=0;a<c;a++)if(u=v[a],l=0,o===d&&Math.abs(u.x-n)<i&&Math.abs(u.y-r)<i||e.data(o,s)===u.touchID)return t.preventDefault(),void t.stopPropagation();o=o.parentNode}};n.addEventListener("click",H,!0),wmjQuery(t._walkmeInternals).bind("removeWalkMe",function(){n.removeEventListener("click",H,!0)})}}(e,t,n),function(e){e.mobile={}}(e),function(e,t){var r={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,r),e.extend(e.mobile.support,r)}(e),function(e,t,r){var i=e(n),o=e.mobile.support.touch,a="touchmove scroll",s=o?"touchstart":"mousedown",u=o?"touchend":"mouseup",l=o?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)});function c(t,n,i,o){var a=i.type;i.type=n,o?e.event.trigger(i,r,t):e.event.dispatch.call(t,i),i.type=a}e.event.special.scrollstart={enabled:!0,setup:function(){var t,n,r=this,i=e(r);function o(e,n){t=n,c(r,t?"scrollstart":"scrollstop",e)}i.bind(a,function(r){if(!e.event.special.scrollstart.enabled)return;t||o(r,!0),clearTimeout(n),n=setTimeout(function(){o(r,!1)},50)})},teardown:function(){e(this).unbind(a)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,n=e(t),r=!1;n.bind("vmousedown",function(o){if(r=!1,o.which&&1!==o.which)return!1;var a,s=o.target;function u(){clearTimeout(a)}function l(){u(),n.unbind("vclick",d).unbind("vmouseup",u),i.unbind("vmousecancel",l)}function d(e){l(),r||s!==e.target?r&&e.preventDefault():c(t,"tap",e)}n.bind("vmouseup",u).bind("vclick",d),i.bind("vmousecancel",l),a=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(r=!0),c(t,"taphold",e.Event("taphold",{target:s}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),i.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var n=t.pageXOffset,r=t.pageYOffset,i=e.clientX,o=e.clientY;return 0===e.pageY&&Math.floor(o)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(i)>Math.floor(e.pageX)?(i-=n,o-=r):(o<e.pageY-r||i<e.pageX-n)&&(i=e.pageX-n,o=e.pageY-r),{x:i,y:o}},start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y],origin:e(t.target)}},stop:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y]}},handleSwipe:function(t,n,r,i){if(n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var o=t.coords[0]>n.coords[0]?"swipeleft":"swiperight";return c(r,"swipe",e.Event("swipe",{target:i,swipestart:t,swipestop:n}),!0),c(r,o,e.Event(o,{target:i,swipestart:t,swipestop:n}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,n=this,r=e(n),o={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=o,o.start=function(t){if(e.event.special.swipe.eventInProgress)return;e.event.special.swipe.eventInProgress=!0;var r,a=e.event.special.swipe.start(t),s=t.target,c=!1;o.move=function(t){if(!a||t.isDefaultPrevented())return;r=e.event.special.swipe.stop(t),c||(c=e.event.special.swipe.handleSwipe(a,r,n,s),c&&(e.event.special.swipe.eventInProgress=!1)),Math.abs(a.coords[0]-r.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()},o.stop=function(){c=!0,e.event.special.swipe.eventInProgress=!1,i.off(l,o.move),o.move=null},i.on(l,o.move).one(u,o.stop)},r.on(s,o.start)},teardown:function(){var t,n;t=e.data(this,"mobile-events"),t&&(n=t.swipe,delete t.swipe,t.length--,0===t.length&&e.removeData(this,"mobile-events")),n&&(n.start&&e(this).off(s,n.start),n.move&&i.off(l,n.move),n.stop&&i.off(u,n.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)},teardown:function(){e(this).unbind(n)}}})}(e,this)}),function(e){"use strict";function t(t,n){e.extend(this,n),this.$select=t,e.extend(this,this.markup(t)),this.bindEvents()}t.prototype={getValue:function(e){if("function"==typeof this[e])return this[e]();return this[e]},onFocusBlur:function(e){this.$el.toggleClass(this.generateClassName("focus",!0),e&&("focus"===e.type||"focusin"===e.type)||this.$select.is(":focus"))},updateTitle:function(){var e=this.$select.find(":selected"),t=this.formatter(e.text(),this.$select.val(),e,this.$select);this.allowHtmlInTitle?this.$title.html(t):this.$title.text(t)},bindEvents:function(){this.$el.on("focusin."+this.baseName+" focusout."+this.baseName,e.proxy(this.onFocusBlur,this)),this.onFocusBlur(),this.$select.on("change."+this.baseName,e.proxy(this.updateTitle,this)),this.$select.on("keyup."+this.baseName,e.proxy(this.updateTitle,this)),this.updateTitle()},destroy:function(){this.$el.off("."+this.baseName),this.$select.off("."+this.baseName),this.$select.removeClass(this.generateClassName("select")).insertBefore(this.$el),this.$el.remove()}};function n(r){return"string"!=typeof r&&(r=e.extend({},n.options,r)),this.filter("select").each(function(){var n=e(this),i=n.data(r.baseName);"string"==typeof r?i[r].apply(n,[].slice.call(arguments,1)):i||n.data(r.baseName,new t(n,r))}),this}n.klass=t,n.formatter=function(e,t,n,r){return e},n.markup=function(t){var n=t.addClass(this.generateClassName("select")).wrap('<span class="'+this.generateClassName()+'"/>').parent();return e('<span class="'+this.generateClassName("arrow")+'"/>').prependTo(n),{$el:n,$title:e('<span class="'+this.generateClassName("title")+'"/>').prependTo(n)}},n.generateClassName=function(e,t){return this.getValue("baseName")+(e?"-"+e:"")},n.options={baseName:"brute-select",generateClassName:n.generateClassName,markup:n.markup,formatter:n.formatter,allowHtmlInTitle:!1},e.fn.bruteSelect=n}(mtjQuery),function(e){e.fn.fixedPosition=function(e){}}(mtjQuery),function(e){e.extend({highlight:function(t,n,r,i){if(3===t.nodeType){var o=t.data.match(n);if(o){var a=document.createElement(r||"span");a.className=i||"walkme-highlight";var s=t.splitText(o.index);s.splitText(o[0].length);var u=s.cloneNode(!0);return a.appendChild(u),s.parentNode.replaceChild(a,s),1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&(t.tagName!==r.toUpperCase()||t.className!==i))for(var l=0;l<t.childNodes.length;l++)l+=e.highlight(t.childNodes[l],n,r,i);return 0}}),e.fn.unhighlight=function(t){var n={className:"walkme-highlight",element:"span"};return e.extend(n,t),this.find(n.element+"."+n.className).each(function(){var t=this.parentNode;t&&(t.replaceChild(this.firstChild,this),e(t).text(e(t).text()))}).end()},e.fn.highlight=function(t,n){var r={className:"walkme-highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(e.extend(r,n),t.constructor===String&&(t=[t]),t=e.grep(t,function(e,t){return""!=e}),t=e.map(t,function(e,t){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}),0==t.length)return this;var i=r.caseSensitive?"":"i",o="("+t.join("|")+")";r.wordsOnly&&(o="\\b"+o+"\\b");var a=new RegExp(o,i);return this.each(function(){e.highlight(this,a,r.element,r.className)})}}(mtjQuery),function(e,t,n){e.fn.jScrollPane=function(r){function i(r,i){var o,a,s,u,l,c,d,f,p,g,h,m,v,y,E,S,T,C,b,w,I,P,_,k,A,D,O,N,x,L,F,M,B,R,U=this,V=!0,W=!0,G=!1,H=!1,j=r.clone(!1,!1).empty(),Y=Y,z=e.fn.mwheelIntent?"mwheelIntent.walkme-jsp":"mousewheel.walkme-jsp";"border-box"===r.css("box-sizing")?(M=0,B=0):(M=r.css("paddingTop")+" "+r.css("paddingRight")+" "+r.css("paddingBottom")+" "+r.css("paddingLeft"),B=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0));function Q(t){var i,m,v,E,S,C,b=!1,w=!1;if(o=t,a===n)S=r.scrollTop(),C=r.scrollLeft(),r.important({overflow:"hidden",padding:0}),s=r.innerWidth()+B,u=r.innerHeight(),r.width(s),a=e('<div class="walkme-jspPane" />').css("padding",M).append(r.children()),l=e('<div class="walkme-jspContainer" />').css({width:s+"px",height:u+"px"}).append(a).appendTo(r),q(r);else{if(r.css("width",""),b=o.stickToBottom&&ve(),w=o.stickToRight&&ye(),E=r.innerWidth()+B!=s||r.outerHeight()!=u,E&&(s=r.innerWidth()+B,u=r.innerHeight(),l.css({width:s+"px",height:u+"px"})),!E&&R==c&&a.outerHeight()==d)return void r.width(s);R=c,a.css("width",""),r.width(s),l.find(">.walkme-jspVerticalBar,>.walkme-jspHorizontalBar").remove().end()}a.css("overflow","auto"),c=t.contentWidth?t.contentWidth:a[0].scrollWidth,d=a[0].scrollHeight,a.css("overflow",""),f=c<s?1:c/s,p=d<u?1:d/u,g=p>1||o.alwaysScrollVertical,h=f>1||o.alwaysScrollHorizontal,h||g?(r.addClass("walkme-jspScrollable"),i=o.maintainPosition&&(y||T),i&&(m=he(),v=me()),K(),J(),Z(),i&&(pe(w?c-s:m,!1),fe(b?d-u:v,!1)),Ce(),Ee(),ke(),o.enableKeyboardNavigation&&we(),o.clickOnTrack&&re(),Pe(),o.hijackInternalLinks&&_e()):(r.removeClass("walkme-jspScrollable"),a.css({top:0,left:0,right:0,width:l.width()-B}),Se(),be(),Ie(),ie()),o.autoReinitialise&&!F?F=setInterval(function(){Q(o)},o.autoReinitialiseDelay):!o.autoReinitialise&&F&&clearInterval(F),S&&r.scrollTop(0)&&fe(S,!1),C&&r.scrollLeft(0)&&pe(C,!1),r.trigger("walkme-jsp-initialised",[h||g])}function q(t){var n=e(t).find('div[class*="walkme-jsp"]').add(t);n.each(function(t,n){var r="class",i=e(n),o=i.attr(r);i.attr(r,"").attr(r,o)})}function K(){if(g){C=e('<div class="walkme-jspVerticalBar" />'),b=e('<div class="walkme-jspTrack" />'),m=e('<div class="walkme-jspDrag" />');var t=e('<div class="walkme-jspCap walkme-jspCapTop" />'),n=e('<div class="walkme-jspCap walkme-jspCapBottom" />');l.append(C.append(t,b.append(m.append(e('<div class="walkme-jspDragTop" />'),e('<div class="walkme-jspDragBottom" />'))),n)),q(l),I=u,o.showArrows&&(_=e('<a class="walkme-jspArrow walkme-jspArrowUp" />').bind("mousedown.walkme-jsp",te(0,-1)).bind("click.walkme-jsp",Te),k=e('<a class="walkme-jspArrow walkme-jspArrowDown" />').bind("mousedown.walkme-jsp",te(0,1)).bind("click.walkme-jsp",Te),I-=_.outerHeight()+k.outerHeight(),o.arrowScrollOnHover&&(_.bind("mouseover.walkme-jsp",te(0,-1,_)),k.bind("mouseover.walkme-jsp",te(0,1,k))),ee(b,o.verticalArrowPositions,_,k)),t.add(n).each(function(){var t=e(this);"none"!=t.css("display")&&(I-=t.outerHeight())}),m.hover(function(){m.addClass("walkme-jspHover")},function(){m.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(t){var n=e(o.containerDoc).find("html");n.bind("dragstart.walkme-jsp selectstart.walkme-jsp",Te),m.addClass("walkme-jspActive");var r=t.pageY-m.position().top;return n.bind("mousemove.walkme-jsp",function(e){ae(e.pageY-r,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",oe),!1}),X()}}function X(){b.height(I+"px"),y=0,w=o.verticalGutter+b.outerWidth(),a.width(s-w-B);try{0===C.position().left&&a.css("margin-left",w+"px")}catch(e){}}function J(){h&&(l.append(e('<div class="walkme-jspHorizontalBar" />').append(e('<div class="walkme-jspCap walkme-jspCapLeft" />'),e('<div class="walkme-jspTrack" />').append(e('<div class="walkme-jspDrag" />').append(e('<div class="walkme-jspDragLeft" />'),e('<div class="walkme-jspDragRight" />'))),e('<div class="walkme-jspCap walkme-jspCapRight" />'))),q(l),A=l.find(">.walkme-jspHorizontalBar"),D=A.find(">.walkme-jspTrack"),E=D.find(">.walkme-jspDrag"),o.showArrows&&(x=e('<a class="walkme-jspArrow walkme-jspArrowLeft" />').bind("mousedown.walkme-jsp",te(-1,0)).bind("click.walkme-jsp",Te),L=e('<a class="walkme-jspArrow walkme-jspArrowRight" />').bind("mousedown.walkme-jsp",te(1,0)).bind("click.walkme-jsp",Te),o.arrowScrollOnHover&&(x.bind("mouseover.walkme-jsp",te(-1,0,x)),L.bind("mouseover.walkme-jsp",te(1,0,L))),ee(D,o.horizontalArrowPositions,x,L)),E.hover(function(){E.addClass("walkme-jspHover")},function(){E.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(t){e(o.containerDoc).find("html").bind("dragstart.walkme-jsp selectstart.walkme-jsp",Te),E.addClass("walkme-jspActive");var n=t.pageX-E.position().left;return e(o.containerDoc).find("html").bind("mousemove.walkme-jsp",function(e){ue(e.pageX-n,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",oe),!1}),O=l.innerWidth(),$())}function $(){l.find(">.walkme-jspHorizontalBar>.walkme-jspCap:visible,>.walkme-jspHorizontalBar>.walkme-jspArrow").each(function(){O-=e(this).outerWidth()}),D.width(O+"px"),T=0}function Z(){if(h&&g){var t=D.outerHeight(),n=b.outerWidth();I-=t,e(A).find(">.walkme-jspCap:visible,>.walkme-jspArrow").each(function(){O+=e(this).outerWidth()}),O-=n,u-=n,s-=t,D.parent().append(e('<div class="walkme-jspCorner" />').css("width",t+"px")),q(D.parent()),X(),$()}h&&a.width(l.outerWidth()-B+"px"),d=a.outerHeight(),p=d<u?1:d/u,h&&(N=Math.ceil(1/f*O),N>o.horizontalDragMaxWidth?N=o.horizontalDragMaxWidth:N<o.horizontalDragMinWidth&&(N=o.horizontalDragMinWidth),E.width(N+"px"),S=O-N,le(T)),g&&(P=Math.ceil(1/p*I),P>o.verticalDragMaxHeight?P=o.verticalDragMaxHeight:P<o.verticalDragMinHeight&&(P=o.verticalDragMinHeight),m.height(P+"px"),v=I-P+o.dragMaxYOffset,se(y))}function ee(e,t,n,r){var i,o="before",a="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==o?a=t:t==a&&(o=t,i=n,n=r,r=i),e[o](n)[a](r)}function te(e,t,n){return function(){return ne(e,t,this,n),this.blur(),!1}}function ne(t,n,r,i){r=e(r).addClass("walkme-jspActive");var a,s,u=!0,l=function(){0!==t&&U.scrollByX(t*o.arrowButtonSpeed),0!==n&&U.scrollByY(n*o.arrowButtonSpeed),s=setTimeout(l,u?o.initialDelay:o.arrowRepeatFreq),u=!1};l(),a=i?"mouseout.walkme-jsp":"mouseup.walkme-jsp",i=i||e(o.containerDoc).find("html"),i.bind(a,function(){r.removeClass("walkme-jspActive"),s&&clearTimeout(s),s=null,i.unbind(a)})}function re(){ie(),g&&b.bind("mousedown.walkme-jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r,i=e(this),a=i.offset(),s=t.pageY-a.top-y,l=!0,c=function(){var e=i.offset(),n=t.pageY-e.top-P/2,a=u*o.scrollPagePercent,p=v*a/(d-u);if(s<0)y-p>n?U.scrollByY(-a):ae(n);else{if(!(s>0))return void f();y+p<n?U.scrollByY(a):ae(n)}r=setTimeout(c,l?o.initialDelay:o.trackClickRepeatFreq),l=!1},f=function(){r&&clearTimeout(r),r=null,e(o.containerDoc).unbind("mouseup.walkme-jsp",f)};return c(),e(o.containerDoc).bind("mouseup.walkme-jsp",f),!1}}),h&&D.bind("mousedown.walkme-jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r,i=e(this),a=i.offset(),u=t.pageX-a.left-T,l=!0,d=function(){var e=i.offset(),n=t.pageX-e.left-N/2,a=s*o.scrollPagePercent,p=S*a/(c-s);if(u<0)T-p>n?U.scrollByX(-a):ue(n);else{if(!(u>0))return void f();T+p<n?U.scrollByX(a):ue(n)}r=setTimeout(d,l?o.initialDelay:o.trackClickRepeatFreq),l=!1},f=function(){r&&clearTimeout(r),r=null,e(o.containerDoc).unbind("mouseup.walkme-jsp",f)};return d(),e(o.containerDoc).bind("mouseup.walkme-jsp",f),!1}})}function ie(){D&&D.unbind("mousedown.walkme-jsp"),b&&b.unbind("mousedown.walkme-jsp")}function oe(){e(o.containerDoc).find("html").unbind("dragstart.walkme-jsp selectstart.walkme-jsp mousemove.walkme-jsp mouseup.walkme-jsp mouseleave.walkme-jsp"),m&&m.removeClass("walkme-jspActive"),E&&E.removeClass("walkme-jspActive")}function ae(e,t){if(!g)return;e<0?e=0:e>v&&(e=v),t===n&&(t=o.animateScroll),t?U.animate(m,"top",e,se):(m.css("top",e),se(e))}function se(e){e===n&&(e=m.position().top),l.scrollTop(0),y=e||0;var t=0===y,i=y==v,o=e/v,s=-o*(d-u);V==t&&G==i||(V=t,G=i,r.trigger("walkme-jsp-arrow-change",[V,G,W,H])),ce(t,i),a.css("top",s);try{r.trigger("walkme-jsp-scroll-y",[-s,t,i]).trigger("scroll")}catch(c){}}function ue(e,t){if(!h)return;e<0?e=0:e>S&&(e=S),t===n&&(t=o.animateScroll),t?U.animate(E,"left",e,le):(E.css("left",e),le(e))}function le(e){e===n&&(e=E.position().left),l.scrollTop(0),T=e||0;var t=0===T,i=T==S,o=e/S,u=-o*(c-s);W==t&&H==i||(W=t,H=i,r.trigger("walkme-jsp-arrow-change",[V,G,W,H])),de(t,i),a.css("left",u);try{r.trigger("walkme-jsp-scroll-x",[-u,t,i]).trigger("scroll")}catch(d){}}function ce(e,t){o.showArrows&&(_[e?"addClass":"removeClass"]("walkme-jspDisabled"),k[t?"addClass":"removeClass"]("walkme-jspDisabled"))}function de(e,t){o.showArrows&&(x[e?"addClass":"removeClass"]("walkme-jspDisabled"),L[t?"addClass":"removeClass"]("walkme-jspDisabled"))}function fe(e,t){var n=e/(d-u);ae(n*v,t)}function pe(e,t){var n=e/(c-s);ue(n*S,t)}function ge(t,n,r){var i,a,c,d,f,p,g,h,m,v=0,y=0;try{i=e(t)}catch(E){return}for(a=i.outerHeight(),c=i.outerWidth(),l.scrollTop(0),l.scrollLeft(0);!i.is(".walkme-jspPane");)if(v+=i.position().top,y+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;d=me(),p=d+u,v<d||n?h=v-o.horizontalGutter:v+a>p&&(h=v-u+a+o.horizontalGutter),isNaN(h)||fe(h,r),f=he(),g=f+s,y<f||n?m=y-o.horizontalGutter:y+c>g&&(m=y-s+c+o.horizontalGutter),isNaN(m)||pe(m,r)}function he(){return-a.position().left}function me(){return-a.position().top}function ve(){var e=d-u;return e>20&&e-me()<10}function ye(){var e=c-s;return e>20&&e-he()<10}function Ee(){l.unbind(z).bind(z,function(e,t,n,r){T||(T=0),y||(y=0);var i=T,a=y,s=e.deltaFactor||o.mouseWheelSpeed;return U.scrollBy(n*s,-r*s,!1),i==T&&a==y})}function Se(){l.unbind(z)}function Te(){return!1}function Ce(){a.find(":input,a").unbind("focus.walkme-jsp").bind("focus.walkme-jsp",function(e){ge(e.target,!1)})}function be(){a.find(":input,a").unbind("focus.walkme-jsp")}function we(){var t,n,i=[];h&&i.push(A[0]),g&&i.push(C[0]),a.bind("focus.jsp",function(){r.focus()}),o.setTabIndex&&r.attr("tabindex",0),r.unbind("keydown.walkme-jsp keypress.walkme-jsp").bind("keydown.walkme-jsp",function(r){if(!(r.target===this||i.length&&e(r.target).closest(i).length))return;var o=T,a=y;switch(r.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:t=r.keyCode,s();break;case 35:fe(d-u),t=null;break;case 36:fe(0),t=null}return n=r.keyCode==t&&o!=T||a!=y,!n}).bind("keypress.walkme-jsp",function(r){if(r.keyCode==t&&s(),!(r.target===this||i.length&&e(r.target).closest(i).length))return;return!n}),o.hideFocus?(r.css("outline","none"),"hideFocus"in l[0]&&r.attr("hideFocus",!0)):(r.css("outline",""),"hideFocus"in l[0]&&r.attr("hideFocus",!1));function s(){var e=T,r=y;switch(t){case 40:U.scrollByY(o.keyboardSpeed,!1);break;case 38:U.scrollByY(-o.keyboardSpeed,!1);break;case 34:case 32:U.scrollByY(u*o.scrollPagePercent,!1);break;case 33:U.scrollByY(-u*o.scrollPagePercent,!1);break;case 39:U.scrollByX(o.keyboardSpeed,!1);break;case 37:U.scrollByX(-o.keyboardSpeed,!1)}return n=e!=T||r!=y}}function Ie(){o.setTabIndex&&r.attr("tabindex","-1").removeAttr("tabindex"),r.unbind("keydown.walkme-jsp keypress.walkme-jsp"),a.unbind(".jsp")}function Pe(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash.substr(1));try{t=e("#"+r+', a[name="'+r+'"]')}catch(i){return}t.length&&a.find(r)&&(0===l.scrollTop()?n=setInterval(function(){l.scrollTop()>0&&(ge(t,!0),e(o.containerDoc).scrollTop(l.position().top),clearInterval(n))},50):(ge(t,!0),e(o.containerDoc).scrollTop(l.position().top)))}}function _e(){if(e(Y(o.containerDoc)).data("walkme-jspHijack"))return;e(Y(o.containerDoc)).data("walkme-jspHijack",!0),e(Y(o.containerDoc)).delegate('a[href*="#"]',"click",function(n){var r,i,o,a,s,u,l=this.href.substr(0,this.href.indexOf("#")),c=location.href;if(location.href.indexOf("#")!==-1&&(c=location.href.substr(0,location.href.indexOf("#"))),l!==c)return;r=escape(this.href.substr(this.href.indexOf("#")+1));try{i=e("#"+r+', a[name="'+r+'"]')}catch(d){return}if(!i.length)return;o=i.closest(".walkme-jspScrollable"),a=o.data("walkme-jsp"),a.scrollToElement(i,!0),o[0].scrollIntoView&&(s=e(t).scrollTop(),u=i.offset().top,(u<s||u>s+e(t).height())&&o[0].scrollIntoView()),n.preventDefault()})}function ke(){var e,t,n,r,i,o=!1;l.unbind("touchstart.walkme-jsp touchmove.walkme-jsp touchend.walkme-jsp click.walkme-jsp-touchclick").bind("touchstart.walkme-jsp",function(a){var s=a.originalEvent.touches[0];e=he(),t=me(),n=s.pageX,r=s.pageY,i=!1,o=!0}).bind("touchmove.walkme-jsp",function(a){if(!o)return;var s=a.originalEvent.touches[0],u=T,l=y;return U.scrollTo(e+n-s.pageX,t+r-s.pageY),i=i||Math.abs(n-s.pageX)>5||Math.abs(r-s.pageY)>5,u==T&&l==y}).bind("touchend.walkme-jsp",function(e){o=!1}).bind("click.walkme-jsp-touchclick",function(e){if(i)return i=!1,!1})}function Ae(){var e=me(),t=he();r.removeClass("walkme-jspScrollable").unbind(".walkme-jsp"),a.unbind(".jsp"),r.replaceWith(j.append(a.children())),j.scrollTop(e),j.scrollLeft(t),F&&clearInterval(F)}e.extend(U,{reinitialise:function(t){t=e.extend({},o,t),Q(t)},scrollToElement:function(e,t,n){ge(e,t,n)},scrollTo:function(e,t,n){pe(e,n),fe(t,n)},scrollToX:function(e,t){pe(e,t)},scrollToY:function(e,t){fe(e,t)},scrollToPercentX:function(e,t){pe(e*(c-s),t)},scrollToPercentY:function(e,t){fe(e*(d-u),t)},scrollBy:function(e,t,n){U.scrollByX(e,n),U.scrollByY(t,n)},scrollByX:function(e,t){var n=he()+Math[e<0?"floor":"ceil"](e),r=n/(c-s);ue(r*S,t)},scrollByY:function(e,t){var n=me()+Math[e<0?"floor":"ceil"](e),r=n/(d-u);ae(r*v,t)},positionDragX:function(e,t){ue(e,t)},positionDragY:function(e,t){ae(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:o.animateDuration,easing:o.animateEase,queue:!1,step:r})},getContentPositionX:function(){return he()},getContentPositionY:function(){return me()},getContentWidth:function(){return c},getContentHeight:function(){return d},getPercentScrolledX:function(){return he()/(c-s)},getPercentScrolledY:function(){return me()/(d-u)},getIsScrollableH:function(){return h},getIsScrollableV:function(){return g},getContentPane:function(){return a},scrollToBottom:function(e){ae(v,e)},hijackInternalLinks:e.noop,destroy:function(){Ae()}}),Q(i)}return r=e.extend({},e.fn.jScrollPane.defaults,r),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){r[this]=r[this]||r.speed}),this.each(function(){var t=e(this),n=t.data("walkme-jsp");n?n.reinitialise(r):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),n=new i(t,r),t.data("walkme-jsp",n))})},e.fn.jScrollPane.defaults={containerDoc:document,setTabIndex:!0,alwaysScrollVertical:!1,alwaysScrollHorizontal:!1,dragMaxYOffset:0,showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(wmjQuery,this),function(e){var t,n,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var o=r.length;o;)e.event.fixHooks[r[--o]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],a,!1);else this.onmousewheel=a},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],a,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function a(r){var i,o=r||window.event,a=[].slice.call(arguments,1),s=0,u=0,l=0,c=0,d=0;return r=e.event.fix(o),r.type="mousewheel",o.wheelDelta&&(s=o.wheelDelta),o.detail&&(s=o.detail*-1),o.deltaY&&(l=o.deltaY*-1,s=l),o.deltaX&&(u=o.deltaX,s=u*-1),void 0!==o.wheelDeltaY&&(l=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(u=o.wheelDeltaX*-1),c=Math.abs(s),(!t||c<t)&&(t=c),d=Math.max(Math.abs(l),Math.abs(u)),(!n||d<n)&&(n=d),i=s>0?"floor":"ceil",s=Math[i](s/t),u=Math[i](u/n),l=Math[i](l/n),a.unshift(r,s,u,l),(e.event.dispatch||e.event.handle).apply(this,a)}}(wmjQuery),function(e){var t={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},n={duration:"fast",direction:"both"},r=/^(?:html)$/i,i=function(t,n){n=n||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle);var r=!(!document.defaultView||!document.defaultView.getComputedStyle),i={
top:parseFloat(r?n.borderTopWidth:e.css(t,"borderTopWidth"))||0,left:parseFloat(r?n.borderLeftWidth:e.css(t,"borderLeftWidth"))||0,bottom:parseFloat(r?n.borderBottomWidth:e.css(t,"borderBottomWidth"))||0,right:parseFloat(r?n.borderRightWidth:e.css(t,"borderRightWidth"))||0};return{top:i.top,left:i.left,bottom:i.bottom,right:i.right,vertical:i.top+i.bottom,horizontal:i.left+i.right}},o=function(t){var n=e(window),o=r.test(t[0].nodeName);return{border:o?{top:0,left:0,bottom:0,right:0}:i(t[0]),scroll:{top:(o?n:t).scrollTop(),left:(o?n:t).scrollLeft()},scrollbar:{right:o?0:t.innerWidth()-t[0].clientWidth,bottom:o?0:t.innerHeight()-t[0].clientHeight},rect:function(){var e=t[0].getBoundingClientRect();return{top:o?0:e.top,left:o?0:e.left,bottom:o?t[0].clientHeight:e.bottom,right:o?t[0].clientWidth:e.right}}()}},a=function(e,t,n){var r=u(e);r?s(t.complete,n[0]):(t.elementToFindScrollableFor=n,e.scrollintoview(t))},s=function(t,n){e.isFunction(t)&&t.call(n)},u=function(e){return e.is("html,body,:wm_interact_all_points")};e.fn.extend({scrollintoview:function(i){i=e.extend({},n,i),i.direction=t["string"==typeof i.direction&&i.direction.toLowerCase()]||t.both;var u="";i.direction.x===!0&&(u="horizontal"),i.direction.y===!0&&(u=u?"both":"vertical"),r="html"==i.rootElement?/^(?:html)$/i:/^(?:body)$/i;var l="";i.customScrollElement&&(l=","+i.customScrollElement);var c=this.eq(0),d=i.elementToFindScrollableFor.parent().closest(":scrollable("+u+")"+l);if(!(d.length>0))return!1;"html"==i.rootElement&&d[0].tagName&&d[0].tagName.toUpperCase&&"BODY"==d[0].tagName.toUpperCase()&&(d=d.parent()),d=d.eq(0);var f={e:o(c),s:o(d)};if(i.heightLimit&&d.height()<200)return!1;var p={top:f.e.rect.top-(f.s.rect.top+f.s.border.top),bottom:f.s.rect.bottom-f.s.border.bottom-f.s.scrollbar.bottom-f.e.rect.bottom,left:f.e.rect.left-(f.s.rect.left+f.s.border.left),right:f.s.rect.right-f.s.border.right-f.s.scrollbar.right-f.e.rect.right},g=0,h={top:p.top,bottom:p.bottom};if(i.endScroll){var m=i.endScroll.scrollOptions;g="px"==m.unit?m.distance:(f.s.rect.bottom-i.endScroll.balloonHeight)*parseFloat(m.distance)/100,p.top>0&&p.bottom<0&&(g+=i.endScroll.totalDrawnHeight-f.s.rect.bottom),m.force&&(h.top-=g)}else p.top-=50,p.bottom-=50;var v={};if(i.direction.y===!0&&(h.top<0?v.scrollTop=f.s.scroll.top+p.top-g:h.top>0&&h.bottom<0&&(v.scrollTop=f.s.scroll.top+Math.min(p.top,-p.bottom)-g)),i.direction.x===!0&&(p.left<0?v.scrollLeft=f.s.scroll.left+p.left:p.left>0&&p.right<0&&(v.scrollLeft=f.s.scroll.left+Math.min(p.left,-p.right))),!v.scrollTop&&!v.scrollLeft)return!1;return r.test(d[0].nodeName)&&(d=e("html,body")),d.animate(v,i.duration).eq(0).queue(function(e){i.forceFindScrollable&&!i.isElementInIFrame?a(c,i,d):s(i.complete,d[0]),e()}),!0}});var l={auto:!0,scroll:!0,visible:!1,hidden:!1};e.extend(e.expr[":"],{scrollable:function(e,n,i,o){var a=t["string"==typeof i[3]&&i[3].toLowerCase()]||t.both,s=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,u={x:l[s.overflowX.toLowerCase()]||!1,y:l[s.overflowY.toLowerCase()]||!1,isRoot:r.test(e.nodeName)};if(!u.x&&!u.y&&!u.isRoot||"hidden"==s.overflowY.toLowerCase())return!1;var c={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(u.x||u.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(u.y||u.isRoot)&&this.height.scroll>this.height.client}};return a.y&&c.scrollableY()||a.x&&c.scrollableX()}})}(mtjQuery),/*!
	 * jQuery UI Focusable @VERSION
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * based on https://github.com/jquery/jquery-ui/blob/master/ui/focusable.js
	 */
function(e){e.fn.focusable=function(e,t,n){var r,i,o,a=this[0],s=a.nodeName.toLowerCase(),u=wmjQuery.attr(a,"tabindex"),l=n||"none"!=wmjQuery.css(a,"display");if("area"===s){if(r=a.parentNode,i=r.name,!a.href||!i||"map"!==r.nodeName.toLowerCase())return!1;return o=wmjQuery("img[usemap=#"+i+"]")[0],!!o&&c(o)}return(/input|select|textarea|button|object|iframe/.test(s)?!a.disabled:"a"===s?a.href||!isNaN(u):!isNaN(u))&&u!=-1&&l&&(t||c(a));function c(e){return wmjQuery.expr.filters.visible(e)&&!wmjQuery(e).parents().andSelf().filter(function(){return"hidden"===wmjQuery.css(this,"visibility")}).length}}}(mtjQuery);function ClassMakeTutorial(e,t){var n=this;this.MTVersion="1.0",this.SVNRevision="$MasterRev: b36b78985b3c9e63008d59dc24bc7146fc50288b $",this.LibVersion="3754",this.SpecialRevision="no",__webpack_require__(2);var r=t.di,i=t.ctx;!function(e){var t=__webpack_require__(4);e.register("SimpleNLP").asInstance(t);var n=__webpack_require__(5)();e.register("ObjectMapper").asInstance(n.objectMapper),e.register("ObjectJpath").asInstance(n.objectJpath);var r=__webpack_require__(8);e.register("FlowNodeExtensions").asInstance(r.bizFlowExtensions),e.register("BaseGraphDfsService").asInstance(r.baseGraphDfsService);var i=__webpack_require__(16)();e.register("DeployableConsts").asInstance(i);var o=__webpack_require__(17)(e);e.register("UIComponentsClasses").asInstance(o);var a=__webpack_require__(24);e.register("NewToOldConditionConverter").asInstance(a.newToOldConditionConverter),e.register("OldToNewConditionConverter").asInstance(a.oldToNewConditionConverter);var s=__webpack_require__(28);if(e.register("Base64").asInstance(s),!e.has("PromiseManager")){var u=__webpack_require__(29).Promise;e.register("PromiseManager").asInstance(u)}var l=__webpack_require__(30);e.register("SharedConsts").asInstance(l);var c=__webpack_require__(50);e.register("BalloonTemplatesProvider").asInstance(c);var d=__webpack_require__(55);e.register("StorageKeysConfigurations").asInstance(d);var f=__webpack_require__(57),p=__webpack_require__(58)(f.decode);e.register("JsonHtmlDecoder").asInstance(p)}(window._walkmeInternals.ctx);var o=i.get("PromiseManager").Promise,a="uiProperties",s="auditSteps",u="goals",l="balloon",c="resources",d="FramesetsUtils",f="showLaunchers",p="tasks",g="content",h="searchResult",m="hl",v="autostart",y="loadTestMe",E="changeTracker",S="documentsManager",T="externalConditionHandlers",C="wm-ltm",b={Cookies:"cookies",LocalStorage:"localStorage",IndexedDB:"indexedDB"},w={Deactive:0,Active:1,ActiveAndReset:2},I=86400,P=31536e3,_=31536e4,k={display:"block",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0,marginTop:0,marginLeft:0,marginBottom:0,marginRight:0,verticalAlign:"baseline",borderCollapse:"inherit",backgroundImage:"none",backgroundColor:"transparent",orderSpacing:"1px 1px",lineHeight:"normal",height:"auto",textIndent:"inherit",letterSpacing:"normal",textTransform:"none",outline:"invert none medium",width:"auto",boxShadow:"none",textShadow:"none",borderTopStyle:"none",borderTopWidth:"medium",borderRightStyle:"none",borderRightWidth:"medium",borderBottomStyle:"none",borderBottomWidth:"medium",borderLeftStyle:"none",borderLeftWidth:"medium",position:"static",top:"auto",left:"auto",transition:"none",boxSizing:"content-box",color:"#EB15E2"},A={Cookie:0,Var:1};i.register("DeployableTypes").dependencies("Consts").asFunction(function(e){return e.DEPLOYABLE_TYPE}),i.register("Consts").asCtor(D).dependencies("DeployableConsts");function D(e){var t=this;t.SURVEY_ANSWER_FREE_TEXT={MAX_LENGTH:1e3,EXTENDED_LENGTH:1500},t.COOKIE_LIFE_10_YEARS=31536e4,t.DEBUGGER_STATE_NAME="wm-ftr",t.DOMAIN_IN_COOKIE="wm-dmn",t.DEFAULT_COOKIE_SECONDS=600,t.IS_DISPLAY_POWERED_BY={Show:"txt",Hide:"no"},t.ANALYTICS_CUSTOM_VARS={MaxVarLength:100,MaxCustomFields:5},t.AJAX_PROVIDERS={wmjQueryAjaxProvider:1,ajaxProxyProvider:2},t.STEP_STATUS={SupposedToShow:0,Shown:1,Performed:2,SkippedNotFound:3,SkippedByCondition:4,MovedBack:5,Exited:6,FakeFound:7,SkippedByTutorialCondition:8,SkippedStartedFromBiggerStep:9,NonValidActionStep:10,SkippedByActionStep:11},t.STEP_ACTION={Redirect:"redirect",PlayStep:"playStep",WaitForCondition:"waitForCond",Branch:"branchWt",StopWt:"stopWt",Delay:"delay",Refresh:"refresh",OpenPlayerMenu:"openPlayerMenu",SetWalkMeData:"setWalkMeData",PassOwnership:"passOwnership"},t.STEP_TYPE={Normal:0,Popup:1,Action:2},t.SOURCES={production:0,preview:1,play:2,test:3,success:32},t.TIME_PERIODS={OneHourSeconds:3600,DaySeconds:86400},t.STORAGE_KEYS={lastGetDataTime:"wm-lgt",remindMeLater:"wm-RML",customAuditVarDictionary:"wm-cavd",WALKTHRU_PERSISTENCE_DATA:"wm-prsst"},t.STORAGE_TYPE={Cookie:"cookie",CrossDomain:"crossdomain",JStorage:"jstorage",CrossDomainLocalStorage:"crossdomain_ls",CrossDomainCookies:"crossdomain_ck",Extension:"extension",ProxyIframe:"proxy"},t.PLATFORM={Web:1,MobileWeb:3,Desktop:6},t.STEP_PLAY_INITIATOR_ENUM={NONE:0,WIDGET:1,API:2,LAUNCHER:3,TASK:4,BRANCHING:5,AUTOSTART:6,PERMALINK:7,BBCODE:8,CHAT_AGENT:9,SHOUTOUT:10,WALKTHRU:11,STEP:12,ATTENTION_GRABBER:13,FLOW_STEP:14,COURSE:15,CUSTOMIZATION:16},t.AUDIT_TYPE={OPEN_TICKET:100},t.PLAY_MODE={Widget:0,LightBox:1,NewTab:2,SameTab:3},t.ELEMENT_INTERACTION_TYPES={Visible:0,NotVisible:1},t.SHOUTOUT_TYPES={snackbar:10,popup:20,fullScreen:30,customView:40},t.SPOTLIGHT_TYPES={arrow:1,django:2},t.MOBILE_COMMANDS={ACTION:{libAction:2003}},t.EVENT_SENDER_EVENT_TYPES={Close:"close",Open:"open",Play:"play",PlayFailed:"playFailed",Click:"click",Search:"search",Complete:"complete",GoalReached:"goalReach",ProgressUpdate:"progressUpdate",Submitted:"submitted",Loaded:"loaded",Visible:"visible",Draw:"draw",MouseEnter:"mouseenter",Focus:"focus",Blur:"blur",Passed:"passed",Failed:"failed",TeachMeStepCompletion:"teachMeStepCompletion",TeachMeCourseCompletion:"teachMeCourseCompletion",TeachMeCompletionUpdate:"teachMeCompletionUpdate",TeachMeStepStarted:"teachMeStepStarted",SessionPing:"sessionPing",SessionStart:"session",ActionClicked:"click"},t.TeachMe={QUIZ_RESULT_STORAGE_KEY_PREFIX:"wm-lms-quiz-res-",QUIZ_STATUS_CLASS:{PASSED:"passed",FAILED:"failed",NOT_TESTED:"not-tested"},QUIZ_STATUS_TEXT:{PASSED:"Quiz Passed",FAILED:"Quiz Failed",NOT_TESTED:"Not Tested"},QUIZ_STATUS:{PASSED:1,FAILED:0,NOT_TESTED:void 0}},t.EVENT_SENDER_STEP_ACTION_NAMES={Redirect:0,PlayStep:1,WaitForCondition:2,Branch:3,StopWt:4,Delay:5,Refresh:6,OpenPlayerMenu:7,SetWalkMeData:8,PassOwnership:9,ErrorHandling:10,Split:11,OnPageActionClick:12,OnPageActionHover:13,OnPageActionFocus:14,OnPageActionFillText:15,OnPageActionSelectListValue:16,Style:17},t.EVENT_SENDER_ACTIONS={None:"none",OpenMenu:"menu",OpenCoursesMenu:"coursesMenu",PlayWalkthru:"wt",PlayShuttle:"shuttle",PlaySurvey:"survey",PlayShoutOut:"shoutout",PlayResource:"resource",PlayContent:"resource",SurveyQuestionAnswered:"answer",PlayBizFlow:"bizFlow",PlaySmartTipSet:"smartTip",Close:"close"},t.EVENT_SENDER_MOBILE_ACTION_TYPES={None:"none",RateApp:"rateApp",OpenSettings:"openSettings",BrowseToPage:"browseToPage",PlayVideo:"playVideo",SendEmail:"sendEmail",OpenApp:"openApp",OpenAppStore:"openAppStore"},t.EVENT_SENDER_EVENT_APPS={None:"none",Player:"player",Walkthru:"wt",Step:"step",ShoutOut:"shoutout",Shuttle:"shuttle",Survey:"survey",Question:"question",SurveyQuestionAnswer:"answer",Content:"resource",Launcher:"launcher",Task:"task",Course:"course",WidgetSearch:"widgetSearch",Ticket:"openTicket",Walkme:"walkme",TeachMe:"teachMe",AbTesting:"abTesting",TrackedElement:"trackedElement",TrackedPage:"trackedElementsSet",SmartTip:"smartTip",SmartTipSet:"smartTipSet",SmartTipUiComponent:"smartTipUiComponent",BizFlow:"bizFlow",BizFlowStep:"bizFlowStep",LiveChat:"liveChat",Quiz:"quiz",QuizQuestion:"quizQuestion",QuizAnswer:"quizAnswer",Action:"action"},t.EVENT_SENDER_AB_TESTING_DRAW_REASONS={Draw:0,ActivationRule:1},t.EVENT_SENDER_CANCEL_REASONS={Xclick:"X Clicked"},t.DEPLOYABLE_TYPE=e.DEPLOYABLE_TYPE,delete t.DEPLOYABLE_TYPE.Walkthru,t.DEPLOYABLE_TYPE.Tutorial=0,t.DEPLOYABLE_ACTION_TYPES={Action:0,Close:1,RemindMeLater:2},t.SAFESTART_ACTION={ErrorShown:0,PopupShown:1,AutoRedirect:2,StayClicked:3,RedirectClicked:4,FailOnUrl:5},t.FEATURES={DisableWidgetOpenFullUrl:"disableWidgetOpenFullUrl",EventSenderDontSendPageUrl:"dontSendPageUrl",EventSenderDontSendPageTitle:"dontSendPageTitle",StickyCustomVars:"stickyCustomVars",StrongStickyCustomVars:"strongStickyCustomVars",DisableEventCollection:"disableEventCollection",EnableBILogger:"enableBILogger",JSP:"jsp",ForceEmbedInOwnerDocument:"embedInOwnerDocument",OldIsInIframeIndication:"oldIsInIframeIndication",DontMaskEndUserAddress:"dmeua",CalculateElementBoundsBeforeRedraw:"calculateElementBoundsBeforeRedraw",ExternalConditions:"externalConditions",EmbedInContainer:"embedInContainer",PositionCheckByChangeThreshold:"positionCheckByChangeThreshold",SWTConsecutivePopups:"SWTConsecutivePopups",DisableReturnWhenFontLoadFailed:"disableReturnWhenFontLoadFailed",ForceFindScrollable:"forceFindScrollable",AvoidCheckInIframe:"avoidCheckInIframe",ShadowRootsInspector:"shadowRootsInspector"},t.EVENTS={DICreated:"DICreated",WalkMeTotalLoadingTime:"WalkMeTotalLoadingTime",MainStart:"mainCreationStart",WalkmeApiStarted:"walkMeApiCreationStart",WalkmePlayerApiStarted:"walkMePlayerApiCreationStart",BeforeWalkmeRemoved:"removeWalkMe",AfterWalkmeRemoved:"afterRemoveWalkMe",WalkmeLoaded:"wm_walkmeLibLoaded",BeforeWalkmeReady:"BeforeWalkmeReady",WalkmeReady:"WalkMeReady",ElementsTrackingReady:"ElementsTrackingReady",ReleaseAllElementsCalled:"releaseAllElementsCalled",CallReleaseElementsFromBalloons:"callReleaseElementsFromBalloons",LanguageChanged:"languageChanged",BeforeLanguageSet:"beforeLanguageSet",PlayerClicked:"wmPlayerClicked",ApiWasCalled:"wmApiCalled",PermalinkClicked:"wmPermalinkClicked",WidgetLoad:"WidgetLoad",WidgetOpening:"wmWidgetOpening",EndUserSettingsSet:"endUserSettingsSet",AbExperimentLinkedGoalReached:"wmLinkedGoalReached",AbTasksBlocked:"AbTasksBlocked",SalesForceVarsExposed:"SfVarsExposed",TimerManagerCreationStarted:"timerManagerCreationStart",DeployableCreated:"DeployableCreated",DeployableDestroyed:"DeployableDestroyed",DeployableNotShowing:"DeployableNotShowing",DeployableHandleStarting:"DeployableHandleStarting",UIComponentDestroyed:"UIComponentDestroyed",UIObjectsTreeCreated:"UIObjectsTreeCreated",BeforeDataFileLoaded:"BeforeDataFileLoaded",BalloonInitialized:"BalloonInitialized",BalloonCreated:"BalloonCreated",SmartTips:{SmartTipElementShown:"SmartTipElementShown",SmartTipElementRemoved:"SmartTipElementRemoved",ValidationFailed:"SmartTipValidationFailed",ValidationPassed:"SmartTipValidationPassed",TooltipShown:"SmartTipTooltipShown",SmartTipSegmented:"SmartTipSegmented",SetTurnedOn:"SmartTipSetTurnedOn",SetTurnedOff:"SmartTipSetTurnedOff",SmartTipIconShown:"SmartTipIconShown",SmartTipIconHovered:"SmartTipIconHovered"},TaskCompleted:"TaskCompleted",TasksLoaded:"TasksLoaded",Flows:{AfterCompletingFlowStage:"AfterCompletingFlowStage",BeforeExecutingFlowStage:"BeforeExecutingFlowStage",UIFlowStageShown:"UIFlowStageShown",FailedToStart:"FlowFailedToStart",BeforeFlowStarted:"BeforeFlowStarted",FlowStarted:"FlowStarted",FlowBranched:"FlowBranched",FlowStopped:"FlowStopped",FlowAborted:"FlowAborted",RestoringFlow:"RestoringFlow",FlowCompleted:"FlowCompleted",FlowBranchReturned:"FlowBranchReturned",LookingForElement:"LookingForElement",UiElementFound:"UiElementFound",WaitForConditionEvaluated:"WaitForConditionEvaluated",SafeStartStatusChanged:"SafeStartStatusChanged"},Walkthrus:{WalkthruGuidGenerated:"WalkthruGuid",WalkthruStarted:"StartNewWt",WalkthruStopped:"TutorialStopped",WalkthruLoaded:"LoadWt",WalkthruCompleted:"WalkthruCompleted",StepSkipped:"StepWasSkipped",StepElementFound:"ElementFound",StepElementNotFound:"ElementNotFound",LookingForStepElement:"LookingForElement",WaitingForStickyStep:"StickyStepWaiting",StepStarted:"NewStepStarted",StepExecuting:"StepPlayNum",StepPerforming:"StepPerforming",StepAdditionalTriggerSet:"StepAdditionalTriggerCBSet",StepAdditionalTriggersInitialized:"StepAdditionalTriggered",FakeStep:"StepIsFaked",StepShown:"NewStepShown",StepHasPlayCondition:"PlayStepCondition",StepCompleted:"StepCompleted",StepTriggered:"StepWasTriggered",InputGeneratedClick:"InputGeneratedClick",ShowStepBalloon:"showStepBalloon",DestroyStepBalloon:"destroyStepBalloon"},Launchers:{LauncherIsInsecure:"LauncherInsecure",LauncherClicked:"wmLauncherClicked",LauncherIsShown:"LauncherIsShown",LauncherIsHovered:"LauncherIsHovered"},Surveys:{StartSurvey:"StartSurvey",SurveyPlayed:"SurveyPlayed",SurveyCompleted:"SurveyCompleted",SurveyExited:"SurveyExited",SurveyFailedShowing:"SurveyFailedShowing",SurveyBalloonActionsSet:"SurveyBalloonActionsSet",SurveyBackQuestion:"SurveyBackQuestion",SurveyNextQuestion:"SurveyNextQuestion",SurveyQuestionCountSet:"SurveyQuestionCountSet",SurveyFreeTextAnswerValidated:"SurveyFreeTextAnswerValidated",SuveyBeforeRadioButtonAppended:"SuveyBeforeRadioButtonAppended",SurveyBalloonDisplayed:"SurveyBalloonDisplayed"},Shuttles:{ActivatingShuttle:"ActivatingShuttle"},Contents:{ActivatingContent:"ActivatingContent"},PassOwnership:{PriorityInitialized:"priorityInitialized",PORegisterPriority:"PORegisterPriority"},Widget:{WidgetAPICreated:"WidgetAPICreated",TeachMeWidgetAPICreated:"TeachMeWidgetAPICreated",WidgetDisplayerClass:"WidgetDisplayerClass",WidgetInitInstances:"WidgetInitInstances",WidgetPlayerClass:"WidgetPlayerClass",WidgetMenuClass:"WidgetMenuClass",WidgetLanguageChanged:"WidgetLanguageChanged",WidgetDestroyAll:"WidgetDestroyAll",WidgetRefreshUI:"WidgetRefreshUI",SearchResultsReady:"SearchResultsReady",CreateSearchEngines:"CreateSearchEngines",SearchTermChanged:"SearchTermChanged",SearchCanceled:"SearchCanceled",SearchResultsAppended:"SearchResultsAppended",BeforeSearchResultsAppended:"BeforeSearchResultsAppended",AfterSearchResult:"AfterSearchResult",SearchEnded:"SearchEnded"},WidgetMenu:{MenuHtml:"MenuHtml",MenuBuilt:"MenuBuilt",MenuShow:"MenuShow",MenuHide:"MenuHide",MenuLanguageChanged:"MenuLanguageChanged",CreateActivatable:"createActivatable",AccessibilityMenuBuilt:"AccessibilityMenuBuilt",MenuSearchResults:"MenuSearchResults",RefreshTabsBar:"RefreshTabsBar",MenuTabSelected:"MenuTabSelected"},WidgetPlayer:{PlayerShow:"PlayerShow",PlayerBuilt:"PlayerBuilt",PlayerHtml:"PlayerHtml",PlayerHide:"PlayerHide",PlayerLanguageChanged:"PlayerLanguageChanged"},SearchResultParse:"SearchResultParse",AppendingServerSearchResults:"AppendingServerSearchResults",SearchResultConverted:"SearchResultConverted",TrackedElementBeforeSendEvent:"trackedElementBeforeSendEvent",ContentRemoved:"ContentRemoved",AttentionGrabberInsecure:"AGDataInsecure",TasksConditionEvaluated:"TasksConditionEvaluated",LightBoxDivCreated:"lightBoxDivCreated",LightBoxCreated:"lightBoxCreated",LightBoxClosed:"LightBoxClosed",ShouldChangeBalloonPosition:"ShouldChangeBalloonPosition",FirstStepNotAvailable:"FirstStepNotAvailable",ShoutOutClosed:"ShoutOutClosed",AutoStart:{Activated:"wmAutoStartActivated",ConditionEvaluated:"WtAutoStartConditionEvaluated"},LoadingContent:"LoadingContent",LoadingContentFromTeachMe:"LoadingContentFromTeachMe",LoadingContentInNewTab:"LoadingContentInNewTab",StorageLoaded:"StorageLoaded",BeforeStorageLoadedCallback:"BeforeStorageLoadedCallback",CustomAuditVar:"CustomAuditVar",Goals:{ConditionEvaluated:"GoalConditionEvaluated",GoalReached:"GoalCompleted"},ActionConditionEvaluated:"ActionConditionEvaluated",Scrolls:{ScrollFired:"scrollFired"},Quizzes:{QuizSubmitted:"QuizSubmitted",QuizPlay:"QuizPlay",QuizFail:"QuizFail",QuizPass:"QuizPass",QuizAnswerSubmitted:"QuizAnswerSubmitted",QuizSummarySuccessButtonClicked:"QuizSummarySuccessButtonClicked",QuizSummaryFailureButtonClicked:"QuizSummaryFailureButtonClicked",QuizXButtonClicked:"QuizXButtonClicked",QuizResultsActionButtonClicked:"QuizResultsActionButtonClicked"},NewSession:"NewSession",WalkmeReadyNewSession:"WalkmeReadyNewSession",ConditionTreeResult:"ConditionTreeResult",BeforeSettingCustomCss:"BeforeSettingCustomCss",SettingsFileNewPublish:"SettingsFileNewPublish",BBCodeStartActionClicked:{Walkthru:"bbcodeWtClicked",Bizflow:"bbcodeBfClicked",Resource:"bbcodeResourceClicked",Survey:"bbcodeSurveyClicked"},RegisterBBCodeDeployableClick:"RegisterBBCodeDeployableClick",ElementLocationChanged:"ElementLocationChanged",AnalyticsEventSent:"AnalyticsEventSent",BalloonLogs:{BalloonPopLocationCalculated:"BalloonPopLocationCalculated",BalloonIsFullyVisibleCalculated:"BalloonIsFullyVisibleCalculated",ClosestCanEmbedReturnsTop:"ClosestCanEmbedReturnsTop",ClosestCanEmbedSkipsElement:"ClosestCanEmbedSkipsElement",CalculateBalloonWidthCalled:"CalculateBalloonWidthCalled"},SpotlightCreated:"SpotlightCreated",SafeStartRedirect:"SafeStartRedirect",DATA_FILES_LOADED:"dataFilesLoaded"},t.EVENTS_PARAMS={WalkmeRemovedErrorCodes:{missingUserIdentifyer:1,cannotHaveBothUniqueUserAndServerStorage:2}},t.SMART_TIP_INNER_EVENTS={CheckValidations:"wmCheckValidations",EventPropogationPrefix:"wmSmartTipInternalEvent",SmartTipElementRepositioned:"SmartTipElementRepositioned"},t.WINDOW_EVENTS={Resize:"resize"},t.PASS_OWNERSHIP={EvaluateOwnership:{CantBeDetermined:"CANT_BE_DETERMINED",Owner:"OWNER",NotOwner:"NOT_OWNER"},PassOwnershipEntity:{BizFlow:0,Walkthru:1},NEW_WINDOW_TIME_KEY:"wm-cond-win",LOG_FEATURE:"passOwnership",PASS_OWNERSHIP_COOKIE:"wm-cdplay"},t.FLOW_BEFORE_PLAY_KEY="wm-flw-preplay",t.FLOW_PLAY_MODES={PLAY:"play",RESTORE:"restore"},t.FLOW_STAGE_ACTIONS={BACK_FROM_FLOW_GROUP:"backFromFlowGroup",EXECUTE:"execute"},t.WINDOW_CUSTOM_DATA_TYPE={Cookie:0,Var:1},t.VALUE_CALCULATOR_TYPE={Cookie:"cookie",Variable:"var",JQuery:"jquery",LocalStorage:"localstorage"},t.DEFAULT_REACTION_TIME=500,t.FLOW_TRIGGER_WORKSPACE=".flow",t.FLOW_STEP_TYPE={UI:"UI",Action:"Action"},t.FLOW_UIELEMENT_TYPE={Element:"Element",Popup:"Popup"},t.FLOW_ACTION_RUN_STATE={Waiting:"Waiting",Done:"Done"},t.FLOW_ACTION_TYPE={ConnectToBizflow:"ConnectToBizflow",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",Redirect:"Redirect",Refresh:"Refresh",Style:"Style",SetData:"SetData",Split:"Split",Stop:"Stop",WaitForCondition:"WaitForCondition",OnPageAction:"OnPageAction",ErrorHandling:"ErrorHandling"},t.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE={Click:"Click",Hover:"Hover",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue"},t.FLOW_INNER_EVENTS={EventPropogationPrefix:"wmFlowInternalEvent",FlowIsPlaying:"FlowIsPlaying"},t.STICKY_TYPE={ONCE:0,SOFT:1,STRONG:2},t.VISIBILITY_STATE={VISIBLE:0,HIDDEN:1},t.ICON_CONTENT_KIND={Text:0,Image:1},t.POSITION_PERIMETER_TYPE={Outside:0,Inside:1},t.POSITION_TYPE={Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8},t.OPPOSITE_POSITION_TYPE={},function(e,t){e[t.Top]=t.Bottom,e[t.Right]=t.Left,e[t.Bottom]=t.Top,e[t.Left]=t.Right,e[t.TopLeft]=t.BottomRight,e[t.TopRight]=t.BottomLeft,e[t.BottomRight]=t.TopLeft,e[t.BottomLeft]=t.TopRight,e[t.Center]=t.Center}(t.OPPOSITE_POSITION_TYPE,t.POSITION_TYPE),t.DEFAULT_POSITIONS={top:0,left:0,bottom:0,right:0},t.POPUP_BALLOON_Z_INDEX=2147483631,t.NORMAL_BALLOON_Z_INDEX=2147483630,t.POSITION_OFFSET_TYPE={VerticallyCentered:1,HorizontalCentered:2,Above:3,Below:4,ToRight:5,ToLeft:6,SnapToViewportRight:9},t.POSITION_OFFSET={Center:0,Start:1,End:2},t.EMBEDMENT_TYPE={EmbedInElement:0,EmbedInElementParent:1,EmbedInOwnerDocument:2,EmbedInTopDocument:3},t.ICON_CONTENT_STATE={Regular:0,Hover:1,Click:2},t.SMART_TIP={MODE:{OnlyInfo:0,OnlyValidations:1,InfoAndValidations:2},COMPONENT_TYPE:{Info:0,Validation:1,PositiveFeedback:2}},t.TOOLTIPS_ACTIVATION_MODES={Mouse:1,Focus:2},t.OLD_STICKIES={STICKINESS_TYPES:{soft:0,strong:1}},t.CONDITION_CHECKER={FEATURE_NAMES:{SmartTipSegmentation:"evaluate smart tip segmentation"}},t.IS_STICKY_SETTING_KEY="isSticky",t.STICKINESS_TYPE_SETTING_KEY="stickinessType",t.ANIMATION_TYPES={None:1},t.FLOW_TRIGGER_TYPE={Click:"Click",Hover:"Hover",Button:"Button",Text:"Text",Delay:"Delay",PageChanged:"PageChanged",SelectAny:"SelectAny",SelectValue:"SelectValue",BbCode:"BbCode",PeerStep:"PeerStep",Custom:"Custom",Swipe:"Swipe"},t.SHOUTOUT_CLICK_TYPE={Action:0,Close:1,XButton:2,RemindMeLater:3},t.BALLOON_BUTTON_TYPE={Submit:"Submit",Back:"Back",Next:"Next",Done:"Done",Start:"Start",Cancel:"Cancel"},t.FEATURES_LOGS={ElementFinder:"elementFinder",WalkMeSession:"session",Flows:"flows",AnalyticsTracking:"analyticsTracking"},t.SEARCH_DEPLOYABLES_PROVIDER_ID=0,t.APPLET_INTERACTION_TYPES={Element:1,Overlay:2},t.WALKTHRU_PERSISTANCE_DATA_FIELDS={STEP_COMPLETED_HISTORY_COOKIE_NAME:"sch",CURRENT_TUTORIAL_COOKIE_NAME:"tId",CURRENT_STATE_COOKIE_NAME:"stt",CURRENT_STEP_COOKIE_NAME:"step",CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME:"spn",CURRENT_PLAY_GUID_COOKIE_NAME:"plgd",CURRENT_PLAY_INITIATOR_COOKIE_NAME:"pint",SPLIT_POINT_COOKIE_NAME:"splt",TUTORIAL_FINISHED_COOKIE_NAME:"fnsh",STEP_PLAY_HISTORY_COOKIE_NAME:"sph",SPLIT_TUTORIAL_IDS_COOKIE_NAME:"sti",SPLIT_START_FROM_STEP_COOKIE_NAME:"ssi",INTERACTION_GUID_COOKIE_NAME:"igd"},t.SURVEY_START_EVENTS={WalkThruCompleted:0,WalkThruExited:1,Both:2,WalkThruInterrupted:3,BbCodeClicked:4},t.CHECK_STEP_MODE={Normal:1,Sandbox:2},t.playConditionModes={PLAY_CONDITION:0,STICKY_CONDITION:1,BOTH:2},t.UI_PROPERTIES={Visible:"visible",Invisible:"invisible",Completed:"completed",Uncompleted:"uncompleted",StrikedOut:"strike-out",Active:"active",Inactive:"inactive",ProgressBar:"progress-bar",Default:"default",Search:"search",SearchProviders:"search-providers",Video:"video",Article:"article",Accessible:"accessible",Phantom:"phantom",LmsCourse:"lmsCourse",DisplayOnlyInSearch:"displayOnlyInSearch"},t.DISPLAY_WIDGET_CONDITION="displayWidgetCondition",t.WALKTHRU_STATE={NOT_RUNNING:0,RUNNING:1,WAITING_FOR_ELEMENT:2,WAITING_FOR_ELEMENT_EVENT:3,PAUSED:4,WAITING_FOR_SPLIT:5,WAITING_FOR_NEXT_BUTTON_CLICK:6,WAITING_FOR_PAGE_CHANGE:7,WAITING_FOR_STICKY_ELEMENT:8,WAITING_FOR_CONDITION:9,PASSING_OWNERSHIP:10,WAITING_FOR_REDIRECT:11,WAITING_FOR_OWNERSHIP:12},t.WALKTHRU_STEP_TRIGGER={NOTHING:0,NEXT_BUTTON:1,CLICK:2,HOVER:3,PAGE_CHANGED:4,KEY_PRESSED:5,DURATION:6,SELECT_ANY:7,SELECT_VALUE:8,SWIPE:9},t.SUBTEXT_CURRENT_START="##START_OF_CURRENT##",t.SUBTEXT_CURRENT_END="##END_OF_CURRENT##",t.SUBTEXT_TOTAL_START="##START_OF_TOTAL##",t.SUBTEXT_TOTAL_END="##END_OF_TOTAL##",t.DEPLOYABLE_DISPLAY_NAME={19:"BizFlow",0:"Walk-Thru"},t.SURVEY_FREQUENCY={0:"always",1:"visit",2:"once"},t.UI_CHANGE_NOTIFIERS={HASH:"hash",HISTORY:"history",IFRAME_LOAD_SELECTOR:"iframeLoadSelector",CLICK_SELECTOR:"clickSelector",AJAX_CALLS:"ajaxCalls",USER_INPUT:"userInput",HASH_ON_AJAX_CALLS:"hashOnAjax"},t.FLOW_TRANSITION_HANDLER_IDS={DELAYER:0,ON_BEFORE_UNLOAD:1},t.QUESTION_TYPES={FreeText:0,RadioButton:1,CheckBox:2,NPS:3,Message:4},t.DEFAULT_CHANGE_PIXELS_THRESHOLD=1}var O=i.get("Consts");i.register("ExternalWalkMeConfig").asCtor(N).dependencies("Consts");function N(e){var t=this,n={platform:e.PLATFORM.Web};t.get=function(e){return window._walkmeConfig&&window._walkmeConfig[e]?window._walkmeConfig[e]:n[e]}}i.register("PlatformDI").asCtor(x).dependencies("Consts, ExternalWalkMeConfig");function x(t,n){var r,i=this;function o(){r=n.get("platform")}i.register=function(t,n){if("number"==typeof t)return void(t==r&&n());e.inArray(r,t)!=-1&&n()},o.apply(null,arguments)}var L=i.get("PlatformDI");i.register("SettingsFile").asCtor(F);function F(){var e,t=this;function n(){e=r()||window.wmPreviewSnippet||window.wmSnippet}function r(){if(window.wmPlaySnippetData){var e=ig(window.wmPlaySnippetData);return window.wmPlaySnippet={getSettingsFile:function(){return e}},window.wmPlaySnippet}return null}t.getSettingsFile=function(){return e?e.getSettingsFile()||{}:{}},t.getPublishVersion=function(){var e=t.getSettingsFile(),n=e.DataFiles[0].url,r=n.match(/data_([a-z0-9]+)/)[1];return r},t.getPublishDirectory=function(){var e=t.getSettingsFile(),n=e.DataFiles[0].url;return n.substring(0,n.lastIndexOf("/")+1)},t.getCdnServerName=function(){return t.getSettingsFile().CdnServerName||window.mt_cdn_server_name},t.getStorageType=function(){return t.getSettingsFile().Storage},t.getAllUserGuids=function(){return t.getSettingsFile().UserGuids},t.getPublishDate=function(){return t.getSettingsFile().PublishDate},t.getUrl=function(){return window._walkmeInternals&&window._walkmeInternals.settingsUrl},t.getPlayerRelatedPath=function(){var e=t.getSettingsFile().LibFile,n=/http.+\/player\//.exec(e);return n[0]},n()}__webpack_require__.p=M();function M(){return i.get("SettingsFile").getSettingsFile().PublicPath}i.register("Logger").asCtor(B).dependencies("CookiesManager, HostData, Lib, IsInEditor, Consts, FeaturesManager");function B(t,n,o,a,s,u){var l=this,c=!1;window.walkme_lib_in_dev&&(c=!0);var d,f="walkmeCustomerLogs",p={debug:4,info:3,warn:2,error:1},g=86400,h=0,m=!0;function v(){d=new A(t)}l.ready=function(){var e="DI";r.logger=l.wrapCustomerLog(e)},l.wrapCustomerLog=function(e){return function(t,n,r){l.customerLog(t,n,r||e)}},l.customerLog=function(e,t,r){if(n.isQuirksMode()&&(e instanceof mtjQuery||e&&e.nodeType))return;t=t||1;var i=d.get();if(i){var o=parseInt(i.l),a=i.f,s=i.u;if(o>=t&&b(a,s,r))try{I(i.m?C()+rg(e):e)}catch(u){}}};function y(e){return e.debug=function(t,n,r){return e("debug",t,n,r)},e.info=function(t,n,r){return e("info",t,n,r)},e.warn=function(t,n,r){return e("warn",t,n,r)},e.error=function(t,n,r){return e("error",t,n,r)},e}l.sendServerLog=y(function(e,t,n,r){i.get("EventCollectorLoggerPixel").log(e,t,n),l.customerLog(t,p[e],r)}),l.wrapServerLog=function(e){return y(function(t,n,r,i){l.sendServerLog(t,n,r,i||e)})};var E=0,S=[];l.timer=function(e){E++;var n=(new Date).getTime();return{stop:function(){var r=ig(t.getCookie(f));if(!r||!r.m)return;var i=(new Date).getTime(),o=i-n,a=Array(E).join("->\t"),s=C()+a+e+": "+o+"ms";1==E?(I(s),T()):S.push(s),E--}}};function T(){for(var e=S.length-1;e>=0;e--)I(S[e]);S.length=0}function C(){var e=new Date;return"["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()+"] "}function b(e,t,n){var r=!0;return e?r=mtjQuery.inArray(n,e)!=-1:t&&(r=mtjQuery.inArray(n,t)==-1),r}l.enableCustomerLogs=function(e){return d.enable(e)},l.error=function(e,t,n){try{var r,i=arguments.callee.caller,o=i?i.name:"N/A";if(e&&e.message){var a=t?t+"\n":"";r=a+"File : "+e.fileName+"\n - Function : "+o+"\n - Line : "+e.lineNumber+"\n - Msg : "+e.message}else r="Function : "+o+"\n - "+t;e&&e.stack&&(r+="\n - Stack: "+e.stack),m&&w(r,1,n),c&&!window.wmNoAlert&&alert("Dev mode alert: "+r),customerLog("Error: "+r)}catch(s){}};function w(e,t,n){try{if(!i.get("AuditingEnabledIndicator").isEnabled())return!0;if(u.isFeatureEnabled("disableAuditErrorLog"))return!0;if(h++,h>5)return;var r={code:t,isInEditor:a.get(),SVNRevision:o.SVNRevision,LibVersion:o.LibVersion};n&&(mtjQuery.extend(n,r),r=n),l.sendServerLog.error(e,r)}catch(s){}}function I(e){if(window.console)console.log(e);else try{var t=k(),n=new Date,r=P(e);t.find("#walkme-console-messages").prepend('<li style="padding: 2px 5px; border-bottom: 1px solid #afafaf"><span style="float: left; color: #afafaf; margin-right: 5px;">'+_(n.getHours())+":"+_(n.getMinutes())+":"+_(n.getSeconds())+" </span>"+r.substring(1,r.length-1)+"</li>")}catch(i){}}function P(t){return t instanceof e?"-jQuery object: selector - "+t.selector+", value - "+t.val()+", domElement - "+rg(t[0]):rg(t)}function _(e){return e<10?"0"+e:e}function k(){var e=mtjQuery("#walkme-console-box");if(0===e.length){var t=i.get("TopContainerProvider").getTopContainer();e=mtjQuery('<div id="walkme-console-box"></div>');var n=mtjQuery('<div style="display: none;">Walkme Console: [ </div>'),r=mtjQuery('<button type="button" title="Toggle the walkme debug console">Walkme Console</button>'),o=mtjQuery('<ul id="walkme-console-messages"></ul>'),a=mtjQuery('<a href="#">clear</a>');n.append(a),n.append(" ]"),n.append(o),e.append(n),e.append(r),t.append(e),r.click(function(){n.slideToggle("fast",function(){var e=mtjQuery(this).is(":visible")?"Close Console":"Walkme Console";r.text(e)})}),a.click(function(){o.empty()}),n.css({margin:"15px 60px 5px 15px",padding:"5px",border:"1px solid red","background-color":"#FFC",color:"#000"}),r.css({border:"1px solid red","background-color":"#FFFFCC","margin-left":"15px",width:"120px"}),e.css({position:"fixed","z-index":s.POPUP_BALLOON_Z_INDEX,"font-family":"Arial",bottom:"10px",left:"10px",width:"100%","text-align":"left"}),o.css({"background-color":"white",border:"1px solid black",height:"260px","list-style-type":"none",padding:"0","overflow-y":"auto",margin:"5px 0 0"})}return e}l.getAPI=function(){return d};function A(){var e,t,n=this,r=1;function o(n){t=n,e=ig(t.getCookie(f))}n.get=function(){return e},n.enable=function(t){return a(),e.l=t||r,l(),n},n.disable=function(){return e&&(e.l=0,l()),n},n.reset=function(){return e={l:r},l(),n},n.level=function c(c){if(void 0===c)return s("l",null);return a(),e.l=c,l(),n},n.track=function(t){if(void 0===t)return s("f",[]);a();var r=u(t);return delete e.u,e.f=e.f?hg(r,e.f):r,l(),n},n.untrack=function(t){if(void 0===t)return s("u",[]);a();var r=u(t);return delete e.f,e.u=e.u?hg(r,e.u):r,l(),n},n.timer=function(t){return a(),t?e.m=1:e.m&&delete e.m,l(),n};function a(){e||(e={})}function s(t,n){return e?e[t]:n}function u(e){if(!i.get("CommonUtils").isDefined(e))return[];if("string"==typeof e)return e=e.replace(/\s/g,""),e.split(",");if(e.length>0)return e}function l(){t.setCookie(f,rg(e),g)}o.apply(null,arguments)}v.apply(null,arguments)}i.register("FeaturedLogger").asCtor(R).asProto().dependencies("FeaturedLoggerConsts, CommonUtils, Logger");function R(e,t,n,r){var i=this;i.customerLog=u;var o,a;function s(){o=r&&r.feature||e.DEFAULT_FEATURE,a=r&&r.logLevel||e.DEFAULT_LOG_LEVEL}function u(){var e=t.formatString.apply(null,arguments);n.customerLog(e,a,o)}s()}i.register("FeaturedLoggerConsts").asInstance({DEFAULT_FEATURE:"No name",DEFAULT_LOG_LEVEL:3}),n.CssInjector=__webpack_require__(59),i.register("CssInjector").asCtor(n.CssInjector).args({jQ:e}),i.register("CssUtils").asCtor(U);function U(){var e=this,t=["@import","expression","javascript","-moz-binding","-o-link","behavior"];e.clearComments=n,e.getSelectors=r,e.isSecure=i;function n(e){return e.replace(/\/\*[\s\S]*?\*\//gm,"")}function r(e){var t=n(e).split(/\s*{[^}]*}\s*/);return t.pop(),t}function i(e){var t=n(e);return!o(t.toLowerCase())}function o(e){for(var n=0;n<t.length;n++){var r=t[n];if(e.indexOf(r)>-1)return!0}return!1}}var V=function(){function t(e,t,n,r){if(this.ElementFinder=t,this._measures=[],this._mutations=[],n)this._syncFunc=function(){return n.apply(e,arguments)},this._cleanFunc=function(){r.apply(e,arguments)};else{var o=i.get("TimerManager");this._syncFunc=function(e){return o.setWalkmeTimeout(e,16)}}}return t.prototype.measure=function(e){return this.addTask(this._measures,e)},t.prototype.mutate=function(e){return this.addTask(this._mutations,e)},t.prototype.remove=function(e){this.removeTask(this._measures,e),this.removeTask(this._mutations,e)},t.prototype.removeTask=function(t,n){var r=e.inArray(n,t);r>-1&&t.splice(r,1)},t.prototype.cleanResources=function(){this._cleanFunc&&this._flushHandler&&this._cleanFunc(this._flushHandler),this._measures=[],this._mutations=[],this._flushHandler=null,this._scheduled=!1},t.prototype.addTask=function(e,t){var n=new o(function(n,r){e.push(function(){n(t())})});return this.scheduleFlush(),n},t.prototype.scheduleFlush=function(){var e=this;this._scheduled||(this._scheduled=!0,this._flushHandler=this._syncFunc(function(){e.flush()}))},t.prototype.flush=function(){for(var e=this;this._measures.length>0||this._mutations.length>0;)this.ElementFinder.wrapSession(function(){e.runTasks(e._measures)}),this.runTasks(this._mutations);this._scheduled=!1},t.prototype.runTasks=function(e){for(var t;t=e.shift();)try{t()}catch(n){i.get("EventSenderErrorLogger").logError("error running DOMSessionManager task\n\n"+rg(n.message))}},t}();i.register("DOMSessionManager").asCtor(V).dependencies("win, ElementFinder, requestAnimationFrame, cancelAnimationFrame"),i.register("WalkMeInfo").asCtor(W).dependencies("EndUsersManager,AbCurrentPermutationProvider,LanguageManager,AuditSourceManager,UserGuidContainer,Lib,SettingsFile");
function W(e,t,n,r,i,o,a){var s=this;s.getUserGuid=c,s.getEndUserGuid=c,s.getEndUserGuidSource=c,s.getPermutationId=c,s.getLanguage=c,s.getSource=c,s.getCustomVars=c,s.getLibVersion=c,s.setAnalyticsCustomFields=d,s.getAnalyticsCustomFields=f;var u=Array();s.init=function(){s.getUserGuid=i.getUserGuid,s.getEndUserGuid=l,s.getEndUserGuidSource=e.getEndUserGuidSource,s.getPermutationId=t.getCurrentPermutation,s.getLanguage=n.getCurrentLanguage,s.getEnvironmentId=r.get,s.getCustomVars=f,s.getLibVersion=function(){return o.LibVersion},s.getPublishDate=a.getPublishDate};function l(){if(e.getEndUserGuidSource())return e.getEndUserGuid()}function c(){throw new Error("WalkMeInfo not initialized properly")}function d(e,t){return u[e]=t,!0}function f(){return u}}i.register("WalkthrusModuleLazyLoader").asCtor(G).dependencies("IsInEditor, AuditSourceProvider");function G(e,t){var n=this;n.load=s;var r,a;function s(e){if(0==e.length||a)return r||o.resolve();return r=new o(function(e){a=!0,__webpack_require__.e(2,function(t){__webpack_require__(88),i.get("WalkthrusModuleInitializer")[u()](),r=void 0,e()})})}function u(){return e.get()&&!t.isInPreviewMode()?"postDataFileLoaded":"init"}}var H=i.register("WalkmeLoader").asCtor(j).dependencies("Lib, WalkmeConfigManager, Consts, TimerManager, CommonEvents, LibDestroyer, DevModeAlertRaiser, UserGuidContainer, WindowBeforeUnloadHandler, LocalStorageService, CommonUtils");"useOnce"in H&&H.useOnce();function j(e,t,n,r,o,a,s,u,l,c,d){var f,p,g=this;function h(){window._walkmeInternals.walkmeLoadLog=[],f={supportToolkit:{run:function(e){var t=__webpack_require__(60);i.register("DebuggerManager").asCtor(t.DebuggerManager).dependencies("WmInternals, ClientStorageManager, SiteConfigManager, CommonUtils, Logger, SettingsFile, Consts"),i.register("LoggerManager").asCtor(t.LoggerManager).dependencies("SettingsFile, Consts, WmInternals");var n=new t.PerformanceManager(c,d).init();n?n.then(e):e()},next:"start"},start:{run:function(t){m("st"),br=i.get("CommonUtils"),e.profilerAPI=i.get("PerformanceAPI");var n=i.get("SettingsFile").getSettingsFile();i.get("AuditSourceManager").set(n.Environment),u.setUserGuid(n.UserGuids&&n.UserGuids[0]),i.get("RecorderServerManager").set(n.PlayerServer),i.get("EventServerBaseUrl").set(n.EventServer),i.get("FramesetsUtils").waitForFramesHeadsAndBodies(t)},next:"creatApi"},creatApi:{run:function(e){window.WalkMeAPI=i.get("ClassWalkMeAPI"),e()},next:"pageReady"},pageReady:{run:function(e){m("pr"),g.libCtorTimer=i.get("Logger").timer("lib constructor"),e()},next:"loadStorage"},loadStorage:{run:function(t){m("ls");var n=i.get("ClientStorageManager");if(!n)return;if(n.init(t,e)===!1)return S("storageManagerInitFailed"),!1;try{window.walkme_lib_in_dev&&s.devModeAlert()}catch(r){}g.libCtorTimer.stop()},next:"loadWalkmeConfig"},loadWalkmeConfig:{run:function(e){m("lwc"),t.init(function(){if(null!=t.Data){var n=t.Data.EndUserSettings,r=i.get("EndUsersManager");r.setEndUserSettings(n),r.createEndUserGuid()}e()})},next:"loadServerStorage"},loadServerStorage:{run:function(e){m("lss");var t=i.get("StorageManagerFactory").bySettingsFile(!0);i.register("ClientOrServerStorageManager").asInstance(t),t===i.get("ClientStorageManager")&&t.removeData(t.keysConfig.serverStorage.lastGetDataTime.key,u.getUserGuid()),t.init(e,e)},next:"afterStorageLoaded"},afterStorageLoaded:{run:function(e){m("asl"),E();var t=i.get("ClientOrServerStorageManager"),n="wm-lang",o="wm-ABPer";t.convertOldCookieStorage(n),t.convertOldCookieStorage(o),document.cookie.indexOf("walkmeDontInitLib")==-1&&r.setWalkmeTimeout(function(){b()},0)}}},p="supportToolkit"}function m(e){window._walkmeInternals.walkmeLoadLog.push(e)}var v=i.register("loadClasses").asInstance({}).dependencies("CookiesManager,Logger,FramesetsUtils,SettingsFile,JQueryElementFinder,ConditionFunctions,ConditionTreeEvaluator,BBCodeParser,ResourceManager,ClientOrServerStorageManager,EndUsersManager,DataSender,EventSender,AbPermutationManager,LibInitializer,WmAjax,SiteConfigManager,EndUserLoggerManager,AnalyticsManager,ClickAuditManager,RecorderServerManager,EventServerBaseUrl,ServerDataSenderManager,GoalsManager,WalkMeGoalsManager");"useOnce"in v&&v.useOnce();var y=i.register("loadClasses2").asInstance({}).dependencies("DebuggerManager,WmInternals,FeaturesManager,TimerManager,CommonEvents,PopupNotificationsService,LoggerManager,ShoutOutActionDataProvider,LauncherActionDataProvider,AuditTasksManager,LegacyWidgetApiModule,LegacyExternalApiModule,FlowSurveyActivator");"useOnce"in y&&y.useOnce();function E(){i.get("loadClasses"),i.get("loadClasses2")}g.start=function(e){T(f[p],e)},g.get=function(e){return i.get(e)};function S(t){a.removeWalkMe(t,{sendLog:!0}),e.initFailed=!0}function T(e,t){e&&(e.run?e.run(function(){C(e,t)}):C(e,t))}function C(e,t){if(e){var n=f[e.next];p=e.next,n?T(n,t):t&&t()}}function b(){i.get("WalkmeLoadTimeManager").init(),l.init(),w(),i.get("HostData").isIE(7)||i.get("AuditSourceProvider").isInPlayMode()||i.get("EventSenderInitializer").init(),i.get("LibInitializer").startInitializer()}function w(){var e=i.get("SessionPersister");e.loadOrCreate()}h.apply(null,arguments)}i.register("LibCtorService").asCtor(Y).dependencies("Consts, Lib, WmInternals");function Y(t,n,r){var o=this;o.init=a;function a(){e(["bind","unbind","on","off","one"]).each(function(t,n){r[n]=function(t,i){e(r)[n](t,i)}}),i.get("DataEncoderFactory").registerEncoders(),i.get("CommonEvents").raiseEvent(t.EVENTS.DICreated,i),i.get("AjaxManager").init(),i.get("CommonEvents").raiseEvent(t.EVENTS.MainStart,{object:n}),i.initialize("Logger"),i.initialize("HostData"),i.initialize("ElementFinder"),i.get("WalkmeLoader").start()}}i.register("TasksContainer").asCtor(z),i.register("ContentsContainer").asCtor(z),i.register("ShuttlesContainer").asCtor(z),i.register("SurveysContainer").asCtor(z),i.register("ShoutOutsContainer").asCtor(z),i.register("SpotlightsContainer").asCtor(z),i.register("TooltipsContainer").asCtor(z),i.register("CategoriesContainer").asCtor(z),i.register("CollectionsContainer").asCtor(z),i.register("ConditionBlocksContainer").asCtor(z),i.register("BusinessSolutionsContainer").asCtor(z),i.register("CoursesContainer").asCtor(z),i.register("LabelsContainer").asCtor(z),i.register("LessonsContainer").asCtor(z),i.register("TagsContainer").asCtor(z),i.register("TrackedPagesContainer").asCtor(z),i.register("TrackedElementsContainer").asCtor(z),i.register("AbExperimentsContainer").asCtor(z),i.register("SearchProviderUrlsContainer").asCtor(z);function z(){var e=this;e.set=r,e.get=i,e.addRange=o;var t;function n(){t=[]}function r(e){t=e}function i(){return t}function o(e){t=t.concat(e)}n()}var Q=i.get("UIComponentsClasses"),q=Q.eventBasedObject,K=(Q.uiComponentBase,Q.idisplayer,Q.popupBase,Q.shoutOutBase);i.register("CdnServer").asCtor(X).dependencies("SettingsFile");function X(e){var t=this;t.get=i,t.override=r;var n;function r(e){n=e}function i(){return n||e.getCdnServerName()||""}}i.register("CookiesManager").dependencies("logger=Logger").injectToProperty().asCtor(J);function J(){var e,t,n,r=this;function o(r){e=i.get("DataValueEncoder"),t=i.get("DataNameEncoder"),n=i.get("Consts")}this.setCookie=function(n,r,i,o){try{"string"!=typeof r&&(r=r.toString()),r=e.encode(r);var a="";o&&o.length>0&&(a="; domain="+o);var s=new Date;s.setTime(s.getTime()+1e3*i);var u="; expires="+s.toUTCString(),l=r+u+"; path=/"+a;document.cookie=t.encode(n)+"="+l}catch(c){this.logger.error(c)}},this.getCookie=function(n){var r,i,o,a=t.encode(n),s=!1,u=document.cookie.split(";");for(r=0;r<u.length;r++){if(i=u[r].substr(0,u[r].indexOf("=")),o=u[r].substr(u[r].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==a)return e.decode(o);i==n&&(s=e.decode(o))}return s},this.getCurrentDomain=function(){var e=r.getCookie(n.DOMAIN_IN_COOKIE);if(e)return e;var t=window.location.hostname,i="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$";if(new RegExp(i).test(t))return r.setCookie(n.DOMAIN_IN_COOKIE,t,n.DEFAULT_COOKIE_SECONDS,t),t;if(t.indexOf(".")==-1)return null;for(var o=t.split("."),a="",s=o.length-1;s>=0;s--)if(""!=a&&(a="."+a),a=o[s]+a,r.setCookie(n.DOMAIN_IN_COOKIE,a,n.DEFAULT_COOKIE_SECONDS,a),r.getCookie(n.DOMAIN_IN_COOKIE)==a)return a;r.setCookie("wm-test","wm-test",n.DEFAULT_COOKIE_SECONDS);var u=r.getCookie("wm-test");if("wm-test"!=u)try{console.log("WalkMe requires the browser to accept cookies - please enable cookies in your browser.")}catch(l){}else this.logger.error(new Error("Cannot get domain from: "+t));return},o.apply(null,arguments)}i.register("FindElementCornerMargin").asInstance(1),i.register("FindElementCornerFunctions").asFunction(function(e){return[function(t){return{x:t.offset().left+t.outerWidth()/2,y:t.offset().top+e}},function(t){return{x:t.offset().left+t.outerWidth()/2,y:t.offset().top+t.outerHeight()-e}},function(t){return{x:t.offset().left+e,y:t.offset().top+t.outerHeight()/2}},function(t){return{x:t.offset().left+t.outerWidth()-e,y:t.offset().top+t.outerHeight()/2}},function(t){return{x:t.offset().left+e,y:t.offset().top+e}},function(t){return{x:t.offset().left+e,y:t.offset().top+t.outerHeight()-e}},function(t){return{x:t.offset().left+t.outerWidth()-e,y:t.offset().top+e}},function(t){return{x:t.offset().left+t.outerWidth()-e,y:t.offset().top+t.outerHeight()-e}}]}).dependencies("FindElementCornerMargin"),i.register("ElementPositionCalculator").asCtor($).dependencies("Consts, PositionHelper");function $(e,t){var n=this;n.getElementPosition=i;function r(){}function i(n,r){try{var i,o;if(n==e.EMBEDMENT_TYPE.EmbedInOwnerDocument){var a=r.offset();i=Math.floor(a.top),o=Math.floor(a.left)}else if(n==e.EMBEDMENT_TYPE.EmbedInTopDocument){var s=t.getPosRelativeToWindow(r[0],window,!0);i=s.top,o=s.left}var u=r.height(),l=r.width();return{top:i,left:o,height:u,width:l}}catch(c){return{}}}r()}i.register("StorageResourceManager").asCtor(Z).dependencies("SettingsFile, CommonUtils, win");function Z(e,t,n){var r,i=this,o="hi",a="sc",s="wm-cdhi-o",u=33,l=3;i.getOrigin=function(){if(!r){if(t.isLocalStorageEnabled()){var e=n.localStorage.getItem(s);if(e)return e}var i=c(o);if(i)return i;r=t.getOrigin()}return r},i.getHiddenIframePath=function(e){var t=e?".compress":"";return i.getOrigin()+cg("/player/resources/CD/CDhiddenIframe{1}_v{0}.html",u,t)},i.getHiddenIframeScriptSrc=function(){return i.getOrigin()+cg("/player/resources/CD/cdHiddenIframeScript_{0}.js",l)},i.getSaveCookiePath=function(){var e=c(a);return e||i.getOrigin()+"/player/resources/CD/saveCookie.html"},i.shouldHandleMessage=function(e){var t=i.getOrigin();return t.toLowerCase().indexOf(e.origin)>-1};function c(t){var n=e.getStorageType();if(n)return n[t]}}function ee(){var e="walkme-hidden-iframe";this.init=o,this.postMessage=s,this.isInitialized=d,this.getTargetWindow=u,this.terminate=a;var t,n,r;function i(e,t,i){n=t,r=i.getHiddenIframePath(e)}function o(e,n,r){t=l(r),t?n&&n():t=c(e,n,r)}function a(){t&&t.parentNode&&t.parentNode.removeChild(t)}function s(e,t){u().postMessage(e,t)}function u(){return t&&(t.contentWindow||t.window)}function l(t){var n=t?t.ownerDocument:document;return n.getElementById(e)}function c(t,i,o){return n.createIframe(r,e,!1,i,t,o,!0)}function d(){try{return!!u()}catch(e){return!1}}i.apply(null,arguments)}function te(){var t,n,r,i,o,a,s,u,l="walkme-proxy-iframe";this.init=d,this.isInitialized=v,this.postMessage=m,this.terminate=f;function c(e,t,r,i){o=t,s=i,a=r,n=new ee(e,t,r)}function d(a,s){t=a,p(function(){var t=e(r).contents();i=r.contentWindow||r.window,g(t,i,function(){n.init(null,function(){u=o.registerEventHandler("message",h,!1,i),i.targetWindow=n.getTargetWindow(),s&&s()},t.find("body")[0])})})}function f(){n&&n.terminate(),u&&u(),r&&r.parentNode&&r.parentNode.removeChild(r)}function p(e){r=document.getElementById(l),r?e():r=o.createIframe("about:blank",l,!1,e,null,null,!0)}function g(e,t,n){var r=t.document.createElement("script");r.type="text/javascript",r.async=!1,r.src=a.getHiddenIframeScriptSrc(),window._walkmeInternals.hiddenIframeCallback=n,e.find("head")[0].appendChild(r)}function h(e){var n=o.getWalkmeInternals().walkmeWrap;n?n(t,e):t(e)}function m(e,t){i.send.apply(i,[e,t])}function v(){return n.isInitialized()}c.apply(null,arguments)}i.register("CookiesStorageManager").asCtor(ne).asProto().dependencies("CookiesManager,TimerManager,Consts");function ne(t,n,r){var i,o=this,a="#!@DeL@!#";function s(){i=new ba}o.saveData=function(e,n,r,a){void 0==o.currentDomain&&(o.currentDomain=t.getCurrentDomain()),t.setCookie(e,n,r,o.currentDomain),i.saveData(e,n,r,a)},o.getData=function(e,n){var r=i.getData(e,n);if(void 0===r&&(r=t.getCookie(e),r===a||r===!1))return;return r},o.removeData=function(e,t){i.removeData(e,t);var n=o.getData(e);void 0!==n&&o.saveData(e,a,-1)},o.removeAllData=function(){for(var t=document.cookie.split(";"),n=0;n<t.length;n++)if(0===e.trim(t[n]).toLowerCase().indexOf("wm-")){var r=e.trim(t[n].split("=")[0]);document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}},o.getInternalKeys=function(t,n){for(var i=document.cookie.split(";"),o={},a=0;a<i.length;a++)if(0===e.trim(i[a]).toLowerCase().indexOf(n)){var s=e.trim(i[a].split("=")[0]);s!==r.DOMAIN_IN_COOKIE&&(o[s]=this.getData(s))}return o},o.refreshGetData=function(e,t){for(var n=0;n<e.length;n++)i.clear(e[n]);t&&t()},s.apply(null,arguments)}i.register("ExtensionStorageManager").asCtor(re).asProto().dependencies("TimerManager, Logger");function re(e,t){var n=this,r=5,i=300;function o(){}n.init=function(o){if(window.walkmeExt)return void o();if(0==r)return void t.customerLog("Extension storage is not available, walkme can not load",3);r--,e.libSetTimeout(function(){n.init(o)},i)},n.saveData=function(e,t,n,r){var i={val:t,exp:a(1e3*n)};walkmeExt.SaveData(e,rg(i),r)},n.getData=function(e,t){var n=walkmeExt.GetData(e,t);if(n){var r=ig(n);return r.val}},n.removeData=function(e,t){walkmeExt.removeData(e,t)},n.removeAllData=function(e){walkmeExt.RemoveAllData(e)},n.getAll=function(e){return walkmeExt.GetAll(e)};function a(e){return s()+e}function s(){return(new Date).getTime()}o.apply(null,arguments)}i.register("CDStorageOriginChecker").asCtor(ie).asSingleton().dependencies("StorageResourceManager");function ie(e){var t,n="frameOrigin",r=this,i=[];function o(){}r.checkMessageOrigin=function(r){if(!t){if(r&&r.data!=n)return;e.getOrigin().toLowerCase().indexOf(r.origin)==-1&&a("Storage Frame is not from the same origin: "+r.origin),t=!0}};function a(e){i.push(e)}r.getErrors=function(){return i.length?"\nErrors:\n"+i.join("\n"):""},o.apply(null,arguments)}i.register("ExtensionConfigManager").asCtor(oe);function oe(){var e=this;e.get=function(e){return window._walkmeExtension&&"undefined"!=typeof window._walkmeExtension[e]?window._walkmeExtension[e]:void 0}}i.register("WalkMejStorageManager").asCtor(ae).asProto().dependencies("CommonUtils");function ae(e){var t,n,r=this,i="walkMe_";function o(){try{n=e.isLocalStorageEnabled(),a()}catch(t){}}function a(){if(!r.isEnabled())return;t=window.localStorage;var e=ig(t.getItem("wm-storage"));if(!e)return;var n=e.__jstorage_meta||{},i=n.TTL||{};for(var o in e)if(e.hasOwnProperty(o)){var a=e[o],s=i[o],l=u();s>l&&r.saveData(o,a,(s-l)/1e3)}t.removeItem("wm-storage")}this.init=function(e){if(!r.isEnabled())return!1;e()},this.saveData=function(n,o,a){a=e.defaultValue(a,0),r.removeData(n);var u={val:o,exp:s(1e3*a)};t.setItem(i+n,rg(u))},this.getData=function(e){var n=t.getItem(i+e);if(n){var o=ig(n);if(!(o.exp<u()))return o.val;r.removeData(e)}},this.removeData=function(e){t.removeItem(i+e)},this.removeAllData=function(){Object.keys(localStorage).forEach(function(e){0===e.indexOf(i)&&localStorage.removeItem(e)})},this.getInternalKeys=function(e,n){function o(e,t,i){e=e.substr(i),e.toLowerCase().indexOf(n)>-1&&(t[e]=r.getData(e))}for(var a={},s=i.length,u=0;u<t.length;u++){var l=t.key(u);o(l,a,s)}return a},this.isEnabled=function(){return n};function s(e){return u()+e}function u(){return(new Date).getTime()}o.apply(null,arguments)}i.register("ServerStorageSettingsService").asCtor(se).dependencies("SettingsFile");function se(e){var t=this;t.isServerStorageOn=r;var n="ss";function r(){var t=e.getStorageType();return!!t&&1==t[n]}}i.register("StorageManagerFactory").asCtor(ue).dependencies("UserGuidContainer, SettingsFile, FeaturesManager, Logger, HostData, CommonUtils, Consts, ServerStorageSettingsService");function ue(e,t,n,r,o,a,s,u){var l,c,d,f,p,g,h=!0,m=this,v="st",y="cm",E="sm";function S(){l=e.getAllUserGuids,c=n.isFeatureEnabled}m.bySettingsFile=function(e){var n=br.getWindowCookie("wm-stt"),r=n?m.byType(n):m.byType(t.getStorageType());return e&&u.isServerStorageOn()&&!i.get("EndUsersManager").isWalkMeGeneratedEndUserType()&&(r=i.get("ServerStorageManager")),r},m.byType=function(e){var t,n=T(e),r=!1,i=!1,o=!1,a=C(E);switch(n){case s.STORAGE_TYPE.JStorage:r=!0;break;case s.STORAGE_TYPE.CrossDomainCookies:a=b.Cookies,i=!0;break;case s.STORAGE_TYPE.CrossDomainLocalStorage:a=b.LocalStorage;case s.STORAGE_TYPE.CrossDomain:i=!0;break;case s.STORAGE_TYPE.Extension:o=!0;break;case s.STORAGE_TYPE.ProxyIframe:i=!0,t=!0;break;case s.STORAGE_TYPE.Cookie:}return I(r,i,o,a,t)};function T(e){if(!e)return e;if("string"==typeof e)return e;var t=e[v];return t[o.browser.string]||t[o.browser.name]||t["*"]}m.byFeature=function(){var e=c("jstorage"),t=c("crossdomain");return I(e,t)};function C(e,n){var r=t.getStorageType();if(!r||void 0===r[e])return n;return r[e]}function w(){return!!C(y,h)}function I(e,t,n,r,i){var o,a=l(),s=a[0];return o=t?P(a,t,s,r,w(),i):e?A(s):n?k(s):_(s)}function P(e,t,n,i,o,u){if(!d){var l=new Ca(a,e,t,i,o,u);d=new wa(s.STORAGE_TYPE.CrossDomain,l,n,r,a)}return d}function _(e){if(!p){var t=i.get("CookiesStorageManager");p=new wa(s.STORAGE_TYPE.Cookie,t,e,r,a)}return p}function k(e){if(!g){var t=i.get("ExtensionStorageManager");g=new wa(s.STORAGE_TYPE.Extension,t,e,r,a)}return g}function A(e){if(!f){var t=i.get("WalkMejStorageManager");f=new wa(s.STORAGE_TYPE.JStorage,t,e,r,a)}return f}S.apply(null,arguments)}function le(){var e,t,n,r,o,a,s,u=2600,l=this;function c(u,l,c,d){t=u,e=l,n=c,r=i.get("DataMinifier"),o=d;var f=i.get("StorageKeysConfigurations").storage;a=f.dataPrefix.key,s=f.numberOfEntries.key}l.saveData=function(n){var i=r.minifyData(n);if(l.removeData(),void 0===i)return;for(var o=d(i,u),c=0;c<o.length;c++){var f=o[c];t.saveToStorage(a+c,f,e)}t.saveToStorage(s,o.length,e)};function d(e,t){for(var n=[],r=Math.ceil(e.length/t),i=0;i<r;i++){var o=t>e.length?e.length:t,a=e.slice(0,o);e=e.substring(o),n.push(a)}return n}l.getData=function(){var e,n=p();if(void 0!=n){e="";for(var i=0;i<n;i++){var o=t.getFromStorage(a+i);e+=o}}var s,u;if(e)try{s=r.deminifyData(e),s=s?s:void 0}catch(l){u=l}return(u||n>0&&!s)&&f(u),s};function f(e){n(e,"Storage data is malformed, discarding it."),l.removeData()}l.removeData=function(){var n=p();if(t.saveToStorage(s,0,e),void 0!=n)for(var r=0;r<n;r++)t.saveToStorage(a+r,null,e)};function p(){return t.getFromStorage(s)}c.apply(null,arguments)}i.register("StringCache").asCtor(ce).asProto();function ce(){var e=5,t=[],n=[];this.set=function(r,i){t.push(r),n.push(i),t.length>e&&(t.shift(),n.shift())},this.getValue=function(e){for(var r=0;r<t.length;r++)if(t[r]==e)return n[r]},this.getKey=function(e){for(var r=0;r<n.length;r++)if(n[r]==e)return t[r]}}i.register("ButtonSiteConfigKeyGenerator").asCtor(de);function de(){var e=this;e.generateKey=t;function t(e){return e+"ButtonText"}}i.register("WelcomeButtonSiteConfigKeyGenerator").asCtor(fe);function fe(){var e=this;e.generateKey=t;function t(e){return"WelcomeStepButton"+e+"Text"}}i.register("BalloonButtonDataGenerator").asCtor(pe).dependencies("SiteConfigManager, ButtonSiteConfigKeyGenerator"),i.register("WelcomeBalloonButtonDataGenerator").asCtor(pe).dependencies("SiteConfigManager, WelcomeButtonSiteConfigKeyGenerator");function pe(e,t){var n=this;n.generateWithoutBackground=o,n.generate=i;function r(){}function i(e){return a(e,!1)}function o(e){return a(e,!0)}function a(n,r){var i=e.get(),o=t.generateKey(n);return{name:i[o],type:n.toLowerCase(),weak:r}}r()}i.register("AjaxProxyIframeManager").asCtor(ge).dependencies("CommonUtils");function ge(t){var n,r,i,o={},a=1,s="walkme-ap-iframe",u=3,l=this;l.init=c,l.postMessage=p,l.abort=g;function c(){i=e.Deferred(),n=t.getOrigin()+cg("/player/resources/AP/ajaxProxyIframe_v{0}.html",u),r=t.createIframe(n,s,!1,d,f)}function d(){i.resolve()}function f(e){if(n.toLowerCase().indexOf(e.origin)<0)return;var t=ig(e.data);if(!t.wmAP)return;if(!o[t.requestIndex])return;t.data=ig(t.data),o[t.requestIndex].requestDefer.resolve(t)}function p(e,t){h(a,t),m(e,a),a++}function g(e){delete o[e]}function h(t,n){o[t]={requestDefer:e.Deferred(),result:""},o[t].requestDefer.promise().then(function(e){delete o[t],n(e)})}function m(e,o){var a={origin:t.getWinOrigin(),requestIndex:o,message:e,wmAP:!0};i.promise().then(function(){r.contentWindow.postMessage(rg(a),n)})}}i.register("ClassWalkMeAPI").asCtor(he).dependencies("CommonEvents, Consts, AnalyticsPropertiesManager, DebuggerManager, UIChangeTracker, Logger, WalkMeVisibilityChecker, HtmlDecoder, PageChangeTracker, DeployablesManagerFactory, ArrayUtils").asSingleton();function he(n,r,o,a,s,u,l,c,d,f,p){var g=this;g.getPlayInitiatorEnum=v,g.getFlows=E,g.startContentById=T,g.startSurveyById=C,g.startFlowById=b,g.stopFlow=w,g.setAnalyticsCustomField=I,g.setAnalyticsProperty=P,g.enableLogs=_,g.loadTasks=k,g.getTasks=A,g.getWidgetMode=D,g.setWidgetMode=O,g.getWidgetInitialState=N,g.changeLanguage=x,g.getAllLanguages=L,g.getSupportedLanguages=F,g.getCurrentLanguage=M,g.getTree=B,g.triggerUIChange=R,g.triggerPageChange=U,g.launchTracker=V,g.startTestMe=W,g.log=u.getAPI(),g.getObjectsTree=G,g.getDeployableId=S,g.getWalkthrus=y,g.isDeployableVisible=Y,g.activateDeployable=z;var h=u.wrapCustomerLog("walkmeAPI");function m(){n.raiseEvent(r.EVENTS.WalkmeApiStarted,{object:g}),j()}function v(){return r.STEP_PLAY_INITIATOR_ENUM}function y(){return[]}function E(){try{for(var e=window._walkmeInternals.ctx,t=e.get("BusinessSolutionsManager").getAll(),n=e.get("CommonUtils").clone(t),r=0;r<n.length;r++){var i=n[r].Settings.CustomField1;i&&(n[r].Settings.CustomField1=c.decodeHtml(i,['"',"'","&"]))}return n}catch(o){h("walkMeAPI - error running getFlows.",3)}}function S(t,n){try{var r=f.get(t),i=r.getAll(),o=e.grep(i,function(e){return e.Name.toLowerCase()==n.toLowerCase()});return o.length>0&&o[0].Id}catch(a){h("walkMeAPI - error running getDeployableId. Error: "+a,3)}}function T(e,t,n){try{if(e<0)return!1;t=void 0!==t?t:r.STEP_PLAY_INITIATOR_ENUM.API;var o={type:t};return H(o),n&&(o.objectId=n),i.get("ContentsManager").activateById(e,o),!0}catch(a){h("walkMeAPI - error running startContentById.",3)}}function C(e,t){try{if(e<0)return!1;return t=t||{type:r.STEP_PLAY_INITIATOR_ENUM.API},H(t),i.get("SurveysManager").activateById(e,t)}catch(n){h("walkMeAPI - error running startSurveyById.",3)}}function b(e,t){try{if(!l.isWalkMeVisible())return!1;var n={type:r.STEP_PLAY_INITIATOR_ENUM.API};return window._walkmeInternals.ctx.get("BusinessSolutionsManager").activateById(e,n,t)}catch(i){h("walkMeAPI - error running startFlowById.",3)}}function w(){try{if(!l.isWalkMeVisible())return!1;return window._walkmeInternals.ctx.get("BizflowApi").stop()}catch(e){h("walkMeAPI - error running stopFlow.",3)}}function I(e,t){try{if(e>r.ANALYTICS_CUSTOM_VARS.MaxCustomFields||e<1||t.length>r.ANALYTICS_CUSTOM_VARS.MaxVarLength)return!1;return i.get("WalkMeInfo").setAnalyticsCustomFields(e-1,t)}catch(n){h("walkMeAPI - error running setAnalyticsCustomField.",3)}}function P(e,t){try{o.setPredefinedPropertyValue(e,t)}catch(n){h("walkMeAPI - error running setAnalyticsProperty.",3)}}function _(e){try{return void 0==e&&(e=!0),this.log.enable(e)}catch(t){h("walkMeAPI - error running enableLogs.",3)}}function k(e,t){try{return window._walkmeInternals.ctx.get("TodoListManager").loadTasks(e,t)}catch(n){h("walkMeAPI - error running loadTasks.",3)}}function A(e){try{return window._walkmeInternals.ctx.get("TodoListManager").getApiTasks(e)}catch(t){h("walkMeAPI - error running getTasks.",3)}}function D(){return"Walkthrus"}function O(e){return"Deprecated"}function N(){return"Closed"}function x(e,t){try{return i.get("LibInitializer").changeLanguage(e,t)}catch(n){}}function L(){try{return t.ctx.get("LanguageManager").getAllLanguages()}catch(e){h("walkMeAPI - error running getAllLanguages.",3)}}function F(){try{return t.ctx.get("LanguageManager").getMenuLanguages()}catch(e){h("walkMeAPI - error running getSupportedLanguages.",3)}}function M(){try{return t.ctx.get("LanguageManager").getCurrentLanguage()}catch(e){h("walkMeAPI - error running getCurrentLanguage.",3)}}function B(){try{return _walkMe.getUiDataProvider().uiObjectsTree()}catch(e){h("walkMeAPI - error running getTree.",3)}}function R(){try{return s.triggerUIChangeAPI()}catch(e){h("walkMeAPI - error running triggerUIChange.",3)}}function U(){try{return d.triggerPageChange()}catch(e){h("walkMeAPI - error running triggerPageChange.",3)}}function V(e,t){try{return a.launchDebuggerIfEnabled(e,t)}catch(n){h("walkMeAPI - error running launchTracker.",3)}}function W(e){try{var t=i.get("TestmeApi");t.rememberTestMeIsOn(),window.walkMeTestMeClearStorage=!0,window.walkmeTestMeFilter=e,window._testMe?(_testMe.exit(),_testMe.start()):t.loadTestMe()}catch(n){h("walkMeAPI - error running startTestMe.",3)}}function G(){try{return window._walkmeInternals.ctx.get("WidgetUiApi").getObjectsTree()}catch(e){h("walkMeAPI - error running getObjectsTree.",3)}}function H(e){n.raiseEvent(r.EVENTS.ApiWasCalled,{initiator:e})}function j(){g.conditions={handlers:{registerAsync:function(){var e=i.get("ExternalConditionsHandlers");return e.register.apply(e,arguments)}}}}function Y(e,t){if(!i.get("ShowInMenuCheckerFactory").isSupportedDeployableInMenu(e))return void h("walkMeAPI - deployable type not supported.",3);var n=f.get(e);if(n){var o=n.getById(t);if(o){o.deployableType||(o.deployableType=e);var a=i.get("PropertiesGeneratorFactory").create({deployable:o}).getAll();return p.inArray(r.UI_PROPERTIES.Visible,a)>-1}return h("walkMeAPI - error deployable not exist.",3),!1}return h("walkMeAPI - error getting deployable type manager.",3),!1}function z(e,t,n){var i=f.get(e);if(n=n||{type:r.STEP_PLAY_INITIATOR_ENUM.API},!i)return h("walkMeAPI - error activate deployable.",3),!1;try{return!!i.activateById(t,n)}catch(o){return h("walkMeAPI - error activate deployable. "+o,3),!1}}m()}!function(e){var t={};t.Template=function(t,n,r,i){this.r=t||this.r,this.c=r,this.options=i,this.text=n||"",this.buf=e?[]:""},t.Template.prototype={r:function(e,t,n){return""},v:c,t:l,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];if(!i)return"";return this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(t,n,r)},rs:function(e,t,n){var r=e[e.length-1];if(!d(r))return void n(e,t,this);for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,o,a){var s;if(d(e)&&0===e.length)return!1;return"function"==typeof e&&(e=this.ls(e,t,n,r,i,o,a)),s=""===e||!!e,!r&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s},d:function(e,t,n,r){var i=e.split("."),o=this.f(i[0],t,n,r),a=null;if("."===e&&d(t[t.length-2]))return t[t.length-1];for(var s=1;s<i.length;s++)o&&"object"==typeof o&&i[s]in o?(a=o,o=o[i[s]]):o="";if(r&&!o)return!1;return r||"function"!=typeof o||(t.push(a),o=this.lv(o,t,n),t.pop()),o},f:function(e,t,n,r){for(var i=!1,o=null,a=!1,s=t.length-1;s>=0;s--)if(o=t[s],o&&"object"==typeof o&&e in o){i=o[e],a=!0;break}if(!a)return!r&&"";return r||"function"!=typeof i||(i=this.lv(i,t,n)),i},ho:function(e,t,n,r,i){var o=this.c,a=this.options;a.delimiters=i;var r=e.call(t,r);return r=null==r?String(r):r.toString(),this.b(o.compile(r,a).render(t,n)),!1},b:e?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:e?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,n,r,i,o,a){var s=t[t.length-1],u=null;if(!r&&this.c&&e.length>0)return this.ho(e,s,n,this.text.substring(i,o),a);if(u=e.call(s),"function"==typeof u){if(r)return!0;if(this.c)return this.ho(u,s,n,this.text.substring(i,o),a)}return u},lv:function(e,t,n){var r=t[t.length-1],i=e.call(r);if("function"==typeof i&&(i=l(i.call(r)),this.c&&~i.indexOf("{{")))return this.c.compile(i,this.options).render(r,n);return l(i)}};var n=/&/g,r=/</g,o=/>/g,a=/\'/g,s=/\"/g,u=/[&<>\"\']/;function l(e){return String(null===e||void 0===e?"":e)}function c(e){return e=l(e),u.test(e)?e.replace(n,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(a,"&#39;").replace(s,"&quot;"):e}var d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},f=/\S/,s=/\"/g,p=/\n/g,g=/\r/g,h=/\\/g,m={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};t.scan=function(e,t){var n=e.length,r=0,i=1,o=2,a=r,s=null,u=null,l="",c=[],d=!1,p=0,g=0,h="{{",S="}}";function T(){l.length>0&&(c.push(new String(l)),l="")}function C(){for(var e=!0,t=g;t<c.length;t++)if(e=c[t].tag&&m[c[t].tag]<m._v||!c[t].tag&&null===c[t].match(f),!e)return!1;return e}function b(e,t){if(T(),e&&C())for(var n,r=g;r<c.length;r++)c[r].tag||((n=c[r+1])&&">"==n.tag&&(n.indent=c[r].toString()),c.splice(r,1));else t||c.push({tag:"\n"});d=!1,g=c.length}function w(e,t){var n="="+S,r=e.indexOf(n,t),i=y(e.substring(e.indexOf("=",t)+1,r)).split(" ");return h=i[0],S=i[1],r+n.length-1}for(t&&(t=t.split(" "),h=t[0],S=t[1]),p=0;p<n;p++)a==r?E(h,e,p)?(--p,T(),a=i):"\n"==e.charAt(p)?b(d):l+=e.charAt(p):a==i?(p+=h.length-1,u=m[e.charAt(p+1)],s=u?e.charAt(p+1):"_v","="==s?(p=w(e,p),a=r):(u&&p++,a=o),d=p):E(S,e,p)?(c.push({tag:s,n:y(l),otag:h,ctag:S,i:"/"==s?d-S.length:p+h.length}),l="",p+=S.length-1,a=r,"{"==s&&("}}"==S?p++:v(c[c.length-1]))):l+=e.charAt(p);return b(d,!0),c};function v(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function y(e){if(e.trim)return e.trim();return e.replace(/^\s*|\s*$/g,"")}function E(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function S(e,t,n,r){for(var i=[],o=null,a=null;e.length>0;)if(a=e.shift(),"#"==a.tag||"^"==a.tag||T(a,r))n.push(a),a.nodes=S(e,a.tag,n,r),i.push(a);else{if("/"==a.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+a.n);if(o=n.pop(),a.n!=o.n&&!C(a.n,o.n,r))throw new Error("Nesting error: "+o.n+" vs. "+a.n);return o.end=a.i,i}i.push(a)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return i}function T(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function C(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}t.generate=function(e,n,r){var i='var _=this;_.b(i=i||"");'+I(e)+"return _.fl();";if(r.asString)return"function(c,p,i){"+i+";}";return new t.Template(new Function("c","p","i",i),n,t,r)};function b(e){return e.replace(h,"\\\\").replace(s,'\\"').replace(p,"\\n").replace(g,"\\r")}function w(e){return~e.indexOf(".")?"d":"f"}function I(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n].tag;"#"==i?t+=P(e[n].nodes,e[n].n,w(e[n].n),e[n].i,e[n].end,e[n].otag+" "+e[n].ctag):"^"==i?t+=_(e[n].nodes,e[n].n,w(e[n].n)):"<"==i||">"==i?t+=k(e[n]):"{"==i||"&"==i?t+=A(e[n].n,w(e[n].n)):"\n"==i?t+=O('"\\n"'+(e.length-1==n?"":" + i")):"_v"==i?t+=D(e[n].n,w(e[n].n)):void 0!==i&&e[n].hasOwnProperty("tag")||(t+=O('"'+b(e[n])+'"'))}return t}function P(e,t,n,r,i,o){return"if(_.s(_."+n+'("'+b(t)+'",c,p,1),c,p,0,'+r+","+i+',"'+o+'")){_.rs(c,p,function(c,p,_){'+I(e)+"});c.pop();}"}function _(e,t,n){return"if(!_.s(_."+n+'("'+b(t)+'",c,p,1),c,p,1,0,0,"")){'+I(e)+"};"}function k(e){return'_.b(_.rp("'+b(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function A(e,t){return"_.b(_.t(_."+t+'("'+b(e)+'",c,p,0)));'}function D(e,t){return"_.b(_.v(_."+t+'("'+b(e)+'",c,p,0)));'}function O(e){return"_.b("+e+");"}t.parse=function(e,t,n){return n=n||{},S(e,"",[],n.sectionTags||[]);
},t.cache={},t.compile=function(e,t){t=t||{};var n=e+"||"+!!t.asString,r=this.cache[n];if(r)return r;return r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r},t.to_html=function(e,n,r){var i=e;return"string"==typeof i?i=this.compile(e):"function"==typeof i&&(i=new t.Template(i)),i.render(n,r)},"undefined"!=typeof i&&i.register("Mustache").asInstance(t)}(),i.register("WalkMeVisibilityChecker").asCtor(me).dependencies("SiteConfigManager, AbTestingManager");function me(e,t){var n=this;n.isWalkMeVisible=r;function r(){var n=0!==e.get().ShowWalkMe,r=t.shouldShowWidget();return n&&r}}i.register("WalkthruStepShower").asCtor(ve).dependencies("Logger, Lib, StaticUtils, DataFixer, ComplexHtmlElementsProvider, PositionHelper, BalloonDrawerProvider,SiteConfigManager, BalloonsContainer, WalkthruStepShowerButtonsCalculator");function ve(e,t,n,r,o,a,s,u,l,c){var d=this;d.showStep=f;function f(d,f){var p=n.secureEvalJSON(d);r.fixStep(p,0,u.get());var g=t.findElement(p);if(e.customerLog("element:",5),e.customerLog(g,5),!g)return!1;var h,m=o.getComplexHtmlElements(p,g);m&&(g=m.elements,h=m.parentElement);var v=i.create("Balloon",{element:g,parentElement:h,forceEmbedBalloonInIframe:f,positionHelper:a,stepSettings:p.Settings,text:{title:p.StepTitle,content:p.StepText,subText:""},position:p.Position,data:{stepId:p.Id,type:p.Type},buttons:c.calculate(p),configuration:p.Configuration,logger:e,drawer:s.getBalloonDrawer(p.Configuration,p),isViewStep:!0,siteConfig:u.get(),bindButtonsFunc:i.get("BalloonButtonsEventsBinder").attachBalloonXButtonClickEvent,placeholderConfigurations:p.DesignTemplatePlaceholderConfigs});return l.add(v),v.Show(!0,function(){v.SetTimeoutOn()}),v}}i.register("WalkthruStepShowerButtonsCalculator").asCtor(ye).dependencies("ArrayUtils, SharedConsts");function ye(t,n){var r=this;r.calculate=o;var i={};function o(e){if(e.Type==n.stepType.Simple)return a(e);return u(e)}function a(e){return s(e.End)?{next:!0}:{}}function s(t){return e.inArray(n.stepTrigger.Button.toString(),t.split(","))>-1}function u(e){var n=e.Settings&&e.Settings.popupStepButtons||[],r={};return t.foreach(n,function(e){var t=i[e.action];r[t]=!0}),r}function l(){var e=n.POPUP_BUTTON_ACTIONS;i[e.NextDone]="next",i[e.Start]="start",i[e.Back]="back",i[e.Cancel]="cancel"}l()}var Ee=function(){function t(e,t,n){this.logger=t,this._handlers=[],this._teardownHandlers=[]}return t.prototype.listen=function(t){this._handlers.push(t),this._messageHandler||(this._messageHandler=e.proxy(function(){this.handleMessage.apply(this,arguments)},this),window.addEventListener?window.addEventListener("message",this._messageHandler,!1):window.attachEvent("onmessage",this._messageHandler))},t.prototype.addTeardownCallback=function(e){this._teardownHandlers.push(e)},t.prototype.cleanResources=function(){for(var e=this,t=[],n=0;n<this._teardownHandlers.length;n++)t.push(this._teardownHandlers[n]());return o.all(t).then(function(){return e.releaseEventHandlers()})},t.prototype.releaseEventHandlers=function(){if(!this._messageHandler)return;window.addEventListener?window.removeEventListener("message",this._messageHandler,!1):window.detachEvent("onmessage",this._messageHandler),this._messageHandler=null,this._handlers=[]},t.prototype.handleMessage=function(e){for(var t=0;t<this._handlers.length;++t)try{this._handlers[t].apply(null,arguments)}catch(n){this.logger.error(n)}},t}();i.register("PostMessageListener").asCtor(Ee).dependencies("Consts,Logger,WmInternals"),i.register("SiteConfigManager").asCtor(Se);function Se(){var e=this;e.get=n,e.set=r;var t=[];function n(){return t}function r(e){if(t=e,t!=[]){if(i.get("CustomCssSetter").setCustomCssIfNeeded(null)===!1&&!i.get("FeaturesManager").isFeatureEnabled("loadNoStyle"))return void i.get("LibDestroyer").removeWalkMe("set custom css failed",{sendLog:!0});i.get("PositionHelper").extendVisibilityFilters()}}}i.register("LibDestroyer").asCtor(Te).dependencies("BalloonsContainer, TimerManager, CommonEvents, Consts, PositionHelper, TopContainerProvider, CommonUtils");function Te(n,r,o,a,s,u,c){var d=this,f=!1,p=[];d.releaseAllElements=E,d.releaseBalloons=S,d.releaseShoutOuts=T,d.releaseFlow=I,d.removeWalkMe=_,d.destroyAll=g,d.releaseTeachMeElements=b;function g(e){if(e&&p.push(e),f)return void i.get("Logger").customerLog("destroyAll - already destroying",1);f=!0,i.get("Logger").customerLog("destroyAll - begin",1),i.get("ClientStorageManager").releaseCallbacks(),i.get("ConditionCheckerType").cleanResources(),i.get("UIVisibilityManagerType").cleanResources(),i.get("DOMSessionManager").cleanResources(),i.get("BizFlowOnBeforeUnloadChecker").destroy(),i.get("FlowTransitionDelayer").destroy(),i.get("jQueryCacheCleaner").destroy(),m(),i.get("GoalsManager").cleanResources(),E().pipe(function(){i.get("Logger").customerLog("destroyAll - releaseAllElements finished",1)}).pipe(h).pipe(r.releaseAllTimeouts).pipe(function(){i.get("Logger").customerLog("destroyAll - calling user callbacks",1);for(var e=0;e<p.length;e++)p[e]();p=[],f=!1})}function h(){var e=i.get("CdnServer").get().replace("http://","").replace("https://","");if(mtjQuery("script[src*='"+e+"']").not("script[src*='maketutorial_lib']").not("[src*='jquery']").not("[src*='wmjQuery']").remove(),mtjQuery(".mt-to-destroy, .walkme-to-destroy").remove(),v(".mt-to-destroy, .walkme-to-destroy"),window._walkmePlayer&&window._walkmePlayer.destroyWalkMePlayer&&window._walkmePlayer.destroyWalkMePlayer(),window.walkmeWidget&&window.walkmeWidget.destroyWalkMePlayer&&window.walkmeWidget.destroyWalkMePlayer(),i.get("SmartTipSetActivationInitiator").stop(),i.entry("UIChangeTracker").wasReady()){var t=i.get("UIChangeTracker");t&&(t.stop(),t=null)}if(i.entry("PageChangeTracker").wasReady()){var n=i.get("PageChangeTracker");n&&(n.stop(),n=null)}P()}function m(){window._testMe&&(_testMe.exit(),e("script[src*='waklme_testme']").remove(),window._testMe=void 0,window.walkMeTestMeLoad=void 0,i.get("ClientStorageManager").removeData(C),window.walkMeTestMeClearStorage=void 0,window.testMeData&&(window.testMeData=void 0,i.get("Logger").customerLog(y,"Test me data cleared",1)),i.get("Logger").customerLog(y,"_testMe cleared",1))}function v(t){if(!i.get("FramesetsUtils").isFramesetsPage())return;for(var n=i.get("FramesetsUtils").getAllFramesDocuments(),r=0;r<n.length;r++)e(t,n[r]).remove()}function E(t){var n=e.Deferred();return o.raiseEvent(a.EVENTS.ReleaseAllElementsCalled),c.executeParallel({functionsToExecute:[function(e){S(e,t)},i.get("LaunchersModule").releaseLaunchers,T,w,b],successCallback:function(){I().then(n.resolve)},failCallback:n.reject}),n.promise()}function S(t,r){i.get("Logger").customerLog("Releasing balloons",5,l);var s={isDestroyingAll:f};e.extend(s,r),o.raiseEvent(a.EVENTS.CallReleaseElementsFromBalloons,s);var u=n.getAll();n.removeAll(),c.executeParallel({objectsArray:u,functionsToExecute:[function(e,t){e.destroy(!1,t)}],successCallback:t})}function T(e){i.get("ShoutOutsManager").releaseAll(e)}function b(e){i.get("CoursesManager").releaseAll(e)}function w(e){i.get("AttentionGrabberManagerAPI").remove(e)}function I(){return i.get("SmartTipSetActivationInitiator").stop(),i.get("BusinessSolutionsManager").releaseAll()}function P(e){i.get("TrackedPagesManager").releaseAll(),i.get("TrackedElementsManager").releaseAll(),i.entry("PageVisitGuidProvider").wasReady()&&i.get("PageVisitGuidProvider").releaseResources()}function _(n,r){if(r=r||{},r.sendLog){var l=i.get("EventSenderErrorLogger");l.logError("WalkMe was removed",{subType:"RemoveWalkMe",removeWalkMeReason:n,errorCode:r.errorCode})}d.removingWalkMe=!0,i.get("Logger").customerLog(cg("removeWalkMe called with reason {0}",n)),t.removeWalkMeReason=n;try{i.get("EventSenderDisabler").disable()}catch(f){}var p={reason:n,errorCode:r.errorCode};o.raiseEvent(a.EVENTS.BeforeWalkmeRemoved,p);try{window.walkme_remove_walkme_callback&&walkme_remove_walkme_callback(n)}catch(f){}g(function(){k().then(function(){var n=i.get("CdnServer").get().replace("http://","").replace("https://","");e("script[src*='"+n+"']").remove(),e("script[src*='maketutorial']").remove(),e("script[src*='wmjQuery']").remove(),e("script[id='mt_script']").remove(),e("link[id^='mt-css']").remove();u.getTopContainer();e(".walkme-to-remove").remove(),s.removeScrollAndResizeEvents(),c.unregisterEventHandler("load",e.ready,!1,window),e(window).unbind(),e(t).unbind(),A(),o.raiseEvent(a.EVENTS.AfterWalkmeRemoved,p),D(),r.callback&&r.callback()})})}function k(){return r.clearGlobalTimeouts(),i.get("CrossDomainManager").get().stop(),i.get("ResourceManager").emptyStyleSheets(),i.get("IFramesManager").releaseEvents(),i.get("AutoStartRunningState").cleanResources(),i.get("SessionPersister").cleanResources(),i.get("WindowBeforeUnloadHandler").cleanResources(),i.get("PostMessageListener").cleanResources()}function A(){if(!window._walkmeInternals)return;for(var e=i.get("WalkmeInternalsPersistWhitelist"),n={},r=0;r<e.length;r++)n[e[r]]=t[e[r]];window._walkmeInternals=n}function D(){for(var e=["wmjQuery","mtjQuery","_walkmeConfig","_walkMe","_makeTutorial","WalkMeAPI","WalkMePlayerAPI","WalkMeDataClass","WalkmeWidget","_makeTutorialEv","wmContext","WalkmeSnippet","wmPreviewSnippet","wmSnippet","walkme_lib_in_dev","walkme_lib_notify_ServerName","walkme_lib_upload_date","walkme_lib_uploader","walkme_lib_version","ClassMakeTutorial","loadWidgetWrap","loadWidget","walkme_event","walkme_post_lib_loaded","walkme_pre_lib_loaded",,"_walkmeWebpackJP","mt_cdn_server_name","mt_get_user_settings_url"],t=0;t<e.length;t++)window[e[t]]=void 0}}i.register("endUserGuidValidator").asCtor(Ce).dependencies("Consts, ServerStorageSettingsService, EndUsersManager, AuditSourceProvider, Lib,EventSenderErrorLogger, IsInEditor");function Ce(e,t,n,r,i,o,a){var s=this;s.validate=l;var u=[c,d];function l(){if(!r.isInPreviewMode()&&a.get())return;for(var e=0;e<u.length;e++){var t=u[e]();if(t)return o.logError(t.message),t}}function c(){if(!t.isServerStorageOn()||!n.isWalkMeGeneratedEndUserType())return;return{message:"Unique User Settings are not supported by server storage",code:e.EVENTS_PARAMS.WalkmeRemovedErrorCodes.cannotHaveBothUniqueUserAndServerStorage}}function d(){if(n.isEndUserGuidValid())return;return{message:"Could not retrieve end user identifier",code:e.EVENTS_PARAMS.WalkmeRemovedErrorCodes.missingUserIdentifyer}}}function be(){this.encode=function(e){return encodeURIComponent(e)},this.decode=function(e){return decodeURIComponent(e)}}function we(){var e={},t=[{from:33,to:33},{from:35,to:36},{from:38,to:43},{from:45,to:58},{from:60,to:91},{from:93,to:126}];this.encode=function(t){for(var r,i="",o=0,a=0;a<t.length;a++){var s=t.charCodeAt(a);if(!n(s)){r=t.charAt(a);var u=t.substring(o,a);e[r]||(e[r]=encodeURIComponent(r)),i+=u+e[r],o=a+1}}return i+=t.substring(o)},this.decode=function(e){try{return decodeURIComponent(e)}catch(t){return e}};function n(e){for(var n in t)if(t.hasOwnProperty(n)&&e>=t[n].from&&e<=t[n].to)return!0;return!1}}function Ie(){this.encode=function(e){return e.replace(/,/g,"%2C").replace(/"/g,"%00").replace(/'/g,"%01").replace(/;/g,"%3B")},this.decode=function(e){return e.replace(/%2C/g,",").replace(/%00/g,'"').replace(/%01/g,"'").replace(/%3B/g,";")}}i.register("DataEncoderFactory").asCtor(Pe).dependencies("SettingsFile");function Pe(e){var t="et",n=0,r={0:we,1:be,3:Ie},o="logger=Logger";this.registerEncoders=function(){i.has("DataValueEncoder")||i.register("DataValueEncoder").asCtor(a()).dependencies(o).injectToProperty(),i.has("DataNameEncoder")||i.register("DataNameEncoder").asCtor(be).dependencies(o).injectToProperty()};function a(){var i=e.getStorageType();if(i&&void 0!==i[t])return r[i[t]];return r[n]}}i.register("CommonEvents").asCtor(_e).dependencies("Logger,ApiEventRouter,EventsTriggerSyncer,WmInternals,AutomationEventForwarder").asSingleton();function _e(t,n,r,i,o){var a=this;a.raiseEvent=u,a.deprecatedRaiseEvent=l,a.sendInternalEvent=l,a.sendAutomationEvent=c;var s=window.wmjQuery&&e(i);function u(e,t){l(e,t)}function l(e,o,a){try{if(!window.wmjQuery)return;s.triggerHandler(e,[o,a]),i.dbgr&&s.triggerHandler("AllEvents",[e,o,a]),n.route(e,o,a),r.sync(e,o)}catch(u){t.error(u)}}function c(e,t){if(!window.wmjQuery)return;o.forward(e,t)}}i.register("MessageSender").asCtor(ke).dependencies("CommonEvents");function ke(e){var t=this;t.send=n;function n(t,n){return e.raiseEvent(t,n),n.returnValue}}!function(){i.register("AdditionalTemplatesHandlers").asCtor(e).asSingleton();function e(){var e=this;e.assign=n,e.get=r,e.run=i,e.hasHandler=o;var t={};function n(e,n){if(o(e))throw new Error("There is already handler assigned to the type - "+e);if("function"!=typeof n)throw new Error("'handler' must be a function");t[e]=n}function r(e){return t[e]}function i(e,t,n){var i=n,o=r(e);return o&&(i=o.apply(null,t)),i}function o(e){return!!r(e)}}}(),i.register("WMObjectNameObfMapping").asInstance({amount:"b",app:"a",browser:"c",browserName:"d",browserVersion:"e",count:"i",cVars:"f",duration:"g",env:"h",euId:"euId",euIdSource:"j",feId:"k",feVersion:"l",gitRevision:"m",instanceId:"n",interactionGuid:"o",ip:"p",key:"q",language:"r",libVersion:"s",local:"t",message:"u",misc:"v",mobile:"w",name:"x",os:"y",pageTitle:"z",permId:"aa",platform:"ab",publishDate:"ac",publishEnv:"ad",quantity:"ae",reason:"af",sesId:"ag",sessionId:"ah",sum:"ai",time:"timestamp",total:"ak",type:"al",uId:"uId",url:"an",urlWithoutQueryString:"ap",userVars:"ao",result:"aq",score:"ar",version:"ax"}),i.register("WMObjectNameObfMapper").asFunction(Ae).dependencies("WMObjectNameObfMapping,EventSenderErrorLogger");function Ae(e,t){return function(n){"object"!=typeof n&&(n={message:n});var r={};for(var i in n)void 0===e[i]?t.logError("no such key you try to encode ",i):r[e[i]]=n[i];return r}}i.register("StaticWMDataProvider").asFunction(De).dependencies("EventSenderEnvironmentDataProvider,EventCollectorWalkMeDataProvider,WalkMeInfo,SettingsFile");function De(t,n,r,i){return function(){var o=t.getEnvironmentData(),a=n.getWalkMeData(),s=window.walkme_lib_in_dev===!0?{local:!0}:{};return e.extend({libVersion:r.getLibVersion(),publishDate:r.getPublishDate(),publishEnv:i.getSettingsFile().Environment},o,a,s)}}i.register("AutomationEventDataAppender").asCtor(Oe);function Oe(){var t=this;t.append=n;function n(t,n,r){t.Type=r,n&&e.extend(t,n)}}i.register("EventDataAppender").asCtor(Ne);function Ne(){var e=this;e.append=t;function t(e,t,n){e.Type=n,t&&(e.ExtraData=t)}}i.register("ApiEventForwarder").asCtor(xe).asProto().dependencies();function xe(e){var t=this;t.forward=o;var n,r;function i(){n=e.apiEventsConfigProvider&&e.apiEventsConfigProvider.get(),r=e.apiEventRaiser}function o(e,t,i){var o=n&&n[e]&&n[e].transform;if(o){var a=o(t,i);r.raise(a.name,a.data)}else r.raise(e,t)}i()}i.register("NewApiEventForwarder").dependencies("NewApiEventsConfigProvider, EventDataAppender").asFunction(function(e,t){var n={apiEventsConfigProvider:e,apiEventRaiser:i.create("ApiEventRaiser",{windowFuncName:"walkme_event",dataAppenders:[t]})};return i.create("ApiEventForwarder",n)}),i.register("OldApiEventForwarder").dependencies("OldApiEventsConfigProvider, EventDataAppender").asFunction(function(e,t){var n={apiEventsConfigProvider:e,apiEventRaiser:i.create("ApiEventRaiser",{windowFuncName:"mt_event",dataAppenders:[t]})};return i.create("ApiEventForwarder",n)}),i.register("EditorApiEventForwarder").dependencies("EditorApiEventsConfigProvider, EventDataAppender").asFunction(function(e,t){var n={apiEventsConfigProvider:e,apiEventRaiser:i.create("ApiEventRaiser",{windowFuncName:"walkme_editor_event",dataAppenders:[t]})};return i.create("ApiEventForwarder",n)}),i.register("AutomationEventForwarder").dependencies("AutomationEventDataAppender").asFunction(function(e){var t={apiEventRaiser:i.create("ApiEventRaiser",{windowFuncName:"walkme_automation_event",dataAppenders:[e]})};return i.create("ApiEventForwarder",t)}),i.register("ApiEventRaiser").asCtor(Le).asProto().dependencies("Logger, win, ApiEventRaisersContainer");function Le(t,n,r,i){var o=this;o.raise=l,o.addAppender=u;var a;function s(){a=i.dataAppenders,r.add(o)}function u(e){a.push(e)}function l(e,r){try{if(n[i.windowFuncName]){var o=c(e,r);n[i.windowFuncName](o)}}catch(a){t.error(a)}}function c(t,n){var r={};return e.each(a,function(e,i){i.append(r,n,t)}),r}s()}i.register("ApiEventRaisersContainer").asCtor(Fe);function Fe(){var e=this;e.add=r,e.get=n;var t=[];function n(){return t}function r(e){t.push(e)}}i.register("ApiEventRouter").asCtor(Me).dependencies("NewApiEventsConfigProvider, NewApiEventForwarder, OldApiEventsConfigProvider, OldApiEventForwarder, EditorApiEventForwarder");function Me(e,t,n,r,i){var o=this;o.route=a;function a(o,a,s){var u=!!e.get()[o];u&&(t.forward(o,a,s),i.forward(o,a,s));var l=!!n.get()[o];l&&r.forward(o,a,s)}}var Be=function(){function e(){}return e.prototype.sync=function(e,t,n){return n},e}();i.register("EventsTriggerSyncer").asCtor(Re).dependencies("EventsTrigger");function Re(t){var n=this;n.sync=i;function r(){}function i(n,r){var i=r?r.defaultValue:void 0,o=t.sync(n,r,i);r&&void 0!==o&&(r.returnValue=o),r&&r.asyncCallback&&(o&&o.then?o.then(r.asyncCallback,r.asyncFailback):e.when(o).then(r.asyncCallback,r.asyncFailback))}r()}i.has("EventsTrigger")||i.register("EventsTrigger").asInstance(new Be),i.register("NewApiEventsConfigProvider").asCtor(Ue).dependencies("Consts");function Ue(e){var t=this;t.get=r;function n(){}function r(){var t={};return t[e.EVENTS.Walkthrus.StepShown]={transform:o},t[e.EVENTS.Launchers.LauncherIsShown]={transform:i},t[e.EVENTS.TaskCompleted]={},t[e.EVENTS.TasksLoaded]={},t[e.EVENTS.Launchers.LauncherClicked]={},t[e.EVENTS.Goals.GoalReached]={},t.ABTestingGoalsFetched={},t[e.EVENTS.UIComponentDestroyed]={},t[e.EVENTS.DeployableCreated]={},t.SurveyPlayed={},t.SurveyCompleted={},t.BalloonCreated={},t.WalkthruAborted={},t.WalkthruStopped={},t.UserStoppedWalkthru={},t.UserStoppedWalkthruAfterStop={},t.WalkthruFailedToStart={},t.WalkthruCompleted={},t.BeforeNewStepShown={},t.BackButtonClicked={},t.NextButtonClicked={},t.DoneButtonClicked={},t.SfVarsExposed={},t.BBCodeLinkClicked={},t.FailureMessageOkButtonPressed={},t.StorageManagerInitialized={},t[e.EVENTS.StorageLoaded]={},t[e.EVENTS.WalkmeLoaded]={},t[e.EVENTS.Flows.UIFlowStageShown]={},t[e.EVENTS.Flows.FlowCompleted]={},t[e.EVENTS.Flows.FailedToStart]={},t[e.EVENTS.Flows.FlowStopped]={},t[e.EVENTS.Flows.FlowStarted]={},t[e.EVENTS.Flows.BeforeExecutingFlowStage]={},t[e.EVENTS.Flows.AfterCompletingFlowStage]={},t[e.EVENTS.SmartTips.TooltipShown]={},t[e.EVENTS.SmartTips.SmartTipIconShown]={},t[e.EVENTS.BeforeWalkmeRemoved]={},t[e.EVENTS.AfterWalkmeRemoved]={},t}function i(t,n){return{name:e.EVENTS.Launchers.LauncherIsShown,data:n}}function o(t,n){return{name:e.EVENTS.Walkthrus.StepShown,data:n}}n()}i.register("EditorApiEventsConfigProvider").asCtor(Ve).dependencies("NewApiEventsConfigProvider");function Ve(e){var t=this;t.get=n;function n(){var t=e.get();return t.WalkthruCompleted={transform:function(e,t){return{name:"WalkthruCompleted",data:{WalkThru:e,AdditionalData:t}}}},t}}i.register("OldApiEventsConfigProvider").asCtor(We).dependencies("Consts");function We(e){var t=this;t.get=r;function n(){}function r(){var t={};return t[e.EVENTS.Walkthrus.StepShown]={transform:o},t.WalkthruStopped={transform:i("TutorialStopped")},t.UserStoppedWalkthru={transform:i("UserStoppedTutorial")},t.UserStoppedWalkthruAfterStop={transform:i("UserStoppedTutorialAfterStop")},t.WalkthruCompleted={transform:i("TutorialCompleted")},t.BeforeNewStepShown={},t.BackButtonClicked={},t.NextButtonClicked={},t.DoneButtonClicked={},t}function i(e){return function(t,n){return{name:e,data:t}}}function o(t,n){return{name:e.EVENTS.Walkthrus.StepShown,data:n}}n()}i.register("PostMessage").asInstance(window.postMessage),i.register("NativeTimerFunctionsProvider").asCtor(Ge).asSingleton();function Ge(){var e=this;e.get=function(){return{clearTimeout:window.NREUM&&NREUM.o&&NREUM.o.CT||window.clearTimeout,clearInterval:window.clearInterval,setTimeout:window.NREUM&&NREUM.o&&NREUM.o.ST||window.setTimeout,setInterval:window.setInterval}}}i.register("TimerManager").asCtor(He).asSingleton().dependencies("CommonEvents,Consts,NativeTimerFunctionsProvider,Logger");function He(e,n,r,o){var a=this;a.setWalkmeTimeout=k,a.setWalkmeInterval=A,a.playSetTimeout=v,a.playSetInterval=E,a.libSetTimeout=y,a.releaseAllTimeouts=T,a.clearGlobalTimeouts=P,a.releaseTimeoutsArray=w,a.stopTimeoutsArray=w,a.pauseAllTimeouts=C,a.pauseTimeoutsArray=I,a.resumeTimeoutsArray=S,a.resumeAllTimeouts=b,a.overrideTimeouts=_;var s=r.get(),u={libTimeouts:{},playTimeouts:{}},l=[],c="wm-",d={};e.raiseEvent(n.EVENTS.TimerManagerCreationStarted,{object:a});var f=s.setTimeout,p=s.setInterval,g=s.clearTimeout,h=s.clearInterval;function m(e,t){var n=void 0!==d[c+e];if(n)return;t(e)}function v(e,t){return new L(e,t,u.playTimeouts)}function y(e,t){return new L(e,t,u.libTimeouts)}function E(e,t){return new F(e,t,u.playTimeouts)}function S(e){var t=u[e];if(t){for(var n=0;n<l.length;n++)l[n].resume();l.length=0}}function T(){a.releaseTimeoutsArray("libTimeouts"),a.pauseTimeoutsArray("playTimeouts")}function C(){for(var e in u)a.pauseTimeoutsArray(e)}function b(){for(var e in u)a.resumeTimeoutsArray(e)}function w(e){var t=u[e];t&&M(t,function(e){e.clear()})}function I(e){var t=u[e];t&&M(t,function(e){l.push(e),e.pause()})}function P(){for(var e in d)e&&e.indexOf&&0===e.indexOf(c)&&O(d[e])}function _(){var e=i.get("FeaturesManager");e.isFeatureEnabled("overridetimeouts")&&(window.clearTimeout=function(e){m(e,O)},window.clearInterval=function(e){m(e,N)})}function k(e,t){return new L(e,t)}function A(e,t){return p(D(e),t)}function D(e){return t.walkmeWrap?function(){t.walkmeWrap.apply(this,[e])}:e}function O(e){g(e)}function N(e){h(e)}function x(e,t){var n=t&&/function ([\w\d\_]+)\(/.exec(t.toString());i.has("EventSenderErrorLogger")&&i.get("EventSenderErrorLogger").logError(e.message,{functionName:n&&n[1]}),o.customerLog("TimerManager error: "+(e&&e.message))}function L(e,t,n){this.fn=e,this.interval=t,this.timeoutsDict=n||{};var r=this;this.id=f(function(){r.run()},t),this.timeoutsDict[this.id]=this,d[c+this.id]=this.id}L.prototype.timeoutWrap=function(){this.clear();try{this.fn.apply(window)}catch(e){x(e,this.fn)}},L.prototype.run=function(){if(t.walkmeWrap){var e=this;t.walkmeWrap(function(){e.timeoutWrap()})}else this.timeoutWrap()},L.prototype.resume=function(){if(this.cleared)return;var e=this;this.id=f(function(){e.run()},10),this.timeoutsDict[this.id]=this},L.prototype.id=null,L.prototype.cleared=!1,L.prototype.clear=function(){if(this.cleared)return;O.call(window,this.id),this.cleared=!0,delete this.timeoutsDict[this.id],delete d[c+this.id]},L.prototype.pause=function(){if(this.cleared)return;delete this.timeoutsDict[this.id],O.call(window,this.id)};function F(e,n,r,i,o){this.timeoutsDict=r,i=i||window;var a=function(){e.apply(i,o||arguments)},s=function(){t.walkmeWrap?t.walkmeWrap(a):a()};this.id=p(s,n),r[this.id]=this,d[c+this.id]=this.id}F.prototype.id=null,F.prototype.cleared=!1,F.prototype.clear=function(){O(this.id),this.cleared=!0,delete d[c+this.id],delete this.timeoutsDict[this.id]};function M(e,t){for(var n in e)if(e.hasOwnProperty(n))try{t(e[n])}catch(r){}}}i.register("MutationObserverWrapper").asCtor(je);function je(){var e=this;e.isEnabled=n,e.watchElement=r;var t={childList:!0,attributes:!0,subtree:!0};function n(){return!1}function r(e,n){var r=new MutationObserver(n);return r.observe(e[0],t),{unbind:function(){r.disconnect()}}}}!function(){var e="mt",t=0,n={0:Ye,2:ze};i.has("DataMinifier")||i.register("DataMinifier").asFunction(function(r,i,o){var a=s();return new a(r,o);function s(){var r=i.getStorageType(),o=r&&r[e];return n[o||t]}}).dependencies("CommonUtils,SettingsFile,Logger")}();function Ye(){var e,t=this;function n(t,n){e=i.get("CJson")}t.minifyData=function(t){if(!t||0==t.length)return;return e.stringify(t)},t.deminifyData=function(t){if(!t)return;return e.parse(t)},n.apply(null,arguments)}function ze(){var e,t=this;function n(t,n){e=t}t.minifyData=function(t){if(!t||0==t.length)return;return e.toJSON(t)},t.deminifyData=function(t){if(!t)return;return e.secureEvalJSON(t)},n.apply(null,arguments)}i.register("TypedDataSender").asCtor(Qe).asProto();function Qe(){var e,t,n,r,i,o,a,s,u,l,c,d,f,p,g,h,m,v,y,E,S=this,T=[],C=10;function b(c){var C=c.stateManager;e=c.serverDataSenderManager,r=c.actionUrl,n=c.beforeSendingManipulationFunc,i=c.technicalSuccessHandler,o=c.sendingThreshold,a=c.dataType,s=c.dateSenderLogFeature,l=c.requestParamsFunc,d=c.logError,u=c.logger.wrapCustomerLog(s),f=c.dataIdFieldName||"iN",h=c.successCallback,m=c.failCallback,y=c.shouldTruncateData,E=C.keysConfig.typedDataSender.nextItemNumber.key,v=c.storageEnabled!==!1,v&&(g=c.defaultDataStorageLifeSeconds,p=new Ia(C,c.twoLettersDataType),t=new le(p,g,d,c.recursiveMinification),T=S.data())}function w(){var e=0;return v&&(e=p.getFromStorage(E,0),p.saveToStorage(E,e+1,g)),e}S.isStorageEnabled=function(){return v},S.sendData=function(t){if("object"!=typeof t){var r=cg("TypedDataSender - got object with value {0} of type {1} instead of object ({2}).",t,typeof t,a);return void u(r,1)}function i(){if(c)return void u("Not accepting anymore data",3);if(T=S.data(),e.isServerSick()){if(y===!1&&T.length<C)o();else{var t=cg("TypedDataSender - Server is sick, ignoring new data of type {0} for now",a);u(t,3)}return}o(),e.sendData()}function o(){v||(T.length=0),n&&n(T,t),t[f]=w(),T.push(t),v&&I()}v?p.refreshGetData(null,i):i()},S.persistData=function(){v&&(I(),T&&0!=T.length||p.removeFromStorage(E))};function I(){t.saveData(T)}S.data=function(){return v&&P(),T=T?T:[]};function P(){T=t.getData()}S.actionUrl=function(){return r},S.sendingThreshold=function(){return o},S.dataType=function(){return a},S.truncateData=function(){v&&(T=S.data(),T.splice(1,T.length-1),S.persistData())},S.clearAndStopSavingData=function(){c=!0,T.length=0,v&&t.removeData()},S.technicalSuccessHandler=function(){return i},S.successCallback=function(){return h},S.failCallback=function(){return m},S.requestParamsFunc=function(){return l},S.getDataIdFieldName=function(){return f},S.shouldTruncateData=function(){return y},b.apply(null,arguments)}i.register("ServerDataSenderManagerParams").asInstance({defaultDataStorageLifeSeconds:900,dateSenderLogFeature:"serverDataSender"}),i.register("ServerDataSenderManager").asCtor(qe).dependencies("Lib,Logger,RecorderServerManager,ServerDataSenderManagerParams,ClientStorageManager,WmAjax,FeaturesManager,TimerManager,Consts");function qe(e,t,n,r,i,o,a,s,u){var l,c,d,f,p,g,h,m,v,y,E,S=1e3,T=60*S,C=i.keysConfig.serverDataSender.serverSick.key,b=i.keysConfig.serverDataSender.serverSickAttempts.key,w=i.keysConfig.serverDataSender.serverSickTimestamp.key,I=2,P=3*S,_=60*S,k={1:T,2:4*T},A={Success:0,LogicalError:1,TechnicalError:2},D=this,O={};function N(){f=r.defaultDataStorageLifeSeconds,p=r.dateSenderLogFeature,h=r.maxSickAttemps||I,v=r.sendDataAjaxTimeout||_,m=r.checkDataToSendInterval||P,E=r.attemptsWaitTime||k,g=t.wrapCustomerLog(p)}D.register=function(e,n){if(O[e])return O[e];var r=new Qe({beforeSendingManipulationFunc:n.beforeSendingManipulationFunc,actionUrl:n.actionUrl,technicalSuccessHandler:n.technicalSuccessHandler,successCallback:n.successCallback,failCallback:n.failCallback,dataType:n.dataType,twoLettersDataType:e,serverDataSenderManager:D,sendingThreshold:n.sendingThreshold,stateManager:i,storageEnabled:n.storageEnabled!==!1,dateSenderLogFeature:p,requestParamsFunc:n.requestParamsFunc,dataIdFieldName:n.dataIdFieldName,defaultDataStorageLifeSeconds:void 0!=n.dataStorageLifetimeSeconds?n.dataStorageLifetimeSeconds:f,logError:t.error,logger:t,recursiveMinification:n.recursiveMinification,shouldTruncateData:n.shouldTruncateData!==!1});return O[e]=r,r},D.start=function(e){D.sendData()},D.stop=function(e){B(),D.removeAllData(),null!=d&&(d.clear(),d=null),null!=y&&(y.clear(),d=null)},D.sendData=function(){var e=x();if(!e||R())return;var t=e.dataSender,n=e.data;if(D.isServerSick())return g("Waiting for server's health in sendData",3),void V();if(n.length>=t.sendingThreshold())g(cg("sendData - Got {0} {1}s to send, starting now",n.length,t.dataType()),3),null!=d&&(d.clear(),d=null),Y(n,t);else if(null==d||d.cleared){var r=cg("Got {0} {1}s to send, waiting {2}",n.length,t.dataType(),m);g(r,3),d=s.libSetTimeout(function(){d=null,i.refreshGetData(null,function(){var e=x();if(!e||R())return;var t=e.dataSender,n=e.data;Y(n,t)})},m)}else g("sendData - timeout already exists",5)},D.isServerSick=function(){return M(),i.getData(C)||!1};function x(){var e=L();if(!e)return g("serverDataSenderManager - no data to send. marking it healthy",3),void j();return e}function L(){for(var e=F(),t=e.length-1;t>=0;t--){var n=e[t],r=n.data();if(r.length>0)return{dataSender:n,data:r}}}function F(){return pg(O)}function M(){var e=L(),t=e&&e.data;t||j()}function B(){i.removeData(C),i.removeData(b),i.removeData(w)}function R(){if(l)return g("There's already a pending request to server",3),!0;return!1}function U(){var e=x();if(!e||R())return;var t=e.dataSender,n=e.data;g(cg("Got {0} {1}s to send, starting now",n.length,t.dataType()),3),Y(n,t)}function V(){if(c)return void g("Already waiting for server's health",5);null!=d&&(d.clear(),d=null),c=!0;var e=i.getData(b);if(e=e?++e:1,e>h){var t=cg("Server wasn't healthy for more than {0} attempts, restarting sick mode",e);g(t,0),i.removeData(w),i.removeData(b),c=!1,V()}else{var n=W(e),r=cg("Sick attempts: {0}, time before next retry: {1} second(s)",e,n/1e3);g(r,3),y=s.libSetTimeout(function(){i.refreshGetData(null,function(){i.removeData(w),i.saveData(b,e,f),c=!1,U()})},n)}}function W(e){var t=i.getData(w);if(!t){var n=G(e);t=(new Date).getTime()+n,i.saveData(w,t,f)}var r=t-(new Date).getTime();return r}function G(e){return E[e]}function H(){i.getData(C);j(),l=!1,U()}function j(){i.removeData(C),i.removeData(b),i.removeData(w),c=!1}function Y(e,t){if(0==n.get().length)return void g(cg("RecorderServerName is {0}, can't send data of type {1}",n.get(),t.dataType()),2);if(0==e.length)return void g("dataArray's length is 0, no data to send",3);null!=d&&(d.clear(),d=null),l=!0;var r=t.sendingThreshold(),i=lg(e);i.length>r&&(i=i.splice(0,r));var s=t.requestParamsFunc()(i);a.isFeatureEnabled(u.FEATURES.DontMaskEndUserAddress)&&(s.dmeua=1);var c=o.execute({url:n.get()+t.actionUrl(),dataType:"jsonp",data:s,timeout:v});a.isFeatureEnabled("bypassAuditServer")?Q(i,c,t):q(i,c,t);var f=cg("Sent {0} data of type {1} to server at {2}",i.length,t.dataType(),(new Date).toString());g(f,3)}function z(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r],o=i[t];o&&o>n&&(n=o)}return n}function Q(e,t,n){t.error(function(t,r,i){if(200==t.status&&"parsererror"==r)X(e,n);else{var o=cg("Server technical (AJAX) error (2) jqXHR:{0}, textStatus:{1}, errorThrown:{2}",rg(t),r,i);g(o,3),ee(i,n)}}),t.success(function(e){var t="Got success while in bypass player server mode";g(t,3),_makeTutorial.Logger.error(null,t)})}function q(e,t,n){t.success(function(t){if(g("Sending data ajax success",3),!window._walkMe)return;K(t,e,n)}),t.error(function(t,r,i){200==t.status&&"parsererror"==r?Z(e,n,i):ee(i,n)})}function K(e,t,n){if(n.technicalSuccessHandler&&n.technicalSuccessHandler())n.technicalSuccessHandler()(e,function(){var r=e.Data||e;Z(t,n,r)},function(){ee(e.Data||e,n)},function(){var r=e.Data||e;X(t,n,r)},t);else switch(e.WMResultCode){case A.Success:X(t,n,e.Data);break;case A.LogicalError:g(n.dataType()+" : Logical error sending data. "+e.Data,3),Z(t,n,e.Data);break;case A.TechnicalError:g(n.dataType()+" : Technical error sending data",3),ee(e.Data||e,n);break;default:g(n.dataType()+" : No error code received - treated as technical error",3),ee(e.Data||e,n)}}function X(e,t,n){if(g("The technical success was also logical success",3),J(e,t),H(),t.successCallback){var r=t.successCallback();r&&r(n)}}function J(e,t){$(e,t)}function $(e,t){for(var n=t.getDataIdFieldName(),r=z(e,n),i=t.data(),o=i.length-1;o>=0;o--){
var a=i[o];a[n]<=r&&i.splice(o,1)}t.persistData()}D.removeAllData=function(){for(var e=F(),t=e.length-1;t>=0;t--)e[t].clearAndStopSavingData()};function Z(e,t,n){if(g(cg("Logical error happened, discarding {0} {1}",e.length,t.dataType()),3),$(e,t),H(),l=!1,U(),t&&t.failCallback){var r=t.failCallback();r&&r(n)}}function ee(e,t){if(i.saveData(C,1,f),g("Truncating data due to sick server",3),te(),l=!1,t&&t.failCallback){var n=t.failCallback();n&&n(e)}V()}function te(){for(var e=F(),t=e.length-1;t>=0;t--){var n=e[t];n.shouldTruncateData()&&n.truncateData()}}N.apply(null,arguments)}i.register("AjaxManager").asCtor(Ke).dependencies("FeaturesManager, WmjQueryAjaxProvider, AjaxProxyProvider, Consts, win");function Ke(e,t,n,r,i){var o=this,a=r.AJAX_PROVIDERS.wmjQueryAjaxProvider;function s(){}o.init=function(){a=r.AJAX_PROVIDERS.wmjQueryAjaxProvider,i._walkmeInternals&&i._walkmeInternals.bind&&i._walkmeInternals.bind("dataFilesLoaded",function(){e.isFeatureEnabled("ajaxProxy")&&(n.init(),a=r.AJAX_PROVIDERS.ajaxProxyProvider)})},o.getProvider=function(){var e;switch(a){case r.AJAX_PROVIDERS.ajaxProxyProvider:e=n;break;default:e=t}return e},s.apply(null,arguments)}i.register("AjaxProxyProvider").asCtor(Xe).dependencies("AjaxProxyIframeManager");function Xe(t){var n=this;n.init=r,n.callAjax=i;function r(){t.init()}function i(n){var r=e.Deferred(),i=o(r);return t.postMessage(n,r.resolve),n.success&&i.success(n.success),n.error&&i.error(n.error),i}function o(e){return{success:function(t){e.promise().then(function(e){e.success&&t(e.data)})},error:function(t){e.promise().then(function(e){e.success||t(e.data.jqXHR,e.data.textStatus,e.data.errorThrown)})},abort:function(){e.promise().then(function(e){t.abort(e.requestIndex)})}}}}i.register("WmjQueryAjaxProvider").asCtor(Je);function Je(){var t=this;t.callAjax=n;function n(t){return e.ajax(t)}}i.register("WmAjax").asCtor($e).dependencies("CommonEvents, FeaturesManager, AjaxManager, CorsSupportIndicator");function $e(e,t,n,r){var i,o,a=this,s=e;function u(){}a.setFeatures=function(e,t){i=e,o=t},a.execute=function(e){return e.dataType=e.dataType?e.dataType:"jsonp","jsonp"===e.dataType&&(i||o&&r.hasCorsSupport())&&l(e),s.sendAutomationEvent("ajaxSent",e),n.getProvider().callAjax(e)},a.loadTextFile=function(e,t,n,r,i){r=r||function(e,t,n){},mtjQuery.ajax(e,{cache:!!i,dataType:"jsonp",jsonpCallback:t,success:n,error:r})};function l(e){e.dataType="json"}u.apply(null,arguments)}var Ze;!function(e){var t=function(){function e(e,t){this.callback=t,this.timeoutMs=e}return e.prototype.start=function(e){var t=this;if(!this.enabled){this.enabled=!0;var n=e||this.timeoutMs;this.timerHandle=i.get("TimerManager").setWalkmeTimeout(function(){t.onTick()},n)}},e.prototype.onTick=function(){this.enabled=!1,this.callback()},e.prototype.stop=function(){this.timerHandle&&(this.timerHandle.clear(),this.timerHandle=null),this.enabled=!1},e.prototype.restart=function(){this.stop(),this.start()},e.prototype.isEnabled=function(){return this.enabled},e}();e.SimpleTimer=t,function(e){e[e.Chrome=6]="Chrome"}(e.BrowserConnectionLimit||(e.BrowserConnectionLimit={}));e.BrowserConnectionLimit}(Ze||(Ze={}));var Ze;!function(t){var n;!function(n){var r=function(){function n(e){this.maxConnections=t.BrowserConnectionLimit.Chrome,this.postEventAction=e.postEventAction,this.healthCheckAction=e.healthCheckAction,this.retryParameterName=e.retryParameterName,this.allocateImages()}return n.prototype.getChannelType=function(){return"ImageChannel"},n.prototype.getChannelMethod=function(){return"GET"},n.prototype.setBaseUrl=function(e){this.baseUrl=e},n.prototype.getBaseUrl=function(){return this.baseUrl},n.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},n.prototype.getRetryParamName=function(){return this.retryParameterName},n.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},n.prototype.getLineBreak=function(){return"\n"},n.prototype.checkHealth=function(){e.get(this.getHealthCheckUrl())},n.prototype.send=function(e,t,n,r){var i=this,o=encodeURIComponent(e),a=this.assertFree();a.attr(this.getBusyFlag(),"true");var s=this.getPostEventUrl()+"?"+this.getURLQueryParamKey()+"="+o;r&&(s+="&"+this.getRetryParamName()+"="+r),a.load(function(){a.unbind("load"),a.attr(i.getBusyFlag(),"false"),i.whenFreeCallback&&i.whenFreeCallback(),t&&t(),i.successCallback&&i.successCallback()}).error(function(){n&&n(null,null,null),i.failCallback&&i.failCallback(null,null,null)}),a.attr("src",s)},n.prototype.isInitialized=function(){return!!this.baseUrl},n.prototype.isAvailable=function(){var e=this.getFreeImg();return null!==e},n.prototype.isIdle=function(){for(var e=0;e<this.images.length;e++)if(!this.isImageFree(this.images[e]))return!1;return!0},n.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},n.prototype.estimateDataSize=function(e){return encodeURIComponent(e).length},n.prototype.maxPacketSize=function(){var e="?"+this.getURLQueryParamKey()+"=&"+this.getRetryParamName()+"=";return this.getMaxUrlSize()-this.getPostEventUrl().length-e.length-2},n.prototype.channelBandwidth=function(){return t.BrowserConnectionLimit.Chrome*this.maxPacketSize()},n.prototype.whenFree=function(e){this.whenFreeCallback=e},n.prototype.fail=function(e){this.failCallback=e},n.prototype.success=function(e){this.successCallback=e},n.prototype.getFreeImg=function(){for(var e=0;e<this.images.length;e++)if(this.isImageFree(this.images[e]))return this.images[e];return null},n.prototype.isImageFree=function(e){return"false"===e.attr(this.getBusyFlag())},n.prototype.allocateImages=function(){this.images=[];for(var e=0;e<this.maxConnections;e++){var t=this.createImage();this.images.push(t)}},n.prototype.createImage=function(){var t=e("<img/>");return t.css("width","1px"),t.css("height","1px"),t.attr(this.getBusyFlag(),"false"),t},n.prototype.getMaxUrlSize=function(){return 2048},n.prototype.getBusyFlag=function(){return"_WM_BUSY_"},n.prototype.getURLQueryParamKey=function(){return"ed"},n.prototype.assertFree=function(){var e=this.getFreeImg();if(!e)throw"Channel is at max capacity. Can't send anymore data.";return e},n.prototype.getCurrentImages=function(){return this.images.slice(0)},n.prototype.dispose=function(){for(var e=0;e<this.images.length;e++)this.images[e].remove()},n}();n.ImageChannel=r}(n=t.Channels||(t.Channels={}))}(Ze||(Ze={}));var Ze;!function(t){var n;!function(n){var r=function(){function n(e){this.maxConnections=t.BrowserConnectionLimit.Chrome,this.currentOpenConnections=0,this.postEventAction=e.postEventAction,this.healthCheckAction=e.healthCheckAction,this.requestTimeoutMs=e.requestTimeoutMs,this.retryParameterName=e.retryParameterName}return n.prototype.getChannelType=function(){return"AjaxChannel"},n.prototype.getChannelMethod=function(){return"POST"},n.prototype.setBaseUrl=function(e){this.baseUrl=e},n.prototype.getBaseUrl=function(){return this.baseUrl},n.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},n.prototype.getRetryParamName=function(){return this.retryParameterName},n.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},n.prototype.getLineBreak=function(){return"\n"},n.prototype.checkHealth=function(){e.get(this.getHealthCheckUrl())},n.prototype.send=function(e,t,n,r){if(!this.isAvailable())throw new Error("Channel is at max capacity. Can't send anymore data.");var o=this;this.currentOpenConnections++;var a=this.getPostEventUrl();r&&(a+="?"+this.getRetryParamName()+"="+r);var s=i.get("WmAjax").execute({url:a,data:e,contentType:"text/plain",type:"POST",dataType:"html",timeout:this.requestTimeoutMs||2e3});s.success(function(e){t&&t(),o.successCallback&&o.successCallback(),o.singleLinkFree()}),s.error(function(e,t,r){n&&n(e,t,r),o.failCallback&&o.failCallback(e,t,r),o.singleLinkFree()})},n.prototype.isInitialized=function(){return!!this.baseUrl},n.prototype.isAvailable=function(){var e=this.currentOpenConnections<this.maxConnections;return e},n.prototype.isIdle=function(){return 0===this.currentOpenConnections},n.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},n.prototype.estimateDataSize=function(e){return e.length},n.prototype.maxPacketSize=function(){return 9e3},n.prototype.channelBandwidth=function(){return t.BrowserConnectionLimit.Chrome*this.maxPacketSize()},n.prototype.whenFree=function(e){this.whenFreeCallback=e},n.prototype.fail=function(e){this.failCallback=e},n.prototype.success=function(e){this.successCallback=e},n.prototype.singleLinkFree=function(){this.currentOpenConnections--,this.whenFreeCallback&&this.whenFreeCallback()},n}();n.AjaxChannel=r}(n=t.Channels||(t.Channels={}))}(Ze||(Ze={}));var Ze;!function(t){var n;!function(t){!function(e){e[e.PostNativeCors=0]="PostNativeCors",e[e.GetImage=1]="GetImage",e[e.PostIECorsPlugin=2]="PostIECorsPlugin"}(t.CompatibilityChannelMode||(t.CompatibilityChannelMode={}));var n=t.CompatibilityChannelMode,r=function(){function r(e){var n=this;this.config=e,this.sendFn=function(i,o,a,s){var u=!1,l=function(s,l,c,d){if(!u){u=!0;var f=new t.ImageChannel(e);f.setBaseUrl(n.underlyingChannel.getBaseUrl()),n.underlyingChannel=f,r(i,o,a,d)}};try{r(i,o,function(e,t,n,r){l(e,t,n,r)},s)}catch(c){l(null,null,null)}n.sendFn=r};var r=function(e,t,r,i){n.underlyingChannel.send(e,t,r,i)}}return r.prototype.getChannelType=function(){return"CompatibilityChannel."+this.underlyingChannel.getChannelType()},r.prototype.getChannelMethod=function(){return n[this.mode]},r.prototype.getBaseUrl=function(){return this.underlyingChannel.getBaseUrl()},r.prototype.setBaseUrl=function(e){var t=this.checkCompatibility(),n=new RegExp("^(//|"+location.protocol+")","i"),r=n.test(e),i=this.pickChannel(t,this.config,r);i.setBaseUrl(e),this.underlyingChannel=i},r.prototype.getPostEventUrl=function(){return this.underlyingChannel.getPostEventUrl()},r.prototype.getHealthCheckUrl=function(){return this.underlyingChannel.getHealthCheckUrl()},r.prototype.getRetryParamName=function(){return this.underlyingChannel.getRetryParamName()},r.prototype.getLineBreak=function(){return this.underlyingChannel.getLineBreak()},r.prototype.checkHealth=function(){e.get(this.underlyingChannel.checkHealth())},r.prototype.send=function(e,t,n,r){this.sendFn(e,t,n,r)},r.prototype.isInitialized=function(){return!!this.underlyingChannel&&this.underlyingChannel.isInitialized()},r.prototype.isAvailable=function(){return this.underlyingChannel.isAvailable()},r.prototype.isIdle=function(){return this.underlyingChannel.isIdle()},r.prototype.withinSizeLimit=function(e){return this.underlyingChannel.withinSizeLimit(e)},r.prototype.estimateDataSize=function(e){return this.underlyingChannel.estimateDataSize(e)},r.prototype.maxPacketSize=function(){return this.underlyingChannel.maxPacketSize()},r.prototype.channelBandwidth=function(){return this.underlyingChannel.channelBandwidth()},r.prototype.whenFree=function(e){this.underlyingChannel.whenFree(e)},r.prototype.fail=function(e){this.underlyingChannel.fail(e)},r.prototype.success=function(e){this.underlyingChannel.success(e)},r.prototype.pickChannel=function(e,r,i){switch(this.mode=e,e){case n.PostIECorsPlugin:return i?new t.AjaxChannel(r):new t.ImageChannel(r);case n.PostNativeCors:return new t.AjaxChannel(r);case n.GetImage:return new t.ImageChannel(r)}},r.prototype.checkCompatibility=function(){return void 0!==(new XMLHttpRequest).withCredentials?n.PostNativeCors:"undefined"!=typeof window.XDomainRequest?n.PostIECorsPlugin:n.GetImage},r}();t.CompatibilityChannel=r}(n=t.Channels||(t.Channels={}))}(Ze||(Ze={}));var Ze;!function(t){var n;!function(t){var n=function(){function t(e){this.buffer=[],this.reduceFn=e.reduce}return t.prototype.getStorageType=function(){return"ArrayBuffer"},t.prototype.push=function(e){this.buffer.push(e)},t.prototype.pull=function(){var e=this.buffer.shift();return e},t.prototype.peek=function(){var e=this.buffer[0];return e},t.prototype.count=function(){return this.buffer.length},t.prototype.clear=function(){this.buffer=[]},t.prototype.dataSize=function(){var e=this.reduceFn(this.buffer,function(e,t){return e+t.length},0);return e},t.prototype.isEmpty=function(){return 0===this.count()},t.prototype.getRawData=function(){return this.buffer},t.prototype.set=function(e){this.pushAll(e)},t.prototype.pushAll=function(t){if(e.isArray(t))for(var n=0,r=t.length;n<r;n++)this.push(t[n])},t.prototype.pullAll=function(){var e=this.buffer;return this.clear(),e},t}();t.ArrayBuffer=n}(n=t.Storage||(t.Storage={}))}(Ze||(Ze={}));var Ze;!function(t){var n;!function(t){var n=function(){function t(e){this.buffer={},this.runningId=0,this.getDictionaryKeys=e.getDictionaryKeys}return t.prototype.getStorageType=function(){return"DictionaryBuffer"},t.prototype.generateId=function(){return""+ ++this.runningId},t.prototype.push=function(e){var t=this.generateId();return this.buffer[t]=e,t},t.prototype.pull=function(e){var t=this.buffer[e];return delete this.buffer[e],t},t.prototype.peek=function(e){return this.buffer[e]},t.prototype.count=function(){return this.getAllIds().length},t.prototype.clear=function(){this.buffer={}},t.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=this.buffer[t].length);return e},t.prototype.isEmpty=function(){return 0===this.count()},t.prototype.getRawData=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&e.push(this.peek(t));return e},t.prototype.set=function(e){return this.pushAll(e)},t.prototype.pushAll=function(t){var n=[];if(e.isArray(t))for(var r=0,i=t.length;r<i;r++)n.push(this.push(t[r]));return n},t.prototype.pullAll=function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++)t.push(this.pull(e[n]));else for(var i in this.buffer)this.buffer.hasOwnProperty(i)&&t.push(this.pull(i));return t},t.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},t}();t.DictionaryBuffer=n}(n=t.Storage||(t.Storage={}))}(Ze||(Ze={}));var Ze;!function(e){var t;!function(e){var t=function(){function e(e,t,n){this.buffer={},this.inputMapper=t,this.outputMapper=n,this.getDictionaryKeys=e.getDictionaryKeys,this.mapFn=e.map,this.reduceFn=e.reduce}return e.prototype.getStorageType=function(){return"ReduceBuffer"},e.prototype.count=function(){return this.getAllIds().length},e.prototype.clear=function(){this.buffer={}},e.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=t.length+(""+this.buffer[t]).length);return e},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.getRawData=function(){return this.buffer},e.prototype.set=function(e){this.buffer=e},e.prototype.pushAll=function(e){var t=this,n=this.mapFn(e,function(e){return t.inputMapper.convert(e)}),r=this.reduceFn(n,function(e,t){return e[t]=(e[t]||0)+1,e},this.buffer);this.set(r)},e.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},e.prototype.pullAll=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e.push(this.format(t)),delete this.buffer[t]);return e},e.prototype.format=function(e){return this.outputMapper.convert({type:e,count:this.buffer[e]})},e}();e.ReduceBuffer=t}(t=e.Storage||(e.Storage={}))}(Ze||(Ze={}));var Ze;!function(e){var t;!function(e){var t=function(){function e(e,t,n,r){this.autoSave=e.autoSave||!1,this.keyName=e.keyName||"wm-ds-b",this.expiresSeconds=e.expiresSeconds||600,this.storageTypesEnum=n.STORAGE_TYPE,this.clientStorageManager=t,this.buffer=r}return e.prototype.save=function(){var e=rg(this.getRawData());this.clientStorageManager.saveData(this.keyName,e,this.expiresSeconds)},e.prototype.load=function(){this.buffer.clear();var e=this.clientStorageManager.getData(this.keyName);if(e)try{this.set(ig(e))}catch(t){this.buffer.clear()}},e.prototype.count=function(){return this.buffer.count()},e.prototype.clear=function(){this.buffer.clear(),this.updateStorageIfNeeded()},e.prototype.dataSize=function(){return this.buffer.dataSize()},e.prototype.maxSize=function(){var e,t=.5;switch(this.clientStorageManager.getStorageType().type){case this.storageTypesEnum.JStorage:case this.storageTypesEnum.CrossDomainLocalStorage:case this.storageTypesEnum.CrossDomain:e=2621440;break;case this.storageTypesEnum.Extension:case this.storageTypesEnum.ProxyIframe:e=524288;break;case this.storageTypesEnum.CrossDomainCookies:case this.storageTypesEnum.Cookie:e=2048;break;default:e=2048}return e*t},e.prototype.withinSizeLimit=function(e){return e<=this.maxSize()},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.updateStorageIfNeeded=function(){this.autoSave&&this.save()},e.prototype.getRawData=function(){return this.buffer.getRawData()},e}();e.BaseClientStorageBuffer=t}(t=e.Storage||(e.Storage={}))}(Ze||(Ze={}));var Ze;!function(e){var t;!function(e){var t=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,t,n,r,i)}return t.prototype.getStorageType=function(){return"ClientStorageArrayBuffer::"+this.getBuffer().getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.push=function(e){this.getBuffer().push(e),this.updateStorageIfNeeded()},t.prototype.pull=function(){var e=this.getBuffer().pull();return this.updateStorageIfNeeded(),e},t.prototype.peek=function(){var e=this.getBuffer().peek();return e},t.prototype.set=function(e){this.getBuffer().set(e)},t.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},t.prototype.pullAll=function(){return this.getBuffer().pullAll()},t}(e.BaseClientStorageBuffer);e.ClientStorageArrayBuffer=t}(t=e.Storage||(e.Storage={}))}(Ze||(Ze={}));var Ze;!function(e){var t;!function(e){var t=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,t,n,r,i)}return t.prototype.getStorageType=function(){return"ClientStorageDictionaryBuffer::"+this.buffer.getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.push=function(e){var t=this.getBuffer().push(e);return this.updateStorageIfNeeded(),t},t.prototype.pull=function(e){var t=this.getBuffer().pull(e);return this.updateStorageIfNeeded(),t},t.prototype.peek=function(e){var t=this.getBuffer().peek(e);return t},t.prototype.set=function(e){return this.getBuffer().set(e)},t.prototype.pushAll=function(e){return this.getBuffer().pushAll(e)},t.prototype.pullAll=function(e){return this.getBuffer().pullAll(e)},t}(e.BaseClientStorageBuffer);e.ClientStorageDictionaryBuffer=t}(t=e.Storage||(e.Storage={}))}(Ze||(Ze={}));var Ze;!function(e){var t;!function(e){var t=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,t,n,r,i)}return t.prototype.getStorageType=function(){return"ClientStorageReduceBuffer::"+this.getBuffer().getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.set=function(e){this.getBuffer().set(e)},t.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},t.prototype.pullAll=function(){return this.getBuffer().pullAll()},t}(e.BaseClientStorageBuffer);e.ClientStorageReduceBuffer=t}(t=e.Storage||(e.Storage={}))}(Ze||(Ze={}));var Ze;!function(e){var t;!function(e){var t=function(){function e(e,t,n,r,i){this.buffer=t,this._isEnabled=!1,this.dataChannel=e,this._eventsErrorLogger=i,r?this._logger=r.wrapCustomerLog("newSender"):this._logger=function(){}}return e.prototype.checkHealth=function(){return this.dataChannel.checkHealth()},e.prototype.getBaseUrl=function(){return this.dataChannel.getBaseUrl()},e.prototype.setBaseUrl=function(e){this.dataChannel.setBaseUrl(e)},e.prototype.getPostEventUrl=function(){return this.dataChannel.getPostEventUrl()},e.prototype.getHealthCheckUrl=function(){return this.dataChannel.getHealthCheckUrl()},e.prototype.enable=function(){var e=this;if(!this._isEnabled)try{this._logger(this.getSenderType()+"::enable. Enabling new data sender. \r\n [channel : "+this.dataChannel.getChannelType()+" , method : "+this.dataChannel.getChannelMethod()+" ,max packet size: "+this.dataChannel.maxPacketSize()+" ] \r\n [storage : "+this.buffer.getStorageType()+" , max storage size: "+this.buffer.maxSize()+"] \r\n",3),this._isEnabled=!0,this.dataChannel.whenFree(function(){e.linkIsFree()}),this.registerToUnload(function(){return e.sleep()}),this.wakeUp()}catch(t){this.logError(t,"Enable")}},e.prototype.logError=function(e,t){if(this._eventsErrorLogger){var n=this.dataChannel&&this.buffer?{storage:this.buffer.getStorageType(),channel:this.dataChannel.getChannelType()}:{};n.sender=this.getSenderType()+(t?"::"+t:""),this._eventsErrorLogger.logError(rg(e.message),n)}},e.prototype.disable=function(){this._isEnabled&&(this._isEnabled=!1)},e.prototype.isEnabled=function(){return this._isEnabled},e.prototype.isIdle=function(){return this._isEnabled&&this.dataChannel.isIdle()&&this.buffer.isEmpty()},e.prototype.clearStorage=function(){this.buffer.clear()},e.prototype.registerToUnload=function(e){i.get("WindowBeforeUnloadHandler").register(e)},e}();e.SuperSender=t}(t=e.Managers||(e.Managers={}))}(Ze||(Ze={}));var Ze;!function(e){var t;!function(e){var t=function(e){__extends(t,e);function t(t,n,r,i,o){e.call(this,t,n,r,i,o)}return t.prototype.getBuffer=function(){return this.buffer},t.prototype.getSenderType=function(){return"ImmediateSender"},t.prototype.send=function(e){if(!this.isEnabled())return!1;return this.dataChannel.isAvailable()?this.dataChannel.send(e):this.getBuffer().push(e),!0},t.prototype.wakeUp=function(){if(!this.isEnabled())return!1;this.loadFromStorage()},t.prototype.sleep=function(){if(!this.isEnabled())return!1;this.getBuffer().save()},t.prototype.linkIsFree=function(){if(!this.isEnabled())return!1;this.sendFromBuffer()},t.prototype.loadFromStorage=function(){if(!this.isEnabled())return!1;for(this.getBuffer().load();this.dataChannel.isAvailable()&&this.getBuffer().count();)this.sendFromBuffer()},t.prototype.sendFromBuffer=function(){if(!this.isEnabled())return!1;var e=this.getBuffer().pull();e&&this.dataChannel.send(e)},t}(e.SuperSender);e.ImmediateSender=t}(t=e.Managers||(e.Managers={}))}(Ze||(Ze={}));var Ze;!function(t){var n;!function(n){var r=function(n){__extends(r,n);function r(e,r,i,o,a,s,u,l,c,d){var f=this;n.call(this,e,r,s,c,d),this.estimatedPacketSize=0,this.cycleTimer=new t.SimpleTimer(s.sendingIntervalMs,function(){return f.doCycle()}),this.retryTimer=new t.SimpleTimer(s.retryIntervalMs,function(){return f.doCycle()}),this.maxRetries=s.maxRetries,this.maxRetryTimeoutSec=s.maxRetryTimeoutSec,this.minRetryTimeoutSec=s.minRetryTimeoutSec,this.currentRetries=0,this.isHealthy=!0,this.needMoreLink=!1,this.isLogFailed=s.isLogFailed,this.memoryBuffer=o,this.stagingMemoryBuffer=a,this.stagingBuffer=i,this.failureBuffer=u,this.dataSenderLogFailure=l,this.maxDynamicDataLength=s.maxDynamicDataLength||0,this.maxStaticDataLength=void 0===s.maxStaticDataLength?1e3-s.maxDynamicDataLength:s.maxStaticDataLength,this.staticData=this.emptyStaticData(),this.dynamicDataArr=[this.timestampDynamicData],this.staticIndicator={_static:!0},this.staticIndicatorLen=0}return r.prototype.getSenderType=function(){return"AccumulationSender"},r.prototype.emptyStaticData=function(){return{data:{},length:0}},r.prototype.setStaticData=function(t,n){if(!n||"_static"===t||this.staticData.data[t])return;var r=e.extend({},this.staticData.data,(a={},a[t]=n,a)),i=rg(r),o=this.dataChannel.estimateDataSize(i);return o>this.maxStaticDataLength?(this._logger("Static data that exceeds the limit "+t+":"+rg(n),3),!1):(this.staticData.data=r,this.staticData.length=o,!0);var a},r.prototype.timestampDynamicData=function(){return{"Wm-Client-Timestamp":(new Date).getTime()}},r.prototype.dynamicData=function(){for(var t={},n=0;n<this.dynamicDataArr.length;n++){var r=e.extend({},t,this.dynamicDataArr[n]()),i=rg(r);this.dataChannel.estimateDataSize(i)>this.maxDynamicDataLength?this._logger("Dynamic data that exceeds the limit "+i,3):t=r}return t},r.prototype.enrichmentDataLength=function(){this.staticIndicatorLen||(this.staticIndicatorLen=this.dataChannel.estimateDataSize(rg(this.staticIndicator))+1);var e=this.maxDynamicDataLength+this.staticData.length;return 0!==e?e+this.staticIndicatorLen:0},r.prototype.getBuffer=function(){return this.buffer},r.prototype.send=function(e){try{if(this._logger(this.getSenderType()+"::Send. called for: "+rg(e),5),!this.isEnabled())return!1;var t=this.dataChannel.estimateDataSize(e);if(!this.dataChannel.withinSizeLimit(t+this.enrichmentDataLength()))throw new Error("Data exceeds channel packet size");if(this.getBuffer().withinSizeLimit(e.length))return this.getBuffer().isEmpty()||(this.estimatedPacketSize+=this.dataChannel.estimateDataSize(this.dataChannel.getLineBreak())),this.estimatedPacketSize+=t,this.getBuffer().dataSize()+e.length>this.getBuffer().maxSize()&&this.sendBuffer(),this.getBuffer().push(e),this.estimatedPacketSize>=this.dataChannel.channelBandwidth()?(this.sendBuffer(),this.getTimer().restart()):this.getTimer().start(),!0;this.dataChannel.isAvailable()?this.stageAndSend({memory:[e],persist:[]}):this.memoryBuffer.push(e)}catch(n){throw this.logError(n,"Send"),n}},r.prototype.wakeUp=function(){if(!this.isEnabled())return;try{this._logger(this.getSenderType()+"::WakeUp. buffer size before load. "+this.getBuffer().dataSize(),3),this.loadFromStorage(),this._logger(this.getSenderType()+"::WakeUp. buffer size after load. "+this.getBuffer().dataSize(),3)}catch(e){throw this.logError(e,"WakeUp"),e}},r.prototype.sleep=function(){if(!this.isEnabled())return;try{this._logger(this.getSenderType()+"::Sleep. buffer size before flush: "+this.getBuffer().dataSize(),3),this.sendBuffer(),this._logger(this.getSenderType()+"::Sleep. buffer size after flush: "+this.getBuffer().dataSize(),3),this.getBuffer().save(),this.stagingBuffer.save(),this.failureBuffer.save()}catch(e){throw this.logError(e,"Sleep"),e}},r.prototype.isIdle=function(){return n.prototype.isIdle.call(this)},r.prototype.linkIsFree=function(){if(!this.isEnabled())return;this.needMoreLink&&this.sendBuffer()},r.prototype.doCycle=function(){if(!this.isEnabled())return;this._logger(this.getSenderType()+"::doCycle. buffer size before flush. "+this.getBuffer().dataSize(),4),this.sendBuffer(),this._logger(this.getSenderType()+"::doCycle. buffer size after flush. "+this.getBuffer().dataSize(),4)},r.prototype.getSeperator=function(){return this.dataChannel.getLineBreak()},r.prototype.getTimer=function(){return this.isHealthy?this.cycleTimer:this.retryTimer},r.prototype.hasBufferEvents=function(){return!this.getBuffer().isEmpty()||!this.memoryBuffer.isEmpty()},r.prototype.getPriorityBuffer=function(){return this.memoryBuffer.isEmpty()?this.getBuffer():this.memoryBuffer},r.prototype.sendBuffer=function(){if(!this.isEnabled())return;try{for(var e=this.dataChannel.maxPacketSize();this.hasBufferEvents()&&this.dataChannel.isAvailable();){var t={persist:[],memory:[]},n=this.enrichmentDataLength();do{var r=this.getPriorityBuffer(),i=this.dataChannel.estimateDataSize(r.peek()),o=0;if(0!==n&&(o=this.dataChannel.estimateDataSize(this.getSeperator())),o+=i,n+o>e){if(n>0)break;r.pull(),this.logError(new Error("Tried to send too long message"),"SendBuffer");continue}var a=r===this.memoryBuffer?"memory":"persist";t[a].push(r.pull()),n+=o,this.estimatedPacketSize-=o}while(this.hasBufferEvents()&&n<e);n>0&&this.stageAndSend(t)}this.needMoreLink=this.hasBufferEvents()}catch(s){throw this.logError(s,"SendBuffer"),s}},r.prototype.enrichmentDataHasOwnProps=function(e){for(var t in e)if(e.hasOwnProperty(t)&&"_static"!==t)return!0;return!1},r.prototype.getEnrichmentData=function(){var t=e.extend({_static:!0},this.staticData.data,this.dynamicData());if(this.enrichmentDataHasOwnProps(t))return rg(t)},r.prototype.stageAndSend=function(e){var t=this,n={persist:this.stagingBuffer.pushAll(e.persist),memory:this.stagingMemoryBuffer.pushAll(e.memory)},r=this.getEnrichmentData(),i=(r?[r]:[]).concat(e.persist,e.memory).join(this.getSeperator());this._logger(this.getSenderType()+"::sendBuffer. packet size "+i.length,3),this._logger(this.getSenderType()+"::sendBuffer. sending packet :"+rg(i),4),this.dataChannel.send(i,function(){try{t.isHealthy=!0,t.currentRetries=0,t.stagingBuffer.pullAll(n.persist),t.stagingMemoryBuffer.pullAll(n.memory),t.isLogFailedEnabled()&&t.logFailedEvents()}catch(e){}},function(){try{if(t.isHealthy=!1,t.getBuffer().pushAll(t.stagingBuffer.pullAll(n.persist)),t.memoryBuffer.pushAll(t.stagingMemoryBuffer.pullAll(n.memory)),t.currentRetries++,t.currentRetries>t.maxRetries){if(t.isLogFailedEnabled()){var e=t.getBuffer().pullAll().concat(t.memoryBuffer.pullAll());t.failureBuffer.pushAll(e)}t.currentRetries=0,t.getBuffer().clear(),t.memoryBuffer.clear()}else{var r=t.getNextRetryTime();t.getTimer().start(r)}}catch(i){}},this.currentRetries||void 0)},r.prototype.getNextRetryTime=function(){if(this.maxRetries<=1)return;var e,t=1e3*(this.minRetryTimeoutSec+(this.maxRetryTimeoutSec-this.minRetryTimeoutSec)*(this.currentRetries-1)/(this.maxRetries-1));return e=Math.min(1e3*this.maxRetryTimeoutSec,Math.random()*(.25*t)+.75*t)},r.prototype.loadFromStorage=function(){if(!this.isEnabled())return;this.getBuffer().load(),this.stagingBuffer.load(),this.failureBuffer.load(),this.getBuffer().pushAll(this.stagingBuffer.pullAll()),this.stagingBuffer.save(),this._logger(this.getSenderType()+"::loadFromStorage. buffer size after load : "+this.getBuffer().dataSize(),4),this.sendBuffer()},r.prototype.isLogFailedEnabled=function(){return this.isLogFailed},r.prototype.logFailedEvents=function(){if(this.failureBuffer.count()<=0)return;for(var e=this.failureBuffer.pullAll(),t=0;t<e.length;t++){var n=e[t];this.dataSenderLogFailure.log.warn(n.message,n.extraData)}},r}(n.SuperSender);n.AccumulationSender=r}(n=t.Managers||(t.Managers={}))}(Ze||(Ze={}));var Ze;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.convert=function(e){var t=ig(e);return t.data.type+":"+t.type},e}();e.EventTypeMapper=t}(t=e.Manipulation||(e.Manipulation={}))}(Ze||(Ze={}));var Ze;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.convert=function(e){return{message:"Event failed to send [type "+e.type+", count "+e.count+"]",extraData:{evType:e.type,count:e.count}}},e}();e.EventLogMapper=t}(t=e.Manipulation||(e.Manipulation={}))}(Ze||(Ze={})),i.register("DataChannelConfig").asInstance({postEventAction:"/event/postEvent",healthCheckAction:"/general/status",requestTimeoutMs:2e3,retryParameterName:"r"}),i.register("DataChannelConfigBI").asInstance({postEventAction:"/event/backEvent",healthCheckAction:"/general/status",requestTimeoutMs:2e3,retryParameterName:"r"}),i.register("DataChannelConfigLog").asInstance({postEventAction:"/event/log",healthCheckAction:"/general/status",requestTimeoutMs:2e3,retryParameterName:"r"}),i.register("DataSenderConfig").asInstance({sendingIntervalMs:250,retryIntervalMs:3e3,maxRetries:3,isLogFailed:!0,maxRetryTimeoutSec:960,minRetryTimeoutSec:3,maxStaticDataLength:0,maxDynamicDataLength:50}),i.register("DataSenderConfigBI").asInstance({sendingIntervalMs:5e3,maxRetries:0,isLogFailed:!0,maxStaticDataLength:950,maxDynamicDataLength:50}),i.register("DataSenderConfigLog").asInstance({sendingIntervalMs:5e3,retryIntervalMs:5e3,maxRetries:3,isLogFailed:!1}),i.register("EventTypeMapper").asCtor(Ze.Manipulation.EventTypeMapper),i.register("EventLogMapper").asCtor(Ze.Manipulation.EventLogMapper),i.register("ArrayBuffer").asCtor(Ze.Storage.ArrayBuffer).asProto().dependencies("GeneralUtils"),i.register("DictionaryBuffer").asCtor(Ze.Storage.DictionaryBuffer).asProto().dependencies("GeneralUtils"),i.register("ReduceBuffer").asCtor(Ze.Storage.ReduceBuffer).asProto().dependencies("GeneralUtils,EventTypeMapper,EventLogMapper"),i.register("DataSenderMethod").asCtor(Ze.Channels.CompatibilityChannel).dependencies("DataChannelConfig"),
i.register("DataSenderStorageConfig").asInstance({keyName:"wm-ds-b",autoSave:!1,expiresSeconds:600}),i.register("DataSenderStorageStagingConfig").asInstance({keyName:"wm-ds-s",autoSave:!1,expiresSeconds:600}),i.register("DataSenderStorage").asCtor(Ze.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfig,ClientStorageManager,Consts,ArrayBuffer"),i.register("DataSenderStagingStorage").asCtor(Ze.Storage.ClientStorageDictionaryBuffer).dependencies("DataSenderStorageStagingConfig,ClientStorageManager,Consts,DictionaryBuffer"),i.register("DataSender").asCtor(Ze.Managers.AccumulationSender).dependencies("DataSenderMethod,DataSenderStorage,DataSenderStagingStorage,ArrayBuffer,DictionaryBuffer,DataSenderConfig,DataSenderStorageLogFailure,EventCollectorLoggerPixel,Logger,EventSenderErrorLogger"),i.register("DataSenderMethodLog").asCtor(Ze.Channels.CompatibilityChannel).dependencies("DataChannelConfigLog"),i.register("DataSenderStorageConfigLog").asInstance({keyName:"wm-ds-lb",autoSave:!1,expiresSeconds:600}),i.register("DataSenderStorageLog").asCtor(Ze.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfigLog,ClientStorageManager,Consts,ArrayBuffer"),i.register("DataSenderLog").asCtor(Ze.Managers.ImmediateSender).dependencies("DataSenderMethodLog,DataSenderStorageLog,DataSenderConfigLog,Logger,EventSenderErrorLogger"),i.register("DataSenderMethodBI").asCtor(Ze.Channels.AjaxChannel).dependencies("DataChannelConfigBI"),i.register("DataSenderStorageConfigBI").asInstance({keyName:"wm-ds-bib",autoSave:!1,expiresSeconds:600}),i.register("DataSenderStorageStagingConfigBI").asInstance({keyName:"wm-ds-sbi",autoSave:!1,expiresSeconds:600}),i.register("DataSenderStorageBI").asCtor(Ze.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfigBI,DummyClientStorageManager,Consts,ArrayBuffer"),i.register("DataSenderStagingStorageBI").asCtor(Ze.Storage.ClientStorageDictionaryBuffer).dependencies("DataSenderStorageStagingConfigBI,DummyClientStorageManager,Consts,DictionaryBuffer"),i.register("DataSenderBI").asCtor(Ze.Managers.AccumulationSender).dependencies("DataSenderMethodBI,DataSenderStorageBI,DataSenderStagingStorageBI,ArrayBuffer,DictionaryBuffer,DataSenderConfigBI,DataSenderStorageLogFailure,EventCollectorLoggerPixel,Logger,EventSenderErrorLogger"),i.register("DataSenderStorageConfigLogPixel").asInstance({keyName:"wm-ds-lbp",autoSave:!1,expiresSeconds:600}),i.register("DataSenderStorageLogPixel").asCtor(Ze.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfigLogPixel,ClientStorageManager,Consts,ArrayBuffer"),i.register("DataSenderMethodLogPixel").asCtor(Ze.Channels.ImageChannel).dependencies("DataChannelConfigLog"),i.register("DataSenderLogPixel").asCtor(Ze.Managers.ImmediateSender).dependencies("DataSenderMethodLogPixel,DataSenderStorageLogPixel,DataSenderConfigLog,Logger,EventSenderErrorLogger"),i.register("DataSenderStorageConfigLogFailure").asInstance({keyName:"wm-ds-lfb",autoSave:!0,expiresSeconds:86400}),i.register("DataSenderStorageLogFailure").asCtor(Ze.Storage.ClientStorageReduceBuffer).dependencies("DataSenderStorageConfigLogFailure,ClientStorageManager,Consts,ReduceBuffer"),i.register("InitiatorManager").asCtor(et);function et(){var e=this;e.get=r,e.setForScope=i;var t;function n(){t=[]}function r(){var e=t[t.length-1];return e}function i(e,n){t.push(e),n(),t.pop()}n()}i.register("UserTimeMonitor").asCtor(tt).dependencies("ClientStorageManager, EndUsersManager");function tt(e,t){var n=this;n.wasActionPerformed=r,n.logActionPerformed=i;function r(n){return e.getData(n)==t.getEndUserGuid()}function i(n,r){e.saveData(n,t.getEndUserGuid(),r)}}i.register("EventSender").asCtor(nt).dependencies("Consts, DeployableTypeToEventSenderAppTypeMapper, EventsCollectorAuditingEnabledIndicator, EventCollectorEventSender, Logger");function nt(e,t,n,r,i){var o=this;o.isEnabled=u,o.postEvent=s,o.getEventAppByDeployable=t.map,o.isReportingEnabled=u,o.EVENT_TYPES=e.EVENT_SENDER_EVENT_TYPES,o.EVENT_APPS=e.EVENT_SENDER_EVENT_APPS,o.CANCEL_REASONS=e.EVENT_SENDER_CANCEL_REASONS;function a(){}function s(e,t){if(!u())return;try{r.postEvent(e,t)}catch(n){i.error(n)}}function u(){return n.isEnabled()}a.apply(this,arguments)}i.register("EventSenderEnvironmentDataProvider").asCtor(rt).dependencies("HostData, FeaturesManager, Consts, CommonUtils");function rt(e,t,n,r){var i=this;i.getEnvironmentData=a;function o(){}function a(){var r={browser:e.browser,os:e.os,mobile:e.isMobile()};return!t.isReady()||t.isFeatureEnabled(n.FEATURES.DisableWidgetOpenFullUrl)||t.isFeatureEnabled(n.FEATURES.EventSenderDontSendPageUrl)?(r.url="",r.urlWithoutQueryString=""):(r.url=e.getUrl(),r.urlWithoutQueryString=e.getUrlWithoutQueryString()),t.isReady()&&!t.isFeatureEnabled(n.FEATURES.EventSenderDontSendPageTitle)?r.pageTitle=e.getPageTitle():r.pageTitle="",r}o.apply(this,arguments)}i.register("WalkmeVisibleReporter").asCtor(it).dependencies("EventSender, UserTimeMonitor, StorageKeysConfigurations, Logger, EndUserLoggerManager, AuditSourceProvider, IsInEditor");function it(e,t,n,r,i,o,a){var s=this;s.report=c;var u=n.walkmeVisibleReporter.walkmeVisibleReported;function l(){}function c(){try{if(o.isInPreviewMode()||o.isInPlayMode()||a.get())return;if(i.reportEndUser(void 0,!0),t.wasActionPerformed(u.key))return;e.postEvent(e.EVENT_TYPES.Visible,{type:e.EVENT_APPS.Walkme}),t.logActionPerformed(u.key,u.expiry)}catch(n){r.error(n)}}l.apply(null,arguments)}i.register("ErrorLogFilter").asCtor(ot).dependencies();function ot(){var t=this,n=5;t.filter=r;function r(t){var r=e.Deferred();return n<=0?r.reject():(r.resolve(t),n--),r.promise()}}i.register("EventSenderErrorLogger").asCtor(at).dependencies("DataChannelConfigLog,HostData,WalkMeInfo,ErrorLogFilter,SafeFullUrlProvider");function at(t,n,r,i,o){var a,s,u=this;function l(e){s=e.postEventAction}u.setBaseUrl=function(e){a=e},u.isReady=function(){return!(!a||!s)},u.logError=function(t,n){if(!u.isReady())return;var r;try{r=f()}catch(o){}var a=e.extend({time:(new Date).getTime(),level:"error",app:"player",message:t},d(),r,n||{});i.filter(a).then(c)};function c(t){e.ajax({url:a+s,data:rg(t),contentType:"text/plain",dataType:"json",type:"POST"})}function d(){return{url:o.get(),browser:n.browser,os:n.os,screen:n.getWinSize(),mobile:n.isMobile()}}function f(){return{uId:r.getUserGuid(),euId:r.getEndUserGuid(),euIdSource:r.getEndUserGuidSource(),permId:r.getPermutationId(),language:r.getLanguage(),cVars:r.getCustomVars(),env:r.getEnvironmentId()}}l.apply(u,arguments)}i.register("EventSenderInitializer").asCtor(st).dependencies("EventServerBaseUrl, EventSenderErrorLogger, DataSender, DataSenderBI, DataSenderLog, DataSenderLogPixel, EventSenderEventListener, win");function st(e,t,n,r,i,o,a,s){var u=this;u.init=l;function l(){var s=c(e.get());t&&t.setBaseUrl(s),n.setBaseUrl(s),n.enable(),i.setBaseUrl(s),i.enable(),o.setBaseUrl(s),o.enable(),r.setBaseUrl(s),r.enable(),a.init()}function c(e){var t=d(),n=s.location.protocol,r=/^http[^s]/i,i=r.test(n),o=new RegExp("^(//|"+n+")","i"),a=o.test(e);if(i&&!a&&t)return e.replace(/^https:/,"http:");return e}function d(){return void 0===(new XMLHttpRequest).withCredentials&&"undefined"!=typeof window.XDomainRequest}}i.register("EventSenderDisabler").asCtor(ut).dependencies("DataSender");function ut(e){var t=this;t.disable=n;function n(){e.sleep(),e.disable()}}i.register("EventSenderEventListener").asCtor(lt).dependencies("Consts, WmInternals, GoalReachedEventSender, SmartTipEventSender, LauncherEventSender, BizFlowEventSender, QuizEventSender, SessionEventSender");function lt(e,t,n,r,i,o,a,s){var u=this;u.init=c;function l(){}function c(){d(),f(),p(),g(),h(),m()}function d(){v(e.EVENTS.Goals.GoalReached,n.postEvent),v(e.EVENTS.AbExperimentLinkedGoalReached,n.postEvent)}function f(){v(e.EVENTS.SmartTips.ValidationFailed,r.postValidationFailedEvent),v(e.EVENTS.SmartTips.ValidationPassed,r.postValidationPassedEvent),v(e.EVENTS.SmartTips.TooltipShown,r.postTooltipShownEvent),v(e.EVENTS.SmartTips.SetTurnedOn,r.postSetActivatedEvent),v(e.EVENTS.SmartTips.SmartTipSegmented,r.postSmartTipSegmentedEvent),v(e.EVENT_SENDER_EVENT_TYPES.Focus,r.postElementEvent),v(e.EVENT_SENDER_EVENT_TYPES.Blur,r.postElementEvent),v(e.EVENT_SENDER_EVENT_TYPES.Click,r.postElementEvent)}function p(){v(e.EVENTS.Launchers.LauncherIsShown,i.postLauncherIsShownEventIfWasntSent)}function g(){v(e.EVENTS.Flows.FlowStarted,o.postFlowStartedEvent),v(e.EVENTS.Flows.FlowBranched,o.postFlowBranchedEvent),v(e.EVENTS.Flows.BeforeExecutingFlowStage,o.postBeforeExecutionStageEvent),v(e.EVENTS.Flows.UIFlowStageShown,o.postUIFlowStageShownEvent),v(e.EVENTS.Flows.AfterCompletingFlowStage,o.postAfterCompletionStageEvent),v(e.EVENTS.Flows.FlowStopped,o.postFlowStoppedEvent),v(e.EVENTS.Flows.SafeStartStatusChanged,o.postFlowSafeStartStatusChangedEvent)}function h(){v(e.EVENTS.Quizzes.QuizPlay,a.postQuizPlayEvent),v(e.EVENTS.Quizzes.QuizSubmitted,a.postQuizSubmittedEvent),v(e.EVENTS.Quizzes.QuizAnswerSubmitted,a.postAnswerSubmittedEvent),v(e.EVENTS.Quizzes.QuizPass,a.postQuizPassEvent),v(e.EVENTS.Quizzes.QuizFail,a.postQuizFailEvent)}function m(){v(e.EVENTS.WalkmeReadyNewSession,s.postNewSessionEvent)}function v(e,n){t.bind(e,function(e,t){n(t)})}l.apply(this,arguments)}i.register("GoalReachedEventSender").asCtor(ct).dependencies("EventSender, Logger, Consts, DeployableTypeToEventSenderAppTypeMapper, DeployablesManagerFactory, WalkMeGoalsManager");function ct(e,t,n,r,i,o){var a=this;a.postEvent=u;function s(){}function u(a){try{var s=a.goal,u=i.get(s.GoalType),l=u.getById(s.RelatedObjectId),c=o.getGoalsFromDeployable(l),d=r.map(s.GoalType);return e.postEvent(n.EVENT_SENDER_EVENT_TYPES.GoalReached,{type:d,oId:s.Id,oName:s.Name,pId:a.identifier?a.identifier:-1,total:c.length,owId:l.Id,owName:l.Name,owType:d,main:s.IsMainGoal,interactionGuid:a.interactionGuid})}catch(f){return t.error(f),!0}}s.apply(null,arguments)}i.register("SmartTipEventSender").asCtor(dt).dependencies("EventSender, Logger, Consts, InteractionManager, BusinessSolutionsManager, WalkmeVisibleReporter, InitiatorManager, ReportInitiatorMapper, ClientStorageManager");function dt(t,n,r,i,o,a,s,u,l){var c=this;c.postSetActivatedEvent=f,c.postSmartTipSegmentedEvent=p,c.postValidationFailedEvent=g,c.postValidationPassedEvent=h,c.postTooltipShownEvent=m,c.postElementEvent=y;function d(){}function f(e){var t={type:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,oId:e.setId,oName:C(e.setId)};return t=S(t,e),E(r.EVENT_SENDER_EVENT_TYPES.Play,t)}function p(e){a.report();var t={type:r.EVENT_SENDER_EVENT_APPS.SmartTip,oId:e.smartTipModel.Id,oName:e.smartTipModel.Name,owId:e.setId,owType:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,owName:C(e.setId)};return t=S(t,e),E(r.EVENT_SENDER_EVENT_TYPES.Play,t)}function g(e){return v(r.EVENT_SENDER_EVENT_TYPES.Failed,e)}function h(e){return v(r.EVENT_SENDER_EVENT_TYPES.Passed,e)}function m(e){return v(r.EVENT_SENDER_EVENT_TYPES.Visible,e)}function v(e,t){var n={type:r.EVENT_SENDER_EVENT_APPS.SmartTip,oId:t.smartTipModel.Id,oName:t.smartTipModel.Name,owId:t.setId,owType:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,owName:C(t.setId),aoId:t.uiComponent&&t.uiComponent.Id,aType:t.uiComponent&&t.uiComponent.Type,aAppType:r.EVENT_SENDER_EVENT_APPS.SmartTipUiComponent};return n=S(n,t),E(e,n)}function y(e){var t={type:r.EVENT_SENDER_EVENT_APPS.SmartTip,oId:e.smartTipModel.Id,oName:e.smartTipModel.Name,owType:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,owId:e.setId,owName:C(e.setId)};return t=S(t,e),E(e.eventType,t)}function E(e,r){try{return t.postEvent(e,r)}catch(i){return n.error(i),!0}}function S(t,n){var r=T(n);return e.extend(r,t)}function T(e){return{interactionGuid:i.getCurrentInteractionGuid(),pId:e.playGuid,pInit:u.map(s.get()||l.getData(l.keysConfig.smartTipSet.initiator.key))}}function C(e){var t=o.getById(e);return t.Name}d()}i.register("LauncherEventSender").asCtor(ft).dependencies("EventSender, Consts, Logger");function ft(t,n,r){var i=this;i.postLauncherIsShownEventIfWasntSent=s;var o=[];function a(){}function s(n){var i=n.getId(),a=e.inArray(i,o)!=-1;if(a)return;var s={type:t.EVENT_APPS.Launcher,oId:i,oName:n.getName()};try{var u=t.postEvent(t.EVENT_TYPES.Play,s);return o.push(i),u}catch(l){return r.error(l),!0}}a.apply(null,arguments)}i.register("BizFlowEventSender").asCtor(pt).dependencies("EventSender, Consts, ReportInitiatorMapper, PlayGuidGenerator, FlowsContainer, BizFlowStepEventParamsCalculator, BizFlowStepEventStatusProvider, FlowDataPersister");function pt(e,t,n,r,i,o,a,s){var u=this;u.postFlowStartedEvent=l,u.postFlowBranchedEvent=c,u.postBeforeExecutionStageEvent=d,u.postUIFlowStageShownEvent=f,u.postAfterCompletionStageEvent=p,u.postFlowStoppedEvent=g,u.postFlowSafeStartStatusChangedEvent=m;function l(i){var o=s.getPlayInitiator(),a=r.generateNewPlayGuid(i.businessSolutionId);s.savePlayGuid(a);var u={type:t.EVENT_SENDER_EVENT_APPS.BizFlow,oId:i.businessSolutionId,oName:i.businessSolutionName,pId:a,pInit:n.map(o),oRequestedSubObject:i.requestedStageId,oActualSubObject:i.startingStageId};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,u)}function c(r){var i={type:t.EVENT_SENDER_EVENT_APPS.BizFlow,oId:r.businessSolutionId,oName:r.businessSolutionName,pId:s.getPlayGuid(),pInit:n.map({type:r.isBbCodeTrigger?t.STEP_PLAY_INITIATOR_ENUM.BBCODE:t.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:r.branchOriginStageId,appType:t.EVENT_SENDER_EVENT_APPS.BizFlowStep}),oRequestedSubObject:r.requestedStageId,oActualSubObject:r.startingStageId};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,i)}function d(e){var t=i.getNodeById(e.flowId,e.stageId),n=a.getBeforeExecutionEventStatus(t);h(e,n)}function f(e){var t=a.getUIFlowStageShownEventStatus();h(e,t)}function p(e){var t=a.getAfterCompletionEventStatus(e.isFlowGoingBack);h(e,t,!0)}function g(e){if(!e.flowId||!e.wasClosedByUser)return;var t=a.getFlowStoppedEventStatus(e.wasClosedByUser);h(e,t)}function h(n,r,a){var u=i.getNodeById(n.flowId,n.stageId),l=a&&o.getValue(u,n.value),c=a&&o.getBbCodeData(l,n.firedTrigger),d={type:t.EVENT_SENDER_EVENT_APPS.BizFlowStep,oId:n.uiElementId?n.uiElementId:u.Id,aoId:u.Id,oName:o.getName(u,n.uiElementId),aType:o.getNodeActionName(u),aAppType:o.getNodeActionAppType(u),oType:o.getNodeType(u),owId:n.businessSolutionId,owName:n.businessSolutionName,owType:t.EVENT_SENDER_EVENT_APPS.BizFlow,total:o.getTotalNodes(n.flowId),pId:s.getPlayGuid(),status:r,value:l,pInit:c};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,d)}function m(r){var i=s.getPlayInitiator(),o={type:t.EVENT_SENDER_EVENT_APPS.BizFlow,oId:r.businessSolutionId,oName:r.businessSolutionName,pId:s.getPlayGuid(),pInit:n.map(i),oRequestedSubObject:r.requestedStageId,oActualSubObject:r.startingStageId,status:r.status};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.PlayFailed,o)}}i.register("BizFlowStepEventParamsCalculator").asCtor(gt).dependencies("Consts, BizFlowStepActionToEventSenderActionAppTypeMapper, BizFlowStepActionToEventSenderStepActionNameMapper, FlowsContainer, FlowPlayerMetadata, BizFlowOnPageActionTypeToEventSenderStepActionNameMapper, ReportInitiatorMapper");function gt(t,n,r,i,o,a,s){var u=this;u.getNodeActionName=l,u.getNodeActionAppType=c,u.getTotalNodes=d,u.getName=f,u.getNodeType=p,u.getValue=g,u.getBbCodeData=h;function l(e){return e.ActionType!=t.FLOW_ACTION_TYPE.OnPageAction?e.ActionType?r.map(e.ActionType):"":a.map(e.Settings.actionArgs.onElementAction)}function c(e){return e.ActionType?n.map(e.ActionType):""}function d(e){var t=i.getFlowById(e),n=0;for(var r in t.Nodes)n++;return n}function f(n,r){if(n.Type!=t.FLOW_STEP_TYPE.UI)return n.Name;if(r){var i=e.grep(n.UIElements,function(e){return e.Id==r});return i[0].Title}return e.map(n.UIElements,function(e){return e.Title}).join(", ")}function p(e){return e.Type==t.FLOW_STEP_TYPE.Action?t.STEP_TYPE.Action:e.UIElements[0].Type==t.FLOW_UIELEMENT_TYPE.Popup?t.STEP_TYPE.Popup:t.STEP_TYPE.Normal}function g(e,n){if(e.Type==t.FLOW_STEP_TYPE.Action)return n;return o.lastTriggerFired&&o.lastTriggerFired.Type}function h(e,n){if(e&&e==t.FLOW_TRIGGER_TYPE.BbCode)return s.map({objectId:n.Id,type:n.Name})}}i.register("BizFlowStepEventStatusProvider").asCtor(ht).dependencies("Consts");function ht(e){var t=this;t.getBeforeExecutionEventStatus=n,t.getUIFlowStageShownEventStatus=r,t.getAfterCompletionEventStatus=i,t.getFlowStoppedEventStatus=o;function n(t){return"UI"==t.Type?e.STEP_STATUS.SupposedToShow:e.STEP_STATUS.Shown}function r(){return e.STEP_STATUS.Shown}function i(t){return t?e.STEP_STATUS.MovedBack:e.STEP_STATUS.Performed}function o(t){if(t)return e.STEP_STATUS.Exited}}i.register("QuizEventSender").asCtor(mt).dependencies("EventSender, Consts, InitiatorManager, ReportInitiatorMapper, QuizStatusManager, QuizEventParamCalculator");function mt(t,n,r,i,o,a){var s=this;s.postQuizPlayEvent=u,s.postQuizSubmittedEvent=l,s.postAnswerSubmittedEvent=c,s.postQuizPassEvent=d,s.postQuizFailEvent=f;function u(s){var u=r.get(),l=e.extend({},g(s),h(s.quiz),{pInit:i.map(u),globalRatio:a.getCourseCompletionPrecentage(s.quiz),status:o.getQuizStatus(s.quiz)});t.postEvent(n.EVENT_SENDER_EVENT_TYPES.Play,l)}function l(r){var i=e.extend({},g(r),h(r.quiz));t.postEvent(n.EVENT_SENDER_EVENT_TYPES.Submitted,i)}function c(r){var i=e.extend({},g(r),h(r.quiz,!0),{type:n.EVENT_SENDER_EVENT_APPS.QuizQuestion,oId:r.questionId,aAppType:n.EVENT_SENDER_EVENT_APPS.QuizAnswer,aoId:r.answerId,aType:n.EVENT_SENDER_EVENT_APPS.QuizAnswer,value:r.answer,oName:r.question});t.postEvent(n.EVENT_SENDER_EVENT_TYPES.Submitted,i)}function d(e){p(e,!0)}function f(e){p(e,!1)}function p(r,i){var o=i?n.EVENT_SENDER_EVENT_TYPES.Passed:n.EVENT_SENDER_EVENT_TYPES.Failed,a=e.extend({},g(r),h(r.quiz),{passmark:r.quiz.Passmark,score:r.score});t.postEvent(o,a)}function g(e){return{pId:e.currentPlayGuid}}function h(e,t){var r,i={};return t?(i.owType=n.EVENT_SENDER_EVENT_APPS.Quiz,r="ow"):(i.type=n.EVENT_SENDER_EVENT_APPS.Quiz,r="o"),i[r+"Id"]=e.Id,i[r+"Name"]=a.getQuizName(e),i}}i.register("QuizEventParamCalculator").asCtor(vt).dependencies("CoursesManager");function vt(e){var t=this;t.getQuizName=n,t.getCourseCompletionPrecentage=o,t.getQuizCourseId=r;function n(e){var t=a(e);return t.Name+" Quiz"}function r(e){var t=a(e);return t.Id}function o(t){var n=i.get("LmsProgressProvider"),r=i.get("ObjectsTreeGenerator"),o=e.getCourseByQuizId(t.Id),a=r.generate([o]);return n.getCourseProgress(a[0])}function a(t){return e.getCourseByQuizId(t.Id)}}i.register("EventsCollectorAuditingEnabledIndicator").asCtor(yt).dependencies("EventsCollectorFeatureEnabledIndicator, AuditingEnabledIndicator");function yt(e,t){var n=this;n.isEnabled=r;function r(){return e.isFeatureEnabled()&&t.shouldAudit()}}i.register("EventCollectorLogger").asCtor(Et).dependencies("DataSenderLog,EventSenderErrorLogger,EventsCollectorFeatureEnabledIndicator, StaticWMDataProvider"),i.register("EventCollectorLoggerPixel").asCtor(Et).dependencies("DataSenderLogPixel,EventSenderErrorLogger,EventsCollectorFeatureEnabledIndicator,StaticWMDataProvider");function Et(t,n,r,i){var o=this;o.log=d,o.log.debug=s,o.log.info=u,o.log.warn=l,o.log.error=c,o.isLoggingEnabled=p;function a(){}function s(e,t){return d("debug",e,t)}function u(e,t){return d("info",e,t)}function l(e,t){return d("warn",e,t)}function c(e,t){return d("error",e,t)}function d(e,r,i){if(!p())return;try{var o=rg(f(e,r,i));t.send(o)}catch(a){throw n&&n.logError(rg(a.message)),a}}function f(t,n,r){return r&&"object"!=typeof r&&(r=null),e.extend({time:(new Date).getTime(),app:"player",level:t,message:n},i(),r||{})}function p(){return r.isFeatureEnabled()}a.apply(this,arguments)}i.register("EventCollectorEventSender").asCtor(St).dependencies("DataSender, EventSenderErrorLogger, EventSenderEnvironmentDataProvider, EventCollectorWalkMeDataProvider, SessionManager, CommonUtils, CommonEvents, Consts, JsonHtmlDecoder");function St(e,t,n,r,i,o,a,s,u){var l=this;l.postEvent=c;function c(n,r){try{var i=f(n,r);e.send(o.toJSON(i)),d(i)}catch(a){throw t&&t.logError(o.toJSON(a.message)),a}}function d(e){var t={eventData:e};a.raiseEvent(s.EVENTS.AnalyticsEventSent,t)}function f(e,t){var i=p(e);return"[object Function]"===Object.prototype.toString.call(t)?i.data=t():i.data=t,i.env=n.getEnvironmentData(),i.wm=r.getWalkMeData(),u.decodeJsonNodes(i),i}function p(e){return{time:(new Date).getTime(),sId:g(),pgId:h(),type:e}}function g(){return i.getCurrentSession()}function h(){return"-1"}}i.register("BILogger").asCtor(Tt).dependencies("DataSenderBI,EventSenderErrorLogger,CommonUtils,EventsCollectorAuditingEnabledIndicator,Base64,FeaturesManager,Consts, WMObjectNameObfMapper,StaticWMDataProvider");function Tt(e,t,n,r,i,o,a,s,u){var l=this;function c(){e.setStaticData("Wm-Eu-Data",f())}l.send=function(r,i){if(!l.isEnabled())return;try{var o=n.toJSON(d(r,i));e.send(o)}catch(a){throw t&&t.logError(n.toJSON(a.message)),a}},l.isEnabled=function(){return r.isEnabled()&&o.isFeatureEnabled(a.FEATURES.EnableBILogger)};function d(e,t){return t.time=(new Date).getTime(),{ns:e,data:s(t)}}function f(){return s(g(u()))}function p(e,t){return e?e[t]:void 0}function g(e){return{browserName:p(e.browser,"name"),browserVersion:p(e.browser,"version"),mobile:e.mobile,os:p(e.os,"name"),env:e.env,euId:e.euId,euIdSource:e.euIdSource,permId:e.permId,platform:e.platform,uId:e.uId,local:e.local}}c.apply(this,arguments)}i.register("ThrottledBILogger").asCtor(Ct).dependencies("FeaturesManager");function Ct(e){var t=this;t.send=s,t.isEnabled=a;var n,r=[function(){return Math.random()<.01||e.isFeatureEnabled("forcePerfLogs")},function(){return i.get("BILogger").isEnabled()}];function o(){t.isEnabled()&&(n=i.get("BILogger"))}function a(){for(var e=0;e<r.length;e++)if(!r[e]())return!1;return!0}function s(e,t){if(!n)return;n.send(e,t)}o.apply(this,arguments)}i.register("PerformanceDataIntegrityKeeper").asCtor(bt).dependencies("CommonUtils");function bt(e){this.onViolation=function(e){if("visible"!=document.visibilityState)return e();document.addEventListener("visibilitychange",e,!1)},this.unbind=function(e){document.removeEventListener("visibilitychange",e,!1)},this.isEnabled=function(){return"visibilityState"in document&&document.addEventListener}}i.register("EventBinder").asCtor(wt);function wt(){var t=this;t.bind=n,t.unbind=r,t.bindBySelector=i;function n(e,t,n){return e.on(t,n)}function r(e,t,n){return e.off(t,n)}function i(t,r,i,o){return n(e(t).find(r),i,o)}}i.register("EventCollectorWalkMeDataProvider").asCtor(It).dependencies("WalkMeInfo, InteractionManager, ExternalWalkMeConfig, EventCollectorUserDataProvider, ExtensionConfigManager");function It(e,t,n,r,i){var o=this;o.getWalkMeData=a;function a(){var o={uId:e.getUserGuid(),euId:e.getEndUserGuid(),euIdSource:e.getEndUserGuidSource(),permId:e.getPermutationId(),language:e.getLanguage(),cVars:e.getCustomVars(),env:e.getEnvironmentId(),interactionGuid:t.getCurrentInteractionGuid(),platform:n.get("platform"),userVars:r.getUserVars()},a=i.get("globalGuid");a&&(o.extensionInstallationGuid=a);var s=i.get("extVersion");s&&(o.extensionVersion=s);var u=i.get("configSrc");return u&&(o.extensionConfigSrc=u),o}}i.register("EventCollectorUserDataProvider").asCtor(Pt).dependencies("AnalyticsPropertiesManager");function Pt(e){var t=this;t.getUserVars=n;function n(){var t={name:e.getPropertyValue("name"),role:e.getPropertyValue("role"),type:e.getPropertyValue("type"),status:e.getPropertyValue("status"),info:e.getPropertyValue("info")};return t}}i.register("EventsCollectorFeatureEnabledIndicator").asCtor(_t).dependencies("Consts, HostData, FeaturesManager");function _t(e,t,n){var r=this;r.isFeatureEnabled=i;function i(){return n.isReady()&&!n.isFeatureEnabled(e.FEATURES.DisableEventCollection)&&!t.isIE(7)}}i.register("DeployableTypeToEventSenderAppTypeMapper").asCtor(kt).dependencies("Consts");function kt(e){var t=this;t.map=i;var n;function r(){n={},n[e.DEPLOYABLE_TYPE.Task]=e.EVENT_SENDER_EVENT_APPS.Task,n[e.DEPLOYABLE_TYPE.Tutorial]=e.EVENT_SENDER_EVENT_APPS.Walkthru,n[e.DEPLOYABLE_TYPE.Shuttle]=e.EVENT_SENDER_EVENT_APPS.Shuttle,n[e.DEPLOYABLE_TYPE.Launcher]=e.EVENT_SENDER_EVENT_APPS.Launcher,n[e.DEPLOYABLE_TYPE.Content]=e.EVENT_SENDER_EVENT_APPS.Content,n[e.DEPLOYABLE_TYPE.ShoutOut]=e.EVENT_SENDER_EVENT_APPS.ShoutOut,n[e.DEPLOYABLE_TYPE.Survey]=e.EVENT_SENDER_EVENT_APPS.Survey,n[e.DEPLOYABLE_TYPE.AbExperiment]=e.EVENT_SENDER_EVENT_APPS.AbTesting,n[e.AUDIT_TYPE.OPEN_TICKET]=e.EVENT_SENDER_EVENT_APPS.Ticket,n[e.DEPLOYABLE_TYPE.BusinessSolution]=e.EVENT_SENDER_EVENT_APPS.BizFlow}function i(t){return t in n?n[t]:e.EVENT_SENDER_EVENT_APPS.None}r.apply(null,arguments)}i.register("ReportInitiatorMapper").asCtor(At).dependencies("Mapper, InitiatorTypeToAppTypeMapper");function At(e,t){var n=this;n.map=r,n.mapForExtend=o;function r(t){if(!t)return;var n={};e.setIfDefined(n,t.objectId,"id"),e.setIfDefined(n,t.type,"type");var r=i(t);return e.setIfDefined(n,r,"appType"),n}function i(e){if(e.appType)return e.appType;return e.type?t.map(e.type):null}function o(e){return{pInit:r(e)}}}i.register("InitiatorTypeToAppTypeMapper").asCtor(Dt).dependencies("Consts");function Dt(e){var t=this;t.map=i,t.mapBbcodeInitiator=o;var n;function r(){n={},n[e.STEP_PLAY_INITIATOR_ENUM.LAUNCHER]=e.EVENT_SENDER_EVENT_APPS.Launcher,n[e.STEP_PLAY_INITIATOR_ENUM.TASK]=e.EVENT_SENDER_EVENT_APPS.Task,n[e.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT]=e.EVENT_SENDER_EVENT_APPS.ShoutOut,n[e.STEP_PLAY_INITIATOR_ENUM.WALKTHRU]=e.EVENT_SENDER_EVENT_APPS.Walkthru,n[e.STEP_PLAY_INITIATOR_ENUM.STEP]=e.EVENT_SENDER_EVENT_APPS.Step}function i(e){return n[e]}function o(t){if(!t)return;var n=i(t.type);return{objectId:t.objectId,type:e.STEP_PLAY_INITIATOR_ENUM.BBCODE,appType:n}}r.apply(null,arguments)}i.register("InitiatorTypeToDeployableTypeMapper").asCtor(Ot).dependencies("Consts");function Ot(e){var t=this;t.map=i;var n;function r(){var t=e.STEP_PLAY_INITIATOR_ENUM,r=e.DEPLOYABLE_TYPE;n={},n[t.LAUNCHER]=r.Launcher,n[t.TASK]=r.Task,n[t.SHOUTOUT]=r.ShoutOut,n[t.WALKTHRU]=r.Tutorial,n[t.STEP]=r.Step}function i(e){return n[e]}r.apply(null,arguments)}i.register("StepActionToEventSenderActionAppTypeMapper").asCtor(Nt).dependencies("Consts");function Nt(e){var t=this;t.map=i;var n;function r(){var t=e.STEP_ACTION,r=e.EVENT_SENDER_EVENT_APPS;n={},n[t.PlayStep]=r.Step,n[t.Branch]=r.Walkthru}function i(e){if(e in n)return n[e];return""}r.apply(null,arguments)}i.register("StepActionToEventSenderStepActionNameMapper").asCtor(xt).dependencies("Consts, Logger");function xt(e,t){var n=this;n.map=o;var r;function i(){var t=e.STEP_ACTION,n=e.EVENT_SENDER_STEP_ACTION_NAMES;r={},r[t.Redirect]=n.Redirect,r[t.PlayStep]=n.PlayStep,r[t.WaitForCondition]=n.WaitForCondition,r[t.Branch]=n.Branch,r[t.StopWt]=n.StopWt,r[t.Delay]=n.Delay,r[t.Refresh]=n.Refresh,r[t.OpenPlayerMenu]=n.OpenPlayerMenu,r[t.SetWalkMeData]=n.SetWalkMeData,r[t.PassOwnership]=n.PassOwnership}function o(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'step action' to 'event sender action name' for step action: "+e),"")}i.apply(null,arguments)}i.register("BizFlowStepActionToEventSenderActionAppTypeMapper").asCtor(Lt).dependencies("Consts");function Lt(e){var t=this;t.map=i;var n;function r(){var t=e.FLOW_ACTION_TYPE,r=e.EVENT_SENDER_EVENT_APPS;n={},n[t.ConnectToBizflow]=r.BizFlow}function i(e){if(e in n)return n[e];return""}r.apply(null,arguments)}i.register("BizFlowStepActionToEventSenderStepActionNameMapper").asCtor(Ft).dependencies("Consts, Logger");function Ft(e,t){var n=this;n.map=o;var r;function i(){var t=e.FLOW_ACTION_TYPE,n=e.EVENT_SENDER_STEP_ACTION_NAMES;r={},r[t.Redirect]=n.Redirect,r[t.WaitForCondition]=n.WaitForCondition,r[t.ConnectToBizflow]=n.Branch,r[t.Stop]=n.StopWt,r[t.Delay]=n.Delay,r[t.Refresh]=n.Refresh,r[t.OpenMenu]=n.OpenPlayerMenu,r[t.Style]=n.Style,r[t.SetData]=n.SetWalkMeData,r[t.PassOwnership]=n.PassOwnership,r[t.ErrorHandling]=n.ErrorHandling,r[t.Split]=n.Split}function o(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'bizFlow step action' to 'event sender action name' for step action: "+e),"")}i.apply(null,arguments)}i.register("BizFlowOnPageActionTypeToEventSenderStepActionNameMapper").asCtor(Mt).dependencies("Consts, Logger");function Mt(e,t){var n=this;n.map=o;var r;function i(){var t=e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE,n=e.EVENT_SENDER_STEP_ACTION_NAMES;r={},r[t.Click]=n.OnPageActionClick,r[t.Hover]=n.OnPageActionHover,r[t.Focus]=n.OnPageActionFocus,r[t.FillText]=n.OnPageActionFillText,r[t.SelectListValue]=n.OnPageActionSelectListValue}function o(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'bizFlow step action' to 'event sender action name' for On-Page-Action: "+e),"")}i.apply(null,arguments)}i.register("SessionManager").asCtor(Bt).asSingleton().dependencies("GuidGenerator, CommonEvents, Consts, Logger, WmInternals");function Bt(e,t,n,r,i){var o=this;o.getCurrentSession=l,o.setCurrentSession=c,o.beginNewSession=d;var a,s;function u(){s=r.wrapCustomerLog(n.FEATURES_LOGS.WalkMeSession)}function l(){if(!a)return null;return a}function c(e){a=e}function d(){a=e.generateGuid(),t.raiseEvent(n.EVENTS.NewSession,a),i.bind(n.EVENTS.WalkmeReady,function(){t.raiseEvent(n.EVENTS.WalkmeReadyNewSession,a)});var r="New session guid was created : "+a;s(r,2)}u.apply(this,arguments)}i.register("SessionPersister").asCtor(Rt).asSingleton().dependencies("ClientStorageManager, SessionManager, TimerManager, SiteConfigManager, Consts, Logger");function Rt(e,t,n,r,i,o){var a=this;a.loadOrCreate=g,a.startPersisting=m,a.cleanResources=E,a.isNewSession=h;var s,u,l,c=6e4,d=e.keysConfig.session.session.expiry,f=e.keysConfig.session.session.key;function p(){s=o.wrapCustomerLog(i.FEATURES_LOGS.WalkMeSession)}function g(){var n=e.getData(f);n?(l=!1,s("WalkMe Session restored from storage: "+n,1),t.setCurrentSession(n)):(s("WalkMe Session doesnt exist in storage. Starting new one",1),t.beginNewSession(),l=!0,y())}function h(){return l}function m(){var e=r.get(),t=e.Custom&&e.Custom.sessionLengthOverride;t&&(d=t),v()}function v(){y(),u=n.setWalkmeTimeout(v,c)}function y(){var n=t.getCurrentSession();e.saveData(f,n,d),s("WalkMe Session ("+n+") was saved for "+d+" seconds.",3)}function E(){u&&(u.clear(),u=null)}p.apply(this,arguments)}i.register("SessionEventSender").asCtor(Ut).dependencies("EventSender, Consts");function Ut(e,t){var n=this;n.postNewSessionEvent=r;function r(n){var r={type:"walkme"};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.SessionStart,r)}}i.register("InteractionEventsInitiatorsProvider").asCtor(Vt).dependencies("Consts, InteractionEventInitiatorFactory, ApiWasCalledNewInteractionIndicator, WidgetOpenedNewInteractionIndicator");function Vt(e,t,n,r){var i=this;i.get=s;var o;function a(){o=[],u(e.EVENTS.PlayerClicked),u(e.EVENTS.Launchers.LauncherClicked),u(e.EVENTS.AutoStart.Activated),u(e.EVENTS.PermalinkClicked),u(e.EVENTS.ApiWasCalled,n),u(e.EVENTS.WidgetOpening,r)}function s(){return o}function u(e,n){var r=t.get(n);o.push({eventName:e,callback:r.initiateInteraction})}a.apply(this,arguments)}i.register("InteractionManager").asCtor(Wt).asSingleton().dependencies("GuidGenerator, Logger");function Wt(e,t){var n=this;n.getCurrentInteractionGuid=s,n.setCurrentInteractionGuid=u,n.beginNewInteraction=l;var r,i,o="interaction";function a(){i=t.wrapCustomerLog(o)}function s(){if(!r)return null;return r}function u(e){r=e}function l(){r=e.generateGuid();var t="New interaction guid was created : "+r;i(t,3)}a.apply(this,arguments)}i.register("InteractionInitiationEventListener").asCtor(Gt).dependencies("WmInternals, InteractionEventsInitiatorsProvider");function Gt(e,t){var n=this;n.init=i;function r(){}function i(){for(var e=t.get(),n=0;n<e.length;n++){var r=e[n];o(r)}}function o(t){e.bind(t.eventName,function(e,n){t.callback(n)})}r.apply(this,arguments)}i.register("InteractionEventInitiatorFactory").asCtor(Ht).dependencies("InteractionManager");function Ht(e){var t=this;t.get=n;function n(e){return new r(e)}function r(t){var n=this;n.initiateInteraction=r;function r(n){n=i(n),t&&!t.shouldInitiateNewInteraction(n)||e.beginNewInteraction();
}function i(e){var t=o(e);return t&&(e.actualInitiatorType=t),e}function o(e){if(e&&e.initiator&&void 0!=e.initiator.type)return e.initiator.type;return}}}i.register("ApiWasCalledNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.CHAT_AGENT]};return i.create("NewInteractionIndicator",n)}),i.register("WidgetOpenedNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.ATTENTION_GRABBER]};return i.create("NewInteractionIndicator",n)}),i.register("NewInteractionIndicator").asCtor(jt).asProto().dependencies("inArrayFunc");function jt(e,t){var n=this;n.shouldInitiateNewInteraction=o;var r;function i(e){r=e.initiatorsThatBeginNewInteraction}function o(t){var n=void 0==t.actualInitiatorType||e(t.actualInitiatorType,r)!=-1;return n}i.apply(this,[t])}i.register("EmbedmentTypeProvider").asCtor(Yt).dependencies("Consts, EmbedInElementCompatibilityChecker, EmbedInOwnerDocumentCompatibilityChecker, EmbedInElementJspChecker");function Yt(e,t,n,r){var i=this;i.get=o;function o(i,o){var a=i||r.shouldUseEmbedInElementBecauseInJspPane(o);if(a){var s=t.canEmbedInElement(o);return s?e.EMBEDMENT_TYPE.EmbedInElement:e.EMBEDMENT_TYPE.EmbedInElementParent}var u=n.canEmbedInOwnerDocument(o);return u?e.EMBEDMENT_TYPE.EmbedInOwnerDocument:e.EMBEDMENT_TYPE.EmbedInTopDocument}}i.register("EmbedInOwnerDocumentCompatibilityChecker").asCtor(zt).dependencies("Consts, FeaturesManager, FramesetsUtils, ElementInIframeIndicator");function zt(e,t,n,r){var i=this;i.canEmbedInOwnerDocument=o;function o(i){var o=r.isInIframe(i),a=!o;return a||t.isFeatureEnabled(e.FEATURES.ForceEmbedInOwnerDocument)||n.shouldHandlePageAsFramesets()}}i.register("EmbedInElementCompatibilityChecker").asCtor(Qt).dependencies("HostData, EmbedInElementCompatibilityConfigProvider, CommonUtils");function Qt(e,t,n){var r=this;r.canEmbedInElement=i;function i(r){var i=e.browser.version,a=t.get(),s=n.doAllMeetCondition(a,function(e){return!r.is(e.elementType)||e.isSupported&&o(i,e)});return s}function o(e,t){return e>=t.minimalSupportedVersion}}i.register("EmbedInElementJspChecker").asCtor(qt).dependencies("Consts, FeaturesManager, CommonUtils");function qt(e,t,n){var r=this;r.shouldUseEmbedInElementBecauseInJspPane=i;function i(r){return t.isFeatureEnabled(e.FEATURES.JSP)&&!!n.findJspContainer(r)}}i.register("EmbedInElementCompatibilityConfigProvider").asCtor(Kt).dependencies("HostData");function Kt(e){var t=this;t.get=a;var n=[{elementType:"select",isSupported:!1}],r=[{elementType:"button",isSupported:!1},{elementType:"input",isSupported:!0,minimalSupportedVersion:9},{elementType:"img",isSupported:!0,minimalSupportedVersion:9},{elementType:"iframe",isSupported:!0,minimalSupportedVersion:9},{elementType:"textarea",isSupported:!1}],i=[{elementType:"textarea",isSupported:!1}];function o(){e.isIE()?n=n.concat(r):e.isEdge()&&(n=n.concat(i))}function a(){return n}o()}i.register("EmbedderElement").asCtor(Xt).asProto();function Xt(t){var n=this;n.getOriginElement=a,n.getTopMostElement=s,n.getElementSize=u;var r,i;function o(){i=e(t.topMostElement),r=e(t.originElement)}function a(){return r}function s(){return i}function u(){var e={width:r.outerWidth(),height:r.outerHeight()};return e}o.apply(null,arguments)}i.register("ElementEmbedderFactory").asCtor(Jt).dependencies("EmbedmentTypeProvider, Consts, EmbedInOwnerDocumentElementEmbedderCreator, EmbedInTopDocumentElementEmbedderCreator, EmbedInElementElementEmbedderCreator, EmbedInElementElementParentEmbedderCreator");function Jt(e,t,n,r,o,a){var s=this;s.get=l;function u(){}function l(i,o){var s=e.get(o,i);switch(s){case t.EMBEDMENT_TYPE.EmbedInElement:return c(i);case t.EMBEDMENT_TYPE.EmbedInElementParent:return a.create(i);case t.EMBEDMENT_TYPE.EmbedInOwnerDocument:return n.create(i);case t.EMBEDMENT_TYPE.EmbedInTopDocument:return r.create(i);default:throw new Error("unknown embedment type "+s)}}function c(e){var t=o.create(e),n=a.create(e),r=[t,n],s={elementEmbedders:r};return i.create("FallbackElementEmbedder",s)}u.apply(null,arguments)}i.register("ElementEmbedder").asCtor($t).asProto().dependencies("DOMSessionManager");function $t(e,t){var n=this;n.embed=c,n.reposition=f,n.getElement=l,n.destroy=h;var r,a,s;function u(){r=t.elementEmbedderApi}function l(){return a}function c(t,n,r,i){return g(),s=function(){return s=null,d(t,n,r,i)},e.mutate(s)}function d(e,t,n,i){try{var s=r.embed(e)}catch(u){return o.reject(u)}return a=p(s),f(t,n,i)}function f(e,t,n){if(!a)return o.resolve();return r.reposition(a,e,t,n)}function p(e){var t={topMostElement:e,originElement:e},n=i.create("EmbedderElement",t);return n}function g(){s&&(e.remove(s),s=null)}function h(){g(),r.destroy()}u.apply(null,arguments)}var Zt=function(){function e(e,t,n,r){this.elementAttacher=e,this.elementPositioner=t,this.domSessionManager=n,this._elementToEmbedInto=r.elementToEmbedInto,this._elementContainerProvider=r.elementContainerProvider,this._positionProvider=r.positionProvider}return e.prototype.embed=function(e){var t=this._elementContainerProvider.get(this._elementToEmbedInto),n=this.elementAttacher.attachCopy(t,e);return n},e.prototype.reposition=function(e,t,n,r){var i=this;return this.cancelReposition(),this._repositionCallback=function(){try{return i.doReposition(e,t,n,r)}catch(a){return o.reject(a)}},this.domSessionManager.measure(this._repositionCallback)},e.prototype.destroy=function(){this.cancelReposition()},e.prototype.cancelReposition=function(){if(!this._repositionCallback)return;this.domSessionManager.remove(this._repositionCallback),this._repositionCallback=null},e.prototype.doReposition=function(e,t,n,r){var i=this;this._repositionCallback=null;var o=this.getPosition(e,t,n);return r&&(o=r.refine(o)),this.domSessionManager.mutate(function(){i.setPosition(e,o)})},e.prototype.getPosition=function(e,t,n){var r=this._elementContainerProvider.get(this._elementToEmbedInto),i=this._positionProvider.getPosition(this._elementToEmbedInto,e,t,n,r);return i},e.prototype.setPosition=function(e,t){var n=e.getOriginElement();this.elementPositioner.setPosition(n,t)},e}();i.register("ElementEmbedderApi").asCtor(Zt).asProto().dependencies("ElementAttacher, ElementPositioner, DOMSessionManager"),i.register("EmbedInElementElementEmbedder").asCtor(en).asProto().dependencies("EmbedInElementWrapperCreator, ElementAttacher, DOMSessionManager");function en(e,t,n,r){var a=this;a.embed=f,a.reposition=g,a.getElement=d,a.destroy=v;var s,u,l;function c(){s=r.elementEmbedderApi}function d(){return u}function f(e,t,r,i){return m(),l=function(){return l=null,p(e,t,r,i)},n.mutate(l)}function p(n,r,i,a){var l=e.create(i);t.attach(l,n);try{var c=s.embed(l)}catch(d){return o.reject(d)}return u=h(c),g(r,i,a)}function g(e,t,n){if(!u)return o.resolve();return s.reposition(u,e,t,n)}function h(e){var t=e.children()[0],n={topMostElement:e,originElement:t},r=i.create("EmbedderElement",n);return r}function m(){l&&(n.remove(l),l=null)}function v(){m(),s.destroy()}c.apply(null,arguments)}i.register("FallbackElementEmbedder").asCtor(tn).asProto().dependencies("FallbackElementEmbedderVisibilityChecker");function tn(e,t){var n=this;n.embed=u,n.reposition=g,n.getElement=s,n.destroy=h;var r,i;function a(){r=t.elementEmbedders}function s(){return i.getElement()}function u(e,t,n,r){return d(e,t,n,r).then(l,function(){return c(e,t,n,r)})}function l(e){i=e}function c(e,t,n,o){return i=r[r.length-1],i.embed(e,t,n,o)}function d(e,t,n,i){for(var a=o.reject(),s=0;s<r.length-1;s++)a=a.then(null,function(r){return function(){return f(r,e,t,n,i)}}(r[s]));return a}function f(e,t,n,r,i){return e.embed(t,n,r,i).then(function(){return new o(function(t,n){p(e)?t(e):n()})})}function p(t){var n=t.getElement();if(e.isVisible(n))return!0;var r=n.getTopMostElement();return r.remove(),!1}function g(e,t,n,r){return i.reposition(e,t,n,r)}function h(){i.destroy()}a.apply(null,arguments)}i.register("FallbackElementEmbedderVisibilityChecker").asCtor(nn).dependencies("HostData");function nn(e){var t=this;t.isVisible=n;function n(e){var t=e.getOriginElement();return t.is(":mt_visible")}}i.register("DocumentHeadProviderFactory").asCtor(rn).dependencies("Consts, OwnerDocumentHeadProvider, TopDocumentHeadProvider");function rn(e,t,n){var r=this;r.get=o;function i(){}function o(r){if(r==e.EMBEDMENT_TYPE.EmbedInTopDocument)return n;return t}i()}i.register("OwnerDocumentHeadProvider").asCtor(on);function on(){var t=this;t.get=n;function n(t){return e("head",t[0].ownerDocument)}}i.register("TopDocumentHeadProvider").asCtor(an);function an(){var t=this;t.get=n;function n(){return e("head")}}i.register("EmbedInElementPositionProvider").asCtor(sn).dependencies("RelativeToElementElementPositionAndSizeProvider, PositionProvider");function sn(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,a,s){var u=r.getElementSize(),l=e.get(n),c=t.getPosition(l,u,i,a),d=o(c,s,r.getTopMostElement());return d}function o(e,t,n){var r=t.offset(),i=n.offset(),o={top:e.top+(r.top-i.top),left:e.left+(r.left-i.left)};return o}r.apply(null,arguments)}i.register("EmbedInElementParentPositionProvider").asCtor(un).dependencies("EmbedInElementPositionProvider");function un(e){var t=this;t.getPosition=r;function n(){}function r(t,n,r,o,a){var s=e.getPosition(t,n,r,o,a),u=i(s,t,a);return u}function i(e,t,n){var r=t.offset(),i=n.offset(),o={top:e.top+(r.top-i.top),left:e.left+(r.left-i.left)};return o}n.apply(null,arguments)}i.register("EmbedInOwnerDocumentPositionProvider").asCtor(ln).dependencies("EmbedInOwnerDocumentElementPositionAndSizeProvider, PositionProvider");function ln(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,o,a){var s=e.get(n),u=r.getElementSize(),l=t.getPosition(s,u,i,o);return l}r.apply(null,arguments)}i.register("EmbedInTopDocumentPositionProvider").asCtor(cn).dependencies("EmbedInTopDocumentElementPositionAndSizeProvider, PositionProvider");function cn(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,o,a){var s=e.get(n),u=r.getElementSize(),l=t.getPosition(s,u,i,o);return l}r.apply(null,arguments)}i.register("RelativeToElementElementPositionAndSizeProvider").asCtor(dn).dependencies("PositionHelper");function dn(e){var t=this;t.get=r;function n(){}function r(t){var n={leftOffset:0,topOffset:0},r=e.getEmbedInElementPosition(t,n);return r}n.apply(null,arguments)}i.register("EmbedInOwnerDocumentElementPositionAndSizeProvider").asCtor(fn).dependencies("PositionHelper");function fn(e){var t=this;t.get=r;function n(){}function r(t){var n={leftOffset:0,topOffset:0},r=e.getElementBounds(t,!0,window,n);return r}n.apply(null,arguments)}i.register("EmbedInTopDocumentElementPositionAndSizeProvider").asCtor(pn).dependencies("PositionHelper");function pn(e){var t=this;t.get=r;function n(){}function r(t){var n={leftOffset:0,topOffset:0},r=e.getElementBounds(t,!1,window,n);return r}n.apply(null,arguments)}i.register("InsidePositionCalculator").asCtor(gn).dependencies("Consts");function gn(e){var t=this;t.calculate=r;function n(){}function r(t,n,r,i){var o,a;switch(t){case e.POSITION_TYPE.Top:o=n.top,a=r.left-i.width/2;break;case e.POSITION_TYPE.Right:o=r.top-i.height/2,a=n.right-i.width;break;case e.POSITION_TYPE.Bottom:o=n.bottom-i.height,a=r.left-i.width/2;break;case e.POSITION_TYPE.Left:o=r.top-i.height/2,a=n.left;break;case e.POSITION_TYPE.TopLeft:o=n.top,a=n.left;break;case e.POSITION_TYPE.TopRight:o=n.top,a=n.right-i.width;break;case e.POSITION_TYPE.BottomRight:o=n.bottom-i.height,a=n.right-i.width;break;case e.POSITION_TYPE.BottomLeft:o=n.bottom-i.height,a=n.left;break;case e.POSITION_TYPE.Center:o=r.top-i.height/2,a=r.left-i.width/2}return{top:o,left:a}}n.apply(null,arguments)}i.register("OutsidePositionCalculator").asCtor(hn).dependencies("Consts");function hn(e){var t=this;t.calculate=r;function n(){}function r(t,n,r,i){var o,a;switch(t){case e.POSITION_TYPE.Top:o=n.top-i.height,a=r.left-i.width/2;break;case e.POSITION_TYPE.Right:o=r.top-i.height/2,a=n.right;break;case e.POSITION_TYPE.Bottom:o=n.bottom,a=r.left-i.width/2;break;case e.POSITION_TYPE.Left:o=r.top-i.height/2,a=n.left-i.width;break;case e.POSITION_TYPE.TopLeft:o=n.top-i.height,a=n.left-i.width;break;case e.POSITION_TYPE.TopRight:o=n.top-i.height,a=n.right;break;case e.POSITION_TYPE.BottomRight:o=n.bottom,a=n.right;break;case e.POSITION_TYPE.BottomLeft:o=n.bottom,a=n.left-i.width}return{top:o,left:a}}n.apply(null,arguments)}i.register("PositionCalculatorFactory").asCtor(mn).dependencies("Consts, InsidePositionCalculator, OutsidePositionCalculator");function mn(e,t,n){var r=this;r.get=o;function i(){}function o(r){switch(r){case e.POSITION_PERIMETER_TYPE.Outside:return n;case e.POSITION_PERIMETER_TYPE.Inside:return t}}i.apply(null,arguments)}i.register("ElementPositioner").asCtor(vn);function vn(){var e=this;e.setPosition=n;function t(){}function n(e,t){e.css("top",t.top+"px"),e.css("left",t.left+"px")}t.apply(null,arguments)}i.register("PositionProvider").asCtor(yn).dependencies("PositionCalculatorFactory, PositionHelper");function yn(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,o){var a=t.getCenterPositionByBounds(n),s=e.get(i),u=s.calculate(o,n,a,r);return u}r.apply(null,arguments)}i.register("EmbedInElementContainerProvider").asCtor(En);function En(){var e=this;e.get=n;function t(){}function n(e){return e}t.apply(null,arguments)}i.register("EmbedInElementParentContainerProvider").asCtor(Sn);function Sn(){var e=this;e.get=n;function t(){}function n(e){return e.parent()}t.apply(null,arguments)}i.register("EmbedInOwnerDocumentContainerProvider").asCtor(Tn).dependencies("TopContainerProvider");function Tn(e){var t=this;t.get=r;function n(){}function r(t){return e.getTopContainer(t)}n.apply(null,arguments)}i.register("EmbedInTopDocumentContainerProvider").asCtor(Cn).dependencies("TopContainerProvider");function Cn(e){var t=this;t.get=r;function n(){}function r(){return e.getTopContainer(null,!0)}n.apply(null,arguments)}i.register("ElementAttacher").asCtor(bn);function bn(){var e=this;e.attach=t,e.attachCopy=n,e.detach=r,e.detachByElement=i;function t(e,t){var n=t.appendTo(e);return n}function n(e,t){e.append(t[0].outerHTML);var n=e.children().filter(":last-child");return n}function r(e,t){var n=e.find(t);n&&n.remove()}function i(e){try{e&&e.remove()}catch(t){}}}i.register("EmbedInElementElementEmbedderCreator").asCtor(wn).dependencies("EmbedInElementContainerProvider, EmbedInElementPositionProvider");function wn(e,t){var n=this;n.create=o;function r(){}function o(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},o=i.create("ElementEmbedderApi",r),a={elementEmbedderApi:o};return i.create("EmbedInElementElementEmbedder",a)}r.apply(null,arguments)}i.register("EmbedInElementElementParentEmbedderCreator").asCtor(In).dependencies("EmbedInElementParentContainerProvider, EmbedInElementParentPositionProvider");function In(e,t){var n=this;n.create=o;function r(){}function o(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},o=i.create("ElementEmbedderApi",r),a={elementEmbedderApi:o};return i.create("EmbedInElementElementEmbedder",a)}r.apply(null,arguments)}i.register("EmbedInOwnerDocumentElementEmbedderCreator").asCtor(Pn).dependencies("EmbedInOwnerDocumentContainerProvider, EmbedInOwnerDocumentPositionProvider");function Pn(e,t){var n=this;n.create=o;function r(){}function o(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},o=i.create("ElementEmbedderApi",r),a={elementEmbedderApi:o};return i.create("ElementEmbedder",a)}r.apply(null,arguments)}i.register("EmbedInTopDocumentElementEmbedderCreator").asCtor(_n).dependencies("EmbedInTopDocumentContainerProvider, EmbedInTopDocumentPositionProvider");function _n(e,t){var n=this;n.create=o;function r(){}function o(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},o=i.create("ElementEmbedderApi",r),a={elementEmbedderApi:o};return i.create("ElementEmbedder",a)}r.apply(null,arguments)}i.register("EmbedInElementWrapperCreator").asCtor(kn).dependencies("Consts");function kn(e){var t=this;t.create=r;function n(){}function r(e){var t=mtjQuery(document.createElement("div"));return a(t),i(t,e),s(t),t}function i(e,t){e.css("position","relative"),e.css("display","inline-block"),e.css("float",o(t))}function o(t){var n="left";switch(t){case e.POSITION_TYPE.Right:case e.POSITION_TYPE.TopRight:case e.POSITION_TYPE.BottomRight:n="right"}return n}function a(e){e.css("display","-moz-inline-stack")}function s(e){e.css("zoom","1"),e.css("*display","inline")}n.apply(null,arguments)}i.register("ClickIconExecutionBehavior").asCtor(An).asProto().dependencies("CommonUtils");function An(t,n){var r=this;r.applyBehavior=u;var i,o,a=2e3;function s(e){i=e.clickAction}function u(e){var t=e.getTopMostElement();l(t)}function l(t){t.click(function(t){c()&&(e(this).blur(),i())})}function c(){var e=(new Date).getTime(),t=e-o;if(null!=o&&t<=a)return!1;return o=e,!0}s.apply(null,[n])}i.register("DefaultIconExecutionBehavior").asCtor(Dn);function Dn(){var e=this;e.applyBehavior=n;function t(){}function n(e){var t=e.getTopMostElement();r(t)}function r(e){e.click(function(e){e.preventDefault(),e.stopPropagation()}),e.hover(function(e){e.stopPropagation()})}t.apply(null,arguments)}i.register("DefaultIconUiBehavior").asCtor(On).dependencies("CommonUtils");function On(e){var t=this;t.applyBehavior=r;function n(){}function r(e){var t=e.getTopMostElement();i(t),o(t)}function i(t){e.addTabIndex(t)}function o(e){e.css("cursor","pointer")}n.apply(null,arguments)}i.register("TolltipIconUiBehavior").asCtor(Nn).asProto().dependencies("HtmlDecoder");function Nn(e,t){var n=this;n.applyBehavior=o;var r;function i(e){r=e.tooltipText}function o(e){a(e)}function a(e){var t=e.getTopMostElement(),n=s();t.attr("title",n)}function s(){var t=e.decodeHtml(r,["&",'"',"'",">","<"]);return t}i.apply(null,[t])}i.register("ContentIconCreator").asCtor(xn).dependencies("Consts, DocumentHeadProviderFactory, EmbedmentTypeProvider, ElementEmbedderFactory");function xn(e,t,n,r){var o=this;o.create=s;function a(){}function s(t){var n=c(t);if(t.contentData.kind==e.ICON_CONTENT_KIND.Image)return u(n,t);return l(n,t)}function u(e,t){var n={contentData:t.contentData,cssClasses:t.cssClasses,zindex:t.zindex,iconEmbedder:e,isAnimated:t.isAnimated};return i.create("ImageIcon",n)}function l(e,r){var o=n.get(r.isEmbedInElement,r.element),a=t.get(o),s={headToEmbedFontsIn:a.get(r.element),text:r.contentData.text,cssClasses:r.cssClasses,zindex:r.zindex,iconEmbedder:e};return r.contentData.cssClassName&&r.cssClasses.positionElementCssClassNames.push(r.contentData.cssClassName),i.create("TextIcon",s)}function c(e){var t=r.get(e.element,e.isEmbedInElement),n={embedder:t,perimeterType:e.perimeterType,attachmentSide:e.attachmentSide,positionCustomOffset:e.positionCustomOffset,growingDirection:e.growingDirection,element:e.element};return i.create("IconEmbedder",n)}a()}i.register("CustomTemplateIconParamsProvider").asCtor(Ln).dependencies("LauncherCustomImagesProvider, Consts");function Ln(e,t){var n=this;n.getFromCustomTemplate=r;function r(n){var r=e.getById(n);if(!r)return null;var i={mainImageUrl:r.Url,hoverImageUrl:r.Hover,clickImageUrl:r.Click,text:r.CustomText,cssClassName:"custom-launcher-"+n,kind:r.Url?t.ICON_CONTENT_KIND.Image:t.ICON_CONTENT_KIND.Text};return i}}i.register("Icon").asCtor(Fn).asProto().dependencies("ElementAttacher, IconBehaviorsApplier");function Fn(e,t,n){var r=this;r.show=l,r.destroy=f,r.reposition=p;var i,o,a,s;function u(){i=n.concreteIcon,o=n.iconElementUniqueIdentifier,a=n.behaviors}function l(){return i.show().then(function(e){return s=e,c(),d(),s})}function c(){var e=s.getTopMostElement();e.addClass(o),e.addClass("walkme-not-embed")}function d(){t.applyBehaviors(s,a)}function f(){s&&(e.detachByElement(s.getTopMostElement()),s=void 0),i.destroy()}function p(){i.reposition()}u()}i.register("IconBehaviorsApplier").asCtor(Mn);function Mn(){var e=this;e.applyBehaviors=n;function t(){}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.applyBehavior(e)}}t()}i.register("IconCreator").asCtor(Bn).dependencies("ContentIconCreator, DefaultIconUiBehavior, DefaultIconExecutionBehavior");function Bn(e,t,n){var r=this;r.create=a;function o(){}function a(r){var o=[t,n],a=e.create(r),s={concreteIcon:a,behaviors:o,iconElementUniqueIdentifier:"walkme-icon-root-"+r.uniqueIdentifierType+"-"+r.uniqueIdentifierId};return i.create("Icon",s)}o()}i.register("IconCreatorParamsProvider").asCtor(Rn).dependencies("Consts, CommonUtils");function Rn(e,t){var n=this;n.get=r;function r(n,r){var i=(t.defaultValue(r.isAnimated,!1),{element:n,uniqueIdentifierType:r.uniqueIdentifierType,uniqueIdentifierId:r.uniqueIdentifierId,isEmbedInElement:t.defaultValue(r.isEmbedInElement,!1),contentData:r.contentData,isAnimated:r.isAnimated,attachmentSide:r.attachmentSide,zindex:t.defaultValue(r.zindex,"2147483627"),perimeterType:parseInt(t.defaultValue(r.perimeterType,e.POSITION_PERIMETER_TYPE.Outside)),positionCustomOffset:{top:parseInt(t.defaultValue(r.positionTopCustomOffset,0)),left:parseInt(t.defaultValue(r.positionLeftCustomOffset,0))},cssClasses:{contentElementCssClassNames:r.contentElementCssClassNames,positionElementCssClassNames:r.positionElementCssClassNames}});return i}}i.register("IconEmbedder").asCtor(Un).asProto().dependencies("IconPositionRefiner, ElementPositioner, CustomCssSetter");function Un(e,t,n,r){var i=this;i.embed=f,i.reposition=p,i.destroy=g;var o,a,s,u,l,c;function d(){o=r.embedder,a=r.perimeterType,s=r.attachmentSide,u=r.positionCustomOffset,l=r.growingDirection,c=r.element}function f(e){return n.setCustomCssIfNeeded(c),o.embed(e,a,s,{refine:h}).then(function(){return o.getElement()})}function p(){return o.reposition(a,s,{refine:h})}function g(){o.destroy()}function h(t){var n=e.refine(t,u);return n}d()}i.register("IconHtmlElementCreator").asCtor(Vn).dependencies("CssClassesAppender, IconPositionElementCreator");function Vn(e,t){var n=this;n.createElement=i;function r(){}function i(e,n,r){o(e,n.contentElementCssClassNames);var i=t.create(r);return a(i,n.positionElementCssClassNames),i.html(e),i}function o(t,n){e.appendClasses(t,["walkme-icon-image-div"]),e.appendClasses(t,n)}function a(t,n){e.appendClasses(t,["walkme-custom-icon-outer-div"]),e.appendClasses(t,n)}r()}i.register("IconContentProvider").asCtor(Wn).dependencies("PredefinedShapeImageIconParamsProvider, CustomTemplateIconParamsProvider, PredefinedHtmlShapeIconParamsProvider");function Wn(e,t,n){var r=this;r.get=o;function i(){}function o(r){if(r.TemplateId)return"htmlShape"==r.Type?n.getFromCustomTemplate(r.TemplateId):t.getFromCustomTemplate(r.TemplateId);if("htmlShape"==r.Type)return n.getFromSettingsImageObject(r.Predefined);return e.getFromSettingsImageObject(r.Predefined)}i.apply(null,arguments)}i.register("IconsFilterer").asCtor(Gn).asProto();function Gn(t){var n=this;n.getById=o;var r;function i(){r=t.getImages}function o(t){var n=e(r()).filter(function(e,n){return n.Id==t});if(n)return n[0];return null}i()}i.register("LauncherCustomImagesProvider").dependencies("IconTemplates").asFunction(function(e){return i.create("IconsFilterer",{getImages:function(){return e.customImages}})}),i.register("LauncherHtmlShapesProvider").dependencies("IconTemplates").asFunction(function(e){return i.create("IconsFilterer",{getImages:function(){return e.htmlImages}})}),i.register("IconImageUrlsToAbsoluteUrlsConverter").asCtor(Hn).dependencies("PredefinedIconsFolderProvider");function Hn(e){var t=this;t.convert=n;function n(e){e.mainImageUrl=r(e.mainImageUrl),e.hoverImageUrl=r(e.hoverImageUrl),e.clickImageUrl=r(e.clickImageUrl)}function r(t){if(!t||i(t))return t;var n=e.get();return n+t}function i(e){return 0==e.indexOf("http")}}i.register("ImageIconAnimatedContentState").asCtor(jn).asProto();function jn(e){var t=this;t.applyState=o;var n,r;function i(e){n=e.imageSize,r=e.imageUrl}function o(e){e.stop(),a(e),s(e)}function a(e){e.css("background-image",'url("'+r+'")')}function s(e){e.animate({width:n.width+"px",height:n.height+"px"})}i.apply(null,[e])}i.register("ImageIconNotAnimatedContentState").asCtor(Yn).asProto();function Yn(e){var t=this;t.applyState=o;var n,r;function i(e){n=e.imageSize,r=e.imageUrl}function o(e){a(e),s(e)}function a(e){e.css("background-image",'url("'+r+'")')}function s(e){e.css("height",n.height+"px"),e.css("width",n.width+"px")}i.apply(null,[e])}i.register("ImageIconContentStateFactory").asCtor(zn);function zn(){var e=this;e.get=n;function t(){}function n(e,t,n){var r={imageUrl:t,imageSize:n};return e?i.create("ImageIconAnimatedContentState",r):i.create("ImageIconNotAnimatedContentState",r)}t.apply(null,arguments)}i.register("ImageIconStatesProvider").asCtor(Qn).dependencies("Consts, ImageIconContentStateFactory");function Qn(e,t){var n=this;n.getStates=i;function r(){}function i(n,r){var i={},o=t.get(r,n.mainImageUrl,n.mainImageSize);if(i[e.ICON_CONTENT_STATE.Regular]=o,n.clickImageSize){var a=t.get(r,n.clickImageUrl,n.clickImageSize);i[e.ICON_CONTENT_STATE.Click]=a}if(n.hoverImageSize){var s=t.get(r,n.hoverImageUrl,n.hoverImageSize);i[e.ICON_CONTENT_STATE.Hover]=s}return i}r()}i.register("ImageIcon").asCtor(qn).asProto().dependencies("IconHtmlElementCreator, ImageIconElementCreator, ImageIconResourcesLoader, ImageIconEventsBinder, Consts, ImageIconStatesProvider");function qn(e,t,n,r,i,o,a){var s=this;s.show=h,s.reposition=S,s.destroy=T;var u,l,c,d,f,p;function g(){u=a.contentData,l=a.cssClasses,c=a.zindex,d=a.iconEmbedder,f=a.isAnimated}function h(){return n.load(u).then(m).then(v)}function m(e){p=o.getStates(e,f)}function v(){var n=t.create();E(n,i.ICON_CONTENT_STATE.Regular);var o=e.createElement(n,l,c);return d.embed(o).then(function(e){return n=e.getOriginElement().children().first(),r.bind(n,p,y),e})}function y(e,t){E(e,t),S()}function E(e,t){p[t].applyState(e)}function S(){return d.reposition()}function T(){d.destroy()}g()}i.register("ImageIconElementCreator").asCtor(Kn);function Kn(){var e=this;e.create=n;function t(){}function n(){var e=mtjQuery(document.createElement("div"));return e.css("background-repeat","no-repeat"),e}t.apply(this,arguments)}i.register("ImageIconEventsBinder").asCtor(Xn).dependencies("Consts");function Xn(e){var t=this;t.bind=n;function n(t,n,o){n[e.ICON_CONTENT_STATE.Hover]&&r(t,o),n[e.ICON_CONTENT_STATE.Click]&&i(t,n,o)}function r(t,n){var r=function(){n(t,e.ICON_CONTENT_STATE.Hover)},i=function(){n(t,e.ICON_CONTENT_STATE.Regular)};t.hover(r,i)}function i(t,n,r){var i=o(n),a=function(){r(t,e.ICON_CONTENT_STATE.Click)},s=function(){r(t,i)};t.on("touchend mouseup",s).on("touchstart mousedown",a)}function o(t){return t[e.ICON_CONTENT_STATE.Hover]?e.ICON_CONTENT_STATE.Hover:e.ICON_CONTENT_STATE.Regular}}i.register("ImageIconResourcesLoader").asCtor(Jn).dependencies("ImageLoader, CommonUtils, IconImageUrlsToAbsoluteUrlsConverter");function Jn(e,t,n){var r=this;r.load=a;function i(){}function a(e){n.convert(e);var r={},i=[];return s(r,i,"mainImageUrl","mainImageSize",e),e.hoverImageUrl&&s(r,i,"hoverImageUrl","hoverImageSize",e),e.clickImageUrl&&s(r,i,"clickImageUrl","clickImageSize",e),new o(function(e,n){var o={functionsToExecute:i,successCallback:function(){e(r)},failCallback:n};t.executeParallel(o)})}function s(t,n,r,i,o){function a(e){t[i]=e,t[r]=o[r]}n.push(function(t){e.getImageSize(o[r],function(e){a(e),t()})})}i()}i.register("PredefinedIconsFolderProvider").asCtor($n).dependencies("ResourceManager");function $n(e){var t=this;t.get=n;function n(){var t="/player/resources/launchers/",n=e.getResourcePath(t);return n}}i.register("IconPositionElementCreator").asCtor(Zn).dependencies("UiUtils, TopMostCssStyleSettter");function Zn(e,t){var n=this;n.create=i;function r(){}function i(n){var r=mtjQuery(document.createElement("div"));return e.addBrowserSpecificClasses(r),e.setLangAttribute(r),r.css("position","absolute"),r.css("display","inline"),r.css("left",0),r.css("top",0),t.setTopMostCssStyle(r,n),r}r.apply(null,arguments)}i.register("IconPositionRefiner").asCtor(er);function er(){var e=this;e.refine=t;function t(e,t){var r={top:e.top,left:e.left};return n(r,t),r}function n(e,t){e.top+=t.top,e.left+=t.left}}i.register("PredefinedShapeImageIconParamsProvider").asCtor(tr).dependencies("CommonUtils, Consts");function tr(e,t){var n=this;n.getFromSettingsImageObject=r;function r(n){var r=n.data.shape+"-"+n.data.color,i={mainImageUrl:r+".png",kind:t.ICON_CONTENT_KIND.Image,hoverImageUrl:e.isValueTrue(n.data.hover)?r+"-hover.png":null,clickImageUrl:e.isValueTrue(n.data.click)?r+"-click.png":null};return i}}i.register("PredefinedHtmlShapeIconParamsProvider").asCtor(nr).dependencies("LauncherHtmlShapesProvider, Consts");function nr(e,t){var n=this;n.getFromSettingsImageObject=r,n.getFromCustomTemplate=i;function r(e){var n={text:e.data.customText,cssClassName:e.data.customClass,kind:t.ICON_CONTENT_KIND.Text};return n}function i(n){var r=e.getById(n),i={text:r.Text,kind:t.ICON_CONTENT_KIND.Text,cssClassName:"html-launcher-"+r.Shape+"-"+r.Color};return i}}i.register("SmartTipIconCreator").asCtor(rr).dependencies("IconCreator, IconCreatorParamsProvider, IconContentProvider, SmartTipIconStylingProvider");function rr(e,t,n,r){var i=this;i.create=a;function o(){}function a(n,r,i,o){var a=s(n,r,o),u=t.get(i,a);return e.create(u,i)}function s(e,t,i){var o=r.get(t,i),a=n.get(o),s={uniqueIdentifierType:"SmartTip",uniqueIdentifierId:e.Id,isEmbedInElement:e.Settings.embedInParent,attachmentSide:e.Settings.Position,zindex:e.Settings["z-index"],perimeterType:e.Settings.context,isAnimated:e.Settings.animated,growingDirection:e.Settings.direction,positionTopCustomOffset:e.Settings.topOffset,positionLeftCustomOffset:e.Settings.leftOffset,contentElementCssClassNames:[],positionElementCssClassNames:u(e,a),contentData:a};return s}function u(e,t){var n=[];return n.push("walkme-icon-position-smartTip-id-"+e.Id),t.customClass&&n.push(t.customClass),n}o.apply(null,arguments)}i.register("SmartTipIconStylingProvider").asCtor(ir);function ir(){var e=this;e.get=n;function t(){}function n(e,t){if(e.TemplateId)return{TemplateId:e.TemplateId};if(e.Settings.imageObject){if("htmlShape"==e.Settings.imageObject.type)return{TemplateId:e.Settings.imageObject.data.id,Predefined:e.Settings.imageObject,Type:e.Settings.imageObject.type};return{Predefined:e.Settings.imageObject}}if(t.Icon.TemplateId)return{TemplateId:t.Icon.TemplateId};if("htmlShape"==t.Icon.Predefined.type)return{Predefined:t.Icon.Predefined,Type:t.Icon.Predefined.type};return{Predefined:t.Icon.Predefined}}t.apply(null,arguments)}i.register("TextIcon").asCtor(or).asProto().dependencies("TextIconResourcesLoader, IconHtmlElementCreator, TextIconElementCreator");function or(e,t,n,r){var i=this;i.show=d,i.reposition=p,i.destroy=g;var o,a,s,u,l;function c(){o=r.headToEmbedFontsIn,a=r.text,s=r.cssClasses,u=r.zindex,l=r.iconEmbedder}function d(){return e.load(o).then(f)}function f(){var e=n.create(a),r=t.createElement(e,s,u);return l.embed(r)}function p(){return l.reposition()}function g(){l.destroy()}c()}i.register("TextIconElementCreator").asCtor(ar);function ar(){var e=this;e.create=n;function t(){}function n(e){var t=mtjQuery(document.createElement("div"));return t.html(e),t}t.apply(null,arguments)}L.register(O.PLATFORM.Web,function(){i.register("TextIconResourcesLoader").asCtor(sr).dependencies("ResourceManager, FontsData")});function sr(e,t){var n=this;n.load=r;function r(n){return new o(function(r,i){e.fonts([t.get("walkme-opensans")],n,r,i)})}}L.register(O.PLATFORM.MobileWeb,function(){i.register("TextIconResourcesLoader").asCtor(ur).dependencies("ResourceManager, FontsData")});function ur(e,t){var n=this;n.load=r;function r(n){return new o(function(r,i){e.fonts([t.get("walkme-opensans"),t.get("lib-font")],n,r,i)})}}i.register("AuditingEnabledIndicator").asCtor(lr).dependencies("CommonUtils, FeaturesManager, SiteConfigManager, RecorderServerManager,CorsSupportIndicator, Consts, IsInEditor");
function lr(e,t,n,r,o,a,s){var u=this;u.isEnabled=l,u.shouldAudit=c;function l(){var a=!1,s=!!window.wm_no_audit,u=!!e.getWindowCookie("wm-no-audit"),l=!t.isFeatureEnabled("blockJsonp")||o.hasCorsSupport(),c=n.get(),d=!!c.Settings&&!!c.Settings.noAuditCond&&i.get("ConditionTreeEvaluator").evaluate(c.Settings.noAuditCond);return l&&r.get()&&!t.isFeatureEnabled("noAudit")&&!a&&!s&&!u&&!d}function c(){var e=i.get("WalkMeInfo");return e.getEnvironmentId&&e.getEnvironmentId()!=a.SOURCES.preview&&!s.get()&&l()}}i.register("GoalsManagerParams").asInstance({checkInterval:2e3}),i.register("GoalsManager").asCtor(cr).dependencies("GoalsManagerParams, Logger, HostData, ClientStorageManager, Consts, CommonEvents, ConditionCheckerFactory, UserGuidContainer");function cr(e,t,n,r,i,o,a,s){var l,c,d=500,f=5e3,p="Conditions",g=this,h=null,m={},v=0,y={},E=0,S=!1;function T(){h=void 0==e.checkInterval?f:e.checkInterval,l=t.wrapCustomerLog(u)}function C(e,t,n){y[e.Id]={relatedObjectId:e.RelatedObjectId,goalType:e.GoalType,evaluator:n,goalCompletedFunc:t.goalCompletedFunc,identifier:t.identifier,interactionGuid:t.interactionGuid}}function b(e,t){var f=m[e.Id];if(f){if(e.IsLinkedGoal){var p=cg("Skipping goal watch - Goal is already watched : {0}, type: {1}",e.Name,e.GoalType);return l(p,3),null}g.removeGoalWatch(e.Id)}var y={trackUIChange:!0,evaluationPollingIntervalMs:h,featureName:u,elementName:"Goal: "+e.Name},T=a.createOld(y);m[e.Id]=e,v++,C(e,t,T);var b=t.identifier,w=b?cg(", PlayGuid of : {0}",b):"",p=cg("Start watching Goal : {0}, type: {1} {2}",e.Name,e.GoalType,w);return l(p,3),T.onValueChanged(function(t){t&&I(e)}),T.onPreEvaluation(function(t,n){n||(S?S=!1:0===E&&(c=0,l("============================ CHECKING GOALS ==============================================================",2)),e.goalStart=(new Date).getTime()),o.sendAutomationEvent("CheckingGoal",{GoalId:e.Id,GoalName:e.Name});var r=n?" (async)":"",i=cg("Goal: {0} - Checking Goal , id : {1}, type: {2}, RelatedObjectId: {3}{4}",e.Name,e.Id,e.GoalType,e.RelatedObjectId,r);l(i,3)}),T.onEvaluated(function(t,a){var u=(new Date).getTime(),f=u-e.goalStart,h=a?" (async)":"";if(p=cg("Goal: {0} - checking finished, id : {1}, took {2} ms{3}",e.Name,e.Id,f,h),l(p,4),o.deprecatedRaiseEvent(i.EVENTS.Goals.ConditionEvaluated,{goal:e},{playGUID:b}),!a&&(E++,c+=f,E>=v&&(l("Done checking "+E+" Goals. took: "+c+" ms",2),l("============================ DONE CHECKING GOALS =========================================================",2),E=0),c>d)){l("Goals tracking time until now is "+c+" ms. It broke the time limit of "+d+" ms. Stopped tracking current goals.");var m=r.keysConfig.goals.blocked;r.getData(m.key)||(p=cg("Goals tracking broke limit and was stopped - user id: {0}, end user id: {1}, time: {2}, browser: {3}, url: {4}",s.getUserGuid(),_makeTutorial.getEndUserId(),c,n.browser.string,window.location.href),_makeTutorial.Logger.error({},p),r.saveData(m.key,!0,m.expiry)),g.removeAllGoalsWatch()}}),e}this.addGoalsWatch=function(e,t){for(var n=e.length-1;n>=0;n--)for(var r=e[n],i=e.length-1;i>n;i--){var o=e[i];r.Id==o.Id&&e.splice(i,1)}for(var a=[],n=0;n<e.length;n++){var s=b(e[n],t);s&&a.push(s)}for(var n=0;n<a.length;n++){var u=a[n],l=w(u.Id);l.evaluateAsync(u.Settings[p])}},this.cleanResources=function(){for(var e in m){var t=w(e);t&&t.cleanResources()}},this.removeGoalWatch=function(e){if(l(e,5,"goalProblem"),l(m[e],5,"goalProblem"),!m[e])return;var t=w(e);--E,--v,0==E&&v>0&&(S=!0),t&&t.cleanResources(),delete m[e],delete y[e]},this.removeAllGoalsWatch=function(){g.cleanResources(),m={},y={},v=0,E=0},this.completeGoalById=function(e){var t=m[e];if(!t)return void l("Could not complete goal with id "+e+" - it was already completed or does not exist.",3);I(t)};function w(e){return y[e].evaluator}function I(e){l('Goal "'+e.Name+'" Reached! ',1);var n=e.Id,r=y[n],a=g.createGoalCompletedParams(e,r);try{r.goalCompletedFunc&&r.goalCompletedFunc(a)}catch(s){t.error(s,"completing goal callback threw an exception.")}g.removeGoalWatch(e.Id),o.raiseEvent(i.EVENTS.Goals.GoalReached,P(r,e)),o.sendAutomationEvent(i.EVENTS.Goals.GoalReached,{GoalId:e.Id,GoalName:e.Name})}function P(e,t){return{goal:t,identifier:e.identifier,interactionGuid:e.interactionGuid,GoalId:t.Id,GoalName:t.Name}}g.createGoalCompletedParams=function(e,t){var n={Id:e.Id,GoalType:t.goalType,RelatedObjectId:t.relatedObjectId,Name:e.Name,identifier:t.identifier,interactionGuid:t.interactionGuid};return n},g.getGoalsCountFromDictionary=function(){var e=g.getCheckedGoals(),t=0;for(var n in e)void 0!=m[n]&&void 0!=m[n].Id&&void 0!=m[n].Settings&&t++;return t},T.apply(null,arguments),g.getCheckedGoals=function(){return m},g.getGoalsCompletionParams=function(){return y}}i.register("WalkMeGoalsManager").asCtor(dr).dependencies("ClientStorageManager,GoalsManager,DeployablesManagerFactory,WalkMeInfo,ServerDataSenderManager,Logger,TimerManager,CommonEvents, InteractionManager, Consts, AuditingEnabledIndicator, SafeFullUrlProvider, DeployableTypeNameProvider");function dr(e,t,n,r,i,o,a,s,l,c,d,f,p){var g=this;g.onGoalCompleted=k,g.enableMultiUserStorage=A,g.startWatchingDeployable=D,g.stopWatchingDeployables=N,g.init=x,g.getCompletedGoals=R,g.getDeployableGoalsByIdAndType=Y,g.getWatchedDeployablesOfType=J,g.getGoalsFromDeployable=U,g.getGoalById=z;var h,m,v=3600,y="wm-wtchd",E="tID",S="plgd",T="fnsh",C="igd",b=!1,w=[],I={},P=2e3;function _(){h=o.wrapCustomerLog(u),m=i.register("go",{actionUrl:"/Statistics/AddCompletedGoal",technicalSuccessHandler:B,defaultDataStorageLifeSeconds:v,prefixForStorage:"go",sendingThreshold:1,dataType:"deployable goal",requestParamsFunc:function(e){var t=e[0],n=t.GoalType==c.DEPLOYABLE_TYPE.AbExperiment;return{goalId:t.Id,playGuid:t.identifier,permutationId:r.getPermutationId(),endUserGuid:r.getEndUserGuid(),source:r.getEnvironmentId(),localTime:fg(),url:f.get(),isAbTesting:n}}})}function k(e){w.push(e)}function A(){b=!0}function D(e,n){var r=U(e);if(r.length>0){var i=r[0].GoalType,o=j(e,n);V(e,i,n,o);var a=O(o);t.addGoalsWatch(r,a);var s=p.getDeployableTypeNameByTypeNumber(i),u=cg("Started watching {0} : {1}",s,e.Name);h(u,2)}}function O(e){var t=e[S],n=(e[T],e[C]),r={identifier:t,interactionGuid:n,goalCompletedFunc:q};return r}function N(e){Z(e)}function x(e){var t=F(!0);h("Restoring watched Goals... "+t+" Walk-Thrus are watched.",2),e&&a.libSetTimeout(L,P)}function L(){var e=F(!1);e&&h("New watched deploybles... "+e+" more items are now watched.",2),a.libSetTimeout(L,P)}function F(e){var t=0;return mtjQuery.each(c.DEPLOYABLE_TYPE,function(n,r){var i=J(r);for(var o in i)if(void 0!=i[o]&&void 0!=i[o][E]){var a=i[o];(e||M(r,a))&&(Q(a,r),t++)}}),t}function M(e,t){if(!I[e])return!0;var n=t[E];if(I[e][n]!=t[S])return!0;return!1}function B(e,t,n,r){"true"==e?r(parseInt(e)):"error"==e?(h("Completed goal - Internal Error",3),n()):(h("Completed goal - Unknown Error",3),t())}function R(e,t){if(void 0==e||!t)return;var n=J(e);if(!n)return;var r=n[t];if(!r)return;var i=r[S],o=r[T];return{playGuid:i,finishedGoals:o}}function U(e){var t=e.Goals;return t||(t=[]),t.slice()}function V(e,t,n,r){var i=H(e);G(t,H(e),r),W(t,i,n)}function W(e,t,n){I[e]=I[e]||{},I[e][t]=n}function G(t,n,r){var i=ee(t);e.addToDictionary(i,n,r,v)}function H(e){return e.Id?e.Id:e.TutorialId}function j(e,t){var n={};return n[E]=H(e),n[S]=t,n[T]=[],n[C]=l.getCurrentInteractionGuid(),n}function Y(e,t){var r=n.get(t),i=r.getById(e);if(i)return U(i);return[]}function z(e,t){for(var n,r=0;r<e.length;r++)if(e[r].Id==t){n=e[r];break}return n}function Q(e,n){var r=e[E],i=Y(r,n);if(i.length>0){var o=e[S],a=e[T];te(i,a),W(n,r,o);var s=O(e);t.addGoalsWatch(i,s)}}var q=function(e){var t=r.getEnvironmentId();t!=c.SOURCES.preview&&K(e),X(e)};function K(e){if(!d.isEnabled())return!0;return h("Sending completed Goal info to server ("+e.Name+", "+e.identifier+")",3),m.sendData({Id:e.Id,GoalType:e.GoalType,identifier:e.identifier}),!0}function X(e){var t=J(e.GoalType),n=t[e.RelatedObjectId];if(n&&e.identifier==n[S]){n[T].push(e.Id);var r=n[T].length,i=Y(e.RelatedObjectId,e.GoalType).length;i==r?$(e.GoalType,e.RelatedObjectId):G(e.GoalType,e.RelatedObjectId,n)}for(var o=0;o<w.length;o++)w[o](e)}function J(t){var n=ee(t),r=e.getData(n,{});return r}function $(t,n){var r=ee(t);e.removeFromDictionary(r,n,v)}function Z(t){var n=ee(t);e.removeData(n)}function ee(e){var t=cg("{0}-{1}",y,e);if(b){var n=r.getEndUserGuid();n&&(t+="-"+n)}return t}function te(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var o=e[i].Id;if(o==r){e.splice(i,1);break}}}_.apply(null,arguments)}var fr=function(){function e(e,t,n){this.balloonSettingsKey="stepHlObj",this.MULTI_STEP_CLASS="walkme-mltstep",this._element=null,this.settings=null,this.highlighterDivs=[],this.balloonSettings={},this._logger=e,this._commonUtils=t,this._lib=n.lib,this._drawableType=n.drawableType,this._drawableId=n.drawableId,this._useDefaultSettings=n.defaultSettings,this._cssKeysValues=n.cssKeysValues,this._useExistingHighlighter="undefined"!=typeof n.useExistingHighlighter&&n.useExistingHighlighter,this._useExisitingHighlighterArray=n.useExisitingHighlighterArray,this._highlighterService=i.get("HighlighterService"),this._element=n.element,this.balloonSettings=n.settings,this.customerLog=e.wrapCustomerLog(m)}return e.prototype.shouldShow=function(){},e.prototype.getSettings=function(e,t){return this._highlighterService.getDefaultSettings()},e.prototype.init=function(e){this.settings=this.initSettings(e,this._useDefaultSettings),this._cssClasses=this._highlighterService.generateCssClasses(this.getInstanceName(),this._cssKeysValues)},e.prototype.initSettings=function(e,t){var n=this.getSettings(e,t),r=this._commonUtils.getSettingsValue(e,this.balloonSettingsKey);return!t&&r&&(this._highlighterService.copyFloatProperties(n,r),n.color=r.color||n.color),n},e.prototype.highlight=function(e){try{this.unhighlightElement(),this.createHighlighterDivs(),this.applyStyle(this.highlighterDivs)}catch(t){this._logger.error(t)}},e.prototype.createHighlighterDivs=function(){for(var e=0;e<4;e++)this.highlighterDivs.push(this.createHighlighterDiv(e))},e.prototype.removeHighlighterDiv=function(e){if(e)try{e.remove()}catch(t){this.customerLog("[highlighter] error removing div",3)}},e.prototype.createHighlighterDiv=function(e){var t=this._highlighterService.generateId(this.getClassName(),this._drawableType,e,this._drawableId),n=this.createDiv(t);return n.addClass(this._cssClasses),n.addClass("walkme-custom-"+this.getInstanceName()+"-position-"+e),n},e.prototype.unhighlightElement=function(){for(var e=0;e<this.highlighterDivs.length;e++)this.removeHighlighterDiv(this.highlighterDivs[e]);this.highlighterDivs.length=0},e}(),pr=function(t){__extends(n,t);function n(r,i,o,a,s,u,l,c,d){t.call(this,u,i,d),this.timerManager=c,this._embeddedElements=[],this._consts=o,this._commonUtils=i,this._siteConfigManager=r,this._highlighterService=a,this._positionHelper=s,this._customerLog=u.wrapCustomerLog(m),this._element=d.element,this._drawableId=d.drawableId,this._drawableType=d.drawableType,this._cssKeysValues=d.cssKeysValues,this._embedInElement=d.embedInElement,this._balloonSettings=d.settings,this._useDefaultSettings=d.defaultSettings,this._shouldDrawInSetTimeout=l.isIEOlderThan(8);var f=this._commonUtils.getSettingsValue(this._balloonSettings,n.STEP_HL_OBJ);this._settings=this.getSettings(f,d.defaultSettings),this._monitor=d.monitor&&!this._settings.doNotHideOnHover,this._handlerEnterWrapper=e.proxy(this.handlerEnter,this),this._handlerLeaveWrapper=e.proxy(this.handlerLeave,this)}return n.prototype.shouldShow=function(){return this._highlighterService.shouldShow(this._balloonSettings)},n.prototype.applyStyle=function(){var e=this;return this._customerLog("Highlighter applyStyle start creating highlighter",3),o.all([this.embedHighliterDiv(this._consts.POSITION_TYPE.Top),this.embedHighliterDiv(this._consts.POSITION_TYPE.Right),this.embedHighliterDiv(this._consts.POSITION_TYPE.Bottom),this.embedHighliterDiv(this._consts.POSITION_TYPE.Left)]).then(function(){e._customerLog("Highlighter applyStyle finished creating highlighter",3)})},n.prototype.embedHighliterDiv=function(t){var n=this,r=this._element,o=this._settings.thickness,a=this._settings.color,s=this._settings.zIndex;this._customerLog("embed Highlighter to div"+this._element,3);var u=this._consts.POSITION_PERIMETER_TYPE.Outside,l=this.createDiv(t),c=this._positionHelper.getMultipleElementsRect(r),d=c.right-c.left,f=c.bottom-c.top;switch(t){case this._consts.POSITION_TYPE.Top:case this._consts.POSITION_TYPE.Bottom:l.css({height:o+"px",width:d+2*o+this._settings.width+"px","background-color":a,"z-index":s});break;case this._consts.POSITION_TYPE.Right:case this._consts.POSITION_TYPE.Left:l.css({height:f+2*o+this._settings.height+"px",width:o+"px","background-color":a,"z-index":s});break;default:return}var p=i.get("ElementEmbedderFactory"),g=p.get(e(this._element),this._embedInElement);return g.embed(l,u,t).then(function(){var e=g.getElement();n.applyDivSettings(e.getOriginElement(),t),n._embeddedElements.push(e.getTopMostElement())})},n.prototype.createDiv=function(t){var r=this._highlighterService.generateId(n.CLASS_NAME,this._drawableType,t,this._drawableId),i=this._highlighterService.generateCssClasses(n.INSTANCE_NAME,this._cssKeysValues);i+=" walkme-custom-highlighter-position-"+t;var o=e("<div/>",{id:r,"class":i,style:"position:absolute; left: 0px; top: 0px;"});return this._customerLog("Highlighter createDiv id="+r+" classes="+i,3),o},n.prototype.applyDivSettings=function(e,t){var n=parseFloat(e.css("top").replace("px","")),r=parseFloat(e.css("left").replace("px",""));switch(this._customerLog("Highlighter applyDivSettings before top="+n+" left="+r,3),t){case this._consts.POSITION_TYPE.Top:n=n+this._settings.top-this._settings.height/2+"px",r=r+this._settings.left+"px";break;case this._consts.POSITION_TYPE.Bottom:n=n+this._settings.top+this._settings.height/2+"px",r=r+this._settings.left+"px";break;case this._consts.POSITION_TYPE.Right:n=n+this._settings.top+"px",r=r+this._settings.left+this._settings.width/2+"px";break;case this._consts.POSITION_TYPE.Left:n=n+this._settings.top+"px",r=r+this._settings.left-this._settings.width/2+"px"}this._customerLog("Highlighter applyDivSettings after top="+n+" left="+r,3),e.css({top:n,left:r})},n.prototype.getSettings=function(e,t){var r=this._highlighterService.getDefaultSettings();return t?(r.color=n.DEFAULT_COLOR,r.thickness=n.DEFAULT_THINKNESS):(this._highlighterService.copyFloatProperties(r,e),r.color=r.color||this._siteConfigManager.get().BalloonSettings.HighlighterColor||n.DEFAULT_COLOR,r.thickness=r.thickness||this._siteConfigManager.get().BalloonSettings.HighlighterThickness||n.DEFAULT_THINKNESS),r.zIndex=this.getZIndex(),this._customerLog("Highlighter getSettings highlight settings",3),this._customerLog(r,3),r},n.prototype.getZIndex=function(){var e=this.getDefaultZIndex(),t=this._commonUtils.getSettingsValue(this._balloonSettings,"z-index",e);return t},n.prototype.getDefaultZIndex=function(){return this._shouldDrawInSetTimeout?n.DEFAULT_ZINDEX-1:n.DEFAULT_ZINDEX},n.prototype.highlight=function(e){return this.unhighlightElement(),this.drawAndHandleEvents()},n.prototype.drawAndHandleEvents=function(){var e=this;return this.applyStyle().then(function(){e._monitor&&(e.unregisterMonitorEvents(),e._commonUtils.registerEventHandler(n.ENTER_ELEMENT_EVENT,e._handlerEnterWrapper,!0,e._element[0]),e._commonUtils.registerEventHandler(n.EXIT_ELEMENT_EVENT,e._handlerLeaveWrapper,!0,e._element[0]))})},n.prototype.handlerEnter=function(t){e.each(this._embeddedElements,function(e,t){t.hide()})},n.prototype.handlerLeave=function(t){e.each(this._embeddedElements,function(e,t){t.show()})},n.prototype.unregisterMonitorEvents=function(){try{this._commonUtils.unregisterEventHandler(n.EXIT_ELEMENT_EVENT,this._handlerLeaveWrapper,!0,this._element[0]),this._commonUtils.unregisterEventHandler(n.ENTER_ELEMENT_EVENT,this._handlerEnterWrapper,!0,this._element[0])}catch(e){}},n.prototype.unhighlightElement=function(){this.unregisterMonitorEvents(),e.each(this._embeddedElements,function(e,t){t.remove()}),this._embeddedElements=[]},n.prototype.getClassName=function(){return n.CLASS_NAME},n.prototype.getInstanceName=function(){return n.INSTANCE_NAME},n.STEP_HL_OBJ="stepHlObj",n.DEFAULT_COLOR="#55aaff",n.DEFAULT_ZINDEX=2147483630,n.DEFAULT_THINKNESS=1,n.INSTANCE_NAME="highlighter",n.CLASS_NAME="highlightDiv",n.ENTER_ELEMENT_EVENT="mouseover",n.EXIT_ELEMENT_EVENT="mouseout",n}(fr);i.register("Highlighter").asCtor(pr).asProto().dependencies("SiteConfigManager, CommonUtils, Consts, HighlighterService, PositionHelper, Logger, HostData, TimerManager"),i.register("HighlighterService").asCtor(gr).asProto().dependencies("SiteConfigManager, CommonUtils, Logger");function gr(e,t,n){var r;function i(){r=n.wrapCustomerLog(m)}this.shouldShow=function(n){var r=t.getSettingsValue(e.get().Settings,"hlType","none"),i=t.getSettingsValue(n,"hlType",r);return"rect"===i},this.generateId=function(e,t,n,r){var i=e+"-"+t+"-"+n+"-"+r;return i},this.generateCssClasses=function(e,t){var n="walkme-custom-"+e+" walkme-to-remove ";if(t)for(var r=0;r<t.length;r++)n+=" walkme-custom-"+e+"-"+t[r].name+"-"+t[r].id;return n},this.copyFloatProperties=function(e,n){for(var r in n)n.hasOwnProperty(r)&&(t.isNumber(n[r])?e[r]=parseFloat(n[r]):e[r]=n[r])},this.getDefaultSettings=function(){return{left:0,top:0,width:0,height:0}},i.apply(null,arguments)}i.register("HighlighterSettingsProvider").asCtor(hr).dependencies("CommonUtils");function hr(e,t){function n(){}this.getHighlighterSettings=function(t,n,r){var i={element:n,settings:t,embedInElement:e.getSettingsValue(t,"embed",!1),drawableType:"balloon",drawableId:r.balloonEntityId,monitor:!r.isViewStep&&!r.isCapture,defaultSettings:!!r.isCapture,cssKeysValues:[{id:r.balloonEntityId,name:"step"},{id:r.containerEntityId,name:"walkthru"}]};return i},n.apply(null,arguments)}var mr=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u,l,c){var d=t.call(this,e,i,c)||this;return d.topMostCssStyleSettter=s,d.STEP_IO_OBJ="stepIoObj",d.DEFAULT_ZINDEX="2147483629",d.DEFAULT_COLOR="#000000",d.containerDiv=null,d._hostData=n,d._positionHelper=r,d._siteConfigManager=o,d._elementInIframeIndicator=a,d._commonEvents=u,d._consts=l,d.balloonSettingsKey=d.STEP_IO_OBJ,t.prototype.init.call(d,c.settings),d}return n.prototype.shouldShow=function(){var e=this._commonUtils.getSettingsValue(this._siteConfigManager.get().Settings,"ioEnabled","0");return"1"==this._commonUtils.getSettingsValue(this.balloonSettings,"ioEnabled",e)&&!this._hostData.isQuirksMode(this._element[0])},n.prototype.getSettings=function(e,n){var r=t.prototype.getSettings.call(this,e,n);return r.color=this.DEFAULT_COLOR,r.opacity=.5,r.zindex=this._commonUtils.getSettingsValue(e,"z-index",this.DEFAULT_ZINDEX),r},n.prototype.getDocumentSize=function(){var t=e(document),n=document.documentElement.clientWidth,r=t.height();return{height:r,width:n}},n.prototype.getContainer=function(){return e(document).find("body")},n.prototype.applyStyle=function(e){var t,n=this._element[0],r={top:0,left:0},i=this._commonUtils.getElementDocument(this._element);if(this._elementInIframeIndicator.isInIframe(this._element)){var o=this._positionHelper.getRectRelativeToWindow(this._element,n,window);if(!o)return;t=o}else t=this._element.length>1?this._positionHelper.getMultipleElementsRect(this._element):n.getBoundingClientRect(),r=this._positionHelper.getOffsetRect(n,i,window);var a=this.getRectPositionData(t,r,this.settings);this.setAllDivCss(a.x,a.y,a.w,a.h,e),this._commonEvents.raiseEvent(this._consts.EVENTS.SpotlightCreated,{spotlightDivs:e})},n.prototype.getRectPositionData=function(e,t,n){var r={};return r.x=e.left+t.left+n.left-n.width/2,r.y=e.top+t.top+n.top-n.height/2,r.w=e.right-e.left+n.width,r.h=e.bottom-e.top+n.height,r},n.prototype.setAllDivCss=function(e,t,n,r,i){var o=this.getDocumentSize(),a=this._positionHelper.getCollapsedMargin(),s=[0,o.height],u=s[0],l=s[1];this.setDivCss(i[0],0-a.top,0,o.width-.5,t+a.top),this.setDivCss(i[1],u,e+n,Math.floor(o.width-n-e),l),this.setDivCss(i[2],t+r,0,o.width-.5,o.height-(t+r)),this.setDivCss(i[3],u,0,e-.5,l)},n.prototype.setDivCss=function(e,t,n,r,i){if(!e)return;e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("position","absolute").css("background-color",this.settings.color)},n.prototype.createContainerDiv=function(){var t=this._highlighterService.generateId(this.getClassName(),this._drawableType,"main",this._drawableId),n=e('<div id="'+t+'" class="wm-insideouter-container" />').addClass(this._cssClasses).appendTo(this.getContainer());return this.setCssStyle(n,this.settings.zindex),n.css("opacity",this.settings.opacity).css("background-color","").css("display","block").css("top",0).css("left",0).css("width",0).css("height",0),n},n.prototype.createHighlighterDivs=function(){this.containerDiv&&this.unhighlightElement(),this.containerDiv=this.createContainerDiv(),t.prototype.createHighlighterDivs.call(this)},n.prototype.unhighlightElement=function(){this.containerDiv&&this.containerDiv.remove(),this.containerDiv=null,this.highlighterDivs.length=0},n.prototype.setCssStyle=function(e,t){e.css("background-color","red"),this.topMostCssStyleSettter.setTopMostCssStyle(e,t),e.css("display","inline")},n.prototype.createDiv=function(t){var n=e("<div id="+t+" />");return this.containerDiv.append(n),n},n.prototype.getInstanceName=function(){return"insideouter"},n.prototype.getClassName=function(){return"insideoutDiv"},n}(fr);i.register("Insideout").asCtor(mr).asProto().dependencies("Logger, HostData, PositionHelper, CommonUtils, SiteConfigManager, ElementInIframeIndicator, TopMostCssStyleSettter, CommonEvents, Consts");var vr=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u){var l=t.call(this,e,i,u)||this;return l.topMostCssStyleSettter=s,l.STEP_IO_OBJ="stepIoObj",l.DEFAULT_ZINDEX="2147483629",l.DEFAULT_COLOR="#000000",l._hostData=n,l._positionHelper=r,l._siteConfigManager=o,l._elementInIframeIndicator=a,l.balloonSettingsKey=l.STEP_IO_OBJ,t.prototype.init.call(l,u.settings),l}return n.prototype.shouldShow=function(){var e=this._commonUtils.getSettingsValue(this._siteConfigManager.get().Settings,"ioEnabled","0");return"1"==this._commonUtils.getSettingsValue(this.balloonSettings,"ioEnabled",e)&&!this._hostData.isQuirksMode(this._element[0])},n.prototype.getSettings=function(e,n){var r=t.prototype.getSettings.call(this,e,n);return r.color=this.DEFAULT_COLOR,r.opacity=.5,r.zindex=this._commonUtils.getSettingsValue(e,"z-index",this.DEFAULT_ZINDEX),r},n.prototype.getDocumentSize=function(){var t=e(document),n=document.documentElement.clientWidth,r=t.height();return{height:r,width:n}},n.prototype.getContainer=function(){return e(document).find("body")},n.prototype.applyStyle=function(e){var t,n=this._element[0],r={top:0,left:0},i=this._commonUtils.getElementDocument(this._element);if(this._elementInIframeIndicator.isInIframe(this._element)){var o=this._positionHelper.getRectRelativeToWindow(this._element,n,window);if(!o)return;t=o}else t=this._element.length>1?this._positionHelper.getMultipleElementsRect(this._element):n.getBoundingClientRect(),r=this._positionHelper.getOffsetRect(n,i,window);var a=this.getRectPositionData(t,r,this.settings);this.setAllDivCss(a.x,a.y,a.w,a.h,e)},n.prototype.getRectPositionData=function(e,t,n){var r={};return r.x=e.left+t.left+n.left-n.width/2,r.y=e.top+t.top+n.top-n.height/2,r.w=e.right-e.left+n.width,r.h=e.bottom-e.top+n.height,r},n.prototype.setAllDivCss=function(e,t,n,r,i){var o=this.getDocumentSize(),a=this._positionHelper.getCollapsedMargin();this.setDivCss(i[0],0-a.top,0,o.width-.5,t+a.top),this.setDivCss(i[1],t,e+n,Math.floor(o.width-n-e),r),this.setDivCss(i[2],t+r,0,o.width-.5,o.height-(t+r)),this.setDivCss(i[3],t,0,e-.5,r)},n.prototype.setDivCss=function(e,t,n,r,i){if(!e)return;this.setCssStyle(e,this.settings.zindex),e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("background-color",this.settings.color).css("opacity",this.settings.opacity)},n.prototype.setCssStyle=function(e,t){e.css("background-color","red"),this.topMostCssStyleSettter.setTopMostCssStyle(e,t),e.css("display","inline")},n.prototype.createDiv=function(t){var n=e("<div id="+t+" />");return e(document).find("body").append(n),n},n.prototype.getInstanceName=function(){return"insideouter"},n.prototype.getClassName=function(){return"insideoutDiv"},n}(fr);i.register("OldInsideout").asCtor(vr).asProto().dependencies("Logger, HostData, PositionHelper, CommonUtils, SiteConfigManager, ElementInIframeIndicator, TopMostCssStyleSettter"),i.register("Animator").asCtor(yr).asProto().dependencies("TimerManager, UiUtils, Consts, FeaturesManager, CommonUtils, Positions");function yr(e,t,n,r,i,o,a){var s=this,u=null,l=null,c=null,d=!1,f=!0,p=!1,g=!1,h=!1,m=null,v=!1,y=!1,E=!1,S=null,T=null,C=[],b=null,w=null,I=1,P=150,_="animations",k="marginLeft",A="marginRight",D=250,O=10,N=.3,x=50,L={0:"Top",1:"Left",2:"Top",3:"Left"},F="inline",M={InitCSS:{display:F},Properties:{},Options:{}};function B(){var e=a.config;Z();var t=e?e:M;u=W(t.InitCSS),l=W(t.Properties),c=W(t.Options),pe(t.MetaData),y=a.isVibrating}function R(){return!0}this.disableAnimation=function(){f=!1},this.setPosition=function(e){m=e,oe()},this.setPagePositionOffset=function(e,t){re(e,t)},this.postAnimation=function(e){e&&C.push(e)},this.prepare=function(e,t){S=e,T=t,b=G(S),ee(),Q(),Ie()?(H(),j(),Y(),s.postAnimation($),c.complete=K):s.postAnimation(ue),Pe()&&s.postAnimation(ye)},this.animate=function(e){if(!S)return void(e&&e());this.postAnimation(e),Ie()?(d=!0,fe(S),S.animate(l,c),X()):(J(),K())},this.stop=function(){S.stop(!0,!1)},this.destroy=function(e){var t=S;if(T)for(var n=0;n<T.length;n++)try{t=t.add(T[n])}catch(r){}try{Ie()?U(t,e):V(t,e)}catch(r){e&&e()}};function U(e,n){e.removeAttr("id").find("div").removeAttr("id"),e.fadeOut(P,function(){t.destroyDivWithIframes(e,n)})}function V(e,n){t.destroyDivWithIframes(e,n)}function W(e){return mtjQuery.extend({},e)}function G(e){return{filter:e.css("filter")}}function H(){h&&T?te(se):C.push(ue)}function j(){g&&(ge(),te(he))}function Y(){if(q()){var e=me(S,z());s.postAnimation(function(){ve(e)})}}function z(){if(p)return be;if(E)return Ce}function Q(){r.isFeatureEnabled("dontPrepForScrl")||S.css({display:"block",visibility:"hidden",filter:""})}function q(){return p||E}function K(e){for(var t=0;t<C.length;t++)"function"==typeof C[t]&&C[t].apply(null,arguments);C.length=0}function X(){var t=c.duration*I;e.setWalkmeTimeout(ne,t)}function J(){mtjQuery(S).css({display:F,visibility:""}).css(b)}function $(){S&&S.css(b)}function Z(){w=mtjQuery({})}function ee(){w.clearQueue(_)}function te(e){w.queue(_,e)}function ne(){w.dequeue(_)}function re(e,t){ie(u,e,t),l.marginTop=e.marginTop,l.marginLeft=e.marginLeft,l.marginRight=e.marginRight,l.marginBottom=e.marginBottom,delete l.margin}function ie(e,t,n){if(parseInt(e.margin)<0)switch(e.marginTop=0,e.marginLeft=0,e.marginRight=0,e.marginBottom=0,n){case o.Bottom:case o.Top:e.marginLeft=t.marginLeft;break;case o.Right:case o.Left:e.marginTop=t.marginTop}else e.marginTop=t.marginTop,e.marginLeft=t.marginLeft,e.marginRight=t.marginRight,e.marginBottom=t.marginBottom}function oe(){var e={},t={};ce()?(e.size="height",e.osize="width"):(e.size="width",e.osize="height"),!p&&l.size&&(m==n.POSITION_TYPE.Top&&"height"==e.size||m==n.POSITION_TYPE.Left&&"width"==e.size)&&(E=!0),t.marginTop=m==n.POSITION_TYPE.Bottom?-1:1,t.marginLeft=m==n.POSITION_TYPE.Right?-1:1,e.margin="margin"+L[m],l=ae(l,e,t),u=ae(u,e,t)}function ae(e,t,n){if(!e)return;var r={};for(var o in e)if(e.hasOwnProperty(o)){var a=i.isDefined(t[o])?t[o]:o;if(r[a]=e[o],i.isDefined(n[a])){var s=r[a].toString().replace("px","");r[a]=n[a]*s+"px"}}return r}function se(){le(T),e.setWalkmeTimeout(function(){ne()},D)}function ue(){mtjQuery(T).each(function(){this.show().css("visibility","")}),ne()}function le(e){var t,r,i=ce(),o=i?"marginTop":"marginLeft",a=de(),s=a?1:-1,u=e.length-1;m==n.POSITION_TYPE.Top&&(t="border-top-width",r="borderTopWidth"),m==n.POSITION_TYPE.Bottom&&(t="border-bottom-width",r="borderBottomWidth"),m==n.POSITION_TYPE.Right&&(t="border-right-width",r="borderRightWidth"),m==n.POSITION_TYPE.Left&&(t="border-left-width",r="borderLeftWidth"),mtjQuery(e).each(function(e,n){this.css("visibility","hidden").css("display","block");var i=(parseInt(this.css(t),10)+2)*s,l=this.css(t),c=this[0].style.zIndex,d={};d[r]=l,d.opacity=1,a&&(d[o]=1);var f={};f.duration=D,f.complete=function(e,t){return function(){e.css(o,""),e.css("zIndex",t)}}(this,c),e==u&&this.css("zIndex",c-1),this.css("visibility",""),a&&this.css(o,i),this.css(t,"0px"),this.animate(d,f)})}function ce(){if(m==n.POSITION_TYPE.Bottom||m==n.POSITION_TYPE.Top)return!0;return!1}function de(){if(m==n.POSITION_TYPE.Bottom||m==n.POSITION_TYPE.Right)return!0;return!1}function fe(e){!m&&u.margin&&(u.margin=0),mtjQuery(e).css({display:"none",visibility:""}).css(b).css(u)}function pe(e){e&&(p=i.defaultValue(e.center,!1),g=i.defaultValue(e.hwa,!1),h=i.defaultValue(e.are,!1),I=i.defaultValue(e.delay,1))}function ge(){S.children(":visible").addClass("walkme-balloon-hidden-content").css("display","none")}function he(){S.children(".walkme-balloon-hidden-content").removeClass("walkme-balloon-hidden-content").fadeIn(250,function(){mtjQuery(this).css("direction",mtjQuery(this).css("direction"))})}function me(e,t){var n={position:"absolute",top:e.css("top"),left:e.css("left"),height:e.height(),width:e.width(),zIndex:e[0].style.zIndex},r=mtjQuery("<div />").css(n);return e.css({top:0,left:0}).wrap(r),t(r,e),n}function ve(e){E&&(S.css("bottom",""),S.css("right","")),S.unwrap().css(e)}function ye(){S.bind("click.wm_animation",function(){if(!v){v=!0;var e=parseInt(S.css(A))>0?A:k;if(Se(S,O,e),T)for(var t=0;t<T.length;t++)Se(T[t],O,e)}}),Ee(S)}function Ee(e){e.find("button,a,.walkme-custom-balloon-close-button").bind("click.wm_animation",function(e){e.stopPropagation()})}function Se(e,t,n){if(t<=0)return e.css(n,l[n]),void(v=!1);var r=parseInt(e.css(n))-Te(t),i=[];i[n]=r,e.animate(i,x,function(){Se(e,t-1,n)})}function Te(e){var t=e%2*2-1,n=e*N;return n*t}function Ce(e,t){var n=parseInt(t.css("border-top-width"),10)+parseInt(t.css("border-bottom-width"),10),r=parseInt(t.css("border-left-width"),10)+parseInt(t.css("border-right-width"),10);t.css("top",""),t.css("left",""),t.css("bottom","-"+n+"px"),t.css("right","-"+r+"px")}function be(e,t){we(e,t),c.step=function(){we(e,t)}}function we(e,t){var n=e.height()/2-t.height()/2,r=e.width()/2-t.width()/2;t.css("top",n),t.css("left",r)}function Ie(){if(d||!R()||!f)return!1;return!0}function Pe(){if(y)return!0;return!1}B.apply(null,arguments)}mtjQuery.extend(mtjQuery.easing,{easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*(7.5625*t*t)+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeOutBack:function(e,t,n,r,i,o){return void 0==o&&(o=1.70158),r*((t=t/i-1)*t*((o+1)*t+o)+1)+n},easeOutElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(1==(t/=i))return n+r;if(a||(a=.3*i),s<Math.abs(r)){s=r;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(r/s);return s*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/a)+r+n}}),i.register("PublishDataManager").asCtor(Er).dependencies("Lib, ClientOrServerStorageManager, Logger");function Er(e,t,n){var r,i,o=this,a=t.keysConfig.publishData.lastDataVersion;o.init=s;function s(e){i=e&&e.dataVersion||0}o.hasNewDeployables=function(){if(r)return r;var e=t.getData(a.key)||i;return r=e<i},o.saveDataVersion=function(){t.saveData(a.key,i,a.expiry)}}function Sr(){var e=this;e.init=r,e.load=o,e.remove=a,e.creataImageAG=s,e.createAG=u;var t,n;function r(e){t=e}function o(){c(function(e){e.init(t),e.load()})}function a(e){n?n.remove(e):e&&e()}function s(e){l(function(t){var n=t.getImageAG(e);n.setupAttenGrab()})}function u(e){l(function(t){
var n=t.create(e);n.setupAttenGrab()})}function l(e){__webpack_require__.e(3,function(t){var r=[t(138),t(139),t(140)];(function(){n=i.get("AttentionGrabberManager"),e&&e(n)}).apply(null,r)})}function c(e){__webpack_require__.e(5,function(t){var r=[t(138),t(139)];(function(){n=i.get("AttentionGrabberManager"),e&&e(n)}).apply(null,r)})}}i.register("AttentionGrabberManagerAPI").asCtor(Sr);function Tr(){var e=this;function t(){}e.getBody=function(e){return e.body},t.apply(null,arguments)}i.register("RegularBodyUtils").asCtor(Tr);var Tr;function Cr(){var t=this;function n(){}t.getBody=function(t){return e("body",t)[0]},n.apply(null,arguments)}i.register("TagBodyUtils").asCtor(Cr);var Cr;i.register("CommonUtils").asCtor(br).dependencies("TimerManager,HostData,AuditSourceManager,Consts,RegularBodyUtils,CookiesManager,SettingsValuesRetriever, ExternalWalkMeConfig,PostMessageListener,win,CdnServer,ObjectJpath,FeaturesManager, Logger, ArrayUtils, SiteConfigManager, AttentionGrabberManagerAPI,MessageSender");function br(n,r,o,a,s,u,l,c,d,f,p,g,h,m,v,y,E,S){var T,C,b,w,I=this;I.settingsFieldValid=l.settingsFieldValid,I.isSettingsValueExists=l.isSettingsValueExists,I.getSettingsValue=l.getSettingsValue,I.doAllMeetCondition=k,I.doesAnyMeetCondition=D,I.getInt=_,I.filter=v.filter;function P(){C=s,b=i.get("CommonEvents")}function _(e,t){return I.isNumber(e)?parseInt(e,10):t}function k(e,t){return O(e,t,e.length)}function D(e,t){return O(e,t,1)}function O(e,t,n){for(var r=0,i=0;i<e.length;i++){var o=e[i],a=t(o);if(a&&(r++,r>=n))return!0}return!1}I.isNumber=function(e){if("boolean"==typeof e)return!1;return!isNaN(e-0)},I.formatString=function(){return cg.apply(null,arguments)},I.getJQueryElementFinder=function(){return i.get("JQueryElementFinder")},I.waitForCondition=function(t,r,i,o){var a=e.Deferred();function s(e){if(e>=r)return a.reject();var u=t();if(u)return a.resolve(u);o&&m.customerLog(o),n.libSetTimeout(function(){s(++e)},i)}return s(0),a.promise()},I.sendMenuEvent=function(e,t,n){try{var r={Type:e};t&&(r.WalkthruId=t),n&&window.mtjQuery.extend(r,n),b.raiseEvent(e,r),walkme_player_event(r)}catch(i){}},I.isIe7or8=function(){return r.isIE(8,"lte")},I.libSetTimeout=n.libSetTimeout,I.toJSON=function(e){return rg(e)},I.secureEvalJSON=function(e){return ig(e)},I.clone=function(e){return lg(e)},I.elementLastKeeper=i.get("ElementLastKeeper"),I.attentionGrabberFactory={create:function(e){return{setupAttenGrab:function(){return E.createAG(e)}}}},I.attentionGrabberClass=function(e){return{setupAttenGrab:function(){E.creataImageAG(e)},remove:function(e){E.remove(e)}}},I.isValidMailTo=function(e){return e&&0==e.indexOf("mailto:")},I.isValidUrl=function(e){if(e&&0!=e.indexOf("http")&&0!=e.indexOf("/"))return!1;return!0},I.setDefault=function(e,t,n){void 0===e[t]&&(e[t]=n)},I.isUiObjectActivatable=function(e){return"category"!=e.type()&&"tab"!=e.type()},I.isTrue=function(e,t,n){var r=I.getSettingsValue(e,t,n);return I.isValueTrue(r)},I.isValueTrue=function(e){return e&&(1==e||"True"==e||"1"==e)},I.isLike=function(e,t){t=t.replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&"),t=t.replace(new RegExp("[.]","g"),"\\."),t=t.replace(new RegExp("[*]","g"),".*"),e=e.toString().toLowerCase(),t=t.toLowerCase();try{return e.match(t)[0]==e}catch(n){return!1}},I.isBigger=function(e,t){return e=N(e),t=N(t),e=parseFloat(e),t=parseFloat(t),!(!I.isNumber(e)||!I.isNumber(t))&&e>t},I.isSmaller=function(e,t){return e=N(e),t=N(t),e=parseFloat(e),t=parseFloat(t),!(!I.isNumber(e)||!I.isNumber(t))&&e<t};function N(e){if(!e||"string"!=typeof e||!e.replace)return e;return e.replace(/,|\$|\u20AC|\u20AA|¥|¢|£/g,"")}I.addTabIndex=function(e,t,n){if(!h.isFeatureEnabled("accessibility"))return;t=I.defaultValue(t,0),e.attr("tabIndex",t),e.keyup(function(t){13!=t.keyCode||t.shiftKey||(e.click(),t.stopPropagation())})},I.handleAccessibleElement=function(e,t){I.addTabIndex(e),I.setRole(e,t)},I.setRole=function(e,t){e.attr("role",t||"complementary")},I.getCustomConfiguration=function(){var e=y.get(),t=h.isFeatureEnabled("configurationTab")?e.Settings.configuration:e.Custom;return t||{}},I.isGradientUsingFilter=function(t){var n=e("<div style='"+t+"' />"),r=n.css("background-image").indexOf("gradient")==-1;return r},I.handleCrossDomainError=function(e){if(!L(e))throw e},I.encloseCall=function(e){var t=function(){var t=arguments;return function(){return e.apply(null,t)}},n=x(arguments,0),r=t.apply(null,n);return r};function x(e,t){for(var n=[],r=0;r<e.length;r++)t!=r&&n.push(e[r]);return n}function L(e){var t=e&&18==e.code,n=e&&e.message&&e.message.indexOf("denied")>=0;return t||n}I.registerEventHandler=function(e,t,n,r){r=r||window;var i=F(t);return r.attachEvent?r.attachEvent("on"+e,i):r.addEventListener&&r.addEventListener(e,i,!!n),function(){I.unregisterEventHandler(e,i,n,r)}};function F(e){var n=t.walkmeWrap;if(!n)return e;return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(e),n.apply(this,t)}}I.unregisterEventHandler=function(e,t,n,r){r=r||window,r.detachEvent?r.detachEvent("on"+e,t):r.removeEventListener&&r.removeEventListener(e,t,!!n)},I.setBodyUtils=function(e){C=e},I.getBody=function(e){return C.getBody(e)},I.postMessageToAllFramesChain=function(e,t){var n=0;if(e)try{e.postMessage(t,"*"),n++,e!=e.parent&&(n+=I.postMessageToAllFramesChain(e.parent,t))}catch(r){m.customerLog("Error in postMessage to frames chain "+r,4)}return n},I.postMessageToFrameAndDescendants=function(e,t){function n(e,t){r(e,t);for(var i=e.frames,o=0;o<i.length;o++){var a=i[o];n(a,t)}}function r(e,t){try{e!=window&&e.postMessage(t,"*")}catch(n){}}n(e,t)},I.getFrameIndex=function(e){var t=M(top,e||window).frameIndex;return t};function M(e,t){if(e==t)return{frameIndex:0};for(var n=0,r=0;r<e.frames.length;r++){n++;var i=e.frames[r],o=M(i,t);if(void 0!==o.frameIndex)return o.frameIndex+=n,o;n+=o.totalFrames}return{totalFrames:n}}I.doForFramesChain=function(e,t){if(!e)return;try{t(e)}catch(n){}e!=e.parent&&I.doForFramesChain(e.parent,t)},I.addScript=function(e,t,n){if(!e)return;var r=B(e);t&&(r.onload=onloadRunner,r.onreadystatechange=onloadRunner),n&&(r.onerror=n),R(r)};function B(e){var t=document.createElement("script");return t.async=!0,t.src=e,t.id="mt_script",t}function R(e){var t=document.getElementsByTagName("head")[0];t.appendChild(e)}I.addScriptWithCallback=function(e,t,r,i){var o="readyState";if(!e||!t)return;var a=B(e),s=!1;r&&U(t,u),i&&(a[o]?a.onreadystatechange=c:a.onerror=i);function u(){return s=!0,r.apply(this,arguments)}function l(){if(s)return;return i.apply(this,arguments)}function c(){"loaded"!=a.readyState&&"completed"!=a.readyState||n.libSetTimeout(function(){l()})}R(a)};function U(e,t){var n=window._walkmeInternals[e];window._walkmeInternals[e]=function(r){window._walkmeInternals[e]=n,t(r)}}I.checkElementText=function(e){return e.is("input")||e.is("textarea")?e.val():e.is("select")?e.find("option:selected").text():e.text()},I.getElementDocument=function(e){try{return e[0].ownerDocument}catch(t){}return document},I.getDateAtUTC=function(){var e=new Date;return e.getTime()},I.nl2br=function(e){return e?e.replace(/\n/g,"<br/>"):""},I.getTimer=function(e){function t(){var t=new Date;return function(n){var r=new Date,i=r-t;return e("Measurer - "+n+" ("+i+" ms)"),t=r,i}}return new t},I.defaultValue=function(e,t){return"undefined"!=typeof e&&null!=e?e:t},I.isLocalStorageEnabled=function(){if(void 0!==T)return T;try{if(!window.localStorage)return T=!1,!1}catch(e){return T=!1,!1}try{window.localStorage.getItem("wm-test")}catch(t){return T=!1,!1}return T=!0,!0},I.createElementInDocument=function(t,n){var r=n.createElement("div"),i=e(r).html(t).children();return h.isFeatureEnabled(a.FEATURES.ShadowRootsInspector)&&i.find("[onclick]").each(function(e,t){var n=t.getAttribute("onclick");t.removeAttribute("onclick"),t.addEventListener("click",new Function(n))}),i},I.createIframe=function(e,t,n,r,o,s,u){s=s||i.get("TopContainerProvider").getTopContainer(null,!0)[0];var l=h.isFeatureEnabled(a.FEATURES.ShadowRootsInspector)?s.ownerDocument.createElement("iframe"):document.createElement("iframe");l.id=t,u||(l.className="walkme-to-remove"),n||(l.style.cssText="display:none;visibility:hidden;"),s.appendChild(l);function c(e){l.removeEventListener?l.removeEventListener("load",c):l.detachEvent&&l.detachEvent("onload",c),r&&r(e)}if(l.addEventListener){var f={id:t,src:e,callback:r,messageCallback:o,isVisible:n,container:s,dontRemove:u},p=S.send("CreateIFrameUseCapture",f)||!1;l.addEventListener("load",c,p)}else l.attachEvent&&l.attachEvent("onload",c);return o&&d.listen(F(o)),l.src=e,l},I.removeIframeListeners=function(e,t,n){e.removeEventListener?window.removeEventListener(t,n,!1):e.detachEvent&&window.detachEvent("on"+t,n)},I.getTrackData=function(e){return{Id:e.Id,Name:e.Name}},I.getStepTrackData=function(e,t){var n={Id:e.Id,Name:e.StepTitle||e.StepText};return t&&(n.TutorialId=t.Id,n.TutorialName=t.Name),n},I.isImpersonated=function(){return window.editorAPI&&editorAPI.isImpersonated&&editorAPI.isImpersonated()},I.getWindowData=function(e,t){var n=void 0;if(t)switch(e){case A.Cookie:n=I.getWindowCookie(t),n||(n=void 0);break;case A.Var:n=I.getWindowVar(t)}return n},I.getWindowCookie=function(e){return u.getCookie(e)},I.getInputGenerator=function(e){return i.get("InputGenerator")},I.encodeText=function(t){var n=e("<div></div>");return n.text(t),n.html()},I.getWindowVar=function(e){var t=window;return g.getValue(t,e)},I.getPropertyValue=function(e,t,n){var r=g.getValue(e,t);return r||(r=n),r},I.getValue=g.getValue,I.findJspContainer=function(t,n){var r=I.getJspParent(t);return r?e(r).find(".jspPane"):n},I.getJspParent=function(e){var t=I.getClientjQuery();if(!t)return;var n=e.parents("div");return I.firstMatch(n,function(e){var n=t(e);if(void 0!=n.data&&void 0!=n.data("jsp"))return n})},I.getClientjQuery=function(){var e=window.jQuery||window.$;if(e&&e.fn&&e.fn.jquery)return e;return},I.firstMatch=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},I.generateGUID=function(){var e=i.get("GuidGenerator");return e.generateGuid()},I.isDefined=V;function V(e){return null!=e&&void 0!=e}I.definedOrDefault=function(e,t){return V(e)?e:t},I.executeParallel=function(e){var t,n=e.objectsArray,r=e.selectorFunc,i=e.functionsToExecute,o=e.successCallback,a=e.failCallback,s=!1;n?u():l();function u(){if(0==n.length)return void(o&&o());t=i.length*n.length;for(var e=i.length-1;e>=0;e--)for(var a=n.length-1;a>=0;a--){if(s)return;var u=r?r(n[a]):n[a];i[e](u,c)}}function l(){if(0==i.length)return void(o&&o());t=i.length;for(var e=i.length-1;e>=0;e--){if(s)return;i[e](c,d)}}function c(){t--,0==t&&o&&o()}function d(){if(s)return;s=!0,a&&a()}},I.getWinOrigin=function(){return f.location.origin||f.location.protocol+"//"+f.location.hostname+(f.location.port?":"+f.location.port:"")},I.getOrigin=function(){var e=p.get();return W(e)?G()+e:e};function W(e){var t=0===e.indexOf("/");return t}function G(){if(!w){var e=window.location;w=e.origin,w||(w=e.protocol+"//"+e.hostname,e.port&&(w+=":"+e.port))}return w}I.getWalkmeInternals=function(){return t},I.isUrlEncoded=function(e){return e=e||"",e!==decodeURIComponent(e)},I.isDict=function(e){var t="object"==typeof e,n=null!==e,r=!(e instanceof Array),i=!(e instanceof Date);return t&&n&&r&&i},P.apply(null,arguments)}var br;i.register("ComplexHtmlElementsProvider").asCtor(wr).dependencies("PositionHelper");function wr(e){var t=this;t.getComplexHtmlElements=i;function n(){}var r={TABLE:1,DROPDOWN:2};function i(t,n){var i,o=n.data("iframe");if(t.Settings.complexHtml){if((t.Settings.complexHtml.type==r.TABLE||"table"==t.Settings.complexHtml.type)&&(i=e.findNearestSelfOrParentByType(n,["table"]),t.Settings.complexHtml.settings)){switch(t.Settings.complexHtml.settings.triggerType){case"cell":n=e.findFirstSelfOrChildByType(n,["td","th"])||e.findNearestSelfOrParentByType(n,["td","th"]);break;case"column":n=e.getColumn(n);break;case"row":n=e.findFirstSelfOrChildByType(n,["tr"])||e.findNearestSelfOrParentByType(n,["tr"]);break;case"table":n=e.findNearestSelfOrParentByType(n,["table"])}t.Settings.complexHtml.settings.onTable||(i=void 0)}if(n&&n.length>0)return o&&n.data("iframe",o),{parentElement:i,elements:n}}}n()}i.register("SettingsValuesRetriever").asCtor(Ir);function Ir(){var e=this;e.getSettingsValue=t,e.isSettingsValueExists=n,e.settingsFieldValid=r;function t(t,n,r){if(!e.settingsFieldValid(t))return r;if(!e.isSettingsValueExists(t,n))return r;return t[n]}function n(t,n){if(!e.settingsFieldValid(t))return!1;return n in t}function r(e){if(!e||0==e.length)return!1;return!0}}i.register("UiUtils").asCtor(Pr).dependencies("FramesetsUtils, TimerManager, DocumentsManager, HostData, TopContainerProvider, FeaturesManager, Consts, CommonEvents");function Pr(){var t,n,r,o,a,s,u,l="walkme-ie-",c="walkme-ie-bm-",d=" walkme-override walkme-css-reset",f=" walkme-to-destroy",p=this,g=null,h=!1,m=[],v="Parent has no style",y="Parent is not ':wm_can_embed'";function E(e,i,l,c,d,f,p,h){g=e,t=i,n=l,r=c,o=d,a=f,s=p,u=h}p.canDisplayOverlay=function C(){var C=!(r.isQuirksMode()||g.shouldHandlePageAsFramesets());return C},this.removeOverlay=function(t){var n=m.pop();n&&n.exist()&&(t?n.fadeOut("slow",function(){e(this).remove()}):n.remove(),n=null)},p.displayOverlay=function(t,n,r,i){void 0==r&&(r="walkme-popup-background");var a=mtjQuery("#"+r).filter(function(){return"none"!=e(this).css("display")});if(a.length>0)return a[0];var s=o.getTopContainer();s.append(cg('<div id="{0}" class="mt-to-destroy"></div>',r));var u=mtjQuery("#"+r,s);return u.css({opacity:i?i.opct:"0.7",display:"none",position:"fixed",height:"100%",width:"100%",top:"0",left:"0",background:i?i.color:"#000000","z-index":t-1}),p.addBrowserSpecificClasses(u),n?u.fadeIn("slow"):u.css("display",""),m.push(u),u},p.getStyle=function(e,t){try{return t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle}catch(n){return null}},p.getAnimationDimentionSize=function(e,t){var n;return n="top"==t||"bottom"==t?"height":"width",e.css(n)},p.addBrowserSpecificClasses=function(t){if(r.isMobile()&&t.addClass("walkme-mobile-device"),!r.isIE())return;var n=document.documentMode||Number(e.browser.version),i=window.mtjQuery.browser.version.slice(0,window.mtjQuery.browser.version.indexOf(".")),o=l+n,a=c+i;t.addClass(o),t.addClass(a)},p.addWalkmeClasses=function(e){e[0].className+=f+d,e.find("*").each(S)};function S(e,t){t.className+=d}p.addBrowserClass=function(e){var t=r.browser.name.replace(/ /g,"").toLowerCase();e.addClass("walkme-"+t)},p.setLangAttribute=function(e){var t=i.get("LanguageManager").getCurrentLanguage();if(!t)return;e.attr("lang",t)},p.bindFocusAndBlur=function(e,t){e.focus(function(){e.val()==t&&e.val("")}),e.blur(function(){""==e.val()&&e.val(t)})},p.fixFlash=function(){if(h||!a.isFeatureEnabled("flashTransparent"))return;n.foreachDocument(T,!0)};function T(e){var t=r.browser,n='<PARAM NAME="WMode" VALUE="Window">';t.name.indexOf("Firefox")!=-1?i():t.name.indexOf("IE")!=-1&&o(),h=!0;function i(){a().append("<param name='wmode' value='transparent'>").wrap("<div></div>").unwrap(),mtjQuery("embed[wmode!='opaque'][wmode!='transparent']",e).attr("wmode","transparent").wrap("<div></div>").unwrap()}function o(){var r=mtjQuery("embed[wmode!='opaque'][wmode!='transparent']",e);if(r.attr("wmode","transparent"),l(r),t.version>=9){var i=s();mtjQuery("param[name='wmode']",i).remove(),i.append("<param name='wmode' value='transparent'>"),l(i)}t.version<=8&&l(u(),function(e){var t=e.outerHTML;return t.indexOf(n)==-1?t:e.outerHTML.replace(n,'<PARAM NAME="WMode" VALUE="transparent">')})}function a(){return mtjQuery("object:has('param[name='wmode'][value!='transparent'][value!='opaque']')",e)}function s(){return mtjQuery("object:has('param[name*='wmode'][value!='transparent'][value!='opaque']'), object:not(:has(param[name='wmode']))",e)}function u(){return mtjQuery("object[classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000']:not(:has(param[name*='wmode']))",e)}function l(e,t){for(var n=0;n<e.length;n++){var r=e[n].parentNode,i=t?t(e[n]):e[n].outerHTML;e[n].insertAdjacentHTML("beforeBegin",i),r.removeChild(e[n])}}}p.hexToRgba=function(e,t){var n=e.replace("#",""),r=parseInt(n,16),i=r>>16&255,o=r>>8&255,a=255&r;return"("+i+","+o+","+a+","+t+")"},p.closestCanEmbed=function(e){for(var t=e.parent(),n={originalElement:e,currentParent:t};t&&t.exist();){if(n.currentParent=t,n.reason="",!t[0].style)return n.reason=v,u.raiseEvent(s.EVENTS.BalloonLogs.ClosestCanEmbedReturnsTop,n),o.getTopContainer(e);if(t.is(":wm_can_embed"))return t;n.reason=y,u.raiseEvent(s.EVENTS.BalloonLogs.ClosestCanEmbedSkipsElement,n),t=t.parent()}return o.getTopContainer(e)},p.destroyDivWithIframes=function(e,n){if(!e)return void(n&&n());var r=mtjQuery("iframe",e);0==r.length?t.libSetTimeout(function(){e.remove(),n&&n()},1):(r.attr("src",""),t.libSetTimeout(function(){r.hide(),r.remove(),e.remove(),n&&n()},1))},E.apply(null,arguments)}i.register("Balloon").asCtor(_r).asProto().dependencies("TimerManager, BalloonEmbedder, Consts, UiUtils, PositionHelper, CommonUtils, Logger, FeaturesManager, BalloonUtils, HostData, FramesetsUtils, BBCodeParser, ElementUtils, CommonEvents, ScrollUtils, ElementInIframeIndicator, MoveBalloonByIntervalsHelper, BalloonElementPositionChangedChecker, CustomCssSetter, DirectHeadProvider, TopMostCssStyleSettter, UserGuidContainer, HighlighterSettingsProvider, ContainerAppender, Positions, SpotlightChecker");function _r(t,n,r,a,s,u,l,c,d,f,p,g,h,m,v,y,E,S,T,C,b,w,I,P,_,k,A){var D,O,N,x,L,F,M,B,R,U,V,W,G,H,j,Y,z,Q,q,K,X,J,$,Z,ee,te,ne=this,re=null,ie=null,oe=!0,ae=!1,se=!1,ue=!1,le=!1,ce="",de="",fe="",pe="",ge="",he="",me=!1,ve="",ye="",Ee=0,Se=0,Te=0,Ce="step",be=0,we="walkthru",Ie=!1,Pe=[],_e=[],ke=null,Ae=null,De=null,Oe=null,Ne=null,xe=null,Le="scroll",Fe=800,Me="displayTO",Be=r.POSITION_TYPE.Bottom,Re={},Ue="trigger",Ve="balloon",We=500;function Ge(){if(N=r.STEP_TYPE.Normal,re=A.element,A.parentElement&&(re=A.parentElement,ie=A.element),j=A.forceEmbedBalloonInIframe,K=A.dontShowIoBalloon,Ie=A.isFirstStep,O=A.isViewStep,G=A.siteConfig,Z=A.placeholderConfigurations,ee=A.placeholderVariableValues,te=A.initiatorData,H=A.stepSettings.v,A.fixedSize&&(Ee=A.fixedSize.width,Se=A.fixedSize.height),ye=A.stepSettings,W=u.getSettingsValue(ye,Me)||u.getSettingsValue(G.Settings,Me)||Fe,A.text&&(ce=A.text.title,fe=A.text.subText,de=u.nl2br(A.text.content)),x=A.end,A.buttons&&(ae=A.buttons.next,se=A.buttons.done,ue=A.buttons.back,le=A.buttons.submit),he=A.htmlContent,pe=A.innerHtml,ge=A.outterHtml,D=A.position,A.data&&(Te=A.data.balloonEntityId||A.data.stepId,be=A.data.containerEntityId||A.data.tutorialId,N=A.data.type,Ce=A.data.balloonEntityType||"step",we=A.data.containerEntityType||"walkthru"),je(A.isCaptureBalloon,O),ve=A.configuration,d.fixConfiguration(ve),q=l.wrapCustomerLog(Ve),T.setCustomCssIfNeeded(re),L=A.drawer,!re)return void(oe=!0);var e=y.isInIframe(re);oe=!(!u.getSettingsValue(ye,"embed",!1)&&e&&!j&&!c.isFeatureEnabled(r.FEATURES.ForceEmbedInOwnerDocument))||p.shouldHandlePageAsFramesets(),A.isCaptureBalloon&&qe(),$=A.bindButtonsFunc,Qe(ve),m.raiseEvent(r.EVENTS.BalloonInitialized,{params:A})}function He(e){q(e,5,Ve)}function je(e,t){var n={balloonEntityId:Te,containerEntityId:be,isCapture:e,isViewStep:t},r=I.getHighlighterSettings(ye,re,n);Y=i.create("Highlighter",r),ie&&(r.element=ie,r.drawableType=Ue,z=i.create("Highlighter",r));var o=Ye()?"OldInsideout":"Insideout";Q=i.create(o,r)}function Ye(){var e=c.isFeatureEnabled("oldSpotlight"),t=f.isIE()&&f.isIEOlderThan(9);return e||t}this.onDestroy=function(e){Pe.push(e)},this.setReleaseEvents=function(e){_e=e},this.releaseEvents=function(e){for(var t,n=0;n<_e.length;n++)try{_e[n](e)&&(t=!0)}catch(r){}return t},this.SetTimeoutOn=function(e){Tt()||F||(F=t.playSetTimeout(function(){ne.elementDisplayTimeoutFunction(e)},200))},this.getArrowHeight=function(){return L.arrowHeight()};function ze(){var e=he?he.html():g.parse(de,H),t={title:g.parse(ce,H),content:e,customHtml:{inner:pe,outter:ge},stepIndexText:fe},n={balloonData:t,userGuid:w.getUserGuid(),nextButton:ae,doneButton:se,backButton:ue,configuration:ve,content:de,title:ce,subtext:fe,settings:ye,end:x,stepType:N,submitButton:le,contentDiv:he};return n}function Qe(e){var t=e.AnimateFirst&&!Ie||me||O,n=e.Vibrate&&!me,r={config:e.Animation,isVibrating:n};xe=i.create("Animator",r),t&&xe.disableAnimation()}this.AddSubmitButton=function(){le=!0};function qe(){me=!0,oe=n.isEmbeded(ye)&&oe,xe&&xe.disableAnimation()}function Ke(e){var t={},r=tt(),i=nt(r.width),o=Se>0?Se:0;return B=n.getContainer(ye,e,oe,t),U=L.generateBalloonDiv(B,me,be,Te,N,ze(),Ce,we,Z,ee,te),n.handleEmbedding(ye,U,t),P.appendToContainer(B,U),R=L.fixSize(U,e,oe,i,o,ye),ne.showPopupBalloon(U),U}function Xe(e,t){var n=lt(e),r={element:e,elementBounds:n,isScrollNeeded:t},i=Je(r)||Ze(r);if(!i)return;return oe&&U.data("iframe",A.element.data("iframe")),ft(i,R,n),ot(U,i),U}function Je(e){if(e.isScrollNeeded||!n.isEmbeded(ye)||c.isFeatureEnabled("disableStrongEmbed"))return;var t=ze(),i=(new Date).getTime();for(B=e.element;B&&B.exist();){var o=et(e,t,B);$e(r.EVENTS.BalloonLogs.BalloonPopLocationCalculated,o);var a=!!o&&dt(U,ct);$e(r.EVENTS.BalloonLogs.BalloonIsFullyVisibleCalculated,a);var s=!!o&&a;if(s)return o;U&&U.remove();var u=(new Date).getTime(),l=We<u-i,d=B.is("body");if(l||d)return void(B=void 0)}}function $e(e,t){var r={isEmbeded:n.isEmbeded(ye),containerEntityType:we,containerEntityId:be,balloonEntityType:Ce,balloonEntityId:Te,extraData:t};m.raiseEvent(e,r)}function Ze(e){var t=ze(),n=et(e,t,e.element);return n}function et(e,t,r){var i=tt(),o=s.getDrawingArea(re,!oe,L.shouldScrollToElement()),a=nt(i.width),u=Se>0?Se:0;rt(i.width,i.height);var l={};if(B=n.getContainer(ye,r,oe,l),!B.exist())return;it(),U=L.generateBalloonDiv(B,me,be,Te,N,t,Ce,we,Z,ee,te),P.appendToContainer(B,U),n.handleEmbedding(ye,U,l),R=L.fixSize(U,e.element,oe,a,u,ye);var c=ut(U,R,B,e.elementBounds,o);return c}function tt(){var e=oe?re:mtjQuery("body"),t=h.getElementViewport(e);return{height:t.height(),width:t.width(),top:t.top(),left:t.left()}}function nt(e){var t=Ee>0?Ee:0;return e<=200&&(0!=D&&2!=D&&void 0!=D||(t=e-re.position().left-20,t<120&&(t=120))),t}function rt(e,t){if(e<=200)return;!c.isFeatureEnabled("noHgtLmt")&&t<=200&&(0!=D&&2!=D&&void 0!=D||(D=1))}function it(){var e={};if(null==Ae&&null==De){var e=ne.getElementPositionRelativeToContainer(re);At(e.top,e.left,e.height,e.width)}}this.getElementPositionRelativeToContainer=function(e){var t={};if(oe){var r=re.offset();t.top=Math.floor(r.top),t.left=Math.floor(r.left)}else{var i=s.getPosRelativeToWindow(re[0],window,!0);t.top=i.top,t.left=i.left}return t.height=re.height(),t.width=re.width(),s.fixOffsetForIE(re,t),n.fixPosition(t,ye,B),t};function ot(e,t){xe.setPosition(t.positionType);var n=1==u.getSettingsValue(ye,"isInvisible",0);if(n){e.hide();for(var r=0;r<V.length;r++)V[r].hide()}else xe.prepare(e,V)}this.showPopupBalloon=function(e){var t=_.Center;ye.hasOwnProperty("pagePosition")&&(t=parseInt(ye.pagePosition,10));var n=i.create("PopupPosition",{animator:xe,pagePosition:t}),o=u.getSettingsValue(ye,"z-index",r.POPUP_BALLOON_Z_INDEX);e.css({"z-index":o,"min-width":L.minPopupWidth()+"px"});var l=parseInt(u.getSettingsValue(ye,"leftOffset",0)),c=parseInt(u.getSettingsValue(ye,"topOffset",0)),d={top:c,left:l};n.positionElementInPage(e,d);var p=a.canDisplayOverlay(),g=k.isSpotlight(ye);p&&g&&a.displayOverlay(o,!0,void 0,ye.overlay);var h=f.isQuirksMode(re[0]);h&&L.fixQuirksMode(e),xe.prepare(e),xe.postAnimation(function(){s.registerResizeAndScrollEvents({element:e,offset:d,callback:t!==_.Center?n.positionElementInPage:void 0})})},this.getBalloonDiv=function(){return U},this.getElement=function(){return re},this.getBalloonData=function(){return{isEmbeded:n.isEmbeded(ye),containerEntityType:we,containerEntityId:be,balloonEntityType:Ce,balloonEntityId:Te}},this.getBalloonHTML=function(){return L.generateHtml(ze())},this.Show=function(t,n){X=u.getTimer(He);var r=oe?C.getDirectHead(re):e("head"),i=function(){st().then(function(){at(t,n)})};me?i():L.loadResources(r,i)};function at(e,t){try{!K&&Q.shouldShow(re,ye)&&Q.highlight(),Et(e,t)}catch(n){l.error(n)}}function st(){var e=[];return Tt()||!me&&!Y.shouldShow(re,ye)||(e.push(Y.highlight()),z&&e.push(z.highlight())),o.all(e)}this.stop=function(){xe.stop()},this.destroy=function(e,t){m.raiseEvent(r.EVENTS.Walkthrus.DestroyStepBalloon,{balloonDiv:U}),Tt()&&re.remove(),e||(M=!0,mt(),vt()),yt(U),xe.disableAnimation(),xe.destroy(function(){try{Y.unhighlightElement(re,"balloon"),z&&z.unhighlightElement(ie,Ue),Q.unhighlightElement(re,"balloon")}catch(e){l.error(e,"error removing highlighting elements for balloon")}t&&t()})};function ut(e,t,i,o,a){var s=u.definedOrDefault(D,Be),l=L.arrowHeight()+1,c=L.decideWhereToPop(o,t,s,l,a);if(!c)return;c=ht(c,t,o,i),n.fixPosition(c,ye,i),L.addPositionClass(e,c);var d=ve.BalloonBorderWidth*(L.hasBorder()?1:0);gt(e,c,d,t);var p=u.getSettingsValue(ye,"z-index",r.NORMAL_BALLOON_Z_INDEX);return b.setTopMostCssStyle(e,p),f.isQuirksMode(re[0])&&L.fixQuirksMode(e),c}function lt(e){if(ke)return ke;return s.getElementBounds(e,oe,window,ye)}function ct(e){return e.is(":wm_interact_all_points")}function dt(e,t){var n=e.css("display"),r="none"==n;r&&U.css("display","block");var i=t(U);return r&&U.css("display",n),i}function ft(e,t,n){V=L.drawArrows(re,Te,e,t,n,B,Ce);for(var i=u.getSettingsValue(ye,"z-index",r.NORMAL_BALLOON_Z_INDEX),o=0;o<V.length;o++)b.setTopMostCssStyle(V[o],i);L.fixArrows({balloonDiv:U,arrowsDivs:V,result:e,isInCaptureMode:me,isQuirksMode:f.isQuirksMode(re[0])})}function pt(){if(!$)return;var e={objectId:Te,type:r.STEP_PLAY_INITIATOR_ENUM.STEP};$(U,e)}function gt(e,t,n,i){e.css("top",t.top-n+"px"),e.css("left",t.left-n+"px");var o=f.isQuirksMode(re[0]);t.positionType==r.POSITION_TYPE.Top&&e.css("top",t.top-2*n+1+"px"),t.positionType==r.POSITION_TYPE.Bottom&&e.css("top",t.top-1+"px"),t.positionType==r.POSITION_TYPE.Left&&(e.css("left",t.left-2*n+1+"px"),o&&e.css("left",t.left-2*n+"px")),t.positionType==r.POSITION_TYPE.Right&&e.css("left",t.left-1+"px"),e.css("width",i.width+"px"),o&&e.css("width",i.width+2*n+"px"),e.css("height",i.height+"px")}function ht(e,t,n,i){var o=u.definedOrDefault(ve.BalloonRadius,15);if(e.positionType==r.POSITION_TYPE.Right||e.positionType==r.POSITION_TYPE.Left){var a,s=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;if(isFinite(s)&&0!==s||(s=1),a=me||ye.lv&&ye.lv>0?mtjQuery(u.getElementDocument(i)).height()*s:mtjQuery(u.getElementDocument(re)).height()*s,t.height+e.top>a){var l=L.arrowHeight()+1,c=n.top+n.height/2,d=c-t.height/2,f=c-t.height+l+o/2;f=Math.max(0,f);var p=c-l-o/2,g=a-t.height-1,h=Math.min(g,p);e.top=d,e.top=Math.min(h,e.top),e.top=Math.max(e.top,f),e.top=Math.max(0,e.top)}}return e}function mt(){F&&(F.clear(),F=null)}function vt(){for(var e=0;e<Pe.length;e++)try{Pe[e]()}catch(t){}Pe.length=0}function yt(e){if(!e)return;try{e.unbind(),mtjQuery("*",e).unbind()}catch(t){}}function Et(e,t){var n=c.isFeatureEnabled("noScrlAnm")?v.SCROLL_MODES.Normal:v.SCROLL_MODES.Animated,i=u.getSettingsValue(ye,Le,n);e=e&&v.shouldScroll(re,i,N);var o=!1;e&&(o=v.jspScrollAttempt(re));var a,s=St();if(a=N&&N==r.STEP_TYPE.Popup?Ke(re):Xe(re,e),!a)return void(t&&t());pt(a),Dt(a),m.raiseEvent(r.EVENTS.BalloonCreated,{Element:a,Configuration:ve,PageElement:re}),Re.balloonDrawTime=X("Done drawing balloon"),J=u.getTimer(He);var l=function(){Re.balloonShowTime=J("Done showing balloon"),t&&t(Re,a)};!o&&e?s.scrollToElementIfNeeded(re,null,function(){var e=function(){s.scrollToBalloon(re,s.getScrollOptions(ye),U)};me||!Ct(e)?xe.animate(l):l()},ye,D,i,U,V):xe.animate(l),L.manipulationsForInlineCss(a)}function St(){var e={element:re,balloonDrawer:L,settings:ye};return i.create("ScrollManager",e)}this.elementDisplayTimeoutFunction=function(e){var t=s.isElementVisible(re,ye.filter);t?ne.handleBalloonDisplay(e):(q("Element not visible anymore.",5,Ve),ne.destroy(!1,e))},this.handleBalloonDisplay=function(e){Ct(),F=t.playSetTimeout(function(){ne.elementDisplayTimeoutFunction(e)},W)};function Tt(){return N==r.STEP_TYPE.Popup}function Ct(e){var t=!1,n=!1,r=ne.getElementPositionRelativeToContainer(re);!oe&&_t()&&(t=!0),v.isBalloonPositionVisibleRelativeToParents(re,D)||(t=!0),ke=null;var i=kt(r.top,r.left,r.height,r.width),o=wt();return i&&o?(n=!0,E.shouldMoveByIntervals(t,U,ye)?It(r,e):(q("Element position changed, destroying it",5,Ve),At(r.top,r.left,r.height,r.width),bt(),ne.destroy(!0,function(){q("Finished destorying balloon",5,Ve),t||M||(q("Redrawing balloon",5,Ve),ne.Show(!1,function(){ke=null,e&&e()}))}))):e&&e(),n}function bt(){c.isFeatureEnabled(r.FEATURES.CalculateElementBoundsBeforeRedraw)&&(ke=s.getElementBounds(re,oe,window,ye))}function wt(){var e={stepId:Te,balloonDiv:U,defaultValue:!0};return m.raiseEvent(r.EVENTS.ShouldChangeBalloonPosition,e),e.returnValue}function It(e,n){var r=0;function i(){r<10?(r++,ne.moveBalloon(e),t.playSetTimeout(i,30)):n&&n()}i()}this.moveBalloon=function(e){var t=re.height(),n=re.width(),r=E.getDeltaLeft(Ne,n,De,e.left),i=E.getDeltaTop(Oe,t,Ae,e.top);At(e.top,e.left,t,n),Pt(U,r,i);for(var o=0;o<V.length;o++)Pt(V[o],r,i);Tt()||!me&&!Y.shouldShow(re,ye)||(Y.highlight(),z&&z.highlight()),!K&&Q.shouldShow(re,ye)&&Q.highlight()};function Pt(e,t,n){var r=parseFloat(e.css("left")),i=parseFloat(e.css("top")),o=r-t+"px",a=i-n+"px";e.css("left",o),e.css("top",a)}function _t(){var e=re.data("iframe");return e&&s.isElementScrolledOut(re,e,D)}function kt(e,t,n,r){return null!=Ae&&null!=De&&null!=Oe&&null!=Ne&&(S.check(Ae,e)||S.check(De,t)||S.check(Oe,n)||S.check(Ne,r))}function At(e,t,n,r){Ae=e,De=t,Oe=n,Ne=r}function Dt(e){ve.classes&&mtjQuery.each(ve.classes,function(t,n){e.addClass(n)})}Ge.apply(null,arguments)}i.register("BalloonLogEventHandler").asCtor(kr).dependencies("Logger, WmInternals, Consts");function kr(e,t,n){this.init=s;var r,i="[BalloonLogEventHandler] ",o="balloonLogEventHandler";function a(){r=e.wrapCustomerLog(o)}function s(){t.bind(n.EVENTS.BalloonLogs.BalloonPopLocationCalculated,u),t.bind(n.EVENTS.BalloonLogs.BalloonIsFullyVisibleCalculated,l),t.bind(n.EVENTS.BalloonLogs.ClosestCanEmbedReturnsTop,c),t.bind(n.EVENTS.BalloonLogs.ClosestCanEmbedSkipsElement,c)}function u(e,t){t&&t.isEmbeded&&!t.extraData&&d(t.containerEntityType+" "+t.containerEntityId+" "+t.balloonEntityType+" "+t.balloonEntityId+": Something happened while calculaing the position of the balloon, trying to attach it to another element",3)}function l(e,t){t&&t.isEmbeded&&!t.extraData&&d(t.containerEntityType+" "+t.containerEntityId+" "+t.balloonEntityType+" "+t.balloonEntityId+": The balloon is partly covered by an element, trying to attach it to another element",3)}function c(e,t){d(t.reason+", trying to attach the balloon to another element. Invalid parent:",3),r(t.currentParent[0])}function d(e,t){r(i+e,t)}a()}i.register("MoveBalloonByIntervalsHelper").asCtor(Ar).asProto().dependencies("FeaturesManager");function Ar(e){var t=this;t.shouldMoveByIntervals=n,t.getDeltaLeft=i,t.getDeltaTop=r;function n(t,n,r){return e.isFeatureEnabled("moveByIntervals")}function r(e,t,n,r){return parseFloat(e)-parseFloat(t)}function i(e,t,n,r){return parseFloat(e)-parseFloat(t)}}i.register("BalloonElementPositionChangedChecker").asCtor(Dr).asProto().dependencies("FeaturesManager,Consts,BalloonPositionCheckSettingsGetter");function Dr(e,t,n){var r=this;r.check=i;function i(r,i){var s=e.isFeatureEnabled(t.FEATURES.PositionCheckByChangeThreshold),u=n.get(),l=u.positionChangePixelsThreshold;return s?a(r,i,l):o(r,i)}function o(e,t){return e!=t}function a(e,t,n){var r=Math.abs(e-t);return r>n}}i.register("SafeFullUrlProvider").asCtor(Or).dependencies("FeaturesManager, HostData");function Or(e,t){var n=this;n.get=r;function r(){if(e.isFeatureEnabled("disableWidgetOpenFullUrl")||e.isFeatureEnabled("dontSendPageUrl"))return"";return t.getUrl()}}i.register("DeployableSafeStartExecuter").asCtor(Nr).dependencies("SettingsValuesRetriever, SiteConfigManager, Consts, SafeStartHandlerProvider, SafeStartRedirectService, SafeStartMessageDisplayer");
function Nr(e,t,n,r,i,o){var a=this;a.handleSafeStart=s;function s(e,t,a){var s=r.get(e),l=u(t);if(null!=l&&1==l.enabled){var c=o.showAndGetStatus(l,a,e,s);return s.auditSafeStartFirstStatus(c,a),c==n.SAFESTART_ACTION.AutoRedirect&&i.redirect(l.url,n.SAFESTART_ACTION.AutoRedirect,a,s),!0}return s.auditSafeStartDisabled(a),!1}function u(n){var r=e.getSettingsValue(n.Settings,"SafeStart",!1);return r&&"0"!=r.enabled||(r=e.getSettingsValue(t.get().Settings,"SafeStart",null)),r}}i.register("SafeStartMessageDisplayer").asCtor(xr).dependencies("SettingsValuesRetriever, SiteConfigManager, Consts, CommonUtils, HtmlDecoder, LibDestroyer, RedirectService, SafeStartRedirectService, UiUtils");function xr(e,t,n,r,o,a,s,u,l){var c=this;c.showAndGetStatus=d,c.closePopup=f;function d(e,t,r,i){var o,a=e.url;return 1==e.autoRedirect?o=n.SAFESTART_ACTION.AutoRedirect:s.canRedirect(a)&&!s.isUrlDifferentFromCurrentOnlyInHash(a)?(o=n.SAFESTART_ACTION.PopupShown,h(a,t,i)):(o=n.SAFESTART_ACTION.FailOnUrl,p(y(r))),o}function f(){a.releaseBalloons(),l.removeOverlay()}function p(e){var t=g();t.enabled&&(e+=cg(" or contact <a href='{0}' target='_blank' style='text-decoration: underline; color: blue;'>support.</a>",t.url));var n=E(e),r={popupStepButtons:[{id:0,name:"OK",action:7}]},o=!0;i.get("PopupBalloonDisplayer").showSpecialPopupBalloon({htmlContent:n},400,r,function(e){mtjQuery(".walkme-action-ok",e).click(function(){f()})},o)}function g(){var n={},i=t.get();return n.enabled=r.isTrue(i.Settings,"openATicketEnabled",!1),n.url=e.getSettingsValue(i.Settings,"openATicketUrl",""),n.url&&r.isValidUrl(n.url)?(n.url=encodeURI(n.url),n.url=o.decodeHtml(n.url,["&"])):(n.enabled=!1,n.url=null),n}function h(e,n,r){var o=t.get(),a=E(o.SafeStartPopupText),s={popupStepButtons:[{id:0,name:o.RedirectButtonText,action:5},{id:1,name:o.StayButtonText,action:6}]};i.get("PopupBalloonDisplayer").showSpecialPopupBalloon({htmlContent:a},400,s,function(t){m(t,e,n,r)})}function m(e,t,r,i){mtjQuery(".walkme-action-redirect",e).click(function(){u.redirect(t,n.SAFESTART_ACTION.RedirectClicked,r,i).then(f)}),mtjQuery(".walkme-action-stay",e).click(function(){v(r,i)}),mtjQuery(".walkme-action-close",e).attr("onclick","").unbind("click"),mtjQuery(".walkme-action-close",e).click(function(){v(r,i)})}function v(e,t){t.auditStayButtonClicked(e),f()}function y(e){return"Sorry about that! The "+n.DEPLOYABLE_DISPLAY_NAME[e]+" cannot be played right now. Please try again later"}function E(e){var t=mtjQuery("<div></div>");return e=r.nl2br(e),t.append(e),t}}i.register("SafeStartRedirectService").asCtor(Lr).dependencies("TimerManager, CommonEvents, Consts");function Lr(e,t,n){var r=this;r.redirect=i;function i(r,i,o,a){var s={url:r};t.raiseEvent(n.EVENTS.SafeStartRedirect,s);var u=mtjQuery.Deferred(),l=function(){a.redirect(s.url,o),u.resolve()};return a.auditSafeStartStatus(i,o),e.setWalkmeTimeout(l),u.promise()}}i.register("SafeStartHandlerProvider").asCtor(Fr).dependencies("DeployableTypes, FlowSafeStartHandler");function Fr(e,t){var n=this;n.addSafeStartHandler=o,n.get=a;var r;function i(){r={},o(e.BusinessSolution,t)}function o(e,t){r[e]=t}function a(e){return r[e]}i()}i.register("Encryptor").asCtor(Mr).dependencies("Base64");function Mr(e){var t=this;t.encrypt=n;function n(t){return e.btoa(unescape(encodeURIComponent(t)))}}i.register("SearchResultActivator").asCtor(Br).dependencies("CommonUtils, LightboxDisplayer, Logger, CommonEvents, SiteConfigManager, Mustache");function Br(e,t,n,r,i,o){var a=this,s=n.wrapCustomerLog(h),u=[".zendesk.com"],l={width:900,height:500};function c(){return!0}function d(e){e=e.toLowerCase();for(var t=0;t<u.length;t++)if(e.indexOf(u[t].toLowerCase())>=0)return!0;return!1}function f(n){var r=t.getSize(),i='<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}; height: {{{height}}};"></iframe>',a=o.to_html(i,{width:r.width,height:r.height,url:e.isUrlEncoded(n)?n:encodeURI(n)}),s=mtjQuery(a);return s}function p(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://"),n=t||d(e);return n&&s("Can't play content in lightbox",3),n}a.openSearchResult=function(t){if(!e.isValidUrl(t))return void s(cg("Content url is invalid: {0}",t),3);s(cg("Content url is :{0}",t),3),r.raiseEvent("LoadingContent",t);var n="true"===i.get().Custom.lightboxEnabled;p(t)||!n?m(t):g(t)};function g(e){s("Started playing content in lightbox",3),WalkMePlayerAPI.isMenuOpen()&&WalkMePlayerAPI.toggleMenu(),v(),t.activate(e,l,"searchResult",c(),f,m)}function m(e){s("Started playing content in new tab",3),window.open(e,"_blank")}function v(e){t&&t.remove()}}i.register("InfoAndValidationsSmartTipComponentsActivator").asCtor(Rr).asProto().dependencies("PromiseUtils");function Rr(e,t){var n=this;n.activate=a,n.destroy=s;var r,i;function o(){r=t.infoComponentActivator,i=t.validationsComponentActivator}function a(t){s();var n=[r.activate(t),i.activate(t)];return e.executeParallely(n)}function s(){var t=[r.destroy(),i.destroy()];return e.executeParallely(t)}o()}i.register("InfoSmartTipComponentsActivator").asCtor(Ur).asProto().dependencies("SmartTipComponentDrawerFactory");function Ur(t,n){var r=this;r.activate=s,r.destroy=u;var i,o;function a(){i=n.smartTipModel}function s(e){return o=t.get(i,i.Info),o.draw(e)}function u(){if(o)return o.destroy();return e.when()}a()}i.register("SmartTipComponentsActivatorFactory").asCtor(Vr).dependencies("Consts");function Vr(e){var t=this;t.get=r;function n(){}function r(t){switch(t.Mode){case e.SMART_TIP.MODE.OnlyInfo:return o(t);case e.SMART_TIP.MODE.OnlyValidations:return a(t);case e.SMART_TIP.MODE.InfoAndValidations:return s(t);default:throw new Error("Unsupported smartTipMode: "+t.Mode)}}function o(e){var t={smartTipModel:e};return i.create("InfoSmartTipComponentsActivator",t)}function a(e){var t={smartTipModel:e};return i.create("ValidationsSmartTipComponentsActivator",t)}function s(e){var t=o(e),n=a(e),r={infoComponentActivator:t,validationsComponentActivator:n};return i.create("InfoAndValidationsSmartTipComponentsActivator",r)}n()}i.register("ValidationsSmartTipComponentsActivator").asCtor(Wr).asProto().dependencies("Consts, ValidationsSmartTipComponentDrawerCreator, ValidationsSmartTipStateMachineProvider, DocumentElementEventsBinder, TimerManager");function Wr(t,n,r,i,o,a){var s=this;s.activate=v,s.destroy=m;var u,l,c,d,f,p,g;function h(){c=n.create(a.smartTipModel),p=a.smartTipModel}function m(){return T(),b(),d&&(d.reset(),d=null),l=null,u=null,c.removeValidationFeedback()}function v(t){return u=t,g=!p.Settings.validateThruLauncher,T(),C(),y(),b(),w(),e.when()}function y(){var e=r.get(p,u,S);l=e.activationElementsSelector,d=e.stateMachine,f=e.elementEvents}function E(){return g=!0,c.drawValidationFeedback(u)}function S(e,t,n){t&&t.shouldValidate&&u&&o.libSetTimeout(function(){E().then(function(){var e=n&&n.sender==u[0];c.applyBehaviorOnFeedback({tooltipStartShown:e})})},0)}function T(){e(p).off(t.SMART_TIP_INNER_EVENTS.CheckValidations)}function C(){e(p).on(t.SMART_TIP_INNER_EVENTS.CheckValidations,E)}function b(){if(!f||!u)return;var e=P(f);i.off(u,l,e)}function w(){if(!f||!u)return;for(var e=P(f),t=0;t<e.length;t++)i.on(u,l,e[t],I(f[t]))}function I(e){return function(t){g&&d.evaluate(e,{sender:t.target})}}function P(e){for(var t=[],n=0;n<e.length;n++){var r=e[n]+"."+p.Id;t.push(r)}return t}h()}i.register("ValidationsSmartTipStateMachineConfiguration").asFunction(Gr).dependencies("Consts");function Gr(e){var t={dontCheck:"dontCheck",delayValidationCheck:"delayValidationCheck",checkValidation:"checkValidation"},n=".walkme.smarttip.validation",r={onFocusOut:"blur"+n,onFocus:"focus"+n,onKeyDown:"keydown"+n,onChange:"change"+n},i=[{toState:t.checkValidation,valueToReturn:{shouldValidate:1}}],o=[{fromState:t.delayValidationCheck,timeout:500,toState:t.checkValidation}],a=[{fromState:"*",onAction:r.onKeyDown,toState:t.delayValidationCheck}],s=[{fromState:"*",onAction:r.onFocusOut,toState:t.checkValidation},{fromState:"*",onAction:r.onFocus,toState:t.dontCheck}],u=[{fromState:"*",onAction:r.onChange,toState:t.checkValidation}];return{initialState:t.dontCheck,timedOutTransitions:o,defaultTransitionValuesToReturn:i,keyDownTransitions:a,keyDownEvents:[r.onKeyDown],focusTransitions:s,focusEvents:[r.onFocus,r.onFocusOut],changeTransitions:u,changeEvents:[r.onChange]}}i.register("ValidationsSmartTipStateMachineProvider").asCtor(Hr).dependencies("ValidationsSmartTipStateMachineConfiguration, StatesMachineCreator, HtmlElementsDataProvider, Consts, ValidationsComplexConditionIndicator");function Hr(e,t,n,r,i){var o=this;o.get=u;var a="*";function s(){}function u(t,r,o){var s=e.focusTransitions,u=e.focusEvents,c=i.containsComplexCondition(t.Validations);t.Settings.validateWhileTyping&&(s=s.concat(e.keyDownTransitions),u=u.concat(e.keyDownEvents)),(n.isSelectInput(r)||c)&&(s=s.concat(e.changeTransitions),u=u.concat(e.changeEvents));var d=l(s,o);return{stateMachine:d,elementEvents:u,activationElementsSelector:c?a:r}}function l(n,r){var i={initState:e.initialState,timedOutTransitions:e.timedOutTransitions,defaultTransitionValuesToReturn:e.defaultTransitionValuesToReturn,onStateChangedCallback:r,transitions:n},o=t.create(i);return o}s()}i.register("ValidationsComplexConditionIndicator").asCtor(jr).dependencies("ConditionTreeUtils");function jr(e){var t=this;t.containsComplexCondition=n;function n(t){if(!t)return!1;for(var n=0;n<t.length;n++){var i=t[n];if(i.ConditionTrees&&i.ConditionTrees.Validation){var o=e.anyMatchesCondition(i.ConditionTrees.Validation,r);if(o)return!0}}return!1}function r(e){if("Func"!=e.nodeType)return!1;var t=0===e.funcName.indexOf("Element"),n=0===e.funcName.indexOf("jQuery");return t||n}}i.register("ChainedSmartTipComponentDrawer").asCtor(Yr).asProto().dependencies("PromiseUtils, inArrayFunc");function Yr(t,n,r){var i=this;i.draw=f,i.applyBehavior=p,i.destroy=g;var o,a,s,u={Drawing:"drawing",Drawn:"drawn",Destroying:"destroying",Destroyed:"destroyed"},l=[u.Drawing,u.Drawn],c=[u.Destroying,u.Destroyed];function d(){o=r.drawers}function f(t){var n=function(){return v(e(t))};return h(n,l,u.Destroying)}function p(e){for(var t=0;t<o.length;t++)o[t].applyBehavior&&o[t].applyBehavior(e)}function g(){return h(y,c,u.Drawing)}function h(e,t,n){if(m(t))return a;return a=s==n?a.then(e):e()}function m(e){return n(s,e)!=-1}function v(e){s=u.Drawing;for(var n=[],r=0;r<o.length;r++){var i=o[r];n.push(E(i))}var a=t.executePromiseChain(n,e);return a.always(function(){s=u.Drawn}),a}function y(){s=u.Destroying;for(var e=[],n=o.length-1;n>=0;n--){var r=o[n];e.push(S(r))}var i=t.executePromiseChain(e);return i.always(function(){s=u.Destroyed}),i}function E(e){return e.draw}function S(e){return e.destroy}d()}i.register("SmartTipComponentDrawerFactory").asCtor(zr).dependencies("SmartTipComponentDrawerConfigurationProvider, SmartTipGlobalStylingProvider, SmartTipDrawersCreator");function zr(e,t,n){var r=this;r.get=a;function o(){}function a(e,n){var r=t.get(n.GlobalStyleId),i=s(e,n,r);return i}function s(t,r,o){var a=e.getConfig(r),s=[];if(a.shouldDrawHighlighter){var u=n.getHighlighterDrawer(t,r,o);s.push(u)}if(a.shouldDrawIcon){var l=n.getIconDrawer(t,r,o);s.push(l)}if(a.shouldDrawTooltip){var c=n.getInteractiveTooltipDrawer(r,o,t);s.push(c)}return i.create("ChainedSmartTipComponentDrawer",{drawers:s})}o()}i.register("SmartTipDrawersCreator").asCtor(Qr).dependencies("SmartTipHighlighterDrawerCreator");function Qr(t){var n=this;n.getIconDrawer=o,n.getStaticTooltipDrawer=a,n.getInteractiveTooltipDrawer=s,n.getHighlighterDrawer=u;function r(){}function o(e,t,n){var r={smartTipModel:e,smartTipUiComponentModel:t,globalStyling:n};return i.create("SmartTipIconDrawer",r)}function a(e,t,n){var r={smartTipModel:n,smartTipUiComponentModel:e,globalStyling:t};return i.create("SmartTipTooltipDrawer",r)}function s(e,t,n){var r=a(e,t,n),o={smartTipComponentModel:e,tooltipDrawer:r};return i.create("SmartTipInteractiveTooltipDrawer",o)}function u(n,r,i){var o={};return o["z-index"]=n&&n.Settings&&n.Settings["z-index"],o=e.extend({},i.Highlighter,o),t.create(r.Id,"smartTipUiComponent",o,n)}r()}i.register("SmartTipComponentDrawerConfigurationProvider").asCtor(qr);function qr(){var e=this;e.getConfig=n;function t(){}function n(e){var t=e.IsWithIcon,n=!!e.TooltipText,r=e.IsWithHighlighter;return{shouldDrawIcon:t,shouldDrawTooltip:n,shouldDrawHighlighter:r}}t()}i.register("SmartTipIconDrawer").asCtor(Kr).asProto().dependencies("SmartTipIconCreator, Consts");function Kr(t,n,r){var i=this;i.draw=c,i.destroy=d;var o,a,s,u;function l(){a=r.smartTipModel,s=r.smartTipUiComponentModel,u=r.globalStyling}function c(r){o=t.create(a,s,r,u);var i=e.Deferred();return e(a).on(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,p),o.show().then(function(e){f();var t=e.getOriginElement();t&&t[0]?i.resolve(t):i.reject()}),i.promise()}function d(){return o&&(o.destroy(),o=null),e(a).off(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,p),e.when()}function f(){e(s).trigger(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{eventType:n.EVENTS.SmartTips.SmartTipIconShown})}function p(e){o.reposition()}l()}i.register("SmartTipTooltipDrawer").asCtor(Xr).asProto().dependencies("TooltipCreator, Consts, SmartTipDrawerOptionsProvider, TimerManager, FocusedElementInElementChecker");function Xr(t,n,r,i,o,a){var s=this;s.draw=h,s.destroy=m;var u,l,c,d,f=null,p=e.when();function g(){l=a.smartTipUiComponentModel,d=a.globalStyling,c=a.smartTipModel}function h(e){return f=e,v()}function m(){return f=null,p=p.pipe(E)}function v(){return p=p.pipe(E).pipe(y)}function y(){if(!f)return e.when();var i=l.TooltipStyle||d.Tooltip,o=r.getTooltipDrawerOptions(l,c);u=t.create(f,l.TooltipText,i,o);var a=e.Deferred(),s=a.promise();return u.show().pipe(function(e){S(),a.resolve(e)}),e(c).on(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,T),s}function E(){if(!u)return e.when();e(c).off(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,T);var t=u.destroy();return u=void 0,t}function S(){e(l).trigger(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{eventType:n.EVENTS.SmartTips.TooltipShown})}function T(t){document.activeElement==e("body")[0]?i.setWalkmeTimeout(C,100):C()}function C(){b()&&v()}function b(){var t=e("#walkme-tooltip-"+l.Id)[0];return o.isFocusedElementOutsideElement(t)}g()}i.register("SmartTipDrawerOptionsProvider").asCtor(Jr).dependencies("Consts, ObjectMapper");function Jr(e,t){var n=this;n.getTooltipDrawerOptions=i;var r={"uiComponent.Id":"itemId","smartTip.Settings.z-index":"stepSettings.z-index","smartTip.Settings.embedInParent":"stepSettings.embed","smartTip.Settings.tooltipPosition":"tooltipPosition","smartTip.Settings.tooltipPositionOffset":{destination:"tooltipPositionOffset",where:function(e,t){return void 0!==t("smartTip.Settings.tooltipPosition")}},"smartTip.Settings.Position":{destination:"directionToAvoid",transform:function(t){return e.OPPOSITE_POSITION_TYPE[t]},where:function(e,t){return!!t("uiComponent.IsWithIcon")}}};function i(e,n){var i={smartTip:n,uiComponent:e},o={};return t.merge(i,o,r),o.cssClasses=[],n&&o.cssClasses.push("walkme-tooltip-smarttip-"+n.Id),e&&o.cssClasses.push("walkme-tooltip-uicomponent-"+e.Id),o}}i.register("SmartTipInteractiveTooltipDrawer").asCtor($r).asProto().dependencies("TooltipControllerCreator, TooltipVisibilityEventsProvider, WmInternals, Consts");function $r(t,n,r,i,o){var a=this;a.draw=d,a.applyBehavior=f,a.destroy=p;var s,u,l;function c(){s=o.tooltipDrawer,l=o.smartTipComponentModel}function d(r){var i=n.getEventsByElement(r);return u=t.create(s,r,i),u.setEvents(),g(),e.when(r)}function f(e){e&&e.tooltipStartShown&&u&&u.show()}function p(){if(r.unbind(i.EVENTS.SmartTips.TooltipShown,h),!u)return e.when();var t=u.clean();return u=null,t}function g(){r.bind(i.EVENTS.SmartTips.TooltipShown,h)}function h(e,t){if(!t||!t.uiComponent||!u)return;t.uiComponent.Id!=l.Id&&u.hide()}c()}i.register("SmartTipHighlighterDrawer").asCtor(Zr).asProto().dependencies("CommonUtils, Consts");function Zr(t,n,r){var o=this;o.draw=f,o.destroy=g;var a,s,u,l,c;function d(){l=r.drawableType,c=r.drawableId,s=r.highlighterCustomStyling,u=r.smartTipModel}function f(t){return a=p(t),a.highlight(),e(u).on(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,h),e.when(t)}function p(e){var n=s,r=t.isTrue(u.Settings,"embedInParent",!1),o={element:e,settings:n,drawableType:l,drawableId:c,monitor:!0,defaultSettings:!1,embedInElement:r,cssKeysValues:[{id:c,name:l},{id:u.Id,name:"smarttipid"}]};return i.create("Highlighter",o)}function g(){return a&&(a.unhighlightElement(),a=null),e(u).off(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,h),e.when()}function h(e){a.highlight()}d()}i.register("SmartTipHighlighterDrawerCreator").asCtor(ei);function ei(){var e=this;e.create=n;function t(){}function n(e,t,n,r){var o={drawableType:t,drawableId:e,highlighterCustomStyling:n,smartTipModel:r};return i.create("SmartTipHighlighterDrawer",o)}t()}i.register("ValidationsSmartTipComponentDrawer").asCtor(ti).asProto().dependencies("SmartTipComponentDrawerFactory, SmartTipValidationFeedbackComponentProvider, PromiseUtils, Consts");function ti(t,n,r,i,o){var a=this;a.drawValidationFeedback=f,a.removeValidationFeedback=m,a.applyBehaviorOnFeedback=g;var s,u,l,c;function d(){l=o.smartTipModel,c=!0}function f(t){var r=n.getFeedbackComponent(l,t);if(!h(r)&&!c)return e.when();return c=!1,p(t,r).then(function(){return E(r)})}function p(e,t){var n=[],i=void 0!=u;i&&(u=null,n.push(v));var o=void 0!=t;if(o){u=t;var a=function(){return y(e,t)};n.push(a)}return r.executePromiseChain(n)}function g(e){s&&s.applyBehavior&&s.applyBehavior(e)}function h(e){return e!=u}function m(){return u=null,v()}function v(){if(!s)return e.when();var t=s.destroy();return s=null,t}function y(e,n){return s=t.get(l,n),s.draw(e)}function E(e){e&&e.Type==i.SMART_TIP.COMPONENT_TYPE.Validation?S(i.EVENTS.SmartTips.ValidationFailed,e):S(i.EVENTS.SmartTips.ValidationPassed,e)}function S(t,n){var r={uiComponent:n,eventType:t};e(l).trigger(i.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,r)}d()}i.register("ValidationsSmartTipComponentDrawerCreator").asCtor(ni);function ni(){var e=this;e.create=n;function t(){}function n(e){var t={smartTipModel:e},n=i.create("ValidationsSmartTipComponentDrawer",t);return n}t()}i.register("SmartTip").asCtor(ri).asProto().dependencies("SmartTipVisiblityWatchCreator, Consts, ElementInteractionEventsBinder, SmartTipComponentsIterator, UiChangesTrackerWrapper, SmartTipDrawerCreator, CommonEvents, wmjQuery");function ri(e,t,n,r,i,o,a,s,u){var l=this;l.activate=v,l.deactivate=I;var c,d,f,p,g,h=".wmst";function m(){c=u.smartTipModel,p=o.create(c),k()}function v(){return g=!0,d=e.createVisibilityWatch(c,y,C),d.watchForVisibility()}function y(e){if(!g)return;return f=e,p.drawSmartTipElements(f).then(function(){D(),_(),S(),E(e)})}function E(e){var n={smartTip:c,element:e};a.raiseEvent(t.EVENTS.SmartTips.SmartTipElementShown,n)}function S(){var e={isEmbedInElement:c.Settings.embedInParent,element:f,callback:T};i.trackChanges(e)}function T(){s(c).trigger(t.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned)}function C(){w(),b()}function b(){var e={smartTip:c};a.raiseEvent(t.EVENTS.SmartTips.SmartTipElementRemoved,e)}function w(){return i.stopTrackingChanges(),f&&(P(),f=null),p.removeSmartTipElements()}function I(){return g=!1,d&&d.cleanResources(),d=null,w()}function P(){n.unbind(f,h)}function _(){n.bind(f,h,O)}function k(){r.doOnAllComponents(c,A)}function A(e){s(e).on(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,function(n,r){r.uiComponent=e,s(c).trigger(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,r)})}function D(){O(t.EVENTS.SmartTips.SmartTipSegmented)}function O(e){s(c).trigger(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{eventType:e})}m()}i.register("SmartTipSetActivationInitiator").asCtor(ii).dependencies("ElementFinder, SmartTipSetsActivatorFactory, InitiatorManager, ClientStorageManager, Consts");function ii(e,t,n,r,i){var o=this,a=[];o.start=u,o.stop=c;function s(){}function u(){e.wrapSession(function(){var e={type:i.STEP_PLAY_INITIATOR_ENUM.AUTOSTART};r.saveData(r.keysConfig.smartTipSet.initiator.key,e,r.keysConfig.smartTipSet.initiator.expiry),n.setForScope(e,l)})}function l(){a=t.get();for(var e=0;e<a.length;e++)a[e].start()}function c(){for(var e=0;e<a.length;e++)a[e].stop()}s()}i.register("SmartTipDrawer").asCtor(oi).asProto().dependencies("SmartTipHighlighterDrawerCreator, SmartTipComponentsActivatorFactory, PromiseUtils");function oi(e,t,n,r){var i=this;i.drawSmartTipElements=l,i.removeSmartTipElements=f;var o,a,s;function u(){o=r.smartTipModel,a=t.get(o)}function l(e){return c()&&d(e),a.activate(e)}function c(){return void 0!=o.Settings.hlType}function d(t){s=e.create(o.Id,"smartTip",o.Settings,o),s.draw(t)}function f(){var e=[a.destroy()];return s&&e.push(s.destroy()),n.executeParallely(e)}u()}i.register("SmartTipDrawerCreator").asCtor(ai);function ai(){var e=this;e.create=n;function t(){}function n(e){var t={smartTipModel:e};return i.create("SmartTipDrawer",t)}t()}i.register("SmartTipGlobalStylingProvider").asCtor(si).dependencies("SiteConfigManager");function si(e){var t=this;t.get=r;function n(){}function r(t){var n=e.get(),r=n.SmarttipSettings,i=r[t];return i}n()}i.register("SmartTipCreator").asCtor(ui);function ui(){var e=this;e.create=n;function t(){}function n(e){var t={smartTipModel:e};return i.create("SmartTip",t)}t()}i.register("SmartTipFirstFailedValidationProvider").asCtor(li).dependencies("ConditionCheckerFactory");function li(e){var t=this;t.getFirstFailedValidation=n;function n(e,t){if(!e.Validations)return null;for(var n=0;n<e.Validations.length;n++){var i=e.Validations[n];if(i.ConditionTrees&&i.ConditionTrees.Validation){var o=i.ConditionTrees.Validation,a=r(o,t);if(!a)return i}}return null}function r(t,n){var r=e.createNew({getSelectedElement:function(){return n}});return r.getCurrentEvaluationValueAndStopEvaluating(t)}}i.register("SmartTipSetManager").asCtor(ci).asProto().dependencies("SmartTipCreator, Consts, PromiseUtils, CommonEvents, GuidGenerator");function ci(t,n,r,i,a,s){var u=this;u.turnOnWithLazyValidations=h,u.turnOnWithImmediateValidations=m,u.turnOff=y;var l,c,d,f,p=!1;function g(){l=s.smartTipModels,d=s.setId,c={},b()}function h(e){if(p)return void(e&&e());f=a.generateGuid(),S().then(function(){v(),e&&e()})}function m(e){h(function(){w(A),e&&e()})}function v(){p||(C(),N(),p=!0)}function y(){if(!p)return e.when();return p=!1,T(),x(),E()}function E(){var t=e.map(l,function(e){return c[e.Id]});return r.executeParallelyOnArray(t,_)}function S(){return I(P)}function T(){w(D)}function C(){w(O)}function b(){w(k)}function w(t){l&&e.each(l,function(e,n){t(n)})}function I(t){var n=[];return l&&e.each(l,function(e,r){n.push(t(r))}),o.all(n)}function P(e){var t=c[e.Id];return t.activate()}function _(e){return e.deactivate()}function k(e){var n=t.create(e);c[e.Id]=n}function A(t){e(t).trigger(n.SMART_TIP_INNER_EVENTS.CheckValidations)}function D(t){e(t).off(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix)}function O(t){e(t).on(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,function(n,r){var i={smartTipModel:t};i=e.extend(i,r),L(r.eventType,i)})}function N(){L(n.EVENTS.SmartTips.SetTurnedOn)}function x(){L(n.EVENTS.SmartTips.SetTurnedOff)}function L(t,n){var r={setId:d,playGuid:f};n=e.extend(r,n||{}),i.raiseEvent(t,n)}g()}i.register("SmartTipSetsManager").asCtor(di).dependencies("SmartTipSetManagerCreator, PromiseUtils, DictionaryUtils");function di(t,n,r){var i=this;i.init=u,i.getAll=c,i.getSetManagerById=d,i.turnOffAllSets=f;var o,a;function s(){}function u(e){a=e,l()}function l(){o={};for(var e=a.length-1;e>=0;e--){var n=a[e],r=t.create(n.SmartTips,n.Id);o[n.Id]=r}}function c(){return a}function d(e){return o[e]}function f(){if(!o)return e.when();var t=r.getDictionaryValues(o);return n.executeParallelyOnArray(t,p)}function p(e){return e.turnOff()}s()}i.register("SmartTipSetManagerCreator").asCtor(fi);function fi(){var e=this;e.create=t;function t(e,t){return i.create("SmartTipSetManager",{smartTipModels:e,setId:t})}}i.register("SmartTipValidationFeedbackComponentProvider").asCtor(pi).dependencies("SmartTipFirstFailedValidationProvider");function pi(e){var t=this;t.getFeedbackComponent=r;function n(){}function r(t,n){var r=e.getFirstFailedValidation(t,n);return r||t.PositiveFeedback}n()}i.register("SmartTipVisiblityWatchCreator").asCtor(gi).dependencies("Consts, UIElementVisibilityAttributes");function gi(e,t){var n=this;n.createVisibilityWatch=o;function r(){}function o(e,n,r){var o=e.ConditionTrees.SmartTip,s={logContext:e.Id,stickyType:t.getStickyType(e.Settings),elementVisibilityParams:{findElementParams:{IdentifySettings:e.IdentifySettings}},isRemoveByCondition:t.getIsRemoveByCondition(e.Settings),conditionCheckerParams:a(e),conditionTree:o&&o.Root?o:void 0,onShow:n,onRemove:r,trackUIChanges:!0},u=i.create("UIVisibilityManager",s);return u}function a(t){return{featureName:e.CONDITION_CHECKER.FEATURE_NAMES.SmartTipSegmentation,elementName:t.Name}}r.apply(null,arguments)}i.register("SmartTipSetActivator").asCtor(hi).asProto().dependencies("SmartTipSetsManager");function hi(e,t){var n=this;n.start=u,n.stop=l;var r,o,a;function s(){r=t.set;var n=e.getSetManagerById(r.Id);o={logContext:r.Id,trackUIChanges:!0,conditionTree:r.ConditionTrees.DisplayRules,onShow:n.turnOnWithLazyValidations,onRemove:n.turnOff,conditionCheckerParams:{elementName:r.Name}}}function u(){if(a)return;a=i.create("UIVisibilityManager",o),a.watchForVisibility()}function l(){a&&a.cleanResources(),a=null}s()}i.register("SmartTipSetsActivatorFactory").asCtor(mi).dependencies("SmartTipSetsManager");function mi(e){var t=this;t.get=r;function n(){}function r(){for(var t=[],n=e.getAll(),r=0;r<n.length;r++){var i=n[r],a=o(i);t.push(a)}return t}function o(e){return i.create("SmartTipSetActivator",{set:e})}n()}i.register("SmartTipComponentsIterator").asCtor(vi);function vi(){var e=this;e.doOnAllComponents=n;function t(){}function n(e,t){if(e.Info&&t(e.Info),e.PositiveFeedback&&t(e.PositiveFeedback),e.Validations)for(var n=0;n<e.Validations.length;n++){var r=e.Validations[n];t(r)}}t()}i.register("DisabledSmartTipsRemover").asCtor(yi).dependencies("DisabledElementsRemover");function yi(e){var t=this;t.remove=n;function n(t){for(var n=0;n<t.length;n++){var i=t[n].SmartTips;e.remove(i,r)}}function r(e){return!e.IsEnabled}}var Ei=function(){function e(e){this.deployablesDict={},this.lib=e.lib,this.setDeployables(e.deployables)}return e.prototype.setDeployables=function(e){if(!e)return;for(var t=0;t<e.length;t++)this.deployablesDict[e[t].Id]=e[t]},e.prototype.getActionData=function(e){return{Type:"",ItemId:"",Name:""}},e.prototype.isWithAction=function(e){return!1},e.prototype.activateById=function(e,t,n){},e.prototype.getById=function(e){return this.deployablesDict[e]},e.prototype.getAll=function(){var e=[],t=this.deployablesDict;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e.sort(function(e,t){if(void 0===e.OrderIndex||void 0===t.OrderIndex)return 0;return e.OrderIndex-t.OrderIndex})},e.prototype.getDeployablesDict=function(){return this.deployablesDict},e.prototype.releaseAll=function(e){},e.prototype.autoStartEnabled=function(e){return!1},e.prototype.name=function(){return this._name},e}();i.register("DeployablesManagerFactory").asCtor(Si).dependencies("Consts");function Si(e){var t=this;t.get=a;var n;function r(){}function o(){n={},n[e.DEPLOYABLE_TYPE.Tutorial]=i.get("TutorialsManager"),n[e.DEPLOYABLE_TYPE.Content]=i.get("ContentsManager"),n[e.DEPLOYABLE_TYPE.Task]=i.get("TodoListManager"),n[e.DEPLOYABLE_TYPE.Launcher]=i.get("LaunchersManager"),n[e.DEPLOYABLE_TYPE.Category]=i.get("CategoriesManager"),n[e.DEPLOYABLE_TYPE.Collection]=i.get("CollectionsManager"),n[e.DEPLOYABLE_TYPE.Shuttle]=i.get("ShuttlesManager"),n[e.DEPLOYABLE_TYPE.AbExperiment]=i.get("ExperimentsManager"),n[e.DEPLOYABLE_TYPE.Survey]=i.get("SurveysManager"),n[e.DEPLOYABLE_TYPE.ShoutOut]=i.get("ShoutOutsManager"),n[e.DEPLOYABLE_TYPE.ConditionBlock]=i.get("ConditionBlocksManager"),n[e.DEPLOYABLE_TYPE.Tag]=i.get("TagsManager"),n[e.DEPLOYABLE_TYPE.BusinessSolution]=i.get("BusinessSolutionsManager"),n[e.DEPLOYABLE_TYPE.TrackedPage]=i.get("TrackedPagesManager"),n[e.DEPLOYABLE_TYPE.Course]=i.get("CoursesManager"),n[e.DEPLOYABLE_TYPE.Lesson]=i.get("LessonsManager"),n[e.DEPLOYABLE_TYPE.TrackedElement]=i.get("TrackedElementsManager"),n[e.DEPLOYABLE_TYPE.SearchProviderUrl]=i.get("SearchProviderUrlsManager")}function a(e){return n||o(),n[e]}r()}i.register("DeployableSurveyActivator").asCtor(Ti).dependencies("Logger, SurveysManager, AutoStartManager, StorageKeysConfigurations");function Ti(e,t,n,r){var i=this;i.activateSurvey=o;function o(n,r,i,o,s){e.customerLog("Checking if need to open survey");var u=a(n,r,i);if(u.shouldStart){e.customerLog("Starting survey");var l=t.activateById(n,o,s);if(l)for(var c=0;c<u.cookiesToSave.length;c++)u.cookiesToSave[c]()}}function a(i,o,a){var u={shouldStart:!1,cookiesToSave:[]},l=t.getById(i);if(!l)return e.customerLog("Couldn't find survey with id:"+i,0,"survey"),u;var c=r.survey.repeat.key+"-"+l.Id,d=n.checkRepeatCookie(c,s(l.Settings));return d&&d.shouldStart&&(u.cookiesToSave.push(d.store),d=n.checkRepeatCookie(o+"-"+l.Id,a),u.cookiesToSave.push(d.store),u.shouldStart=d.shouldStart),u}function s(e){return e.repeat||"visit"}}i.register("DeployableTypeNameProvider").asCtor(Ci).dependencies("Consts");function Ci(e){var t=this;t.getDeployableTypeNameByTypeNumber=n;function n(t){var n=void 0;return mtjQuery.each(e.DEPLOYABLE_TYPE,function(e,r){if(t==r)return n=e,!1}),n}}i.register("TagsInjector").asCtor(bi).dependencies("ConditionsCombinerFactory");function bi(e){var t=this;t.inject=n;function n(t,n,i){var o=i.isNewConditions?"ConditionTrees":"Settings";t[o]||(t[o]={});var a=t[o][i.name];if(!n)return a;r(t,i.enabled)&&(t.Settings[i.enabled]=1,a=void 0);var s=e.get(i.isNewConditions),u=s.combine("And",n,a);return t[o][i.name]=u,u}function r(e,t){return t&&"true"!==e.Settings[t]&&!e.Settings[t]}}i.register("TagsSegmentationProperties").asCtor(wi).dependencies("Consts");function wi(e){var t=this;t.properties={},t.properties[e.DEPLOYABLE_TYPE.Tutorial]={name:"DOCT",enabled:"DOCTEnabled"},t.properties[e.DEPLOYABLE_TYPE.Task]={name:"DisplayCondition",enabled:"DisplayConditionEnabled"},t.properties[e.DEPLOYABLE_TYPE.Launcher]={name:"PlayLauncherConditionTree"},t.properties[e.DEPLOYABLE_TYPE.Shuttle]={name:"DisplayCondition",enabled:"DisplayConditionEnabled"},t.properties[e.DEPLOYABLE_TYPE.Content]={name:"DisplayCondition"},t.properties[e.DEPLOYABLE_TYPE.BusinessSolution]={name:"DisplayRules",enabled:"segmentationEnabled",isNewConditions:!0,dontInjectTagsIntoAutoStartFeature:"SWT_AutoPlayIgnoreTags"},t.properties[e.DEPLOYABLE_TYPE.Course]={name:"DisplayCondition"},t.properties[e.DEPLOYABLE_TYPE.SearchProviderUrl]={name:"DisplayCondition"}}var Ii=function(){function e(e){this.eventSender=e}return e.prototype.map=function(e,t){return{type:this.eventSender.EVENT_APPS.Question,oType:e.getType(),owId:t.surveyJson.Id,owName:t.surveyJson.Name,owType:this.eventSender.EVENT_APPS.Survey,pInit:this.getPInit(t)}},e.prototype.getPInit=function(e){if(e.tutorialId)return this.getTutorialPInit(e);if(e.businessSolutionId)return this.getBusinessSolutionPInit(e)},e.prototype.getTutorialPInit=function(e){return{id:e.tutorialId,appType:"wt"}},e.prototype.getBusinessSolutionPInit=function(e){return{id:e.businessSolutionId,appType:"bizFlow"}},e}();i.register("QuestionToEventMapper").asCtor(Ii).dependencies("EventSender"),i.register("AnalyticsTrackerConsts").asCtor(Pi);function Pi(){var e=this;e.EVENT_NAMESPACE=".wmte",e.LOG_LEVEL_DEFAULT=3,e.FEATURES={analyticsTracking:"analyticsTracking",autoTracking:"autoTracking",pageChangeTracking:"pageChangeTracking"}}i.register("AnalyticsTrackerLogger").asCtor(_i).dependencies("Logger, AnalyticsTrackerConsts, Consts");function _i(e,t,n){var r=this;r.customerLog=i,r.error=o;function i(r){e.customerLog(r,t.LOG_LEVEL_DEFAULT,n.FEATURES_LOGS.AnalyticsTracking);
}function o(t){e.error(t)}}i.register("TrackedElementEventBinder").asCtor(ki).dependencies("AnalyticsTrackerConsts, AnalyticsTrackerLogger, TrackedElementEventDataSender, ElementInteractionEventsBinder, PageVisitGuidProvider, ChangesTrackerFactory");function ki(e,t,n,r,i,o){var a=this;a.bind=s,a.unbind=u;function s(a,s,u){t.customerLog(cg("TrackedElementEventBinder - binding events to element with id {0}",s.Id)),r.bind(a,e.EVENT_NAMESPACE,function(e){i.get(o.get().getCurrentIndex()).then(function(t){n.send(e,t,s,u,a)})})}function u(n,i){t.customerLog(cg("TrackedElementEventBinder - unbinding events from element with id {0}",i.Id)),r.unbind(n,e.EVENT_NAMESPACE)}}i.register("TrackedElementEventDataSender").asCtor(Ai).dependencies("Consts, EventSender, CommonEvents");function Ai(e,t,n){var r=this;r.send=i;function i(r,i,o,a,s){var u={type:e.EVENT_SENDER_EVENT_APPS.TrackedElement,oId:o.Id,oName:o.Name,owType:e.EVENT_SENDER_EVENT_APPS.TrackedPage,pId:(a?a.Id:"0")+"_"+i};a?(u.owId=a.Id,u.owName=a.Name):(u.owId=0,u.owName="Site-Wide");var l={eventName:r,eventData:u,trackedElement:o,trackedPage:a,element:s};n.raiseEvent(e.EVENTS.TrackedElementBeforeSendEvent,l),t.postEvent(r,u)}}i.register("TrackedElementInteractionsToggler").asCtor(Di).dependencies("TrackedElementEventBinder");function Di(e){var t=this;t.toggleBinder=n,t.stopBinder=r;function n(t,n,r,i){i?e.bind(t,n,r):e.unbind(t,n)}function r(t,n){t&&e.unbind(t,n)}}var Oi=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,{lib:t,type:n.DEPLOYABLE_TYPE.TrackedElement}),this.arrayUtils=r,this.trackedElementsVisibilityTrackerFactory=i,this._name="TrackedElement",this.setDeployables([])}return t.prototype.getAllByPageId=function(e){return this.arrayUtils.filter(this.getAll(),function(t){return t.TrackedPageId==e})},t.prototype.start=function(){this._trackedElementsVisibilityTracker=this.trackedElementsVisibilityTrackerFactory.create({}),this._trackedElementsVisibilityTracker.startTrack()},t.prototype.releaseAll=function(){if(!this._trackedElementsVisibilityTracker)return;this._trackedElementsVisibilityTracker.stopTrack()},t}(Ei);i.register("TrackedElementsManager").asCtor(Oi).dependencies("Lib, Consts, ArrayUtils, TrackedElementsVisibilityTrackerFactory");function Ni(t,n,r){var i=this;i.stopTrack=u,i.startTrack=l;var o,a=[];function s(){a=t.getAllByPageId(r.trackedPage&&r.trackedPage.Id),o=n.create(r)}function u(){o.stopTrack()}function l(){e(a).each(function(e,t){o.startTrack(t)})}s()}function xi(e,t,n,r){var i=this;i.evaluateAsync=s,i.cleanResources=l,i.getElement=u;var o,a;function s(i){var s=-1;a=t.getStickyType(r.trackedElement.Settings),a!=e.STICKY_TYPE.ONCE&&(s=2e3);var u={logContext:r.trackedElement.Id,findElementParams:{IdentifySettings:r.trackedElement.IdentifySettings},trackUIChanges:!0,elementEvaluationIntervalMs:s};o=n.create(u),o.setOnVisibilityChanged(function(t){i(t==e.VISIBILITY_STATE.VISIBLE),t==e.VISIBILITY_STATE.VISIBLE&&a!=e.STICKY_TYPE.STRONG&&o.cleanResources()}),o.evaluateElementVisibilityAsynch()}function u(){if(o)return o.getElement()}function l(){o&&o.cleanResources()}}i.register("TrackedPageEventDataSender").asCtor(Li).dependencies("Consts, EventSender");function Li(e,t){var n=this;n.send=r;function r(n,r){var i={type:e.EVENT_SENDER_EVENT_APPS.TrackedPage,oId:r.Id,oName:r.Name,pId:r.Id+"_"+n};t.postEvent(e.EVENT_SENDER_EVENT_TYPES.Play,i)}}var Fi=function(e){__extends(t,e);function t(t,n,r){e.call(this,{lib:t,type:n.DEPLOYABLE_TYPE.TrackedPage}),this.trackedPagesEventsListener=r,this._name="TrackedPage",this.setDeployables([])}return t.prototype.start=function(){this.trackedPagesEventsListener.startListen()},t.prototype.setDeployables=function(t){if(!t)return;e.prototype.setDeployables.call(this,t),this.trackedPagesEventsListener.init(t)},t.prototype.releaseAll=function(){this.trackedPagesEventsListener.stopListen()},t}(Ei);i.register("TrackedPagesManager").asCtor(Fi).dependencies("Lib, Consts, TrackedPagesEventsListener");function Mi(e,t){var n=this;n.evaluate=o;var r;function i(){var n={featureName:"evaluate tracked page segmentation",elementName:t.trackedPage.Name,stopPollingAfterEvaluateTrue:!1};r=e.createNew(n)}function o(){if(!t.trackedPage.ConditionTrees||!t.trackedPage.ConditionTrees.DisplayRules)return!0;var e=t.trackedPage.ConditionTrees.DisplayRules;return r.getCurrentEvaluationValueAndStopEvaluating(e)}i()}function Bi(e,t,n,r,i,o,a,s){var u=this;u.stopListen=p,u.evaluateAndUpdateContainer=g;var l,c,d;function f(){l=o.create(s),c=a.create(s),d=s.trackedPage}function p(){l.stopTrack()}function g(n){var i=c.evaluate();e.customerLog(cg("TrackedPageEventsListener - for page with id {0}, segmentation condition was{1}met",d.Id,i?" ":" not ")),i?(r.get(n).then(h),l.startTrack(),d.IsComplex&&t.add(d)):(l.stopTrack(),d.IsComplex&&t.remove(d))}function h(e){i.isAutoTrackingOn()||n.send(e,d)}f()}i.register("TrackedPagesEventsListener").asCtor(Ri).dependencies("AnalyticsTrackerLogger, ChangesTrackerFactory, TrackedActivatedPagesContainer, TrackedPageEventsListenerFactory");function Ri(t,n,r,i){var o,a=this,s=[];a.init=l,a.startListen=c,a.stopListen=d;var u;function l(e){t.customerLog("TrackedPagesEventsListener - init"),o=e,u=n.get()}function c(){t.customerLog("TrackedPagesEventsListener - startListen"),u.bind(f),e(o).each(function(e,t){var n={trackedPage:t},r=i.create(n);s.push(r)}),f({uiChangeIndex:0})}function d(){t.customerLog("TrackedPagesEventsListener - stopListen"),u.unbind(f);for(var e=0;e<s.length;e++)s[e].stopListen();s=[]}function f(e){for(var t=0;t<s.length;t++)s[t].evaluateAndUpdateContainer(e.uiChangeIndex);r.resolveUIChange(e.uiChangeIndex)}}i.register("PageVisitGuidProvider").asCtor(Ui).dependencies("ChangesTrackerFactory, GuidGenerator, Consts");function Ui(e,n,r){var i,o,a,s=this;s.get=d,s.releaseResources=p;var u;function l(){o=0,u=e.get(),u.bind(c),f(),a=mtjQuery.Deferred(),mtjQuery(t).on(r.EVENTS.NewSession,f)}function c(e){o=e.uiChangeIndex,f(),a&&a.resolve(i),a=mtjQuery.Deferred()}function d(e){return e<o?mtjQuery.Deferred().reject("uiChangeIndex was smaller the the current one"):void 0===e||e==o?mtjQuery.Deferred().resolve(i):a.promise()}function f(){i=n.generateGuid(!0)}function p(){mtjQuery(t).off(r.EVENTS.NewSession,f),u.unbind(c)}l()}i.register("TrackedElementIndicatorService").asCtor(Vi).dependencies("FeaturesManager, AnalyticsTrackerConsts");function Vi(e,t){var n=this;n.isAutoTrackingOn=r;function r(){return e.isFeatureEnabled(t.FEATURES.autoTracking)}}i.register("TrackedActivatedPagesContainer").asCtor(Wi).dependencies("DictionaryUtils");function Wi(e){var t,n,r=this;r.add=s,r.remove=u,r.getAll=l,r.resolveUIChange=a;var i;function o(){i={},t=0,n=mtjQuery.Deferred()}function a(e){t=e,n&&n.resolve(c()),n=mtjQuery.Deferred()}function s(e){i[e.Id]=e}function u(e){delete i[e.Id]}function l(e){return e<t?mtjQuery.Deferred().reject("uiChangeIndex was smaller the the current one"):void 0===e||e==t?mtjQuery.Deferred().resolve(c()):n.promise()}function c(){return e.getDictionaryValues(i)}o()}function Gi(e,t){var n=this;n.startTrack=r,n.stopTrack=i;function r(e){(e.IdentifySettings.IsJquerySelector||1==e.IsViewsOnly)&&t.startTrack(e,o)}function i(){t.stopTrack(a)}function o(t){0==t.trackedElement.IsViewsOnly&&e.toggleBinder(t.element,t.trackedElement,t.trackedPage,t.isVisible)}function a(t,n){0==n.IsViewsOnly&&e.stopBinder(t,n)}}function Hi(e,t){var n=this;n.startTrack=r,n.stopTrack=i;function r(e){t.startTrack(e,o)}function i(){t.stopTrack(e.stopBinder)}function o(t){e.toggleBinder(t.element,t.trackedElement,t.trackedPage,t.isVisible)}}function ji(t,n,r,i,o,a,s){var u=this;u.startTrack=d,u.stopTrack=f;var l;function c(){l={}}function d(e,t){if(l[e.Id])return;n.customerLog(cg("TrackedElementVisibilityTracker - trackVisibility for element with id {0}",e.Id));var r={trackedElement:e},i=a.create(r);l[e.Id]={evaluator:i,trackedElement:e},i.evaluateAsync(function(n){var r={isVisible:n,trackedElement:e,trackedPage:s.trackedPage,visibilityCallback:t};p(r)})}function f(t){n.customerLog(cg("TrackedElementVisibilityTracker - stopTrack")),e.each(l,function(e,n){var r=n.evaluator.getElement();t&&t(r,n.trackedElement),n.evaluator.cleanResources()}),l={}}function p(e){n.customerLog(cg("TrackedElementVisibilityTracker - visibility changed for element with id {0} to {1}",e.trackedElement.Id,e.isVisible));var a=l[e.trackedElement.Id].evaluator.getElement();e.isVisible&&i.get(o.get().getCurrentIndex()).then(function(n){r.send(t.EVENT_SENDER_EVENT_TYPES.Visible,n,e.trackedElement,e.trackedPage,a)}),e.element=a,e.visibilityCallback&&e.visibilityCallback(e)}c()}i.register("ElementVisibilityEvaluatorFactory").asCtor(Yi).dependencies("Logger, Consts, ElementFinder, PositionHelper, TimerManager, UIChangeTracker, ElementIframesAttachedIndicator");function Yi(e,t,n,r,i,o,a){var s=this;s.create=u;function u(s){return new bd(e,t,n,r,i,o,a,s)}}i.register("TrackedElementsVisibilityTrackerFactory").asCtor(zi).dependencies("TrackedElementVisibilityTrackerFactory");function zi(e){var t=this;t.create=n;function n(t){var n=i.get("TrackedElementsManager");return new Ni(n,e,t)}}i.register("TrackedElementVisibilityEvaluatorFactory").asCtor(Qi).dependencies("Consts, UIElementVisibilityAttributes, ElementVisibilityEvaluatorFactory");function Qi(e,t,n){var r=this;r.create=i;function i(r){return new xi(e,t,n,r)}}i.register("TrackedElementVisibilityTrackerFactory").asCtor(qi).dependencies("TrackedElementIndicatorService, Consts, AnalyticsTrackerLogger, TrackedElementEventDataSender, PageVisitGuidProvider, ChangesTrackerFactory, TrackedElementInteractionsToggler, TrackedElementVisibilityEvaluatorFactory");function qi(e,t,n,r,i,o,a,s){var u,l=this;l.create=d;function c(){u=e.isAutoTrackingOn()}function d(e){var l=new ji(t,n,r,i,o,s,e);return u?new Gi(a,l):new Hi(a,l)}c()}i.register("TrackedPageEventsListenerFactory").asCtor(Ki).dependencies("AnalyticsTrackerLogger, TrackedActivatedPagesContainer, TrackedPageEventDataSender, PageVisitGuidProvider, TrackedElementIndicatorService, TrackedElementsVisibilityTrackerFactory, TrackedPageSegmentConditionCheckerFactory");function Ki(e,t,n,r,i,o,a){var s=this;s.create=u;function u(s){return new Bi(e,t,n,r,i,o,a,s)}}i.register("TrackedPageSegmentConditionCheckerFactory").asCtor(Xi).dependencies("ConditionCheckerFactory");function Xi(e){var t=this;t.create=n;function n(t){return new Mi(e,t)}}i.register("ChangesTrackerFactory").asCtor(Ji).dependencies("FeaturesManager, AnalyticsTrackerConsts, UIChangeTracker, PageChangeTracker");function Ji(e,t,n,r){var i=this;i.get=s;var o;function a(){o=e.isFeatureEnabled(t.FEATURES.pageChangeTracking)?r:n}function s(){return o}a()}function $i(e,t,n){var r,o=i.create("WalkmeOOP",this),a=o.Prop.Public("contentMargin",15);o.Override("manipulationsForInlineCss",function(e){if(t.isIE(8,"lte"))return;r.balloonSettings()}),o.Override("createTemplateData",function(){var n=r.createTemplateData();return n.outerDiv=r.getCustomDivHtml("inner-div"),n.colors.xBtn=r.balloonSettings().XButtonColor,n.top={minHeight:30,textAlign:n.direction.side,content:{sideMargin:a(),oppositeSideMargin:a()-2}},n.shadow=e.calculate(r.balloonSettings().ShadowType,r.balloonSettings().ShadowLevel,r.balloonSettings().ShadowColor),n.isNotIe7=!t.isIEBrowser(7),n}),o.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-tooltip-outer-div walkme-tooltip-v1' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-tooltip-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; -webkit-box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); -moz-box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); font-family: walkme-opensans; border-radius:3px; overflow: hidden;'><div class='walkme-tooltip-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.border",e,t,0))),r.b("; border-radius: 3px; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-tooltip-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius: 3px;'><div class='walkme-tooltip-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'>"),r.s(r.d("data.content",e,t,1),e,t,0,1006,1264,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-tooltip-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b("; padding: 9px 9px 8px 9px; line-height: 18px; font-size:12px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b("; overflow: auto;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div></div></div></div>"),r.fl()};return e});function s(){o.ExtendsInstance(i.create("BaseBalloon",n)),r=o._base}s.apply(null,arguments)}i.register("TooltipV1").asCtor($i).asProto().dependencies("ShadowCalculator, HostData"),i.register("TooltipDrawerV1").asCtor(Zi).asProto().dependencies("CommonUtils, ResourceManager, UiUtils, Consts, BalloonPositionProvider, PlatformsService, FeaturesManager");function Zi(t,n,r,o,a,s,u,l){var c,d=i.create("WalkmeOOP",this),f=[];d.Override("addBalloonDiv",function(n,i){var o=t.createElementInDocument(n,i[0].ownerDocument);return u.isFeatureEnabled("accessibility")&&(focusableElements=o.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),t.addTabIndex(focusableElements),focusableElements.on("focus",function(){e(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){e(this).css({outline:"none","outline-offset":"0px"})})),r.setLangAttribute(o),o.css("display","none"),o}),d.Override("decideWhereToPop",function(e,t,n,r,i,o){if(void 0!=l.tooltipPosition)return a.getPredefinedPosition(e,t,r,i,l.tooltipPosition,l.tooltipPositionOffset);return a.findBestPosition(e,t,r,i,l.directionToAvoid)}),d.Override("loadResources",function(e,t){var r=c.balloonSettings().FontsData;r?n.fonts(r,e,t,t):t&&t()}),d.Override("getArrowsColors",function(e){var t=c.balloonSettings(),n=t.Color,r=t.BorderColor;return{innerArrow:n,outterArrow:r}}),d.Override("fixArrows",function(e){var t=e.balloonDiv,n=e.arrowsDivs,r=e.result,i=e.isInCaptureMode,a=e.isQuirksMode,s=c.balloonSettings().direction,u=r.positionType==o.POSITION_TYPE.Left||r.positionType==o.POSITION_TYPE.Right;u?v(t,n,r,s,a):i&&r.positionType==o.POSITION_TYPE.Top&&y(n),e.isQuirksMode&&S(t)}),d.Override("fixQuirksMode",function(e){}),d.Override("finalizeArrowsPosition",function(e,t,n){switch(e){case o.POSITION_TYPE.Top:t.top--;break;case o.POSITION_TYPE.Bottom:t.top++;break;case o.POSITION_TYPE.Left:t.left--;break;case o.POSITION_TYPE.Right:t.left++}}),d.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-tooltip-content",t);n.css("width",e+"px"),t.css("width","auto");var r={width:t.width(),height:t.height()};return r});d.Override("generateIdForBalloon",p);function p(e){return"walkme-tooltip-"+l.itemId}d.Override("generateClassesForBallon",g);function g(e,t,n){return f}d.Override("generateClassesForArrows",h);function h(e,t,n){return["walkme-custom-tooltip-arrow","walkme-custom-tooltip-arrow-"+t,"walkme-custom-tooltip-arrow-"+e,"walkme-custom-tooltip-arrow-"+e+"-"+t,"walkme-custom-tooltip-item-"+l.itemId]}function m(){d.ExtendsInstance(i.create("BaseBalloonDrawer",l));var e=l.balloonSettings.minPopupWidth?l.balloonSettings.minPopupWidth:300;f=l.cssClasses||[],c=d._base,E(),c.balloonClass("TooltipV1"),c.minWidth(0),c.minPopupWidth(e),c.arrowHeight(5),c.arrowBaseWidth(9),c.hasBorder(!1),c.shouldScrollToElement(!1),c.balloonTitleSelector(".walkme-tooltip-content"),c.balloonContentSelector(".walkme-tooltip-content")}function v(e,t,n,r,i){e.show();var o=c.arrowBaseWidth(),a=parseFloat(t[0].css("top")),s=parseFloat(e.css("top")),u=e[0]?e[0].offsetHeight:0,l=a-s,d=u;if(e.hide(),d-l<o&&d>l){var f=s-(d-l);e.css("top",f+"px")}}function y(e){e[0].css("border-top-color",c.balloonSettings().Color)}function E(){s.getCurrentPlatform()==o.PLATFORM.MobileWeb&&c.defaultMaxWidth(230)}function S(t){var n,r=e(".walkme-tooltip-arrow-inner",t.parent()),i=e(".walkme-tooltip-arrow-outer",t.parent());if(r.hasClass("walkme-tooltip-arrow-right"))n="right";else{if(!r.hasClass("walkme-tooltip-arrow-left"))return;n="left"}r.css("border-"+n+"-color",c.balloonSettings().Color),i.css("border-"+n+"-color",c.balloonSettings().BorderColor)}m.apply(null,arguments)}i.register("Tooltip").asCtor(eo).asProto().dependencies("TooltipBalloonAdapter");function eo(t,n){var r=this;r.show=a,r.destroy=s;var i;function o(){i=t.createBalloon(n)}function a(){var t=e.Deferred();return i.Show(!1,function(e,n){t.resolve(n)}),t.promise()}function s(){var t=e.Deferred();return i.destroy(!1,function(){t.resolve()}),t.promise()}o.apply(null,arguments)}i.register("TooltipBalloonAdapter").asCtor(to).dependencies("Consts, PositionHelper, Logger, BalloonButtonsEventsBinder, SiteConfigManager");function to(t,n,r,o,a){var s=this;s.createBalloon=u;function u(s){var u=a.get(),c=l(u,s.styling),d=e.extend(!0,{},s.drawingOptions);d.balloonSettings=c;var f={element:s.element,forceEmbedBalloonInIframe:!1,positionHelper:n,stepSettings:d.stepSettings||{},text:{title:"",content:s.text,subText:""},data:{type:t.STEP_TYPE.Normal},configuration:c,logger:r,drawer:i.create("TooltipDrawerV1",d),siteConfig:u,bindButtonsFunc:o.addButtonEventsToBalloon},p=i.create("Balloon",f);return p}function l(e,t){var n=lg(e.BalloonSettings);return c(n,t),n.Vibrate=!1,d(n),n}function c(e,t){e.Color=t.backColor,e.BorderColor=t.borderColor,e.ContentColor=t.textColor,e.BalloonBorderWidth=1}function d(e){e.Animation&&(e.Animation={Id:t.ANIMATION_TYPES.None,InitCSS:{display:"block"},MetaData:{},Options:{},Properties:{}})}}i.register("TooltipCreator").asCtor(no).dependencies();function no(){var e=this;e.create=n;function t(){}function n(e,t,n,r){var o={element:e,text:t,styling:n,drawingOptions:r};return i.create("Tooltip",o)}t.apply(null,arguments)}i.register("TooltipActions").asCtor(ro);function ro(){var e=this;e.actions={element:{mouseover:"mouseover.element",mouseout:"mouseout.element",focus:"focus.element",blur:"blur.element",click:"click.element"},tooltip:{show:"show.tooltip",hide:"hide.tooltip"},document:{click:"click.document",touchstart:"touchstart.document"}}}i.register("TooltipController").asCtor(io).asProto().dependencies("Consts, wmjQuerySafe, EventBinder, StatesMachineCreator, TooltipStatesMachineConfigProvider, TooltipEventsConfiguration, TooltipActions");function io(t,n,r,i,o,a,s,u){var l=this;l.clean=S,l.setEvents=b,l.show=T,l.hide=C;var c,d,f,p,g,h,m=1e7,v=Math.floor(Math.random()*m),y=".Walkme.Tooltip."+v;function E(){d=u.tooltipDrawer,f=u.boundElement;var e=o.getConfig(A),t=a.get(u.events);p=t.eventsForElement,g=t.eventsForDocument,h=t.eventsForTooltip,c=i.create(e);for(var n=0;n<e.stateMachineInitialActions.length;n++){var r=e.stateMachineInitialActions[n];r.shouldSimulateAction(f)&&c.evaluate(r.action)}}function S(){var e=n(f);return P(e,p),P(e.getDocument(),g),c.reset(),d.destroy()}function T(){c.evaluate(s.actions.tooltip.show)}function C(){c.evaluate(s.actions.tooltip.hide)}function b(){I(f,p,_),I(e(f[0].ownerDocument),g,k)}function w(){d.draw(f).then(function(e){e&&I(e,h,_)})}function I(e,t,n){if(!t)return;for(var i=t.length-1;i>=0;i--){var o=t[i];r.bind(e,o+y,n(o))}}function P(e,t){if(!t)return;for(var n=t.length-1;n>=0;n--){var i=t[n];r.unbind(e,i+y)}}function _(e){return function(){c.evaluate(e)}}function k(t){return function(n){n.target==f[0]||e.contains(f[0],n.target)||c.evaluate(t)}}function A(e,t){if(!t)return;t.shouldShow?w():t.shouldHide&&d.destroy()}E()}i.register("TooltipControllerCreator").asCtor(oo);function oo(){var e=this;e.create=n;function t(){}function n(e,t,n){return i.create("TooltipController",{tooltipDrawer:e,boundElement:t,events:n})}t.apply(null,arguments)}i.register("TooltipVisibilityEventsProvider").asCtor(ao).dependencies("Consts, HtmlElementsDataProvider");function ao(e,t){var n=this;n.getEventsByElement=i;function r(){}function i(n){var r={};return r[e.TOOLTIPS_ACTIVATION_MODES.Mouse]=!0,t.isInput(n)&&(r[e.TOOLTIPS_ACTIVATION_MODES.Focus]=!0),r}r.apply(null,arguments)}i.register("TooltipStatesMachineConfigProvider").asCtor(so).dependencies("TooltipActions, HtmlElementsDataProvider, HostData");function so(t,n,r){var i=this;i.getConfig=m;var o={mouseInside:1,focused:2},a={hidden:"hidden",delayShow:"delayShow",visible:"visible",delayHide:"delayHide"},s={};s[t.actions.element.mouseover]={addFlag:[o.mouseInside]},s[t.actions.element.mouseout]={removeFlag:[o.mouseInside]},s[t.actions.element.focus]={addFlag:[o.focused]},s[t.actions.element.blur]={removeFlag:[o.focused]};var u,l=[{fromState:a.delayShow,toState:a.visible,valueToReturn:{shouldShow:1}},{fromState:a.delayHide,toState:a.hidden,valueToReturn:{shouldHide:1}},{fromState:a.visible,toState:a.hidden,valueToReturn:{shouldHide:1}},{fromState:a.hidden,toState:a.visible,valueToReturn:{shouldShow:1}}],c=[{fromState:a.delayShow,timeout:300,toState:a.visible},{fromState:a.delayHide,timeout:300,toState:a.hidden}],d=[{fromState:a.hidden,onAction:t.actions.tooltip.show,toState:a.delayShow},{fromState:a.delayHide,onAction:t.actions.tooltip.show,toState:a.visible},{fromState:a.visible,onAction:t.actions.tooltip.hide,toState:a.hidden,ifNotFlagged:[o.focused,o.mouseInside]},{fromState:a.delayShow,onAction:t.actions.tooltip.hide,toState:a.hidden}],f=[{fromState:a.hidden,onAction:t.actions.element.mouseover,toState:a.delayShow},{fromState:a.delayShow,onAction:t.actions.element.mouseout,toState:a.hidden},{fromState:a.visible,onAction:t.actions.element.mouseout,toState:a.delayHide,ifNotFlagged:[o.focused]},{fromState:a.delayHide,onAction:t.actions.element.mouseover,toState:a.visible},{fromState:a.hidden,onAction:t.actions.element.click,toState:a.visible},{fromState:a.visible,onAction:t.actions.element.click,toState:a.hidden},{fromState:a.visible,onAction:t.actions.document.click,toState:a.hidden,ifNotFlagged:[o.focused]},{fromState:a.visible,onAction:t.actions.document.touchstart,toState:a.hidden,ifNotFlagged:[o.focused]}],p=[{fromState:a.hidden,onAction:t.actions.element.focus,toState:a.visible},{fromState:a.visible,onAction:t.actions.element.blur,toState:a.hidden,ifNotFlagged:[o.mouseInside]},{fromState:a.delayShow,onAction:t.actions.element.focus,toState:a.visible},{fromState:a.delayHide,onAction:t.actions.element.focus,toState:a.visible}];function g(){h()}function h(){u=[{shouldSimulateAction:function(t){return n.isInput(t)&&e(t).is(":focus")},action:t.actions.element.focus}],r.isIEOlderThan(9)||u.push({shouldSimulateAction:function(t){return e(t).is(":hover")},action:t.actions.element.mouseover})}function m(e){var t=d;return t=t.concat(f),t=t.concat(p),{initState:a.hidden,transitions:t,timedOutTransitions:c,globalActionFlags:s,defaultTransitionValuesToReturn:l,onStateChangedCallback:e,stateMachineInitialActions:u}}g()}L.register(O.PLATFORM.Web,function(){i.register("TooltipEventsConfiguration").asCtor(uo).dependencies("Consts, TooltipActions")});function uo(e,t){var n=this;n.get=r;function r(n){var r=[],i=[],o=[],a=[t.actions.element.mouseover,t.actions.element.mouseout],s=[t.actions.element.focus,t.actions.element.blur];return n[e.TOOLTIPS_ACTIVATION_MODES.Mouse]&&(r=r.concat(a),o=o.concat(a)),n[e.TOOLTIPS_ACTIVATION_MODES.Focus]&&(r=r.concat(s)),{eventsForElement:r,eventsForDocument:i,eventsForTooltip:o}}}L.register(O.PLATFORM.MobileWeb,function(){i.register("TooltipEventsConfiguration").asCtor(lo).dependencies("Consts, TooltipActions")});function lo(e,t){var n=this;n.get=r;function r(n){var r=[],i=[],o=[];return n[e.TOOLTIPS_ACTIVATION_MODES.Mouse]&&(r=r.concat([t.actions.element.click]),o=o.concat([t.actions.element.click]),i=i.concat([t.actions.document.click,t.actions.document.touchstart])),{eventsForElement:r,eventsForDocument:i,eventsForTooltip:o}}}i.register("DisabledCourseQuizzesRemover").asCtor(co);function co(){var e=this;e.remove=t;function t(e){for(var t=0;t<e.length;t++){var n=e[t].Quiz;n&&!n.IsEnabled&&delete e[t].Quiz}}}i.register("QuizStatusManager").asCtor(fo).dependencies("ServerStorageManager");function fo(e){var t=this;t.setQuizStatus=r,t.getQuizStatus=i;var n=e.keysConfig.teachMe.quizResult;function r(t,r){e.saveData(o(t),r,n.expiry)}function i(t){return e.getData(o(t),null)}function o(e){return n.key+"-"+e.Id}}i.register("QuizPlayer").asCtor(po).dependencies("UIComponentsFactory, QuizStatusManager, Consts, CommonEvents");function po(t,n,r,o){var a=this;a.releaseAll=l,a.playQuiz=c;var s,u;function l(e){u&&u.destroy(),u=null,e&&e()}function c(e){return s=i.create("QuizPlayEventRaiser",{quiz:e}),s.raiseQuizPlayEvent(),d(e).pipe(f).pipe(p).pipe(g).always(function(){o.raiseEvent(r.EVENTS.UIComponentDestroyed),u=null})}function d(e){var n=e.WelcomePage,r=t.get(n.UiComponentId,[n,e]);return s.registerXButtonClickedEvent(r),h(r,"start-quiz").pipe(function(){return e})}function f(r){var i=t.get(r.UiComponentId,r);return s.registerXButtonClickedEvent(i),h(i,"quiz-submitted").then(function(e,t,n){for(var r=0;r<n.questionsResults.length;r++){var i=n.questionsResults[r];s.raiseQuizAnswerSubmittedEvent(i)}s.raiseQuizSubmittedEvent()}).pipe(function(t,r,i){var o=1==i.didPassQuiz,a=o?r.SuccessSummeryPage:r.FailSummeryPage;return s.raiseQuizCompletionEvent(o,i.score),n.setQuizStatus(r,i.didPassQuiz),e.Deferred().resolve(r,a,i)})}function p(e,n,r){var i=t.get(n.UiComponentId,[n,e,r]);return s.registerXButtonClickedEvent(i),h(i,"open-quiz-results").pipe(function(){return r})}function g(e){var t=i.create("QuizResultsDisplayer",{quizResults:e});return u=t,t.show()}function h(t,n){var r=e.Deferred();return u=t,t.once("append-end",function(){t.show(),r.notify("shown")}),t.once(n,function(){r.resolve.apply(null,arguments)}),"destroy-end"!=n&&t.once("destroy-end",function(){r.reject()}),t.append(),r.promise()}}i.register("QuizPlayEventRaiser").asCtor(go).asProto().dependencies("Consts, CommonEvents, PlayGuidGenerator");function go(t,n,r,i){var o=this;o.raiseQuizPlayEvent=l,o.raiseQuizSubmittedEvent=c,o.raiseQuizAnswerSubmittedEvent=d,o.raiseQuizCompletionEvent=f,o.registerXButtonClickedEvent=p;var a,s;function u(){a=i.quiz,s=r.generateNewPlayGuid(a.Id)}function l(){n.raiseEvent(t.EVENTS.Quizzes.QuizPlay,{currentPlayGuid:s,quiz:a})}function c(){n.raiseEvent(t.EVENTS.Quizzes.QuizSubmitted,{currentPlayGuid:s,quiz:a})}function d(r){for(var i={currentPlayGuid:s,quiz:a,questionId:r.questionId,question:r.question},o=0;o<r.userAnswersIds.length;o++)n.raiseEvent(t.EVENTS.Quizzes.QuizAnswerSubmitted,e.extend({},i,{answerId:r.userAnswersIds[o],answer:r.userAnswers||r.correctAnswers}))}function f(e,r){var i=e?t.EVENTS.Quizzes.QuizPass:t.EVENTS.Quizzes.QuizFail;n.raiseEvent(i,{currentPlayGuid:s,quiz:a,score:r})}function p(e){e.once("x-clicked",function(){n.raiseEvent(t.EVENTS.Quizzes.QuizXButtonClicked)})}u()}i.register("ContainerAppender").asCtor(ho);function ho(){var t=this;t.appendToContainer=n;function n(t,n){return e(n).appendTo(t)}}function mo(e,t,n,r,o,a){var s,u,l=i.create("WalkmeOOP",this),c=l.Prop.Protected("lib"),d=l.Prop.Protected("title"),f=l.Prop.Protected("content"),p=l.Prop.Protected("customHtml"),g=l.Prop.Protected("stepIndexText"),h=l.Prop.Protected("balloonSettings"),m=l.Prop.Protected("direction"),v=l.Prop.Protected("userGuid"),y=(l.Prop.Protected("contentDiv"),l.Prop.Protected("fixedWidth"),l.Prop.Protected("fixedHeight"),l.Prop.Protected("stepType")),E=l.Prop.Protected("buttons"),S=(l.Virtual.Public("generateHtml",function(){var e=S(),t=T(),n=r.to_html(e,t);return n}),l.Virtual.Protected("createHtmlTemplate")),T=l.Virtual.Protected("createTemplateData",function(){D("BalloonCloseTooltip");var e=o.shouldDisplayX(s),r={data:{title:d(),content:f(),customHtml:p(),stepIndexText:g(),balloonCloseTooltip:t.get().BalloonCloseTooltip},font:h().Font,cssReset:n.CssResetRules,displayX:e,colors:{mainBg:h().Color,minorBg:h().BalloonColor2,border:h().BorderColor,header:h().HeaderColor,content:h().ContentColor,footerText:h().FooterTextColor,buttonBg:h().ButtonBgColor,buttonBg2:h().ButtonBgColor2,buttonBorder:h().ButtonBorderColor,buttonText:h().ButtonTextColor},radiuses:{balloon:h().BalloonRadius+"px",button:h().BalloonButtonRadius+"px"},direction:{basic:m(),side:"rtl"==m()?"right":"left",oppositeSide:"rtl"==m()?"left":"right"},poweredBy:{showText:"txt"==h().showPoweredByFormat,link:h().showPoweredBy?"http://www.walkme.com/?u="+v():""},buttons:E().buttonsArr,border:{size:h().BalloonBorderWidth+"px"}};return r}),C=(l.Virtual.Public("manipulationsForInlineCss",function(){}),l.Protected("getCustomDivHtml",function(e){return"<div class='walkme-custom-balloon-custom-div-"+e+"' style='display:none;' ></div>"}),l.Virtual.Protected("generateNormalButtonClasses",function(e,t){return k(t,e)}));l.Public("initButtons",function(e){var t={back:e.backButton,next:e.nextButton,done:e.doneButton,submit:e.submitButton},n=b(),r=I(t,n);E(r)});function b(){var t=e.getSettingsValue(s,"customButtons",[]);if(0==t.length){var n=y()==O.STEP_TYPE.Popup,r=n?e.getSettingsValue(s,"popupStepButtons",[]):[];t=r}return t}function w(){c(a.lib),d(a.balloonData.title),f(a.balloonData.content),p(a.balloonData.customHtml),g(a.balloonData.stepIndexText),h(a.balloonSettings),m(a.balloonSettings.direction),v(a.userGuid),y(a.stepType),s=a.settings,u=a.end}function I(e,t){var n={};if(n.nextButton=n.doneButton=n.backButton=n.submitButton=!1,n.buttonsArr=[],0==t.length)y()!=O.STEP_TYPE.Popup&&(n=P(e.back,e.next,e.done,e.submit));else for(var r=0;r<t.length;r++){var i=t[r];if(0==i.action){var o=P(!1,e.next,e.done,!1);n.nextButton=o.nextButton,n.doneButton=o.doneButton,o.buttonsArr.length>0&&n.buttonsArr.push(o.buttonsArr[0])}else if(2==i.action){var a=P(e.back,!1,!1,!1);n.backButton=a.backButton,a.buttonsArr.length>0&&n.buttonsArr.push(a.buttonsArr[0])}else n.buttonsArr.push(_(i))}return n}function P(e,n,r,i){var o={},a=t.get();return o.backButton=o.nextButton=o.doneButton=o.submitButton=!1,o.buttonsArr=[],e&&(o.backButton={order:2,weak:!0,classes:C("back","weak"),buttonText:a.BackButtonText},o.buttonsArr.push(o.backButton)),n&&(o.nextButton={order:3,normal:!0,classes:C("next","normal"),buttonText:a.NextButtonText},A()&&(o.nextButton.buttonText=a.DoneButtonText),o.buttonsArr.push(o.nextButton)),r&&(o.doneButton={order:3,normal:!0,classes:C("done","normal"),buttonText:a.DoneButtonText},o.buttonsArr.push(o.doneButton)),i&&(o.submitButton={order:4,normal:!0,classes:C("submit","normal"),buttonText:a.SubmitButtonText},o.buttonsArr.push(o.submitButton)),o}function _(e){var n=t.get(),r=e.action||-1;switch(parseInt(r)){case 1:return{order:4,normal:!0,classes:k("normal","start"),buttonText:n.WelcomeStepButtonStartText};case 3:return{order:1,weak:!0,classes:k("weak","cancel"),buttonText:n.WelcomeStepButtonCancelText};case 4:return{order:4,normal:!0,classes:C("submit","normal"),buttonText:n.SubmitButtonText};case 5:return{order:4,normal:!0,classes:k("normal","redirect"),buttonText:e.name};case 6:return{order:2,weak:!0,classes:k("weak","stay"),buttonText:e.name};case 7:return{order:4,normal:!0,classes:k("normal","ok"),buttonText:e.name}}var i=e.name||"",o=e.type,a=e.weak?"weak":"normal";return{order:2,weak:e.weak,normal:!e.weak,classes:k(a,o),buttonText:i}}function k(e,t){var n="walkme-custom-balloon-button walkme-custom-balloon-"+e+"-button";
return t&&(n+=" walkme-custom-balloon-"+t+"-button walkme-action-"+t),n}function A(){var t=e.getSettingsValue(s,"isNextToDone","0");return"1"==t}function D(e){if(t.get()[e]){var n=t.get()[e];n=n.replace(/&quot;/gi,'"'),n=n.replace(/&#39;/gi,"'"),n=n.replace(/&amp;/gi,"&"),t.get()[e]=n}}w.apply(null,arguments)}i.register("BaseBalloon").asCtor(mo).asProto().dependencies("CommonUtils, SiteConfigManager, BalloonTemplatesProvider, Mustache, XButtonDisplayChecker");function vo(t){this.LocalSVNRevision="$Rev$";var n=this;function r(){}n.finalizeArrowsPosition=function(e,n){switch(e){case t.POSITION_TYPE.Top:n.top--;break;case t.POSITION_TYPE.Bottom:n.top++;break;case t.POSITION_TYPE.Left:n.left--;break;case t.POSITION_TYPE.Right:n.left++}},n.fixArrows=function(e){var n=e.balloonDiv,r=e.arrowsDivs,s=e.result,u=e.isInCaptureMode,l=e.isQuirksMode,c=e.balloonSettings,d=e.arrowBaseWidth,f=e.balloonSettings.Color,p=e.outerArrowColor,g=c.direction,h=s.positionType==t.POSITION_TYPE.Left||s.positionType==t.POSITION_TYPE.Right;h?i(c,n,r,s,g,d,l):u&&s.positionType==t.POSITION_TYPE.Top&&a(c,r),l&&o(n,p,f)};function i(t,n,r,i,o,a,u){n.show();var l=e(".walkme-custom-balloon-bottom-div",n),c=l[0]?l[0].offsetHeight:0,d=a,f=parseFloat(r[0].css("top")),p=parseFloat(n.css("top")),g=n[0]?n[0].offsetHeight:0,h=f-p,m=g-c;if(n.hide(),m-h<d&&m>h){var v=p-(m-h+1);n.css("top",v+"px"),s(t,r,o,i.positionType,u)}else m<=h&&s(t,r,o,i.positionType,u)}function o(t,n,r){var i,o=e(".walkme-custom-balloon-arrow-inner",t.parent()),a=e(".walkme-custom-balloon-arrow-outer",t.parent());if(o.hasClass("walkme-custom-balloon-arrow-right"))i="right";else{if(!o.hasClass("walkme-custom-balloon-arrow-left"))return;i="left"}o.css("border-"+i+"-color",r),a.css("border-"+i+"-color",n)}function a(e,t){t[0].css("border-top-color",e.Color)}function s(e,n,r,i,o){var a=i==t.POSITION_TYPE.Left&&"ltr"==r||i==t.POSITION_TYPE.Right&&"rtl"==r;if(a||o){var s=i==t.POSITION_TYPE.Left?"left":"right";n[0].css("border-"+s+"-color",e.BalloonColor2)}for(var u=0;u<n.length;u++)n[u].addClass("walkme-custom-balloon-arrow-footer")}r.apply(null,arguments)}i.register("ArrowsHelper").asCtor(vo).asProto().dependencies("Consts"),i.register("BalloonV2").asCtor(yo).asProto().dependencies("CommonUtils, BalloonUtils, CdnServer, Consts");function yo(e,t,n,r,o){var a,s,u=i.create("WalkmeOOP",this);u.Override("generateHtml",function(){return a.customHtml()&&a.customHtml().inner||a.generateHtml()}),u.Override("generateNormalButtonClasses",function(e,t){return a.generateNormalButtonClasses(e,t)+" mt-custom-balloon-"+e+"-button CUSTOM-STEP-ID"}),u.Override("createTemplateData",function(){var r=a.createTemplateData(),i=n.get();r.outerDiv=a.getCustomDivHtml("outer-div"),r.title=a.getCustomDivHtml("title"),r.content=a.getCustomDivHtml("content"),r.poweredBy.showImage="img"==a.balloonSettings().showPoweredByFormat,r.buttonShadowWidth=a.balloonSettings().ButtonShadowWidth,r.serverName=i;var o="rtl"==a.direction()?"right":"left";r.data.stepIndexText=c(a.stepIndexText(),a.direction(),o),r.ie7LayoutFix="overflow: auto;zoom: 1;",r.buttonsExist=a.buttons().buttonsArr.length>0,r.showBottomDiv=!("no"==a.balloonSettings().showPoweredByFormat&&0==a.stepIndexText().length),t.fixGradientColorsInConfiguration(s,"ButtonBgColor"),t.fixGradientColorsInConfiguration(s,"ButtonBgColor2");var u=s.ButtonBgColor,l=s.ButtonBgColor2;return u==l?r.BackgroundCSS=" background-color: "+u+"; ":(r.BackgroundCSS="background:-moz-linear-gradient(top, "+u+" , "+l+" ); background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+u+"), color-stop(100%,"+l+")); background:-webkit-linear-gradient(top, "+u+" 0%,"+l+" 100%); background:-o-linear-gradient(top, "+u+" 0%,"+l+" 100%); background:-ms-linear-gradient(top, "+u+" 0%,"+l+" 100%); background:linear-gradient(to bottom, "+u+" 0%,"+l+' 100%); filter:progid:DXImageTransform.Microsoft.gradient( startColorstr="'+u+'", endColorstr="'+l+'",GradientType=0 ); ',t.isGradientWithBorderRadiusCompatible()||(r.radiuses.button="0"),e.isGradientUsingFilter(r.BackgroundCSS)&&(r.BackgroundCSS+="background: url("+i+"/player/resources/images/spacer.gif) repeat;")),r}),u.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div mt-custom-balloon-top-div CUSTOM-STEP-ID' style='text-align: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";padding-top:5px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 3px; padding-bottom: 1px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 7px;margin:3px 3px 0 3px;direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='min-height: "),r.s(r.f("buttonsExist",e,t,1),e,t,0,388,390,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("30")}),e.pop()),r.s(r.f("buttonsExist",e,t,1),e,t,1,0,0,"")||r.b("0"),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,460,818,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-close-button walkme-action-close mt-custom-balloon-close-button CUSTOM-STEP-ID walkme-action-close' style='opacity:0.7; font-size: 16px; position: absolute; top: 2px; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 8px; cursor: pointer;color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";font-weight:normal;font-family:;' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title mt-custom-balloon-title CUSTOM-STEP-ID' style='text-align: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";font-weight:bold;margin-top:2px;margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(":14px;font-size:15px;color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";font-family:"),r.b(r.t(r.f("font",e,t,0))),r.b(";'>"),r.b(r.t(r.f("title",e,t,0))),r.b(r.t(r.d("data.title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,1134,1429,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content mt-custom-balloon-content CUSTOM-STEP-ID' style='text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b(";margin-top: 4px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 6px; font-family:"),n.b(n.v(n.f("font",e,t,0))),n.b(";font-size:14px;color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";"),n.b(n.v(n.f("ie7LayoutFix",e,t,0))),n.b("'>"),n.b(n.t(n.f("content",e,t,0))),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div><div class='walkme-custom-balloon-top-div-bottom mt-custom-balloon-top-div-bottom CUSTOM-STEP-ID' style='clear: both;'>"),r.s(r.f("buttonsExist",e,t,1),e,t,1,0,0,"")||r.b("<div class='walkme-custom-balloon-no-buttons-div' style='height: 10px'></div>"),r.s(r.f("buttonsExist",e,t,1),e,t,0,1699,2702,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-buttons-div mt-custom-balloon-buttons-div CUSTOM-STEP-ID' style='clear:both;padding:5px;text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(";direction:"),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("'>"),n.s(n.f("buttons",e,t,1),e,t,0,1902,2684,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b("' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(";-moz-border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; -webkit-border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.b(n.v(n.f("BackgroundCSS",e,t,0))),n.b("-moz-box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); -webkit-box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); border: 1px solid "),n.b(n.v(n.d("colors.buttonBorder",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal; font-family: Arial; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static; overflow: visible;' "),n.b(n.v(n.f("wtIdAttribute",e,t,0))),n.b(">"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</button>")}),e.pop()),n.b("</div>")}),e.pop()),r.b("</div></div>"),r.s(r.f("showBottomDiv",e,t,1),e,t,0,2749,4329,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-separator' style='display: block; margin: 0 10px; height: 1px; opacity: 0.2; filter: alpha(opacity=20); background-color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; line-height: 0px;'>&#160;</div><div class='walkme-custom-balloon-bottom-div' style='position: relative; height: 23px; display: block;'><div class='walkme-custom-balloon-subtext mt-custom-balloon-subtext CUSTOM-STEP-ID' style='text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 10px; display:inline-block;font-family: "),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;margin-top:3px;margin-bottom:0px;color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("'>"),n.b(n.t(n.d("data.stepIndexText",e,t,0))),n.b("</div><div class='walkme-custom-balloon-powered-by-div mt-custom-balloon-powered-by-div CUSTOM-STEP-ID' style='display:inline-block;position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 10px; top: 3px;text-decoration:none;font-family:"),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;opacity: 0.9; width:100px; color:"),n.b(n.v(n.d("color.content",e,t,0))),n.b(";text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(" '>"),n.s(n.d("poweredBy.link",e,t,1),e,t,0,3744,3993,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<a class='walkme-custom-balloon-powered-by-link mt-custom-balloon-powered-by-link CUSTOM-STEP-ID' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank' style='text-decoration:none;font-family:"),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;opacity: 0.9; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("'>")}),e.pop()),n.s(n.d("poweredBy.showText",e,t,1),e,t,0,4035,4048,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("By WalkMe.com")}),e.pop()),n.s(n.d("poweredBy.showImage",e,t,1),e,t,0,4095,4251,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div title='WalkMe.com' style='border: none; background-image: url("),n.b(n.v(n.f("serverName",e,t,0))),n.b("/player/resources/images/by-walkme.png); width: 49px; height: 18px;'></div>")}),e.pop()),n.s(n.d("poweredBy.link",e,t,1),e,t,0,4294,4298,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("</a>")}),e.pop()),n.b("</div></div>")}),e.pop()),r.fl()};return e});function l(){u.ExtendsInstance(i.create("BaseBalloon",o)),a=u._base,s=o.balloonSettings}function c(e,t,n){return t="direction:"+t+";",d(e,t,n)}function d(e,t,n){if(e.indexOf(r.SUBTEXT_CURRENT_START)>-1&&e.indexOf(r.SUBTEXT_CURRENT_END)>-1&&e.indexOf(r.SUBTEXT_TOTAL_START)>-1&&e.indexOf(r.SUBTEXT_TOTAL_END)>-1){n="float:"+n+";";var i="<span style='"+n+"'>&nbsp;</span>";e="<div class='walkme-custom-balloon-current-step-text' style='"+t+n+"'>"+e,e=e.replace(r.SUBTEXT_CURRENT_START,"</div>"+i+"<div class='walkme-custom-balloon-current-step-number' style='"+n+"'>"),e=e.replace(r.SUBTEXT_CURRENT_END,"</div>"+i+"<div class='walkme-custom-balloon-total-steps-text' style='"+t+n+"'>"),e=e.replace(r.SUBTEXT_TOTAL_START,"</div>"+i+"<div class='walkme-custom-balloon-total-steps-number' style='"+n+"'>"),e=e.replace(r.SUBTEXT_TOTAL_END,"</div>"),e+="<div style='clear:both;'></div>"}return e}l()}function Eo(e,t,n,r,o,a,s,u,l,c){var d,f,p=i.create("WalkmeOOP",this),g=8,h=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-v3 wm-custom-balloon-"),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(" "),r.b(r.v(r.f("designTemplateCssClass",e,t,0))),r.b("' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,369,453,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.border",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,841,868,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px;'>"),r.s(r.f("customHtml",e,t,1),e,t,0,1258,1274,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.f("customHtml",e,t,0)))}),e.pop()),r.s(r.f("customHtml",e,t,1),e,t,1,0,0,"")||(r.s(r.f("displayX",e,t,1),e,t,0,1317,1737,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close walkme-inspect-ignore' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" font-size: 12px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; margin-top: "),n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal;' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size:14px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,2084,2468,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; line-height: 18px; font-size:12px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: auto;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop())),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; margin-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 10px; float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px;'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div><div class='walkme-custom-side-border' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; width: 4px; height: 100%;  top:0px; "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(":0px; border:"),r.b(r.v(r.d("border.side.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": none; border-top: none; border-bottom: none; position: absolute;'></div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,3884,3912,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()},m=p.Prop.Public("contentMargin",15);p.Override("manipulationsForInlineCss",function(e){if(r.isIE(8,"lte"))return;var t=d.balloonSettings();n.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),n.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e})}),p.Override("createTemplateData",function(){var n=d.createTemplateData();n.outerDiv=d.getCustomDivHtml("inner-div"),n.title=d.getCustomDivHtml("title"),n.colors.xBtn=d.balloonSettings().XButtonColor,n.colors.stepInfo=d.balloonSettings().StepInfoColor,n.colors.separator=d.balloonSettings().SeparatorColor,n.stepIndexHeight=46,n.top={minHeight:57,textAlign:n.direction.side,title:{paddingTop:12},content:{sideMargin:m(),oppositeSideMargin:m()-2}},n.data.title&&!n.data.content&&(n.top.minHeight=43),n.bottom={},n.bottom.stepIndexMarginTop=10,e.isDefined(n.buttons)&&0!=n.buttons.length||(n.stepIndexHeight-=g,n.bottom.stepIndexMarginTop-=g/2),n.stepIndexHeight+="px",n.bottom.poweredByHeight+="px",n.xBtn={marginTop:d.balloonSettings().BalloonBorderWidth+"px",marginHorizental:parseInt(d.balloonSettings().BalloonBorderWidth)+4+"px"};var i=d.balloonSettings().BalloonBorderWidth-4;i<0&&(i=0),n.border.side={size:i+"px"},n.shadow=t.calculate(d.balloonSettings().ShadowType,d.balloonSettings().ShadowLevel,d.balloonSettings().ShadowColor),n.isNotIe7=!r.isIEBrowser(7),y(),n.buttonsHtml=E(n),n.designTemplateCssClass=o.get(f,a.templateEntityType.balloon);var s=f&&u.get(f.DesignTemplateId);return s&&(n.customHtml=l.apply(s,n)),n}),p.Override("createHtmlTemplate",function(){return h});function v(){p.ExtendsInstance(i.create("BaseBalloon",c)),d=p._base,f=c.entity}function y(){d.buttons().buttonsArr.sort(function(e,t){return e.order-t.order})}function E(e){var t=function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,906,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 21px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.s(n.f("normal",e,t,1),e,t,0,277,513,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,445,461,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 5px; padding-right: 5px;")}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,533,690,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 3px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px;")}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 10px; position:relative; color:inherit;'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1028,1546,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1051,1523,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top:6px; margin-bottom:6px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>By WalkMe</a></div>")}),e.pop())}),e.pop())),r.fl()},n=s.to_html(t,e);return n}v.apply(null,arguments)}i.register("BalloonV3").asCtor(Eo).asProto().dependencies("CommonUtils, ShadowCalculator, ClickAndHoverAdder, HostData, SpecificEntityDesignTemplateCssClassGetter, SharedConsts, Mustache, DesignTemplateHtmlGetter, HtmlRulesApplier");function So(e,t,n,r,o,a){var s,u=i.create("WalkmeOOP",this),l=8,c=5,d=u.Prop.Public("contentMargin",15);u.Override("manipulationsForInlineCss",function(e){if(r.isIE(8,"lte"))return;var t=s.balloonSettings();n.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),n.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e})}),u.Override("createTemplateData",function(){var n=s.createTemplateData();return n.outerDiv=s.getCustomDivHtml("inner-div"),n.title=s.getCustomDivHtml("title"),n.colors.xBtn=s.balloonSettings().XButtonColor,n.colors.stepInfo=s.balloonSettings().StepInfoColor,n.colors.separator=s.balloonSettings().SeparatorColor,n.stepIndexHeight=46,n.top={minHeight:57,textAlign:n.direction.side,title:{paddingTop:12},content:{sideMargin:d(),oppositeSideMargin:d()-2}},n.data.title&&!n.data.content&&(n.top.minHeight=43),n.bottom={},n.bottom.stepIndexMarginTop=10,e.isDefined(n.buttons)&&0!=n.buttons.length||(n.stepIndexHeight-=l,n.bottom.stepIndexMarginTop-=l/2),n.stepIndexHeight+="px",n.bottom.poweredByHeight+="px",n.xBtn={marginTop:s.balloonSettings().BalloonBorderWidth-c+"px",marginHorizental:parseInt(s.balloonSettings().BalloonBorderWidth)+4+"px"},n.shadow=t.calculate(s.balloonSettings().ShadowType,s.balloonSettings().ShadowLevel,s.balloonSettings().ShadowColor),n.isNotIe7=!r.isIEBrowser(7),p(),n.buttonsHtml=g(n),n}),u.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-vm1' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,305,389,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,779,806,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,1194,1715,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" border-radius: 20px; font-size: 23px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; padding-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 18px; padding-bottom: 6px; margin-top: "),n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" line-height: 30px; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size: 16px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,2082,2468,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; line-height: 18px; font-size:13px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: hidden;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" padding: 3px 3px 3px 0; min-height:36px; background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" position: absolute; color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; left: 50%; transform: translateX(-65%); float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px;'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,3616,3644,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()};return e});function f(){u.ExtendsInstance(i.create("BaseBalloon",a)),s=u._base}function p(){s.buttons().buttonsArr.sort(function(e,t){return e.order-t.order})}function g(e){var t=function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,920,"{{ }}")&&(r.rs(e,t,function(e,t,n){
n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 25px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.s(n.f("normal",e,t,1),e,t,0,277,513,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,445,461,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 7px; padding-right: 7px;")}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,533,704,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; float: left; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 10px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px;")}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 12px; position:relative; color:inherit;'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1042,1581,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1065,1558,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top: 11px; margin-bottom:6px; margin-right: 5px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>By WalkMe</a></div>")}),e.pop())}),e.pop())),r.fl()},n=o.to_html(t,e);return n}f.apply(null,arguments)}i.register("BalloonVM1").asCtor(So).asProto().dependencies("CommonUtils, ShadowCalculator, ClickAndHoverAdder, HostData, Mustache");function To(e,t,n,r,o,a,s,u,l,c,d,f,p,g,h,m){var v=["top","right","bottom","left"],y=["center","start","end"],E=i.create("WalkmeOOP",this),S=E.Prop.Protected("balloon"),T=E.Prop.Protected("balloonClass"),C=E.Prop.Protected("balloonSettings"),b=E.Prop.Protected("minWidth"),w=E.Prop.Protected("maxWidth"),I=E.Prop.Protected("defaultMaxWidth"),P=(E.Prop.Public("minPopupWidth"),E.Prop.Public("arrowHeight")),_=E.Prop.Public("arrowBaseWidth"),k=E.Prop.Public("hasBorder"),A=E.Prop.Public("shouldScrollToElement"),D=E.Prop.Public("balloonTitleSelector"),N=E.Prop.Public("balloonContentSelector"),x=E.Virtual.Protected("addBalloonDiv"),L=E.Virtual.Public("loadResources",function(e,t){t&&t()}),F=E.Virtual.Protected("getArrowsColors");E.Virtual.Public("fixSize",function(e,t,n,r,i,o,a){var s=B(r,e);e.css("visibility","hidden"),e.show();var u=R(e,s),l=W(e,t,n,M(r),a,u,s,o);return l.height=G(e,i,l.height),U(e,l),l});function M(e){return!e||e<=0?I():e}function B(e,t){var n;return(!e||e<=0)&&(n=0,mtjQuery.each(mtjQuery("[width], [style*=width], [style*=WIDTH]",t),function(e,t){mtjQuery(t).width()>n&&(n=mtjQuery(t).width())})),n}function R(e){return{height:e.height(),width:e.width()}}function U(e,t){e.width(t.width+"px"),e.height(t.height+"px")}function V(e,t,n){return t&&(t>e||t>n)}var W=E.Virtual.Protected("fixWidth",function(e,t,n,i,o,s,u,l){var c=p.send(a.EVENTS.BalloonLogs.CalculateBalloonWidthCalled,{settings:l,shouldReturnResult:!0});if(void 0==c){r.isQuirksMode(t[0])&&(s.width=re(e));var d=void 0!=o?o:b();s.width<d&&(s.width=d)}else s.width=c;return V(s.width,u,i)?s=H(u,e,c,i):s.width>i&&(s=H(i,e,c,i)),void 0==c&&(e.css("width",e.width()+1+"px"),s.width=e.width(),s.height=e.height()),s}),G=E.Virtual.Protected("fixHeight",function(e,t,n){return t&&t>0&&(n=t),n}),H=E.Virtual.Protected("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t);n.css("width",e+"px"),t.css("width","auto");var r={width:t.width(),height:t.height()};return r}),j=E.Virtual.Protected("generateHtmlParams",function(e){var t={balloonSettings:C(),balloonData:e.balloonData,userGuid:e.userGuid,settings:e.settings,end:e.end,stepType:e.stepType,contentDiv:e.contentDiv},n={nextButton:e.nextButton,doneButton:e.doneButton,backButton:e.backButton,submitButton:e.submitButton};return{balloonParams:t,buttonsParams:n}}),Y=E.Public("generateHtml",function(e){var t=j(e);return S(i.create(T(),t.balloonParams)),S().initButtons(t.buttonsParams),S().generateHtml()}),z=(E.Public("manipulationsForInlineCss",function(e){return S().manipulationsForInlineCss(e)}),E.Public("generateBalloonDiv",function(e,t,n,i,o,a,s,u,l,c,p){var m=f(Y(a)),v={html:m,type:g.ENTITY_TYPE.step};h.removeIfShould(m,a.settings),p=p||{},p.bbCodeParserVersion=a.settings.v,d.replace(v,l||[],c||{},p);var y=r.isIE(7)?m[0].outerHTML:m,E=x(y,e,t);return K(E,n,i,o,a,s,u),E}),E.Virtual.Protected("generateIdForBalloon",function(e){return"walkme-balloon-"+e})),Q=E.Virtual.Protected("generateClassesForBallon",function(e,t,n,r,i){return["walkme-custom-"+n+"-"+e,"walkme-custom-"+r+"-"+t,"walkme-custom-"+(i==O.STEP_TYPE.Popup?"popup":"simple")+"-step"]}),q=E.Virtual.Protected("generateClassesForArrows",function(e,t,n,r){return["walkme-custom-balloon-arrow","walkme-custom-balloon-arrow-"+t,"walkme-custom-balloon-arrow-"+e,"walkme-custom-balloon-arrow-"+e+"-"+t,"walkme-custom-"+r+"-"+n]}),K=E.Virtual.Protected("addIdentifiers",function(e,n,r,i,a,s,u){e.attr("id",z(r));for(var l=Q(n,r,u,s,i),c=0;c<l.length;c++)e.addClass(l[c]);var d=o.getCurrentLanguage()||"default";e.addClass("walkme-custom-language-"+d),t.addBrowserSpecificClasses(e),de(e,a)}),X=E.Virtual.Protected("addArrowClasses",function(e,t,n,r,i){for(var o=q(t,n,r,i),a=0;a<o.length;a++)e.addClass(o[a])}),J=(E.Virtual.Public("fixArrows",function(){}),E.Virtual.Public("fixQuirksMode",function(){}),E.Virtual.Protected("finalizeArrowsPosition",function(){})),$=(E.Virtual.Public("drawArrows",function(e,t,n,i,o,s,u){var l=ue(n,i,o,e),c={top:l.top,left:l.left};n.positionType==a.POSITION_TYPE.Top&&(c.top=l.top,l.top=l.top-C().BalloonBorderWidth+1,c.left=l.left-1),n.positionType==a.POSITION_TYPE.Bottom&&(l.top=l.top+C().BalloonBorderWidth-1,c.top=l.top-C().BalloonBorderWidth,c.left=l.left-1),n.positionType==a.POSITION_TYPE.Left&&(r.isQuirksMode(e[0])?(l.left=l.left-C().BalloonBorderWidth+1,c.left=l.left+C().BalloonBorderWidth,c.top=l.top-1):(l.left=l.left-C().BalloonBorderWidth+1,c.left=l.left+C().BalloonBorderWidth-1,c.top=l.top-1)),n.positionType==a.POSITION_TYPE.Right&&(l.left=l.left+C().BalloonBorderWidth-1,c.left=l.left-C().BalloonBorderWidth,c.top=l.top-1),J(n.positionType,l,c);var d="",f=null,p=v[n.positionType],g=F(p);C().BalloonBorderWidth>0&&(f=oe(c,n,s,g.outterArrow,P()+1,P()+1),X(f,"outer",p,t,u)),d=oe(l,n,s,g.innerArrow,P(),P()),X(d,"inner",p,t,u);var h=[d];return f&&h.push(f),h}),E.Protected("getBalloonBasicWidth",function(e,t,n){var i=0;i=r.isQuirksMode(t[0])?re(e):e.width();var o=0;return o=n||n<=0?w():n,i<b()&&(i=b()),i>o&&(i=o),i}),E.Public("setConfiguration",function(e){l.fixConfiguration(e),C(e),L()}));E.Public("decideWhereToPopForCaptureBalloon",function(t,n,r,i){try{var o={width:r,height:i},a=ne(),s=te(t),u=ee(),l=pe(s,o,n,u,a,!0);return l}catch(c){e.error(c)}}),E.Public("getPossiblePositionsForCaptureBalloon",function(t,n,r){try{var i={width:n,height:r},o=ne(),a=te(t),s=ee(),u=fe(a,i,s,o);return u}catch(l){e.error(l)}}),E.Public("addPositionClass",function(e,t){var n="walkme-custom-position-"+v[t.positionType];n+=" walkme-custom-offset-"+y[t.positionOffset],e.addClass(n)});function Z(){w(400),I(400),k(!0),D(".walkme-custom-balloon-title"),N(".walkme-custom-balloon-content"),A(!0),$(m.balloonSettings)}function ee(){return P()+1}function te(e){var t=e[0],r=t.getBoundingClientRect(),i=n.getElementDocument(e),o=s.getOffsetRect(t,i,window),a=s.getElementBoundsWithRectAndOffset(r,o);return a}function ne(){var e=mtjQuery(document);return e.height=e.height(),e.width=e.width(),e.top=0,e.left=0,e}function re(e){var t=mtjQuery(D(),e).text(),r=0,i=0,o=0,a=mtjQuery(N(),e);if(a.length>0){for(var s=a.html().replace(/<br*">/g,"< >").split("< >"),l=0;l<s.length;l++){var c=s[l].replace(/(<([^>]+)>)/gi,"").length;o<c&&(o=c)}var d=mtjQuery(N()+" span",e);i=d.length>0?parseInt(d.css("font-size").replace(/px/,"")):parseInt(a.css("font-size").replace(/px/,""))}var f=mtjQuery(D()+" span",e);r=f.length>0?parseInt(f.css("font-size").replace(/px/,"")):parseInt(mtjQuery(D(),e).css("font-size").replace(/px/,""));var p=0;p=t.length*r>o*i?t.length*r:o*i;var g=parseFloat(n.getSettingsValue(u.get().Settings,"quirksModeFactor",.5));return p*=g}function ie(e,t){var n=.5;return e==a.POSITION_OFFSET.Start?n=1:e==a.POSITION_OFFSET.End&&(n=0),2!=t&&3!=t||(n=1-n),n}function oe(e,t,n,r,i,o){var s=ae(i,o);s.color=r;var u=e.top,l=e.left;t.positionType==a.POSITION_TYPE.Bottom,t.positionType==a.POSITION_TYPE.Right,s.point_direction=t.positionType,s.angle=ie(t.positionOffset,s.point_direction);var c=se(s,n[0].ownerDocument);return c.css({visibility:"hidden",top:u+"px",left:l+"px"}),mtjQuery(n.append(c)),c}function ae(e,t,n,r,i,o){return{width:e,height:t,point_direction:n||0,angle:r||0,color:i||"red",background:o||"transparent"}}function se(e,t){var n=mtjQuery(t.createElement("div"));return n.css("display","block"),n.css("width","0"),n.css("height","0"),n.css("border",e.width+"px solid transparent"),n.css("border-"+v[e.point_direction]+"-color",e.color),n.css("line-height","0"),n.css("border-"+v[(e.point_direction+2)%4],"0px"),3==e.point_direction||1==e.point_direction?n.css("border-style","outset solid solid solid"):n.css("border-style","solid outset solid solid"),n}function ue(e,t,n,i){var o,s;if(e.positionType==a.POSITION_TYPE.Top||e.positionType==a.POSITION_TYPE.Bottom){var u=e.left+t.width;o=le(e.left,u,_(),e.positionOffset,n.width,n.left),s=e.positionType==a.POSITION_TYPE.Top?e.top+t.height:e.top-P()}else if(e.positionType==a.POSITION_TYPE.Left||e.positionType==a.POSITION_TYPE.Right){var l=e.top+t.height;s=le(e.top,l,_(),e.positionOffset,n.height,n.top),e.positionType==a.POSITION_TYPE.Left?(o=e.left+t.width,r.isQuirksMode(i[0])&&(o-=2)):o=e.left-P()}return{top:s,left:o}}function le(t,n,r,i,o,s){var u;return i==a.POSITION_OFFSET.Center?u=(n+t-r)/2:i==a.POSITION_OFFSET.Start?u=s+(o-r)/2:i==a.POSITION_OFFSET.End?u=s+(o-r)/2:e.error(null,"incorrect offset type: "+i),ce(u,t,n,r)}function ce(e,t,n,r){var i=n-r;if(e>i)return i;if(e<t)return t;return e}function de(e,t){var n=t.balloonData;n.title||e.addClass("walkme-custom-no-title"),n.content||n.customHtml&&(n.customHtml.inner||n.customHtml.outter)||e.addClass("walkme-custom-no-content");var r=t.settings.customButtons&&t.settings.customButtons.length>0,i=t.settings.popupStepButtons&&t.settings.popupStepButtons.length>0,o=i||r||t.nextButton||t.backButton||t.doneButton||t.submitButton;o||e.addClass("walkme-custom-no-buttons")}function fe(e,t,n,r){var i=e.top-t.height-n>r.top,o=e.right+t.width+n<r.width+r.left,a=e.bottom+t.height+n<r.height+r.top,s=e.left-t.width-n>r.left;return{top:i,right:o,bottom:a,left:s}}var pe=E.Virtual.Public("decideWhereToPop",function(e,t,r,i,o,s){var u,l,d=e.left+e.width/2,f=e.top+e.height/2,p=fe(e,t,i,o),g=d-t.width/2>o.left,h=d+t.width/2<o.width+o.left,m=f-t.height/2>o.top,v=f+t.height/2<o.height+o.top,y=0;r==a.POSITION_TYPE.Top||r==a.POSITION_TYPE.Bottom?(g&&h?l=a.POSITION_OFFSET_TYPE.HorizontalCentered:g?h||(l=a.POSITION_OFFSET_TYPE.SnapToViewportRight):l=a.POSITION_OFFSET_TYPE.ToRight,u=r==a.POSITION_TYPE.Top?a.POSITION_TYPE.Top:a.POSITION_TYPE.Bottom,s&&(u=p.top&&r==a.POSITION_TYPE.Top||r==a.POSITION_TYPE.Bottom&&!p.bottom?a.POSITION_TYPE.Top:a.POSITION_TYPE.Bottom)):r!=a.POSITION_TYPE.Right&&r!=a.POSITION_TYPE.Left||(v&&m?l=a.POSITION_OFFSET_TYPE.VerticallyCentered:v?m||(l=a.POSITION_OFFSET_TYPE.Below,y=2-P()):(l=a.POSITION_OFFSET_TYPE.Below,y=2-P()),u=r==a.POSITION_TYPE.Left?a.POSITION_TYPE.Left:a.POSITION_TYPE.Right,s&&(u=p.left&&r==a.POSITION_TYPE.Left||r==a.POSITION_TYPE.Right&&!p.right?a.POSITION_TYPE.Left:a.POSITION_TYPE.Right));var E=c.getOrientationByName(u),S=c.getOffsetByName(l);return{top:Math.ceil(n.defaultValue(E.getTopPosition(e,t,i,o),S.getTopPosition(e,t,i,o)+y)),left:Math.ceil(n.defaultValue(E.getLeftPosition(e,t,i,o),S.getLeftPosition(e,t,i,o)+y)),positionType:E.type,positionOffset:S.type}});Z.apply(null,arguments)}i.register("BaseBalloonDrawer").asCtor(To).asProto().dependencies("Logger, UiUtils, CommonUtils, HostData, LanguageManager, Consts, PositionHelper, SiteConfigManager, BalloonUtils, BalloonOrientationProvider, PlaceholdersReplacer, wmjQuery, MessageSender, SharedConsts, XButtonRemover");function Co(t,n,r){var o,a=i.create("WalkmeOOP",this);a.Override("addBalloonDiv",function(e,r,i){var a=mtjQuery(r[0].ownerDocument.createElement("div"));return a.addClass("walkme-custom-balloon-outer-div"),a.addClass("mt-custom-balloon-outer-div"),a.css({direction:"ltr",display:"block",visibility:"hidden",top:0}),n.setStyleForBalloon(a,o.balloonSettings(),i),t.setLangAttribute(a),a.html(e),a}),a.Override("addIdentifiers",function(t,n,r,i,a,s,u){o.addIdentifiers(t,n,r,i,a,s,u),e("*",t).addClass("walkme-custom-step-"+r)}),a.Override("addArrowClasses",function(e,t,n,r,i){o.addArrowClasses(e,t,n,r,i),e.addClass("mt-custom-balloon-arrow-"+t)}),a.Override("getArrowsColors",function(e){var t=o.balloonSettings(),n=""==t.BalloonColor2?"transparent":t.BalloonColor2,r=t.BorderColor;switch(e){case"bottom":n=""==t.Color?"transparent":t.Color;break;case"top":break;case"left":case"right":n="transparent"==t.Color||"transparent"==t.BalloonColor2||"#00000000"==t.Color||"#00000000"==t.BalloonColor2?"transparent":u(t.Color,t.BalloonColor2)}return{innerArrow:n,outterArrow:r}});function s(){a.ExtendsInstance(i.create("BaseBalloonDrawer",r));var e=r.balloonSettings.minPopupWidth?r.balloonSettings.minPopupWidth:400;o=a._base,o.balloonClass("BalloonV2"),o.minWidth(190),o.arrowHeight(13),o.arrowBaseWidth(26),o.minPopupWidth(e)}function u(e,t){var n=function(e,t){return(e+t)/2},r=function(e){return parseInt((""+e).replace("#",""),16)},i=function(e){return(e>>0).toString(16)},o=r(e),a=r(t),s=function(e){return e>>16&255},u=function(e){return e>>8&255},l=function(e){return 255&e},c=i(n(s(o),s(a))),d=i(n(u(o),u(a))),f=i(n(l(o),l(a))),p="#"+(c.length<2?"0"+c:c)+(d.length<2?"0"+d:d)+(f.length<2?"0"+f:f);return p}s.apply(null,arguments)}i.register("BalloonDrawerV2").asCtor(Co).asProto().dependencies("UiUtils, BalloonUtils");function bo(t,n,r,o,a,s,u,l,c){var d,f,p=i.create("WalkmeOOP",this);p.Override("addBalloonDiv",function(e,t){var r=n.createElementInDocument(e,t[0].ownerDocument);return o.setLangAttribute(r),r.css({display:"none",top:0}),r}),p.Override("loadResources",function(e,t){var n=d.balloonSettings().FontsData;n?r.fonts(n,e,t,t):t&&t()}),p.Override("getArrowsColors",function(e){var t=d.balloonSettings(),n=t.Color,r=m(),i=t.direction;switch(e){case"bottom":n=t.Color;break;case"top":n=t.BalloonColor2;break;case"left":"ltr"==i?n=t.Color:(n=t.ButtonBgColor,r=t.ButtonBgColor);break;case"right":"ltr"==i?(n=t.ButtonBgColor,r=t.ButtonBgColor):n=t.Color}return{innerArrow:n,outterArrow:r}}),p.Override("fixArrows",function(e){e.balloonSettings=d.balloonSettings(),e.arrowBaseWidth=d.arrowBaseWidth(),e.outerArrowColor=m(),t.fixArrows(e)}),p.Override("fixQuirksMode",function(t){var n=e(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",t);n.hide();var r=e(".walkme-custom-powered-by-div",t);if(r.length>0){var i=r.css("margin-bottom"),o=r.css("margin-top");r.css("margin-bottom","0px").css("margin-top","0px"),r.css("padding-bottom",i).css("padding-top",o)}}),p.Override("finalizeArrowsPosition",function(e,n,r){t.finalizeArrowsPosition(e,n)}),p.Override("generateHtmlParams",function(e){var t=d.generateHtmlParams(e);return t.balloonParams.entity=f,t}),p.Override("handleWiderElement",function(e,t,n,r){var i=mtjQuery(".walkme-custom-balloon-content",t),o=mtjQuery(".walkme-custom-balloon-title",t);o.css("width","10px");var a;void 0!=n?g(t,n):e<=r?g(t,r):(i.length>0?g(i,e):g(o,e),t.css("width","auto"),a=t.width(),g(t,a)),o.css("width","auto");var s={width:t.width(),height:t.height()};return s}),p.Override("generateClassesForArrows",function(e,t,n,r){var i=d.generateClassesForArrows(e,t,n,r),o=u.get(f,l.templateEntityType.balloon);return o&&i.push(o),i});function g(e,t){e.css("width",t+"px")}function h(){p.ExtendsInstance(i.create("BaseBalloonDrawer",c));var e=c.balloonSettings.minPopupWidth?c.balloonSettings.minPopupWidth:300;d=p._base,d.balloonClass("BalloonV3"),d.minWidth(190),d.minPopupWidth(e),d.arrowHeight(10),d.arrowBaseWidth(18),d.hasBorder(!1),f=c.entity}function m(){return d.balloonSettings().BorderColor}h.apply(null,arguments)}i.register("BalloonDrawerV3").asCtor(bo).asProto().dependencies("ArrowsHelper, CommonUtils, ResourceManager, UiUtils, Consts, ContainerAppender, SpecificEntityDesignTemplateCssClassGetter, SharedConsts"),i.register("BalloonDrawerVM1").asCtor(wo).asProto().dependencies("ArrowsHelper, CommonUtils, ResourceManager, UiUtils, Consts, FeaturesManager");function wo(t,n,r,o,a,s,u){var l,c=i.create("WalkmeOOP",this);c.Override("addBalloonDiv",function(t,r){var i=n.createElementInDocument(t,r[0].ownerDocument);return s.isFeatureEnabled("accessibility")&&(focusableElements=i.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),n.addTabIndex(focusableElements),focusableElements.on("focus",function(){e(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){e(this).css({outline:"none","outline-offset":"0px"})})),o.setLangAttribute(i),i.css("display","none"),i}),c.Override("loadResources",function(e,t){var n=l.balloonSettings().FontsData;n?r.fonts(n,e,t,t):t&&t()}),c.Override("getArrowsColors",function(e){var t=l.balloonSettings(),n=t.Color,r=f();return n="top"==e?t.BalloonColor2:t.Color,{innerArrow:n,outterArrow:r}}),c.Override("fixArrows",function(e){e.balloonSettings=l.balloonSettings(),e.arrowBaseWidth=l.arrowBaseWidth(),e.outerArrowColor=f(),t.fixArrows(e)}),c.Override("fixQuirksMode",function(t){var n=e(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",t);n.hide();var r=e(".walkme-custom-powered-by-div",t);if(r.length>0){var i=r.css("margin-bottom"),o=r.css("margin-top");r.css("margin-bottom","0px").css("margin-top","0px"),r.css("padding-bottom",i).css("padding-top",o)}}),c.Override("finalizeArrowsPosition",function(e,n,r){t.finalizeArrowsPosition(e,n)}),c.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t),r=mtjQuery(".walkme-custom-balloon-title",t);r.css("width","10px"),n.css("width",e+"px"),t.css("width","auto"),r.css("width","auto");var i={width:t.width(),height:t.height()};return i});function d(){c.ExtendsInstance(i.create("BaseBalloonDrawer",u));var e=u.balloonSettings.minPopupWidth?u.balloonSettings.minPopupWidth:300;l=c._base,l.balloonClass("BalloonVM1"),l.minWidth(190),l.minPopupWidth(e),l.arrowHeight(10),l.arrowBaseWidth(18),l.hasBorder(!1),l.defaultMaxWidth(230)}function f(){return l.balloonSettings().ButtonBgColor}d.apply(null,arguments)}i.register("BalloonDrawerFactory").asCtor(Io);function Io(){var e=this;function t(){}e.get=function(e,t){var n;switch(e){case"v3":n=i.create("BalloonDrawerV3",t);break;case"vm1":n=i.create("BalloonDrawerVM1",t);break;default:n=i.create("BalloonDrawerV2",t)}return n},t.apply(null,arguments)}function Po(){var t=this;function n(){}function r(t,n,r){e(t).css(n,r)}t.addClickAndHover=function(t){var n=t.cssProperty,i=t.regularColor,o=t.hoverColor,a=t.clickColor,s=t.elemSelector,u=!1,l=t.balloonDiv,c=l.find(s);c.mouseenter(d),c.mouseleave(f),c.mouseup(g),c.mousedown(p);function d(t){u=!0;var i=e(".walkme-click-and-hover:active")[0]==t.currentTarget;i?r(t.currentTarget,n,a):r(t.currentTarget,n,o)}function f(e){u=!1,r(e.currentTarget,n,i)}function p(e){r(e.currentTarget,n,a)}function g(e){u?r(e.currentTarget,n,o):r(e.currentTarget,n,i)}},n.apply(null,arguments)}i.register("ClickAndHoverAdder").asCtor(Po);function _o(e){var t=this,n={None:0,Shadow:1,Glow:2};function r(){}t.calculate=function(t,r,i){if(t==n.Shadow)switch(r){case 0:return"1px 1px 3px 0px rgba(0, 0, 0, 0.2)";case 1:return"0px 0px 13px 0px rgba(0, 0, 0, 0.2)";case 2:return"0px 0px 13px 5px rgba(0, 0, 0, 0.2)"}else if(t==n.Glow){var o=e.hexToRgba(i,.6);switch(r){case 0:return"0px 0px 7px 0px rgba"+o;case 1:return"0px 0px 14px 0px rgba"+o;case 2:return"0px 0px 26px 5px rgba"+o}}},r.apply(null,arguments)}i.register("ShadowCalculator").asCtor(_o).dependencies("UiUtils"),i.register("BalloonPositionProvider").asCtor(ko).dependencies("BalloonOrientationProvider, CommonUtils");function ko(e,t){var n=this;n.findBestPosition=r,n.getPredefinedPosition=o;function r(t,n,r,o,a){var s=e.getOrderedDirections({lowPriorityDirection:a}),u=e.getOrderedOffsets();return i({elementBounds:t,balloonSize:n,marginFromElement:r,drawingArea:o},{mainOrientations:s,offsets:u})}function i(e,t){for(var n={},r=0;r<t.mainOrientations.length;r++){var i=t.mainOrientations[r];u(n,i,e);for(var o=0;o<t.offsets.length;o++){var l=t.offsets[o];if(l.isRelevant(n)){var c=a(n,l,e);if(c&&s(c,e))return c}}}return}function o(t,n,r,i,o,s){var l={},c=e.getOrientationByName(o),d=e.getOffsetByName(s)||e.getOffsetByName(c.defaultOffset),f={elementBounds:t,balloonSize:n,marginFromElement:r,drawingArea:i};return u(l,c,f),a(l,d,f)}function a(e,n,r){var i=n.getLeftPosition(r.elementBounds,r.balloonSize,r.marginFromElement,r.drawingArea),o=n.getTopPosition(r.elementBounds,r.balloonSize,r.marginFromElement,r.drawingArea);return{left:t.defaultValue(e.left,i),top:t.defaultValue(e.top,o),positionType:e.positionType,positionOffset:n.type}}function s(e,t){var n=t.drawingArea.top<e.top,r=e.left+t.balloonSize.width<t.drawingArea.left+t.drawingArea.width,i=e.top+t.balloonSize.height<t.drawingArea.top+t.drawingArea.height,o=t.drawingArea.left<e.left;return n&&r&&i&&o}function u(e,t,n){e.top=t.getTopPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),e.left=t.getLeftPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),e.positionType=t.type}}i.register("BalloonOrientationProvider").asCtor(Ao).dependencies("Consts, SiteConfigManager");function Ao(e,t){var n=this;n.getOrderedDirections=l,n.getOrderedOffsets=c,n.getOrientationByName=d,n.getOffsetByName=f;var r="Direction",i="rtl",o=[e.POSITION_TYPE.Top,e.POSITION_TYPE.Bottom,e.POSITION_TYPE.Right,e.POSITION_TYPE.Left],a=[e.POSITION_TYPE.Top,e.POSITION_TYPE.Bottom,e.POSITION_TYPE.Left,e.POSITION_TYPE.Right],s=[e.POSITION_OFFSET_TYPE.VerticallyCentered,e.POSITION_OFFSET_TYPE.HorizontalCentered,e.POSITION_OFFSET_TYPE.Above,e.POSITION_OFFSET_TYPE.Below,e.POSITION_OFFSET_TYPE.ToRight,e.POSITION_OFFSET_TYPE.ToLeft],u=[e.POSITION_OFFSET_TYPE.VerticallyCentered,e.POSITION_OFFSET_TYPE.HorizontalCentered,e.POSITION_OFFSET_TYPE.Above,e.POSITION_OFFSET_TYPE.Below,e.POSITION_OFFSET_TYPE.ToLeft,e.POSITION_OFFSET_TYPE.ToRight];function l(e){e=e||{};var t=p()?a:o;return g(m,t,e.lowPriorityDirection)}function c(){var e=p()?u:s;return g(v,e)}function d(e){return m[e]}function f(e){return v[e]}function p(){var e=t.get();return e&&e[r]==i}function g(e,t,n){for(var r=[],i=0;i<t.length;i++)r.push(e[t[i]]);return void 0!==n&&h(r,n),r}function h(e,t){e.sort(function(e,n){return e.type==t?1:n.type==t?-1:0})}var m={};m[e.POSITION_TYPE.Top]={type:e.POSITION_TYPE.Top,defaultOffset:e.POSITION_OFFSET_TYPE.HorizontalCentered,getTopPosition:function(e,t,n,r){return e.top-t.height-n},getLeftPosition:function(e,t,n,r){return}},m[e.POSITION_TYPE.Bottom]={type:e.POSITION_TYPE.Bottom,defaultOffset:e.POSITION_OFFSET_TYPE.HorizontalCentered,getTopPosition:function(e,t,n,r){return e.bottom+n},getLeftPosition:function(e,t,n,r){return}},m[e.POSITION_TYPE.Right]={type:e.POSITION_TYPE.Right,defaultOffset:e.POSITION_OFFSET_TYPE.VerticallyCentered,getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.right+n}},m[e.POSITION_TYPE.Left]={type:e.POSITION_TYPE.Left,defaultOffset:e.POSITION_OFFSET_TYPE.VerticallyCentered,getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.left-t.width-n}};var v={};v[e.POSITION_OFFSET_TYPE.VerticallyCentered]={type:e.POSITION_OFFSET.Center,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return Math.ceil(e.top+e.height/2-t.height/2)},getLeftPosition:function(e,t,n,r){return}},v[e.POSITION_OFFSET_TYPE.Above]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return e.bottom-t.height},getLeftPosition:function(e,t,n,r){return}},v[e.POSITION_OFFSET_TYPE.Below]={type:e.POSITION_OFFSET.Start,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return e.top},getLeftPosition:function(e,t,n,r){return}},v[e.POSITION_OFFSET_TYPE.HorizontalCentered]={type:e.POSITION_OFFSET.Center,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return Math.ceil(e.left+e.width/2-t.width/2)}},v[e.POSITION_OFFSET_TYPE.ToRight]={type:e.POSITION_OFFSET.Start,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.left}},v[e.POSITION_OFFSET_TYPE.ToLeft]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.right-t.width}},v[e.POSITION_OFFSET_TYPE.SnapToViewportRight]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return r.left+r.width-t.width-1}}}i.register("BalloonPositionVisibilityChecker").asCtor(Do).dependencies("CommonUtils, FeaturesManager, Logger");function Do(e,t,n){var r=this;r.isBalloonPositionVisibleRelativeToParents=function(e,n){if(t.isFeatureEnabled("disableIEVRTP"))return!0;var r=a(e);if(r)return!0;var u=i(e,n),c=e.parents("div"),d=!1,f=!1,p=!l(c,function(e){var e=mtjQuery(e);if(!t.isFeatureEnabled("disableAbsRTP")&&"absolute"==e.css("position"))return d=!0,!0;if(!t.isFeatureEnabled("disableFixRTP")&&"fixed"==e.css("position"))return f=!0,!0;var n=e.css("overflow"),r=o(n),i=s(u,e);return r&&i});return d||f||p};function i(e,t){var r=e.offset(),i=e.height(),o=e.width(),a={top:r.top,left:r.left};switch(t){case 0:a.left+=o/2;break;case 1:a.top+=i/2,a.left+=o;break;case 2:a.top+=i,a.left+=o/2;break;case 3:a.top+=i/2;break;default:n.error(new Error("Unknown balloon position"))}return a}function o(e){return"auto"==e||"scroll"==e||"hidden"==e}function a(e){var t=e.css("position");return"absolute"==t||"fixed"==t}function s(e,t){var n=t.offset();return u(e.top,n.top,t.outerHeight())||u(e.left,n.left,t.outerWidth())}function u(e,t,n){var r=t+n;return e<t||e>r}var l=function(t,n){return null!=e.firstMatch(t,n)}}i.register("PopupBalloonDisplayer").asCtor(Oo).dependencies("PopupStepElementProvider, SiteConfigManager, PositionHelper, Consts, Logger, BalloonsContainer, BalloonDrawerProvider, BalloonButtonsEventsBinder");function Oo(t,n,r,a,s,u,l,c){var d=this;d.showSpecialPopupBalloon=f;function f(d,f,p,g,h,m,v,y){var E=t.get(!0),S=lg(p);h&&(S.displayX=!1);var T=n.get().BalloonSettings;T=lg(T),e.extend(T,m);var C=i.create("Balloon",{element:E,forceEmbedBalloonInIframe:!1,positionHelper:r,fixedSize:{width:f,height:0},stepSettings:S,htmlContent:d.htmlContent,text:{title:d.title||"",content:d.text||"",subText:d.subText||""},data:{type:a.STEP_TYPE.Popup},configuration:T,logger:s,drawer:l.getBalloonDrawer(T,y),siteConfig:n.get(),bindButtonsFunc:v?void 0:c.addButtonEventsToBalloon});return new o(function(e){C.Show(!1,function(){var t=mtjQuery(C.getBalloonDiv());if(t.removeClass("walkme-custom-step-undefined"),mtjQuery("*",t).removeClass("walkme-custom-step-undefined"),t.removeClass("walkme-custom-walkthru-undefined"),mtjQuery("*",t).removeClass("walkme-custom-walkthru-undefined"),m&&m.surveyId){var n=m.surveyId;t.attr("id","walkme-survey-balloon-"+n)}g(t,T),e(C)}),u.add(C)})}}i.register("BalloonDrawerProvider").asCtor(No).dependencies("SiteConfigManager, BalloonDrawerFactory");function No(e,t){var n=this;n.getBalloonDrawer=i;function r(){}function i(e,n){var r=o(e),i={balloonSettings:r,entity:n},a=r.BalloonVersion;return t.get(a,i)}function o(t){var n=lg(t),r=e.get();return r&&(n.direction=r.Direction,n.showPoweredBy="1"==r.PoweredByLink,n.showPoweredByFormat=r.IsDisplayPoweredBy),n}r()}i.register("BalloonButtonsEventsBinder").asCtor(xo).dependencies("BBCodeEventsBinder, LibDestroyer, CommonEvents, FeaturesManager, Consts");function xo(e,t,n,r,i){var o=this;o.addButtonEventsToBalloon=a,o.attachBalloonXButtonClickEvent=s;function a(t,n){e.bind(t,null,n),t.on("click mousedown mouseup",function(e){r.isFeatureEnabled(i.FEATURES.ShadowRootsInspector)||e.stopPropagation()})}function s(e){mtjQuery(".walkme-action-close, .walkme-action-cancel",e).click(function(e){u(e)})}function u(e){var r={ClickEvent:e};n.raiseEvent("UserStoppedWalkthru",r),t.releaseBalloons()}}i.register("XButtonDisplayChecker").asCtor(Lo).dependencies("CommonUtils");function Lo(e){var t=this;t.shouldDisplayX=n;function n(t){return 1==e.getSettingsValue(t,"displayX",!0)||"True"==e.getSettingsValue(t,"displayX","True")||1==e.getSettingsValue(t,"displayX",1)}}i.register("BalloonsContainer").asCtor(Fo).dependencies("CommonUtils");function Fo(e){var t=this;t.add=i,t.removeAll=o,t.getAll=a,t.stopAll=s;var n;function r(){o()}function i(e){n.push(e)}function o(){n=[]}function a(){return n}function s(){e.executeParallel({objectsArray:a(),functionsToExecute:[function(e,t){e.stop(),t&&t()}]})}r()}i.register("BalloonPositionCheckSettingsGetter").asCtor(Mo).dependencies("SiteConfigManager,Consts");function Mo(e,t){var n=this;n.get=r;function r(){var n=e.get(),r=n.Custom&&n.Custom.BalloonPositionCheckSettings||{positionChangePixelsThreshold:t.DEFAULT_CHANGE_PIXELS_THRESHOLD};return r}}i.register("Launcher").asCtor(Bo).asProto().dependencies("IconCreatorParamsProvider, IconCreator, IconContentProvider, CommonEvents, Consts, ClickAuditManager, InitiatorManager, UiElementPositionTrackerCreator, HostData, SettingsValuesRetriever, LauncherDefaultIcon, WalkmeVisibleReporter, LauncherActions, CommonEvents");function Bo(e,t,n,r,o,a,s,u,l,c,d,f,p,r,g){var h=this;h.show=T,h.destroy=C,h.setTimeoutOn=b,h.isDrawn=w,h.display=I,h.removeDisplay=P,h.watchLauncherTimeout=null;var m,v,y,E;function S(){E=i.create("Highlighter",{element:g.element,settings:g.launcher.Settings,embedInElement:g.launcher.Settings.embedInParent,drawableType:"launcher",drawableId:g.launcher.Id,monitor:!0,defaultSettings:!1,cssKeysValues:[{id:g.launcher.Id,name:"launcher"}]})}function T(e){_().then(function(){f.report(),M(),e&&e(y)})}function C(e){v&&(v.destroy(),v=null),h.watchLauncherTimeout&&h.watchLauncherTimeout.clear(),B(),y=null,g.element=null,E=null,m=null,r.raiseEvent("LauncherDestroyed",{launcher:g.launcher}),e&&e()}function b(){v=u.create(g.element,function(){m&&(m.reposition(),F())}),v.track()}function w(){try{return R()}catch(e){return!1}}function I(){y.show();
}function P(){y.hide()}function _(){return m=k(),m.show().then(function(e){y=e.getOriginElement(),N(e);var t=U(g.launcher);t.applyBehavior(e);var n=x();n.applyBehavior(e),F(),"onHover"==g.launcher.Settings.displayStyle&&y.css("display","none")})}function k(){var n=A(),r=e.get(g.element,n);return t.create(r,g.element)}function A(){var e=D(),t={TemplateId:e.data.id,Type:e.type,Predefined:e},r=n.get(t);r||(r={mainImageUrl:e.data.url,hoverImageUrl:e.data.hover,clickImageUrl:e.data.click,text:e.data.customText,cssClassName:"custom-launcher-"+e.data.id,kind:e.data.url?o.ICON_CONTENT_KIND.Image:o.ICON_CONTENT_KIND.Text});var i={uniqueIdentifierType:"Launcher",uniqueIdentifierId:g.launcher.Id,isEmbedInElement:g.launcher.Settings.embedInParent,attachmentSide:g.launcher.Position,zindex:g.launcher.Settings["z-index"],perimeterType:g.launcher.Settings.context,isAnimated:g.launcher.Settings.animated,growingDirection:g.launcher.Settings.direction,positionTopCustomOffset:g.launcher.Settings.topOffset,positionLeftCustomOffset:g.launcher.Settings.leftOffset,contentElementCssClassNames:["walkme-launcher-image-div"],positionElementCssClassNames:O(),contentData:r};return i}function D(){return c.getSettingsValue(g.launcher.Settings,"imageObject",d)}function O(){var e=[];return e.push("walkme-launcher-id-"+g.launcher.Id),e.push("walkme-custom-launcher-outer-div"),e.push("walkme-text-launcher"),e}function N(e){if(g.launcher.Settings.embedInParent){var t=e.getTopMostElement();t.addClass("walkme-launcher-container"),t.addClass("walkme-launcher-container-id-"+g.launcher.Id)}}function x(){var e={clickAction:L()},t=i.create("ClickIconExecutionBehavior",e);return t}function L(){var e=function(){r.raiseEvent(o.EVENTS.Launchers.LauncherClicked,{launcherId:g.launcher.Id}),a.SendClickAudit(o.DEPLOYABLE_TYPE.Launcher,g.launcher.Id);var e={type:o.STEP_PLAY_INITIATOR_ENUM.LAUNCHER,objectId:g.launcher.Id};s.setForScope(e,function(){p.getAction(g.launcher).doAction()})};return e}function F(){E&&E.shouldShow()&&!l.isQuirksMode(g.element[0])&&E.highlight()}function M(){r.deprecatedRaiseEvent(o.EVENTS.Launchers.LauncherIsShown,{getId:function(){return g.launcher.Id},getName:function(){return g.launcher.Name}},{customText:D().data.customText,name:g.launcher.Name,launcherDiv:y,launcherId:g.launcher.Id,element:g.element,launcherData:g.launcher})}function B(){m&&m.destroy(),E&&E.unhighlightElement()}function R(){var e=y.parents("html").length>0;return e}function U(e){var t=c.getSettingsValue(e.Settings,"tooltip",""),n={tooltipText:t},r=i.create("TolltipIconUiBehavior",n);return r}S()}i.register("LaunchersModule").asCtor(Ro).dependencies("Consts, CommonUtils, CommonEvents, SettingsValuesRetriever, Logger,CustomCssSetter, TimerManager, TutorialsManager, ContentsManager, SurveysManager,FeaturesManager, ConditionCheckerFactory, LauncherActions");function Ro(e,t,n,r,o,a,s,u,l,c,d,p,g){var h=this;h.getLaunchers=v,h.setLaunchers=y,h.showLauncher=C,h.showAllLaunchers=E,h.getLauncherAction=T,h.releaseLaunchers=N;var m=[];function v(){return m}function y(e){g.reset(),m=e}function E(){try{for(var e=0;e<m.length;e++){var t=m[e],n=h.showLauncher(t);o.customerLog(cg("willDrawLauncher={0} for launcher with id {1}",n,t.Id),1,f)}}catch(r){o.error(r)}}function S(e){for(var t=0;t<m.length;t++)if(m[t].Id==e)return m[t]}function T(e){var t=S(e);return g.getAction(t)}function C(e,t){var n=d.isFeatureEnabled("hideLauncherWithoutLink");if(n&&!k(e))return!1;var i=r.getSettingsValue(e.Settings,"PlayLauncherConditionTree",null);return w(e,t,i)}function b(e,t){var n={featureName:f,elementName:e.Name,stopPollingAfterEvaluateTrue:!1},r=p.createOld(n);e.hoverLauncherEvaluator&&e.hoverLauncherEvaluator.cleanResources(),e.hoverLauncherEvaluator=r,r.onValueChanged(function(t){if(!t)return e.hoverDestroyTimeout=s.libSetTimeout(function(){e.drawable&&e.drawable.isDrawn()&&(e.hoverLauncherEvaluator.getCachedValue()||e.drawable.removeDisplay())},300),!1;e.hoverDestroyTimeout&&(e.hoverDestroyTimeout.clear(),e.hoverDestroyTimeout=void 0),e.drawable&&e.drawable.display()});var i,o=".walkme-launcher-id-"+e.Id;if(e.IdentifySettings.IsJquerySelector)i={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:e.IdentifySettings.JquerySelector},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:o},nodeDepth:0},nodeDepth:0};else{var a=A(e.IdentifySettings);i={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"ElementHoverSwitch",funcArgs:{IdentifySettings:a},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:o},nodeDepth:0},nodeDepth:0}}r.evaluateAsync(i)}function w(t,n,o){var a=!1,u=e.STICKY_TYPE.ONCE,l=r.getSettingsValue(t.Settings,e.IS_STICKY_SETTING_KEY,!1),c=!0;if(l&&parseInt(l)>0){var d=parseInt(r.getSettingsValue(t.Settings,e.STICKINESS_TYPE_SETTING_KEY,null));u=d==e.OLD_STICKIES.STICKINESS_TYPES.soft?e.STICKY_TYPE.SOFT:e.STICKY_TYPE.STRONG,c=!1}var p={logContext:t.Id,stickyType:u,isRemoveByCondition:1==t.Settings.condHide,elementVisibilityParams:{findElementParams:{IdentifySettings:t.IdentifySettings}},conditionCheckerParams:{featureName:f,elementName:t.Name},conditionTree:o,onShow:h,onRemove:v,trackUIChanges:!0},g=i.create("UIVisibilityManager",p);g.watchForVisibility(),t.uiVisibilityManager=g;function h(e){a=!0,I(t,e,m)}function m(){"onHover"===t.Settings.displayStyle&&b(t),y()}function v(){t.drawable&&t.drawable.destroy(),t.hoverLauncherEvaluator&&(t.hoverLauncherEvaluator.cleanResources(),t.hoverLauncherEvaluator=null)}function y(){t.drawable.watchLauncherTimeout=s.libSetTimeout(E,2e3)}function E(){t.drawable.isDrawn()?y():(v(),g.cleanResources(),g.watchForVisibility())}return a}function I(t,i,s){var u=r.getSettingsValue(t.Settings,"imageObject",""),l=P(i,u,t);if(l)return t.isContentSecure=!1,o.customerLog("Launcher ["+t.Id+"] will not be displayed. Launcher URL must be https in secure page",1),n.raiseEvent(e.EVENTS.Launchers.LauncherIsInsecure,{name:t.Name}),!1;t.isContentSecure=!0,a.setCustomCssIfNeeded(i);var c=x(i,t);t.drawable=c;var d=function(e){return function(){e.show(function(){e.setTimeoutOn(),s&&s()})}}(c);return _(t,d),!0}function P(e,t,n){if(void 0===typeof n.isContentSecure)return n.isContentSecure;var r=e[0].ownerDocument.location.href;if(!O(r)||"custom"!=t.type)return!1;if(!O(t.data.url)||!D(t.data.click)||!D(t.data.hover))return!0;return!1}function _(e,n){var i=t.isTrue(e.Settings,"hasDelay",!1);if(i){var o=r.getSettingsValue(e.Settings,"delayInSeconds",0);s.libSetTimeout(n,1e3*o)}else n()}function k(e){var t=e.Settings.action;switch(t.actionType){case"playWt":return null!=u.getById(parseInt(t.arguments.wtId));case"playContent":return null!=l.getById(parseInt(t.arguments.contentId));case"playSurvey":return null!=c.getById(parseInt(t.arguments.surveyId))}return!0}function A(e){var t=lg(e);return t.Sensitivity=e.StepSensitivity,t.StepSensitivity=void 0,t.IgnoreId=e.IsIgnoreId,t.IsIgnoreId=void 0,t.IgnoreText=e.IsIgnoreText,t.IsIgnoreText=void 0,t.IgnorePageIdentification=void 0,t.IsValidPageId=void 0,t}function D(e){return!e||O(e)}function O(e){return/^https/i.test(e)}function N(e,n,r){var i=function(e,t){e.uiVisibilityManager&&(e.uiVisibilityManager.cleanResources(),e.uiVisibilityManager=void 0),e.drawable?e.drawable.destroy(t):t&&t()};t.executeParallel({objectsArray:v(),functionsToExecute:[i],successCallback:function(){r||y([]),e&&e()}})}function x(e,t){return i.create("Launcher",{element:e,launcher:t})}}L.register(O.PLATFORM.Web,function(){i.register("LauncherDefaultIcon").asInstance({type:"shape",data:{shape:"round-question-mark",color:"blue"}})}),L.register(O.PLATFORM.MobileWeb,function(){i.register("LauncherDefaultIcon").asInstance({type:"htmlShape",data:{shape:"round-question-mark",color:"blue",customClass:"html-launcher-round-question-mark-blue",customText:"?"}})}),i.register("LauncherActions").asCtor(Uo).dependencies("SettingsValuesRetriever, Logger, ActionsFactory, Consts");function Uo(e,t,n,r){var i=this;i.reset=a,i.getAction=s;var o={};function a(){o={}}function s(i){if(o[i.Id])return o[i.Id];var a=e.getSettingsValue(i.Settings,"action",null);if(!a)return t.customerLog("No action core. aborting..."),null;return o[i.Id]=n.get(a.actionType,a.arguments,r.STEP_PLAY_INITIATOR_ENUM.LAUNCHER,i),o[i.Id]}}i.register("DocumentElementEventsBinder").asCtor(Vo).asProto().dependencies("wmjQuerySafe");function Vo(t){var n=this;n.on=r,n.off=i;function r(t,n,r,i){if(!r)return;r=[].concat(r);var o=e(t[0].ownerDocument);n=n||t;for(var a=0;a<r.length;a++)o.find(n).on(r[a],i)}function i(e,n,r){if(!r)return;r=[].concat(r);var i=t(e).getDocument();n=n||e;for(var o=0;o<r.length;o++)i.find(n).off(r[o])}}i.register("AuditTasksManager").asCtor(Wo).dependencies("EventSender, Consts, ReportInitiatorMapper, DeployableTypeToEventSenderAppTypeMapper, DeployablesManagerFactory, AuditingEnabledIndicator");function Wo(e,t,n,r,i,o){var a=this;a.auditTaskPlayed=u;function s(){}function u(a,s){if(!o.isEnabled())return;var u=i.get(a.RelatedDeployableType),l=u.getById(a.RelatedDeployableId);e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,{type:t.EVENT_SENDER_EVENT_APPS.Task,oId:a.Id,oName:a.Name,pId:"-1",aoId:l.Id,aoName:l.Name,aAppType:r.map(a.RelatedDeployableType),pInit:n.map(s)})}s.apply(null,arguments)}i.register("AuditSafeStartManager").asCtor(Go).dependencies("EventSender,ReportInitiatorMapper,Logger, Consts");function Go(e,t,n,r){var i=this;i.send=a;function o(){}function a(t){if(u(t)){var r=s(t);e.postEvent(e.EVENT_TYPES.PlayFailed,r)}else n.error(null,"params is not valid for send action in AuditSafeStartManager")}function s(e){return{oId:e.tutorialId,oName:e.tutorialName,pId:e.playGuid,pInit:t.map(e.playInitiator),status:e.status,type:r.EVENT_SENDER_ACTIONS.PlayWalkthru}}function u(e){return null!=e&&null!=e.tutorialId&&null!=e.playGuid&&null!=e.status}o.apply(null,arguments)}i.register("EndUsersManager").asCtor(Ho).dependencies("ClientStorageManager,Logger,JQueryElementFinder,GuidGenerator,CommonUtils, CommonEvents, Consts, MessageSender,IsInEditor");function Ho(e,t,n,r,i,o,a,s,u){var l=this;l.setEndUserSettings=y,l.getEndUserSettings=C,l.isWalkMeGeneratedEndUserType=b,l.getEndUserGuid=I,l.createEndUserGuid=w,l.getEndUserGuidSource=O,l.isEndUserGuidValid=E,l.calculateCustomEndUserGuid=_;var c,d,f,p,g=e.keysConfig.endUser.guid,h=e.keysConfig.endUser.forcedGenerate,m="endUser";function v(){}function y(e){c=e,o.raiseEvent(a.EVENTS.EndUserSettingsSet,{endUserSettings:e})}function E(){return!i.isValueTrue(c.FallbackDisabled)||T()||S()}function S(){var e=!0;return I(e)!==!1}function T(){return"walkme"==c.Method||"none"==c.Method}function C(){return c}function b(){var e=!0;return c&&(e=T()||!I(!0)),e}function w(){if(c||M("Cannot create end user guid before end user settings were set"),d)return;d=P(),d&&t.customerLog("getEndUserGuid: created endUserGuid-"+d,3,m)}function I(e){if(d||u.get()||M("Cannot get end user guid before it was created"),!e||!p)return d;return t.customerLog("Could not retrieve endUserGuid",3,m),!1}function P(){if(c){var e=l.calculateCustomEndUserGuid(c);return e?(f="Identifier",L(e)):e=k()||D(),e}}function _(e){if(!e)return;var r,o=e.Method,a=e.Parameters;switch(o){case"var":a.VarName&&(r=i.getWindowData(A.Var,a.VarName),x(r)&&(t.customerLog("endUserGuid - invalid variable name",1,m),r=void 0));break;case"salesforce":r=N();break;case"cookie":a.VarName&&(r=i.getWindowData(A.Cookie,a.VarName));break;case"jquery":a.VarName&&(r=n.getjQueryElementText(a.VarName))}var u={method:o,params:a};return r=s.send("EndUserRetrieved",u)||r}function k(){var e=F();if(e)return f="Cache",e}function D(){var e=!1;c&&"walkme"!=c.Method&&"none"!=c.Method?(f="Generated",e=!0):f="Identifier";var n=r.generateGuid();return t.customerLog("getEndUserGuid: generating new user guid-"+n+" isForced: "+e,3,m),L(n,e),n}function O(){return f}function N(){if(window.walkme_sf_vars)return window.walkme_sf_vars.userId}function x(e){return e&&e.nodeType}function L(t,n){e.saveData(g.key,t,g.expiry),n?(p=!0,e.saveData(h.key,1,h.expiry)):(p=!1,e.removeData(h.key))}function F(){return p=e.getData(h.key),e.getData(g.key)}function M(e){var n=new Error(e);throw t.error(n),n}v.apply(null,arguments)}i.register("EndUserLoggerManager").asCtor(jo).dependencies("ClientStorageManager, Logger, EndUsersManager, SiteConfigManager, AbCurrentPermutationProvider, RecorderServerManager, HostData, FeaturesManager, WmAjax, AuditSourceManager, UserGuidContainer");function jo(e,t,n,r,i,o,a,s,u,l,c){var d,f,p,g=this,h=e.keysConfig.endUserLogging.auditFreq,m=1e4,v="endUser";function y(){d=i.getCurrentPermutation}function E(){if(window.walkme_sf_vars)return window.walkme_sf_vars.organizationName}function S(){if(window.walkme_sf_vars)return window.walkme_sf_vars.organizationId}function T(){if(window.walkme_sf_vars)return window.walkme_sf_vars.roleId}function C(){if(!window.walkme_sf_vars)return;var e=lg(window.walkme_sf_vars);return delete e.organizationName,delete e.organizationId,delete e.userId,e}function b(){if(window.walkme_sf_vars&&window.walkme_sf_vars.walkme_error)return!0;return!1}function w(){return h.key+n.getEndUserGuid()}function I(){var e=window.walkme_sf_vars,n="walkme_sf_error:"+rg(e);t.customerLog(n,1,v)}function P(){return void 0===f&&(f=r.get().EndUserSettings&&r.get().EndUserSettings.logWalkMeVisible),f}g.reportEndUser=function(e,i){if(p)return;var f=r.get().EndUserSettings?r.get().EndUserSettings.auditFreq:null,g=P();if(g&&!f&&(f=1440),!f||g&&!i)return;var h=k();if(h)return void(p=!0);if(0===h)return t.customerLog("Loading WalkMe Failed due to ISV Limitations",1),void(e&&e());if(b())return void I();var y={permutationId:d(),endUserGuid:n.getEndUserGuid(),domain:window.location.host,source:l.get(),browser:a.browser.string,os:a.os.name,userGuid:c.getUserGuid()};s.isFeatureEnabled("dontReportSF")||(y.organizationName=E(),y.organizationId=S(),y.roleId=T(),y.extraData=C());var w="Logging WalkMe EndUser ("+n.getEndUserGuid()+"). Caused by WalkMe Visible : "+!!i;t.customerLog(w,1,v);var A=rg(y);p=!0;u.execute({dataType:"jsonp",url:o.get()+"/EndUser/AddEndUserData",data:{endUsersDataSerialized:A},timeout:m,success:function(t){"true"==t?_(f,1):"false"==t&&(_(f,0),e&&e())}})};function _(t,n){e.saveData(w(),n,h.expiryFunc(t))}function k(){return e.getData(w())}y.apply(null,arguments)}L.register([O.PLATFORM.Web,O.PLATFORM.Desktop],function(){i.register("screen").asInstance(screen)}),L.register(O.PLATFORM.MobileWeb,function(){i.register("screen").asCtor(Yo).dependencies("ExternalWalkMeConfig")});function Yo(e){var t=e.get("isEmulator");if(t)return{width:window.innerWidth,height:window.innerHeight};return screen}function zo(){var e=this,t=i.get("screen");e.getFuncList=function(){return s},e.getFuncAssert=function(){return u},e.getAsyncFuncs=function(){return l};var n=function(e){if(t.width>e.funcArgs.WidthInput)return!0;return!1},r=function(e){if(t.width<e.funcArgs.WidthInput)return!0;return!1},o=function(e){if(t.height>e.funcArgs.HeightInput)return!0;return!1},a=function(e){if(t.height<e.funcArgs.HeightInput)return!0;return!1},s={widthMoreThan:n,widthLessThan:r,heightMoreThan:o,heightLessThan:a},u=[],l=[]}i.register("ScreenSizeConditionFunctions").asCtor(zo).asSingleton().dependencies("screen");function Qo(){var e=this,t=i.get("win");e.getFuncList=function(){return a},e.getFuncAssert=function(){return s},e.getAsyncFuncs=function(){return u};function n(e,t,n){if(t==e.WindowSizeInput)return!1;return t>e.WindowSizeInput===n}var r=function(e){switch(e.funcArgs.SizeParameter){case"Width":return n(e.funcArgs,t.innerWidth||document.documentElement.clientWidth,!0);case"Height":return n(e.funcArgs,t.innerHeight||document.documentElement.clientHeight,!0)}},o=function(e){switch(e.funcArgs.SizeParameter){case"Width":return n(e.funcArgs,t.innerWidth||document.documentElement.clientWidth,!1);case"Height":return n(e.funcArgs,t.innerHeight||document.documentElement.clientHeight,!1)}},a={WindowSizeMoreThan:r,WindowSizeLessThan:o},s=[],u=[]}i.register("WindowSizeConditionFunctions").asCtor(Qo).asSingleton().dependencies("win");var qo=function(){function t(e,t,n,r){this.args=[];for(var i=0;i<arguments.length;i++)arguments[i]&&this.args.push(arguments[i])}return t.prototype.getFuncList=function(){var t={};return e.safeEach(this.args,function(n,r){r&&r.getFuncList&&e.extend(t,r.getFuncList())}),t},t.prototype.getFuncAssert=function(){var t=[];return e.safeEach(this.args,function(n,r){r&&r.getFuncAssert&&e.extend(t,r.getFuncAssert())}),t},t.prototype.getAsyncFuncs=function(){var t=[];return e.safeEach(this.args,function(e,n){n&&n.getAsyncFuncs&&t.push.apply(t,n.getAsyncFuncs())}),t},t}();i.register("ConditionFunctionsHandler").asCtor(qo).asSingleton().dependencies("ScreenSizeConditionFunctions, WindowSizeConditionFunctions, HistoricalConditionFunctions, OnboardingConditionFunctions");var Ko={};Ko.fixed=function(e){var t=new Ko.regular;return t.setValue(e),t},Ko.noMemory=function(){var e,t,n,r=this;function i(e){t=e}r.onGotValue=function(e){},r.getValue=function(e){if(e)return n;return n=t()},r.onResourceClean=function(t){e=t},r.cleanResources=function(){e&&e()},r.onRefresh=function(){},r.refresh=function(){},i.apply(null,arguments)},Ko.regular=function(){var e,t,n,r=this,i=[];function o(t){e=t}r.onGotValue=function(e){t=e},r.setValue=function(n){e=n,t&&t()},r.getValue=function(){return e},r.onResourceClean=function(e){i.push(e)},r.cleanResources=function(){for(var e=0;e<i.length;e++)try{i[e]()}catch(n){}i.length=0,t=void 0},r.onRefresh=function(e){n=e},r.refresh=function(){n&&n()},o.apply(null,arguments)},Ko.complex=function(){var e,t,n,r,i,o=this;function a(e,i,o){t=e,n=i,r=o}o.getValue=function(e){if(e)return i;return i=r(t.getValue,n.getValue)},o.onGotValue=function(e){t.onGotValue(e),n.onGotValue(e)},o.cleanResources=function(){t.cleanResources(),n.cleanResources(),e=void 0},o.refresh=function(){t.refresh(),n.refresh()},a.apply(null,arguments)},i.register("SonarEventHandler").asCtor(Xo).dependencies("FeaturesManager, Logger, ElementFinder, MessageSender, EventBinder");function Xo(e,t,n,r,i){var o=this;o.handleEvent=s,o.unbindEvent=l;var a=".mtCond";function s(i,o,a,s){var c=function(u){t.customerLog("An event was fired for condition checker result. (event:'"+o+"', element specified below) ",3),t.customerLog(i[0],3);var l=r.send("SonarEventRaised",{event:u});if(l)return;if(e.isFeatureEnabled("verifySonarAfterEvent")){var c=s(),d=u.srcElement||u.target;if(!c||c.length>0&&d&&!c.is(d))return t.customerLog("triggered element does not match condition selector",5),void a.setValue(!1)}n.wrapSession(function(){a.setValue(!0)})};u(i,o,c),a.onResourceClean(function(){l(i,o,c)})}function u(e,n,r){if(t.customerLog("Listening to event on element. (event:'"+n+"', element specified below) ",5),t.customerLog(e,5),e){var o=c(n,a);i.bind(e,o,r)}}function l(e,n,r){try{if(t.customerLog("Stopped listening for event in condition checker result. (event:'"+n+"', element specified below) ",5),t.customerLog(e,5),e){var o=c(n,a);i.unbind(e,o,r)}}catch(s){}}function c(e,t){return e.replace(/ /g,t+" ")+t}}i.register("ConditionFunctions").asCtor(Jo).dependencies("Lib,JQueryElementFinder,CommonUtils,HostData,TimerManager,LanguageManager,ConditionFunctionsHandler,UrlCommonStringsRemover,ConditionTreeUtils,Consts,ConditionBlocksManager,CookiesManager,ClientStorageManager,HtmlDecoder,LocationService,LocationMatcher,NewToOldConditionConverter,Logger,ArrayUtils,ClientOrServerStorageManager,AbTestingGoalsManagerInstance,SonarEventHandler,ExternalConditionsHandlers,DateConditions");function Jo(t,n,r,o,a,s,u,l,c,d,f,p,g,h,m,v,y,E,S,T,C,b,w,I){var P=this,_={TRUE:0,FALSE:1,CANNOT_ASSERT:2},k="jQuery",D="SelectedElement",O="Element",N=function(){var e={Id:-1,ElementDescription:"",StepIndex:-1,ConfigurationId:"1",Configuration:null,StepSensitivity:1,Type:-1,Settings:{},Duration:4,Delay:0};return e};function x(e,t){return r.isBigger(e,t)}function L(e,t){return r.isSmaller(e,t)}function F(e,t){return r.isLike(e,t)}function M(e,t){var n,r;try{t.regexText&&(r=new RegExp(t.regexText,t.regexFlags),n=r.exec(e))}catch(i){}return null!=n}function B(e){var t=e.split(":"),n=Number(t[0]),r=Number(t[1]);return 60*n+r}this.getElementTextForEditor=function(e){var t=ig(e);return P.getElementText(t)},this.getElementStrength=function(e){var n=ig(e),r=he(n),i={score:-1},o=t.findElement(r,null,i);if(o)return i.score},this.getElementText=function(n){var i=he(n),o=t.findElement(i,!1);return o!==!1&&r.checkElementText(e(o))};function R(t){var n=new RegExp("[ \t"+String.fromCharCode(160)+"\r\n\x0B\f]+","gi");return t=t.replace(n," "),t=e.trim(t)}function U(e){E.customerLog("jQuery find element for condition",5);var t=n.findElementsByjQueryComplexSelector(e.jQuerySelector);return E.customerLog(t,5),0===t.length&&(t=!1),t}function V(e,t){var n=function(){return U(e.funcArgs)};return Pe(t,e.pollingInterval,n)}function W(e,t,n,r){var i=function(){return U(e)};return ke(e,t,n,r,i)}var G=function(t){return t=e.extend(t,{pollingInterval:-1}),V(t,"hover")},H=function(e){return V(e,"hover")},j=function(t){return t=e.extend(t,{pollingInterval:-1}),V(t,"click mouseup mousedown")},Y=function(e){return V(e,"click mouseup mousedown")},z=function(t){return t=e.extend(t,{pollingInterval:-1}),V(t,"swipe")},Q=function(e){return V(e,"swipe")},q=function(e){return W(e.funcArgs,"mouseenter","mouseleave",e.pollingInterval)},K=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length>0},X=function(e){return 0==n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length},J=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length>parseInt(e.funcArgs.jQueryLength)},$=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length<parseInt(e.funcArgs.jQueryLength)},Z=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length==parseInt(e.funcArgs.jQueryLength)},ee=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length!=parseInt(e.funcArgs.jQueryLength)},te=function(e){var t=new Date(h.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),t-n==0},ne=function(e){return!te(e)},re=function(e){var t=new Date(h.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),n>=t},ie=function(e){var t=new Date(h.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),n<=t},oe=function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getDay()},ae=function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getMonth()},se=function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getFullYear()},ue=function(e){var t=new Date,n=60*t.getHours()+t.getMinutes();return n>=B(e.funcArgs.TimeInput)},le=function(e){var t=new Date,n=60*t.getHours()+t.getMinutes();return n<=B(e.funcArgs.TimeInput)},ce=function(e){var t=h.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(t.toLowerCase())==l.remove(m.getCurrentLocation().toLowerCase())},de=function(e){return!ce(e)},fe=function(e){var t=h.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(m.getCurrentLocation()).toLowerCase().indexOf(l.remove(t).toLowerCase())>=0},pe=function(e){return!fe(e)};function ge(e){return"boolean"==typeof e?e:1===e||0!==e&&("string"==typeof e?"true"==e.toLowerCase()||"1"==e||"false"!=e.toLowerCase()&&"0"!=e&&void 0:void 0)}function he(e){var t=N();return e.IdentifySettings?(t.ElementDescription=ig(rg(e.IdentifySettings.ElementDescription)),t.IsIgnoreText=void 0===e.IdentifySettings.IgnoreText?ge(e.IdentifySettings.IsIgnoreText):parseInt(e.IdentifySettings.IgnoreText),t.StepSensitivity=void 0===e.IdentifySettings.Sensitivity?parseInt(e.IdentifySettings.StepSensitivity):parseInt(e.IdentifySettings.Sensitivity),t.IsIgnoreId=void 0===e.IdentifySettings.IgnoreId?ge(e.IdentifySettings.IsIgnoreId):parseInt(e.IdentifySettings.IgnoreId),t.IgnorePosition=ge(e.IdentifySettings.IgnorePosition),t.IsIdentifyByText=ge(e.IdentifySettings.IsIdentifyByText),t.IgnorePageIdentification=ge(e.IdentifySettings.IgnorePageIdentification),t.IsValidPageId=ge(e.IdentifySettings.IsValidPageId),e.IdentifySettings.ElementDescription&&e.IdentifySettings.ElementDescription.p&&(t.IsJquerySelector=ge(e.IdentifySettings.IsJquerySelector),t.JquerySelector=e.IdentifySettings.JquerySelector)):t.ElementDescription=ig(rg(e.ElementDescription)),t}var me=function(e){var t=we(e.funcArgs);return l.remove(t).toLowerCase()==l.remove(m.getCurrentUrlPath()).toLowerCase()},ve=function(e){return!me(e)},ye=function(e){var t=we(e.funcArgs);return m.getCurrentUrlPath().toLowerCase().indexOf(t.toLowerCase())>=0},Ee=function(e){return!ye(e)},Se=function(e){var t=we(e.funcArgs),n=l.remove(m.getCurrentUrlPath()),r=l.remove(t);return F(n,r)},Te=function(e){return!Se(e)},Ce=function(e){var t=l.remove(m.getCurrentUrlPath()),n=e.funcArgs.UrlInput;return M(t,n)},be=function(e){return!Ce(e)};function we(e){return h.decodeHtml(e.UrlInput,["&"])}var Ie=function(e){var n=he(e.funcArgs);return 0!=t.findElement(n,!1)};function Pe(e,t,n){var r,i,o=new Ko.regular((!1));function s(){E.customerLog("Poll Element: start search for element (polling: "+t>"0)",5),r&&r.clear();var u=!!i&&_e(i);u||(b.unbindEvent(i,e),i=n(),E.customerLog("Poll Element: element matched: ",5),E.customerLog(i,5),i?b.handleEvent(i,e,o,n):t>=0&&o.setValue(!1)),t>=0&&(r=a.libSetTimeout(s,t))}return o.onResourceClean(function(){t=-1}),o.onRefresh(function(){o.getValue()&&o.setValue(!1),s()}),o.getValue()||s(),o}function _e(e){var t;try{t=e[0].ownerDocument}catch(n){return!1}var r=t.defaultView||t.parentWindow;if(!r||r.top!=window.top||!e.is(":mt_visible"))return!1;return!0}function ke(e,t,n,r,i){var o,a=function(e){return e?o:o=i()},s=new Ko.regular,u=Pe(t,r,function(){return a(!1)}),l=Pe(n,r,function(){return a(!0)});return u.onGotValue(function(){u.getValue()&&s.setValue(!0)}),l.onGotValue(function(){l.getValue()&&s.setValue(!1)}),s.onResourceClean(function(){u.cleanResources(),l.cleanResources()}),s}function Ae(e){var n=he(e);E.customerLog("Find element for condition",5);var r=t.findElement(n,null);return E.customerLog(r,5),r}function De(e,t){var n=function(){return Ae(e.funcArgs)};return Pe(t,e.pollingInterval,n)}function Oe(e,t,n){var r=function(){return Ae(e.funcArgs)};return ke(e.funcArgs,t,n,e.pollingInterval,r)}var Ne=function(t){return t=e.extend(t,{pollingInterval:-1}),De(t,"hover")},xe=function(e){return De(e,"hover")},Le=function(t){return t=e.extend(t,{pollingInterval:-1}),De(t,"click mouseup mousedown")},Fe=function(e){return De(e,"click mouseup mousedown")},Me=function(t){return t=e.extend(t,{pollingInterval:-1}),De(t,"swipe")},Be=function(e){return De(e,"swipe")},Re=function(e){return Oe(e,"mouseenter","mouseleave")},Ue=function(e){return!Ie(e)},Ve=function(e){var n=he(e.funcArgs);return 0!=t.findElement(n,!0)},We=function(e){return!Ve(e)},Ge=function(n){var r=he(n.funcArgs),i=t.findElement(r,!1);return e(i).is(":checked")},He=function(e){return!Ge(e)};function je(e,t){return M(e,t)}function Ye(e,t){return!je(e,t)}function ze(e,t){var n=h.decodeHtml(t,["&",'"',"'",">","<"]);return e!==!1&&R(e.toLowerCase())==R(n.toLowerCase())}function Qe(e,t){return!ze(e,t)}function qe(e,t){var n=h.decodeHtml(t,["&",'"',"'",">","<"]);return e!==!1&&F(R(e),R(n))}function Ke(e,t){return!qe(e,t)}function Xe(e,t){return e!==!1&&x(e,t)}function Je(e,t){return e!==!1&&L(e,t)}function $e(t,n){return t=e.trim(t),t.length<parseInt(n)}function Ze(t,n){return t=e.trim(t),t.length==parseInt(n)}function et(t,n){return t=e.trim(t),t.length>parseInt(n)}function tt(t){var n=e.grep(t.split(/\s+/),function(e){return 0!=e.length}).length;return n}function nt(e,t){return tt(e)<parseInt(t)}function rt(e,t){return tt(e)==parseInt(t)}function it(e,t){return tt(e)>parseInt(t)}function ot(e){if(!e)return!1;if(!isNaN(e))return!0;if(/^[+-]?(?=.)(\d{1,3}(,\d{3})*)?(\.\d+)?$/.test(e))return!0;if(!isNaN(e.replace(",",".")))return!0;if(/^[+-]?(?=.)(\d{1,3}(\.\d{3})*)?(,\d+)?$/.test(e))return!0;return!1}function at(e){return!ot(e)}function st(e){return I.isStringDate(e)}function ut(e){return!st(e)}function lt(e){var t=/((2[0-4])|([0-1]?[0-9])):([0-5][0-9])[^:]*/,n=e.match(t);return null!=n&&e==n[0]}function ct(e){return!lt(e)}function dt(e){var t=/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/,n=e.match(t);return null!=n&&e==n[0]}function ft(e){return!dt(e)}function pt(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function gt(e){return!pt(e)}function ht(e){var t=/(https?:\/\/)?[-a-zA-Z0-9@:%_\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/,n=e.match(t);return null!=n&&e==n[0]}function mt(e){return!ht(e)}function vt(e,t){var n=I.parseTwoDigitDateString(e);return n&&n.getDay()==t}function yt(e,t){var n=I.parseTwoDigitDateString(e);return n&&n.getDay()!=t}var Et=function(e){return!!e.funcArgs.getSelectedElement()},St=function(e){return!Et(e)},Tt=function(t){return e(t.funcArgs.getSelectedElement()).is(":checked")},Ct=function(e){return!Tt(e)},bt=function(e){return!!e.funcArgs.getSelectedElement()},wt=function(e){return!bt(e)},It=function(e){var t=h.decodeHtml(e.funcArgs.UrlInput,["&"]);if(0==t.indexOf("regexp:"))return v.isLocationMatchString(t);var n=l.remove(m.getCurrentLocation()),r=l.remove(t);return F(n,r)},Pt=function(e){return!It(e)},_t=function(e){var t=l.remove(m.getCurrentLocation()),n=e.funcArgs.UrlInput;return M(t,n)},kt=function(e){return!_t(e)},At=function(e){var t=h.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(t.toLowerCase())==l.remove(kr().toLowerCase())},Dt=function(e){return!At(e)},Ot=function(e){var t=h.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(kr().toLowerCase()).indexOf(l.remove(t.toLowerCase()))>=0},Nt=function(e){return!Ot(e)},xt=function(e){var t=h.decodeHtml(e.funcArgs.UrlInput,["&"]),n=l.remove(kr()),r=l.remove(t);return F(n,r)},Lt=function(e){return!xt(e)},Ft=function(e){var t=l.remove(kr()),n=e.funcArgs.UrlInput;return M(t,n)},Mt=function(e){return!Ft(e)},Bt=function(e){return F(o.browser.string,"*"+e.funcArgs.BrowserName+"*")},Rt=function(e){return!Bt(e)},Ut=function(e){return window.self!==window.top},Vt=function(e){return!Ut(e)},Wt=4e3,Gt=function(e){var t=g.getData(d.PASS_OWNERSHIP.NEW_WINDOW_TIME_KEY);if(!t)return!1;var n=((new Date).getTime()-t)/2,r=n>Wt?Wt:jt(n,Wt)*Wt;return i.get("WalkmeLoadTimeManager").getWalkmeLoadTime()+r>t},Ht=function(e){return!Gt(e)};function jt(e,t){return e/=t,e--,Math.sqrt(1-e*e)}var Yt=function(e){var t=p.getCookie(e.funcArgs.CookieName),n=h.decodeHtml(e.funcArgs.CookieInput,["&",'"',"'"]);return t!==!1&&t.toLowerCase()==n.toLowerCase()},zt=function(e){return!Yt(e)},Qt=function(e){var t=p.getCookie(e.funcArgs.CookieName);return t!==!1&&x(t,e.funcArgs.CookieInput)},qt=function(e){var t=p.getCookie(e.funcArgs.CookieName);return t!==!1&&L(t,e.funcArgs.CookieInput)},Kt=function(e){var t=p.getCookie(e.funcArgs.CookieName),n=h.decodeHtml(e.funcArgs.CookieInput,["&",'"',"'"]);return t!==!1&&F(t,n)},Xt=function(e){return!Kt(e)},Jt=function(e){var t=p.getCookie(e.funcArgs.CookieName);return t!==!1},$t=function(e){return!Jt(e)},Zt=function(e){var t=T.getData(e.funcArgs.DataKey,void 0);if(void 0===t)return!1;null===t&&(t="null");var n=h.decodeHtml(e.funcArgs.DataValue,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()},en=function(e){return!Zt(e)},tn=function(e){var t=T.getData(e.funcArgs.DataKey,void 0);if(void 0===t)return!1;return x(t,e.funcArgs.DataValue)},nn=function(e){var t=T.getData(e.funcArgs.DataKey,void 0);if(void 0===t)return!1;return L(t,e.funcArgs.DataValue)},rn=function(e){var t=T.getData(e.funcArgs.DataKey,void 0);
if(void 0===t||null===t)return!1;var n=h.decodeHtml(e.funcArgs.DataValue,["&",'"',"'"]);return F(t,n)},on=function(e){return!rn(e)},an=function(e){var t=T.getData(e.funcArgs.DataKey,void 0);return void 0!==t},sn=function(e){return!an(e)},un=function(e){var t=r.getWindowData(A.Var,e.funcArgs.WindowVarName),n=h.decodeHtml(e.funcArgs.WindowVarInput,["&",'"',"'"]);return void 0!==t&&null!==t&&t.toString().toLowerCase()==n.toLowerCase()},ln=function(e){return!un(e)},cn=function(e){var t=r.getWindowData(A.Var,e.funcArgs.WindowVarName);return void 0!==t&&x(t,e.funcArgs.WindowVarInput)},dn=function(e){var t=r.getWindowData(A.Var,e.funcArgs.WindowVarName);return void 0!==t&&L(t,e.funcArgs.WindowVarInput)},fn=function(e){var t=r.getWindowData(A.Var,e.funcArgs.WindowVarName),n=h.decodeHtml(e.funcArgs.WindowVarInput,["&",'"',"'"]);return void 0!==t&&null!==t&&F(t.toString(),n)},pn=function(e){return!fn(e)},gn=function(e){var t=r.getWindowData(A.Var,e.funcArgs.WindowVarName);return void 0!==t&&null!==t},hn=function(e){return!gn(e)},mn=function(e){var t=r.getWindowData(A.Var,e.funcArgs.WindowVarName);return M(t,e.funcArgs.WindowVarInput)},vn=function(e){return!mn(e)},yn=function(e){var t=s.getCurrentLanguage();""===t&&(t="default");var n=h.decodeHtml(e.funcArgs.LanguageName,["&",'"',"'"]);return n.toLowerCase()==t.toLowerCase()},En=function(e){return!yn(e)},Sn=function(e){var t=s.getCurrentLanguage();""===t&&(t="default");var n=h.decodeHtml(e.funcArgs.LanguageName,["&",'"',"'"]);return F(t,n)},Tn=function(e){return!Sn(e)},Cn=function(e){var t=parseInt(e.funcArgs.GoalId);return C.value&&C.value.isGoalReached(t)},bn=function(e){return!Cn(e)},wn=function(e){return!!Pn(e)},In=function(e){var t=Pn(e);return null==t?null:!t};function Pn(e){var t=parseInt(e.funcArgs.TaskId),n=parseInt(e.funcArgs.GoalId);return i.get("TodoListManager").isTaskGoalReached(t,n)}var _n=function(t){var n=e("#tsidLabel"),r=h.decodeHtml(t.funcArgs.SfTabInput.toString(),["&",'"',"'",">","<"]);return 0!=n.length&&R(n.text().toLowerCase())==R(r.toLowerCase())},kn=function(e){return!_n(e)},An=function(t){var n=e("#tsidLabel"),r=h.decodeHtml(t.funcArgs.SfTabInput,["&",'"',"'",">","<"]);return 0!=n.length&&R(n.text().toLowerCase()).indexOf(R(r.toLowerCase()))>=0},Dn=function(e){return!An(e)},On={Accounts:"salesforce.com/001/",Contacts:"salesforce.com/003/",Opportunities:"salesforce.com/006/",Documents:"salesforce.com/015/",Cases:"salesforce.com/500/",Solutions:"salesforce.com/501/",Contracts:"salesforce.com/800/",Reports:"salesforce.com/00O/",Leads:"salesforce.com/00Q/",Dashboards:"salesforce.com/01Z/",CustomTabs1:"salesforce.com/a00/",Products:"salesforce.com/a01/"},Nn={MainPage:"o",New:"e"},xn=function(e){var t=e.funcArgs.SfType,n=e.funcArgs.SfModoule,r={funcArgs:{UrlInput:""+On[t]+Nn[n]}};return fe(r)},Ln=function(e){return!xn(e)},Fn=function(e){if(e.funcArgs.conditionBlockId>0)return f.activateById(e.funcArgs.conditionBlockId,void 0);return!1},Mn=function(e,t){var n=r.getWindowData(A.Var,e);return void 0!==n&&null!==n&&t(n)},Bn="walkMeWorkday.segmentation.flow.forms";this.WORKDAY_FORMS_VAR_NAME=Bn;var Rn=function(e){return Mn(Bn,function(t){return t[e.funcArgs.FormInput]})},Un=function(e){return!Rn(e)},Vn=function(e){return Mn(Bn,function(t){var n=h.decodeHtml(e.funcArgs.FormInput,["&",'"',"'"]);for(var r in t)if(r.toLowerCase().indexOf(n.toLowerCase())>=0)return!0;return!1})},Wn=function(e){return!Vn(e)},Gn=function(e){return Mn(Bn,function(t){var n=h.decodeHtml(e.funcArgs.FormInput,["&",'"',"'"]);for(var r in t)if(F(r,n))return!0;return!1})},Hn=function(e){return!Gn(e)},jn=function(e){return Mn(Bn,function(t){var n=0;for(var r in t)n++;return n.toString()===e.funcArgs.FormInput})},Yn=function(e){return r.getWindowData(A.Var,Bn)},zn=function(e){return!Yn(e)},Qn="walkMeWorkday.segmentation.flow.page";this.WORKDAY_PAGE_VAR_NAME=Qn;var qn=function(e){return Mn(Qn,function(t){var n=h.decodeHtml(e.funcArgs.PageInput,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()})},Kn=function(e){return!qn(e)},Xn=function(e){return Mn(Qn,function(t){var n=h.decodeHtml(e.funcArgs.PageInput,["&",'"',"'"]);return t.toLowerCase().indexOf(n.toLowerCase())>=0})},Jn=function(e){return!Xn(e)},$n=function(e){return Mn(Qn,function(t){var n=h.decodeHtml(e.funcArgs.PageInput,["&",'"',"'"]);return F(t,n)})},Zn=function(e){return!$n(e)},er=function(e){return Mn(Qn,function(e){if(""===e)return!1;return!0})},tr=function(e){return!er(e)},nr="walkMeWorkday.segmentation.flow.subPage";this.WORKDAY_SUB_PAGE_VAR_NAME=nr;var rr=function(e){return Mn(nr,function(t){var n=h.decodeHtml(e.funcArgs.SubPageInput,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()})},ir=function(e){return!rr(e)},or=function(e){return Mn(nr,function(t){var n=h.decodeHtml(e.funcArgs.SubPageInput,["&",'"',"'"]);return t.toLowerCase().indexOf(n.toLowerCase())>=0})},ar=function(e){return!or(e)},sr=function(e){return Mn(nr,function(t){var n=h.decodeHtml(e.funcArgs.SubPageInput,["&",'"',"'"]);return F(t,n)})},ur=function(e){return!sr(e)},lr=function(e){return Mn(nr,function(e){if(""===e)return!1;return!0})},cr=function(e){return!lr(e)},dr="walkMeWorkday.segmentation.worklets";function fr(e){return Mn(dr,function(t){return t&&t[e.funcArgs.workletUid]})}function pr(e){return!fr(e)}var gr="walkMeWorkday.segmentation.inbox";function hr(e){return Mn(gr,function(t){return t&&t[e.funcArgs.inboxItemUid]})}function mr(e){return!hr(e)}var vr={jQueryTrue:K,jQueryFalse:X,jQueryLengthBigger:J,jQueryClicked:j,jQueryClickedSticky:Y,jQueryHovered:G,jQueryHoveredSticky:H,jQueryHoverSwitch:q,jQuerySwiped:z,jQuerySwipedSticky:Q,jQueryLengthSmaller:$,jQueryLengthEquals:Z,jQueryLengthNotEquals:ee,UrlEquals:ce,UrlNotEquals:de,UrlContains:fe,UrlNotContains:pe,UrlLike:It,UrlNotLike:Pt,UrlIsPerRegularExpression:_t,UrlIsNotPerRegularExpression:kt,UrlPathEquals:me,UrlPathNotEquals:ve,UrlPathContains:ye,UrlPathNotContains:Ee,UrlPathLike:Se,UrlPathNotLike:Te,UrlPathIsPerRegularExpression:Ce,UrlPathIsNotPerRegularExpression:be,DateEquals:te,DateNotEquals:ne,DateFrom:re,DateUntil:ie,DateIsDay:oe,DateIsMonth:ae,DateIsYear:se,TimeFrom:ue,TimeUntil:le,ReferrerUrlEquals:At,ReferrerUrlNotEquals:Dt,ReferrerUrlContains:Ot,ReferrerUrlNotContains:Nt,ReferrerUrlLike:xt,ReferrerUrlNotLike:Lt,ReferrerUrlIsPerRegularExpression:Ft,ReferrerUrlIsNotPerRegularExpression:Mt,ElementExists:Ie,ElementNotExist:Ue,ElementVisible:Ve,ElementNotVisible:We,ElementClicked:Le,ElementClickedSticky:Fe,ElementHovered:Ne,ElementHoveredSticky:xe,ElementHoverSwitch:Re,ElementSwiped:Me,ElementSwipedSticky:Be,ElementSelected:Ge,ElementNotSelected:He,BrowserEquals:Bt,BrowserNotEquals:Rt,ContainerIsIframe:Ut,ContainerNotIframe:Vt,WindowIsNew:Gt,WindowIsNotNew:Ht,CookieExists:Jt,CookieNotExists:$t,CookieEquals:Yt,CookieNotEquals:zt,CookieBigger:Qt,CookieSmaller:qt,CookieLike:Kt,CookieNotLike:Xt,WalkMeDataExists:an,WalkMeDataNotExists:sn,WalkMeDataEquals:Zt,WalkMeDataNotEquals:en,WalkMeDataBigger:tn,WalkMeDataSmaller:nn,WalkMeDataLike:rn,WalkMeDataNotLike:on,LanguageEquals:yn,LanguageNotEquals:En,LanguageLike:Sn,LanguageNotLike:Tn,WindowVarEquals:un,WindowVarNotEquals:ln,WindowVarBigger:cn,WindowVarSmaller:dn,WindowVarLike:fn,WindowVarNotLike:pn,WindowVarExists:gn,WindowVarNotExists:hn,WindowVarIsPerRegularExpression:mn,WindowVarIsNotPerRegularExpression:vn,TaskGoalReached:wn,TaskGoalNotReached:In,ExperimentGoalReached:Cn,ExperimentGoalNotReached:bn,SalesforceTabEquals:_n,SalesforceTabNotEquals:kn,SalesforceTabContains:An,SalesforceTabNotContains:Dn,SalesforceUrlEquals:xn,SalesforceUrlNotEquals:Ln,ConditionBlockTrue:Fn,FormEquals:Rn,FormNotEquals:Un,FormContains:Vn,FormNotContains:Wn,FormLike:Gn,FormNotLike:Hn,FormCount:jn,FormExists:Yn,FormNotExists:zn,PageEquals:qn,PageNotEquals:Kn,PageContains:Xn,PageNotContains:Jn,PageLike:$n,PageNotLike:Zn,PageExists:er,PageNotExists:tr,SubPageEquals:rr,SubPageNotEquals:ir,SubPageContains:or,SubPageNotContains:ar,SubPageLike:sr,SubPageNotLike:ur,SubPageExists:lr,SubPageNotExists:cr,SelectedElementVisible:Et,SelectedElementNotVisible:St,SelectedElementSelected:Tt,SelectedElementNotSelected:Ct,SelectedElementExists:bt,SelectedElementNotExist:wt,WorkletExists:fr,WorkletNotExists:pr,InboxItemExists:hr,InboxItemNotExists:mr},yr={TextPerRegularExpression:je,TextNotPerRegularExpression:Ye,TextEquals:ze,TextNotEquals:Qe,TextLike:qe,TextNotLike:Ke,TextEmpty:ze,TextNotEmpty:Qe,TextBigger:Xe,TextSmaller:Je,TextLengthIsLessThan:$e,TextLengthIsEqualTo:Ze,TextLengthIsGreaterThan:et,TextWordCountIsLessThan:nt,TextWordCountIsEqualTo:rt,TextWordCountIsGreaterThan:it,TextNumeric:ot,TextNotNumeric:at,TextIsDate:st,TextIsNotDate:ut,TextIsTime:lt,TextIsNotTime:ct,TextIsUSPhoneNumber:dt,TextIsNotUSPhoneNumber:ft,TextIsEmail:pt,TextIsNotEmail:gt,TextIsWebAddress:ht,TextIsNotWebAddress:mt,TextIsDayOfWeek:vt,TextIsNotDayOfWeek:yt};for(var Er in yr)yr.hasOwnProperty(Er)&&(Sr(yr[Er],Er),Tr(yr[Er],Er),Cr(yr[Er],Er));function Sr(e,t){var r=k+t;vr[r]=function(t){var r=n.getjQueryElementText(t.funcArgs.jQuerySelector);return t.funcArgs.jQueryText||""==t.funcArgs.jQueryText?e.call(this,r,t.funcArgs.jQueryText):e.call(this,r)}}function Tr(t,n){var i=D+n;vr[i]=function(n){var i=r.checkElementText(e(n.funcArgs.getSelectedElement()));return n.funcArgs.ElementText||""==n.funcArgs.ElementText?t.call(this,i,n.funcArgs.ElementText):t.call(this,i)}}function Cr(e,t){var n=O+t;vr[n]=function(t){var n=P.getElementText(t.funcArgs);if(n===!1)return!1;return t.funcArgs.ElementText||""==t.funcArgs.ElementText?e.call(this,n,t.funcArgs.ElementText):e.call(this,n)}}e.extend(vr,u.getFuncList());var br=[];br.LanguageEquals=!1,br.LanguageNotEquals=!1,br.LanguageLike=!1,br.LanguageNotLike=!1,br.TaskGoalReached=!1,br.TaskGoalNotReached=!1,br.jQueryClicked=!1,br.jQueryClickedSticky=!1,br.jQueryHovered=!1,br.jQueryHoveredSticky=!1,br.jQuerySwiped=!1,br.jQuerySwipedSticky=!1,br.ElementClicked=!1,br.ElementClickedSticky=!1,br.ElementHovered=!1,br.ElementHoveredSticky=!1,br.ElementSwiped=!1,br.ElementSwipedSticky=!1,br.ExperimentGoalReached=!1,br.ExperimentGoalNotReached=!1,e.extend(br,u.getFuncAssert());var wr=["ElementClicked","ElementHovered","ElementHoverSwitch","jQueryClicked","jQueryHovered","jQueryHoverSwitch","jQuerySwiped","ElementSwiped","LikelyToChurn","TeachMeQuizCompletion","StepPlayed","StepNotPlayed","StepCompleted","StepNotCompleted","StepExists","StepNotExists","StepCanPlay","StepCannotPlay","StepIsVisible","StepIsNotVisible"];wr.push.apply(wr,u.getAsyncFuncs()),this.isFuncAsync=function(e){return S.inArray(e,wr)>=0};var Ir=["jQueryHoveredSticky","jQueryClickedSticky","jQuerySwipedSticky","ElementClickedSticky","ElementHoveredSticky","ElementSwipedSticky"];this.isFuncSticky=function(e){return S.inArray(e,Ir)>=0},this.hasCoreFunction=function(e){return!!vr[e]},this.getFunctionsByLibNameType=function(e){return vr[e]||w.get(e)},this.canAssertFunction=function(e){return vr[e]?void 0==br[e]||0!=br[e]:w.canAssert(e)};function Pr(e,n){if(!n.identifySettings)return;if(c.checkIfTreeContainsSelectedElement(e)){var r=n.identifySettings;e.funcArgs.getSelectedElement=function(){return t.findElement(r,!1)}}}this.evaluationPreviewForEditor=function(e){var t=ig(e);return Pr(t.node,t),P.evaluationPreview(t.node)},this.evaluationPreview=function(e){var t=this.getFunctionsByLibNameType(e.funcName);if(!this.canAssertFunction(e.funcName))return _.CANNOT_ASSERT;var n={funcArgs:e.funcArgs,conditionId:-1,pollingInterval:-1},r=t(n);return r instanceof Ko.regular&&(r=r.getValue()),r?_.TRUE:_.FALSE},this.evaluationTreePreviewForEditor=function(e){var t=ig(e);return _r(t),Ar(t)};function _r(e){e.node&&e.node.Root&&(e.node=y.convert(e.node.Root))}var kr=function(){return document.referrer};function Ar(e){function t(n){if("Func"==n.nodeType)return Pr(n,e),P.evaluationPreview(n);var r=t(n.leftSon),i=t(n.rightSon);if("And"==n.nodeType){if(r==_.TRUE&&i==_.TRUE)return _.TRUE;if(r==_.CANNOT_ASSERT||i==_.CANNOT_ASSERT)return _.CANNOT_ASSERT;return _.FALSE}if("Or"==n.nodeType){if(r==_.TRUE||i==_.TRUE)return _.TRUE;if(r==_.CANNOT_ASSERT||i==_.CANNOT_ASSERT)return _.CANNOT_ASSERT;return _.FALSE}}var n=e.node;if(null==n)return _.TRUE;return t(n)}}i.register("DateConditions").asCtor($o).dependencies("CommonUtils");function $o(e){var t=this,n="([1-9]\\d?|0?[1-9])",r="([1-9]\\d\\d\\d)",i="[.\\-/ ]",o="("+i+")",a=2e3;t.isStringDate=function(t){var i=e.formatString("(({0}{2}{0}\\4{1})|({1}{2}{0}\\9{0})|({0}{2}{0}\\14{0}))",n,r,o),a=new RegExp(i,"i"),s=a.exec(t);return null!=s&&t==s[0]},t.parseTwoDigitDateString=function(e){var t,n=e.split(new RegExp(i,"i")),r=parseInt(n[1]),o=parseInt(n[0]),c=l(n[2])?parseInt(n[2])+a:null;return s(o)&&u(r,o,c)&&c&&(t=new Date(c,o-1,r)),t};function s(e){return e>0&&e<=12}function u(e,t,n){return e>0&&e<=new Date(n,t,0).getDate()}function l(e){return e&&2==e.length}}i.register("ExternalConditionsHandlers").asCtor(Zo).dependencies("Logger,PendingResultsContainer,ExternalHandlerWrapper");function Zo(t,n,r){var o=this,a={},s=t.wrapCustomerLog(T);o.get=u,o.register=l,o.canAssert=c;function u(e){if(!e)throw new Error("A handler name must be defined");var t=r.get(e,a[e]&&a[e].func);return s("Got a "+(a[e]?"real":"dummy")+" handler for "+e),t}function l(e,t,n){if(s("Register called for "+e+" function."),!e||!t)throw new Error("Name and handler must be defined.");if(d(e))throw new Error(e+" is a core condition. Core conditions cannot be overridden.");s((a[e]?"Replacing":"Registering")+" a condition handler for "+e),a[e]={func:t,canAssert:!!n&&!!n.editorPreview},f(e)}function c(e){if(!a[e])return!1;return a[e].canAssert}function d(e){return!!i.get("ConditionFunctions").hasCoreFunction(e)}function f(t){var r=n.get(t);s(t+" had "+r.length+" pending results."),e(r).each(function(e,n){a[t].func(n.asyncResult,n.params)}),s("Finished handling pending results for "+t)}}i.register("PendingResultsContainer").asCtor(ea).dependencies("Logger,EventSenderErrorLogger");function ea(t,n){var r=this;r.add=l,r.get=c;var i=100,o={},a=t.wrapCustomerLog(T),s=!1,u=0;function l(e,t,n){var r=d(e);f(t,e),r.push({asyncResult:t,params:n}),u++,f(t,e),a("Pending result for "+e+" added."),g()}function c(e){var t=o[e];return t?(a("Returning "+t.length+"pending results for "+e),o[e]=void 0,u-=t.length):a(e+" doesn't have pending results."),t||[]}function d(e){var t=o[e];return t||(t=[],o[e]=t),t}function f(e,t){e.onResourceClean(function(){p(t,e)})}function p(t,n){var r=o[t];r&&(o[t]=e(r).filter(function(e,t){return t.asyncResult!=n}).toArray())}function g(){u>i&&!s&&(n.logError("ExternalConditionsHandler: The Pending results excceded the the current threshold.",{threshold:i}),s=!0)}}i.register("ExternalHandlerWrapper").asCtor(ta).dependencies("PendingResultsContainer");function ta(e){var t=this;t.get=n;function n(e,t){return t?i(t):r(e)}function r(t){return function(n){var r=new Ko.regular((!1));return e.add(t,r,n),r}}function i(e){return function(t){var n=new Ko.regular((!1));return e(n,t),n}}}var na=function(){function e(t,n,r,i,o,a,s,u,l){this.timerManager=t,this.conditionFunctions=n,this.uiChangeTracker=r,this.commonEvents=a,this.consts=s,this.debuggerManager=u,l=l||{},this._conditionCheckerPollingIntervalMs=l.evaluationPollingIntervalMs&&!l.onlyPollConditionFunctions?l.evaluationPollingIntervalMs:e.NO_POLLING,this._conditionFunctionsPollingInterval=l.evaluationPollingIntervalMs||e.NO_POLLING,this._getSelectedElement=l.getSelectedElement,this._stopPollingAfterEvaluateTrue=void 0===l.stopPollingAfterEvaluateTrue||l.stopPollingAfterEvaluateTrue,this._evaluateSonar=void 0===l.evaluateSonar||l.evaluateSonar,this._featureName=l.featureName,this._elementName=l.elementName,this._trackUIChange=l.trackUIChange,this._logger=i.wrapCustomerLog("ConditionChecker"),this._subTreesResults={},e.registerInstance(this),l=null}return e.prototype.getCurrentEvaluationValueAndStopEvaluating=function(e){this.onValueChanged(void 0),this.evaluateAsync(e);var t=this.getCachedValue();return this.cleanResources(),t},e.prototype.getValue=function(){var e=!1;return this.innerGetValue(e)},e.prototype.innerGetValue=function(e){return this._result.getValue(e)},e.prototype.getCachedValue=function(){var e=!0;return this.innerGetValue(e)},e.prototype.isPollingEvaluation=function(){return this._conditionCheckerPollingIntervalMs>=0&&!this._isStopEvaluate},e.prototype.cleanResources=function(){this._oldValue=!1,this._isStopEvaluate=!0,this._logger(this._elementName+" - ConditionChecker cleans resources",5,this._featureName),this.cleanResultAndTimer(),this.uiChangeTracker.unbind(this._uiChangeCallback),e.unregisterInstance(this),this._getSelectedElement=void 0,this.cleanTree(this._dirtyTree)},e.prototype.cleanTree=function(e){if(!e)return;e.funcArgs&&delete e.funcArgs.getSelectedElement,this.cleanTree(e.leftSon),this.cleanTree(e.rightSon)},e.prototype.cleanResultAndTimer=function(){this._result&&this._result.cleanResources(),this._timerHandle&&this._timerHandle.clear()},e.prototype.onValueChanged=function(e){this._onValueChanged=e},e.prototype.callOnValueChangedIfExist=function(e,t){this.raiseEventWithSubTreesResults(),this._onValueChanged&&(t=void 0!==t&&t,this._logger(this._elementName+" - ConditionChecker calls onValueChanged",4,this._featureName),this._onValueChanged(e,t))},e.prototype.raiseEventWithSubTreesResults=function(){this.debuggerManager.isDebuggerOnWindow()&&this.commonEvents.raiseEvent(this.consts.EVENTS.ConditionTreeResult,this._subTreesResults)},e.prototype.onPreEvaluation=function(e){this._onPreEvaluation=e},e.prototype.callOnPreEvaluationIfExist=function(e,t){this._onPreEvaluation&&(t=void 0!==t&&t,this._logger(this._elementName+" - ConditionChecker calls onPreEvaluation",5,this._featureName),this._onPreEvaluation(e,t))},e.prototype.onEvaluated=function(e){this._onEvaluated=e},e.prototype.callOnEvaluatedIfExist=function(e,t){this._onEvaluated&&(t=void 0!==t&&t,this._logger(this._elementName+" - ConditionChecker calls onEvaluated",5,this._featureName),this._onEvaluated(e,t))},e.prototype.onSonar=function(e){this._onSonar=e},e.prototype.callOnSonarIfExist=function(){this._onSonar&&this._onSonar()},e.prototype.evaluateAsyncAndDontEvaluateImmediately=function(t){e.registerInstance(this);var n=!0;this.innerEvaluateAsync(t,n)},e.prototype.evaluateAsync=function(t){e.registerInstance(this);var n=!1;this.innerEvaluateAsync(t,n)},e.prototype.innerEvaluateAsync=function(e,t){this._dirtyTree=e,this._isStopEvaluate=!1,this.handleUIChangeTracking(),this.evaluateAsyncCall(e,t)},e.prototype.handleUIChangeTracking=function(){var e=this;this._uiChangeCallback=function(){e._result.refresh(),e._trackUIChange&&e.reEvaluate(!0)},this.uiChangeTracker.bind(this._uiChangeCallback)},e.prototype.evaluateAsyncCall=function(e,t){this.firstEvaluation(e,t),this.startPollingEvaluation(e)},e.prototype.firstEvaluation=function(e,t){this._logger(this._elementName+" - ConditionChecker evaluates async tree",5,this._featureName),this.prepareResult(e),this._oldValue=void 0,t?this._oldValue=!1:this.reEvaluateResult(!0)},e.prototype.prepareResult=function(e){var t=this;this._result=this.createResult(e),this._result.onGotValue(function(){if(t.callOnSonarIfExist(),t._evaluateSonar){var e=t.reEvaluateResult(!0);t._stopPollingAfterEvaluateTrue&&e&&t.cleanResources()}})},e.prototype.startPollingEvaluation=function(e){var t=this;this.isPollingEvaluation()&&(this._timerHandle=this.timerManager.libSetTimeout(function(){t.reEvaluate()},this._conditionCheckerPollingIntervalMs))},e.prototype.reEvaluate=function(e){var t=this;if(this._isStopEvaluate)return;var n=this.reEvaluateResult(e),r=this.shouldPollingStop(n);!this.isPollingEvaluation()||r||e?r&&this.cleanResources():this._timerHandle=this.timerManager.libSetTimeout(function(){t.reEvaluate()},this._conditionCheckerPollingIntervalMs)},e.prototype.reEvaluateResult=function(e){this.callOnPreEvaluationIfExist(void 0,e),this._logger(this._elementName+" - ConditionChecker reevaluating tree conditions",5,this._featureName);var t=this.getValue();return this._oldValue!==t&&(this.callOnValueChangedIfExist(t,e),this._oldValue=t),this.callOnEvaluatedIfExist(t,e),t},e.prototype.shouldPollingStop=function(e){if(e&&(this._logger(this._elementName+" - ConditionChecker reevaluating tree conditions",5,this._featureName),this._stopPollingAfterEvaluateTrue))return this._elementName+" - ConditionChecker stopped polling tree evaluation after 'true' evaluation",this._featureName,!0;return!1},e.prototype.createResult=function(t){var n=this,r={Func:o,And:a(function(e,t){return e()&&t()}),Or:a(function(e,t){return e()||t()})};if(null==t)return Ko.fixed(!0);return i(t);function i(e){var t=r[e.nodeType];if(!t)return!1;return t(e)}function o(t){var r=n.conditionFunctions.isFuncSticky(t.funcName),i=n.conditionFunctions.getFunctionsByLibNameType(t.funcName);t.funcArgs.getSelectedElement=n._getSelectedElement;var o={conditionId:t.ConditionId,funcArgs:t.funcArgs,pollingInterval:r?n._conditionFunctionsPollingInterval:e.NO_POLLING};function a(){return i.call(this,o)}var u=r||n.conditionFunctions.isFuncAsync(t.funcName)?a():new Ko.noMemory(a);return s(u,t),u}function a(e){return function(t){var n=i(t.leftSon),r=i(t.rightSon),o=new Ko.complex(n,r,e);return s(o,t),o}}function s(e,t){var r=e.getValue;e.getValue=function(e){return t.result=r(e),n._subTreesResults[t.ConditionId]=u(t),t.result}}function u(e){return{id:e.ConditionId,type:e.nodeType,result:e.result}}},e.registerInstance=function(t){if(e.instances[t._id])return;t._id=e.sequence,++e.sequence,e.instances[t._id]=t},e.unregisterInstance=function(t){delete e.instances[t._id]},e.cleanResources=function(){for(var t in e.instances)e.instances.hasOwnProperty(t)&&e.instances[t].cleanResources();e.instances={}},e.NO_POLLING=-1,e.instances={},e.sequence=0,e}();i.register("ConditionCheckerType").asInstance(na),i.register("ConditionChecker").asCtor(na).asProto().dependencies("TimerManager, ConditionFunctions, UIChangeTracker, Logger, FeaturesManager, CommonEvents, Consts, DebuggerManager"),i.register("ConditionCheckerFactory").asCtor(ra).dependencies("ConditionCheckerType,NewConditionCheckerType,TimerManager,ConditionFunctions,UIChangeTracker,Logger,FeaturesManager,CommonEvents,Consts,NewToOldConditionConverter,DebuggerManager");function ra(e,t,n,r,i,o,a,s,u,l,c){var d=this;d.createConditionChecker=f,d.createNew=p,d.createOld=g;function f(e,t){return e&&e.Root?p(t):g(t)}function p(e){return new t(n,r,i,o,a,s,u,c,l,e)}function g(t){return new e(n,r,i,o,a,s,u,c,t)}}var ia=function(e){__extends(t,e);function t(t,n,r,i,o,a,s,u,l,c){e.call(this,t,n,r,i,o,a,s,u,c),this.newToOldConditionConverter=l}return t.prototype.evaluateAsync=function(t){var n=this.newToOldConditionConverter.convert(t.Root);e.prototype.evaluateAsync.call(this,n)},t.prototype.evaluateAsyncAndDontEvaluateImmediately=function(t){var n=this.newToOldConditionConverter.convert(t.Root);e.prototype.evaluateAsyncAndDontEvaluateImmediately.call(this,n)},t}(na);i.register("NewConditionCheckerType").asInstance(ia),i.register("OldConditionsCombiner").asCtor(oa);function oa(){var e=this;e.combine=t;function t(e,t,n){if(!t)return n;if(!n)return t;return{nodeType:e,leftSon:t,rightSon:n,nodeDepth:0}}}i.register("NewConditionsCombiner").asCtor(aa).dependencies("OldConditionsCombiner, NewToOldConditionConverter, OldToNewConditionConverter");function aa(e,t,n){var r=this;r.combine=i;function i(r,i,o){var a=o?t.convert(o.Root):void 0,s=i&&i.Root?t.convert(i.Root):i,u=e.combine(r,s,a);return n.convert(u)}}i.register("ConditionsCombinerFactory").asCtor(sa);function sa(){var e=this;e.get=t;function t(e){return e?i.get("NewConditionsCombiner"):i.get("OldConditionsCombiner")}}i.register("EngagementRulesDataSynchronizer").asCtor(ua).dependencies("ClientStorageManager, EndUsersManager, SettingsFile, TimerManager, wmjQuery, CommonUtils, Encryptor, HostData, RecorderServerManager");function ua(e,t,n,r,o,a,s,u,l){var c=this;c.init=y;var d="loadEngagementRules",f=5e3,p="/engagementRulesReports/",g=e.keysConfig.engagementRules.fileExists.key,h=e.keysConfig.engagementRules.fileExists.expiry,m=e.keysConfig.engagementRules.uniqueData.key,v=e.keysConfig.engagementRules.uniqueData.expiry;function y(){var e=E();if(!e)return S();return r.setWalkmeTimeout(S,f),o.when(e)}function E(){return e.getData(m,null)}function S(){return T().then(I)}function T(){var t=o.Deferred(),n=w(t);if(b(n,t))return t.promise();var r=n,i=u.browser.name;if(("Chrome"==i||"Safari"==i)&&!e.getData(g,!1)){var s=n.indexOf("users"),c=n.substring(s,n.length),f=l.get()+"/FilesContentRetriever/LoadFileByName";r=f+"?fileName="+c}var p=C(t);return a.addScriptWithCallback(r,d,function(n){0!=n.length&&e.saveData(g,!0,h);var r=P(n);p.clear(),t.resolve(r)},function(){p.clear(),t.resolve({})}),t.promise()}function C(e){var t=i.create("EngagementRulesErrorTimer",{loadScriptDeferred:e});return t}function b(e,t){if(!e)return t.resolve({}),!0;return!1}function w(e){var r=".json",i=t.getEndUserGuid(),o=s.encrypt(i),a=n.getSettingsFile();if(b(a,e))return;var u=a.BaseUserCdnFolder;if(b(u,e))return;var l=u+p+o+r;return l}function I(t){e.saveData(m,t,v)}function P(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}}i.register("EngagementRulesErrorTimer").asCtor(la).asProto().dependencies("TimerManager, Logger, LibDestroyer");function la(e,t,n,r){var i=this;i.clear=s;var o;function a(){var i=r.loadScriptDeferred;o=e.setWalkmeTimeout(function(){i.isResolved()||(t.error(null,"Error trying to get engagement rules data from player server"),i.resolve({}),n.removeWalkMe("Failed loading engagement rules data after 5 seconds"))},5e3)}function s(){o.clear()}a.apply(null,arguments)}i.register("EngagementRulesRepository").asCtor(ca).dependencies("EngagementRulesDataSynchronizer, FeaturesManager, wmjQuery");function ca(e,t,n){var r=this;r.init=a,r.isReady=u,r.get=l;var i,o={};function a(){t.isFeatureEnabled("engagementRules")?i=e.init().then(s):(s({}),i=n.when())}function s(e){o=e}function u(e){i.then(e)}function l(){return o}}i.register("HistoricalConditionFunctions").asCtor(da).asSingleton().dependencies("EngagementRulesRepository");function da(t){var n=this;n.getFuncList=l,n.getFuncAssert=c,n.getAsyncFuncs=d;var r=[],i=[],o={},a=["UserWebsiteVisitedBefore","UserWebsiteVisitedAfter","UserWebsiteVisitedMoreThan","UserWebsiteVisitedInLast","UserTrackedElementClickedMoreThan","UserTrackedElementClickedInLast","UserTrackedElementClickedAfter","UserTrackedElementClickedBefore","UserTrackedPageVisitedInLast","UserTrackedPageVisitedBefore","UserTrackedPageVisitedAfter","UserTrackedPageVisitedMoreThan"],s=["UserWebsiteVisitedFirstTime","UserWebsiteVisitedLessThan","UserWebsiteNotVisitedEver","UserWebsiteNotVisitedBefore","UserWebsiteNotVisitedAfter","UserWebsiteNotVisitedInLast","UserTrackedElementClickedLessThan","UserTrackedElementNotClicked","UserTrackedElementNotClickedAfter","UserTrackedElementNotClickedBefore","UserTrackedElementNotClickedInLast","UserTrackedPageVisitedLessThan","UserTrackedPageNotVisited","UserTrackedPageNotVisitedBefore","UserTrackedPageNotVisitedAfter","UserTrackedPageNotVisitedInLast"];u(a,f),u(s,p);function u(t,n){e.each(t,function(e,t){o[t]=n,r[t]=!1})}function l(){return o}function c(){return r}function d(){return i}function f(e){var n=t.get()[e.conditionId];return!!n}function p(e){return!f(e)}}i.register("OnboardingConditionFunctions").asCtor(fa).asSingleton().dependencies("TasksPercentageCalculator");function fa(t){var n=this;n.getFuncList=a,n.getFuncAssert=s,n.getAsyncFuncs=u;var r=[],i=[],o={UserOnboardingProgressMoreThan:l,UserOnboardingProgressLessThan:c,UserOnboardingProgressNotStarted:d,UserOnboardingProgressOngoing:f,UserOnboardingProgressComplete:p};e.each(o,function(e){r[e]=!1});function a(){return o}function s(){return r}function u(){return i}function l(e){var n=t.getTasksCompletionProgress();return n>e.funcArgs.UserOnboardingProgressInput}function c(e){var n=t.getTasksCompletionProgress();return n<e.funcArgs.UserOnboardingProgressInput}function d(e){var n=t.getTasksCompletionProgress();return 0==n}function f(e){var n=t.getTasksCompletionProgress();return n>0&&n<100}function p(e){var n=t.getTasksCompletionProgress();return 100==n}}i.register("BizFlowShowInMenuChecker").asCtor(pa).dependencies("CommonUtils, DisplayConditionChecker, Consts, TagsSegmentationProperties");function pa(e,t,n,r){var i=this;i.isShowInMenu=a;var o=r.properties[n.DEPLOYABLE_TYPE.BusinessSolution];function a(e){if(!s(e.Settings))return!1;var n=u(e);if(!n)return!0;return t.checkConditions(n,e)}function s(t){var n=e.getSettingsValue(t,"IsVisible",!0);return"False"!=n}function u(t){var n=1==e.getSettingsValue(t.Settings,o.enabled,0);if(!n)return!1;return t.ConditionTrees&&t.ConditionTrees[o.name]}}i.register("DeployableShowInMenuChecker").asCtor(ga).dependencies("DisplayConditionChecker");function ga(e){var t=this;t.isShowInMenu=n;function n(t){var n=r(t);if(!n)return!0;return e.checkConditions(n,t)}function r(e){return e.Settings&&e.Settings.DisplayCondition}}i.register("ShowInMenuCheckerFactory").asCtor(ha).dependencies("Lib, BizFlowShowInMenuChecker, DeployableShowInMenuChecker, TodoListManager, Consts");function ha(e,t,n,r,i){var o=this;o.getDisplayConditionCheckerFunc=l,o.isSupportedDeployableInMenu=c;var a={};function s(){u()}function u(){a[i.DEPLOYABLE_TYPE.Task]=d,a[i.DEPLOYABLE_TYPE.Tutorial]=e.canShowTutorial,a[i.DEPLOYABLE_TYPE.BusinessSolution]=t.isShowInMenu,a[i.DEPLOYABLE_TYPE.Content]=n.isShowInMenu,a[i.DEPLOYABLE_TYPE.Shuttle]=n.isShowInMenu,a[i.DEPLOYABLE_TYPE.Course]=n.isShowInMenu}function l(e){return a[e]||f}function c(e){return e!==i.DEPLOYABLE_TYPE.Course&&void 0!==a[e]}function d(e){return r.isTaskDisplayed(e)}function f(){return!0}s.apply(null,arguments)}i.register("DisplayConditionChecker").asCtor(ma).dependencies("ConditionCheckerFactory");function ma(e){var t=this;t.checkConditions=n;function n(t,n){if(!t)return!0;var r=e.createConditionChecker(t,{featureName:a,elementName:n.Name});return r.getCurrentEvaluationValueAndStopEvaluating(t)}}i.register("ConditionTreeGetter").asCtor(va).dependencies("DeployableTypes, CommonUtils");function va(e,t){var n=this;n.get=o;var r="Settings",i={};i[e.BusinessSolution]="ConditionTrees";function o(e,n,o){var a=i[e]?i[e]:r;return t.getSettingsValue(n[a],o,"")}}i.register("ConditionTreeTraverser").asCtor(ya).dependencies("NewToOldConditionConverter");function ya(t){var n=this;n.containsFuncName=r;function r(e,n){return i(e)&&(e=t.convert(e.Root)),o(e,n)}function i(e){return e.Root}function o(t,n){return"Func"==t.nodeType?e.inArray(t.funcName,n)>-1:("And"==t.nodeType||"Or"==t.nodeType)&&(o(t.leftSon,n)||o(t.rightSon,n))}}i.register("ConditionTreeEvaluator").asCtor(Ea).dependencies("ConditionFunctions");function Ea(e){this.evaluate=function(t){function n(t){if("Func"==t.nodeType){var r=e.getFunctionsByLibNameType(t.funcName),i=[];i.push({funcArgs:t.funcArgs});var o=r.apply(this,i);return o instanceof Ko.regular&&(o=o.getValue()),t.result=o,o}if("And"==t.nodeType){var o=n(t.leftSon)&&n(t.rightSon);return t.result=o,o}if("Or"==t.nodeType){var o=n(t.leftSon)||n(t.rightSon);return t.result=o,o}return!1}return null==t||n(t)}}i.register("ConditionEvaluator").asCtor(Sa).dependencies("LocationMatcher");function Sa(e){var t=this;t.supportedFunctions={isExistJQ:a,isTextValueJQ:s,isLocationMatch:u};var n=new Ta;function r(e){if(e=e.replace(/&quot;/gi,'"'),e=e.replace(/&apos;/gi,"'"),e=e.replace(/&#39;/gi,"'"),e=e.replace(/&amp;/gi,"&"),void 0==e||e.length<=0)throw"Ilegal Expression";var t=0;for(var r in this.supportedFunctions)if(this.supportedFunctions.hasOwnProperty(r)){var a=i(e,r,t);e=a[1];for(var s=t;s<a[0].length;s++){var u=o(a[0][s]);n.setFunction(u,t++)}}n.setExpression(e)}this.evaluate=function(e){if(r(e),void 0!=n)return n.evaluate();throw"Evaluator is undefined"},this.addSupportedFunction=function(e,t){if(this.supportedFunctions[e])throw"Function '"+e+"' already exist";this.supportedFunctions[e]=t};function i(e,t,n){for(var r=Array(),i=n,o=e.indexOf(t);o>-1;){if("("!=e.charAt(o+t.length))throw"Ilegal function definition in expression";
for(var a=o+t.length+1,s=Array(),u=a;(")"!=e.charAt(u)||0!=s.length)&&u<e.length;){if("'"==e.charAt(u)||'"'==e.charAt(u))if(0==s.length)s.push(e.charAt(u));else{var l=s.pop();l!=e.charAt(u)&&(s.push(l),s.push(e.charAt(u)))}u++}if(")"!=e.charAt(u))throw"Ilegal function definition in expression";r[i]=e.substring(o,u+1),e=e.substring(0,o)+"["+i+"]"+e.substr(u+1),i++,o=e.indexOf(t)}return[r,e]}function o(e){if(void 0==e||e.length<=0)throw"Ilegal function definition";for(var n=e.substr(0,e.indexOf("(")),r=e.substring(e.indexOf("(")+1,e.length-1).split(","),i=0;i<r.length;i++)r[i]=r[i].replace(/^\s+|\s+$/g,""),("'"==r[i].charAt(0)&&"'"==r[i].charAt(r[i].length-1)||'"'==r[i].charAt(0)&&'"'==r[i].charAt(r[i].length-1))&&(r[i]=r[i].substring(1,r[i].length-1));return function(){return t.supportedFunctions[n].apply(this,r)}}function a(e,t){return void 0==t&&(t=1),mtjQuery(e).length>=t}function s(e,t){return mtjQuery(e).text()==t}function u(t){return e.isLocationMatchString(t)}}var Ta=function(){this.functions=Array(),this.treeNode=null,this.errorStack=Array();var e=this;this.setFunction=function(e,t){if(void 0==e||void 0==t||t<0)throw"Wrong arguments.";return this.functions[t]=e,!0},this.evaluate=function(){if(null!=this.treeNode)return this.treeNode.evaluate();throw"Evaluation tree doesn't exist - No expression was set."},this.setExpression=function(e){if(void 0!=e&&e.length>0&&i(e)){if(this.treeNode=a(e),this.treeNode)return!0;var t=this.errorStack.join("\n");throw this.errorStack=this.errorStack.splice(),t}return this.errorStack.push("Ilegal expression!"),!1};function t(t){var n=new RegExp("^\\[\\d+\\]$","i");if(n.test(t)){var r=parseInt(t.substring(1,t.length-1));return e.functions.length>=r&&void 0!=e.functions[r]?new d(e.functions[r]):(e.errorStack.push("Function id doesn't exist!"),!1)}return e.errorStack.push("function token isn't in the form [funcId]. recieved:"+t),!1}function n(t){if(t)return new c(t);return e.errorStack.push("Failed to create NOT node."),!1}function r(t,n,r){if(n&&r){if("OR"==t.toUpperCase())return new l(n,r);if("AND"==t.toUpperCase())return new u(n,r)}return e.errorStack.push("Failed to create "+t.toUpperCase()+" node."),!1}function i(e){for(var t=Array(),n=0;n<e.length;n++)if("("==e.charAt(n))t.push("(");else if(")"==e.charAt(n)){if(0==t.length)return!1;t.pop()}return 0==t.length}function o(e){if(e=mtjQuery.trim(e),e=e.replace("  "," "),e=e.replace("( ","("),e=e.replace(/not\(/gi,"not ("),e=e.replace(/and\(/gi,"and ("),e=e.replace(/or\(/gi,"or ("),"("!=e.charAt(0)||")"!=e.charAt(e.length-1))return e;var t=e.substring(1,e.length-1);return i(t)?t:e}function a(i){var u=o(i),l=u.split(" ");switch(l.length){case 0:e.errorStack.push("Error - a try to build tree with empty expression");break;case 1:return t(l[0]);case 2:return"NOT"==l[0].toUpperCase()?n(a(l[1])):(e.errorStack.push("Ilegal expression"),!1);case 3:if("NOT"==l[0].toUpperCase())return n(a(l[1]+" "+l[2]));return r(l[1],a(l[0]),a(l[2]));default:for(var c=Array(),d=0;d<l.length;d++){if(0==d&&l[d].length>=3&&"NOT"==l[d].substr(0,3).toUpperCase())return n(a(l.join(" ").substr(3)));for(var f=!1,p=0;p<l[d].length;p++)"("==l[d].charAt(p)?(f=!0,c.push("(")):")"==l[d].charAt(p)&&(f=!0,c.pop());if(!f&&0==c.length&&s(l[d]))return r(l[d],a(l.splice(0,d).join(" ")),a(l.splice(1,l.length-1).join(" ")))}return e.errorStack.push("Ilegal expression"),!1}}function s(e){if(e.match(/not/i)||e.match(/or/i)||e.match(/and/i))return!0;return!1}function u(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()&&this.rightSon.evaluate()}}function l(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()||this.rightSon.evaluate()}}function c(e){this.son=e,this.evaluate=function(){return!this.son.evaluate()}}function d(e){this.func=e,this.evaluate=function(){return this.func()}}};function Ca(){var t,n,r,a,s,u,l,c,d,f,p,g,h=null,m=null,v=this,y={},E=function(){},S=null,T="wm-sync",C=15e3,w=[],I={terminate:"terminate",getAll:"getAllMultiple",checkCanSave:"checkCanSave",get:"get",increment:"increment",del:"delete",setSession:"setSession",getSession:"getSession",set:"set",addSet:"addSet",add:"add",remove:"remove"};v._iframeReady=!1;function P(){return i.get("TimerManager")}function _(e,o,a,d,p,g){l=i.get("StorageResourceManager"),f=o,h=new ba,S=i.get("CookiesStorageManager"),m=[],t=k(a,d),u=e,n=u.isLocalStorageEnabled(),r=g,s=p,c=i.get("CDStorageOriginChecker"),i.get("Logger").customerLog("Storage mode: "+t+", ["+(d?"from db/feature":"auto detected")+"], compressed: "+p,3),v._origin=l.getOrigin(),v._saveCookiePath=l.getSaveCookiePath(),v._path=l.getHiddenIframePath(p)}function k(e,t){var n=i.get("HostData");if(e&&"Safari"==n.browser.name)return b.Cookies;if(t)return t;if(e&&n.isIEBrowser(10,"gte"))return b.IndexedDB;return b.LocalStorage}v.refreshGetData=function(e,t){ge(t),g!==!0||i.get("LibDestroyer").removingWalkMe?he():z(e)};function A(e){for(var t=0;t<w.length;t++)w[t].push(e)}v.saveData=function(e,t,n,r){V(e,t,n,r),h.saveData(e,t,n,r),A(e)},v.getData=function(e,t){return h.getData(e,t)},v.removeData=function(e,t){W(e,t),h.removeData(e,t),A(e)},v.increment=function(e,t,n,r,i){x({requestType:I.increment,userGuid:r,key:e,ttl:n,lastValue:t},i)},v.setSyncFlag=function(e){var t=U(T,1,10,e);Y(t)},v.addToSet=function(e,t,n,r){for(var i=D(e,r,[]),o=0;o<t.length;o++)i.indexOf(t[o])==-1&&i.push(t[o]);V(e,t,n,r,I.addSet),h.saveData(e,rg(i),n,r),A(e)},v.addToDictionary=function(e,t,n,r,i){var o=D(e,i,{});o[t]=n,o=rg(o);var a={};a[t]=n,O(e,a,r,i),h.saveData(e,o,r,i)},v.removeFromDictionary=function(e,t,n,r){var i=D(e,r,{});delete i[t],i=rg(i);var o=[t];N(e,o,n,r),h.saveData(e,i,n,r)};function D(e,t,n){var r=v.getData(e,t)||n;return r&&"string"==typeof r&&(r=ig(r)||n),r}v.getInternalKeys=function(e,t){return h.getInternalKeys(e,t)};function O(e,t,n,r){var i={requestType:I.add,userGuid:r,key:e,keyValues:t,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:n}};j(i)}function N(e,t,n,r){var i={requestType:I.remove,userGuid:r,key:e,keysToRemove:t,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:n}};j(i)}this.sessionSetData=function(e,t,n){var r={requestType:I.setSession,userGuid:n,key:e,value:t};j(r)},this.sessionGetData=function(e,t,n,r){x({requestType:I.getSession,userGuid:n,key:e,defaultValue:t},r)};function x(e,t){j(L(e,t))}function L(e,t){var n=M();return e.actionId=n,y[n]=t,e}var F=0;function M(){return F+=1,F>1e3&&(F=1),F}function B(e){if(e&&y[e.actionId]){var t=y[e.actionId];delete y[e.actionId],t(e.value)}}this.init=function(e){if(v._iframeReady=!1,E=e,!R())return i.get("Logger").customerLog("Cannot run cross-domain Walk-Thrus on this browser. Removing WalkMe."),!1;g=void 0,a=r?new te(s,u,l,i.get("Consts")):new ee(s,u,l),a.init(fe,q),i.get("PostMessageListener").addTeardownCallback(me)},this.removeAllData=function(e){var t=h.getStorageInternal(),n=t[e];if(n)for(var r in n)v.removeData(r,e)};function R(){if(!window.postMessage)return!1;if(t==b.LocalStorage)return n;return!0}function U(e,t,n,r,i){return{requestType:i||I.set,userGuid:r,key:e,saveObj:{value:t,saveTime:(new Date).getTime(),expireSeconds:n}}}function V(e,t,n,r,i){var o=U(e,t,n,r,i);j(o)}function W(e,t){j({requestType:I.del,userGuid:t,key:e})}function G(t){var n=w.shift();if(t)for(var r in t){var i=t[r];if(i&&i.length&&i.length>0&&void 0!=i[0].saveObj)for(var o=0;o<i.length;o++){var a=i[o].key;if(e.inArray(a,n)==-1){var s=i[o].saveObj,u=H(s);u>0?h.saveData(a,s.value,u/1e3,r):v.removeData(a,r)}}}}function H(e){var t=(new Date).getTime(),n=e.saveTime+1e3*e.expireSeconds-t;return n}function j(e){v._iframeReady&&(a.isInitialized()?g!==!1&&Y(e):v.init(function(){Y(e)}))}function Y(e){a.postMessage(rg(e),"*")}function z(e){w.push([]);var t={requestType:I.getAll,usersToLoad:e};j(t)}function Q(){var e={requestType:I.checkCanSave,saveMode:t,userGuids:f};j(e)}function q(){mtjQuery.browser.msie&&window.opener?(K(),P().libSetTimeout(J,3e3)):J()}function K(){v._iframeReady||(X(),P().libSetTimeout(K,100))}function X(){Y({requestType:I.get,key:T,userGuids:f,saveMode:t})}function J(){v._iframeReady||(v._iframeReady=!0,$(),Q())}function $(){oe(),p=P().libSetTimeout(Z,C)}function Z(){i.get("Logger").customerLog("storage failed loading, removing walkme",3),oe(),g=!1,i.get("LibDestroyer").removeWalkMe("storageFailedLoading."+c.getErrors(),{sendLog:!0})}var ne=!1;function re(){window.open(v._saveCookiePath,"_blank"),ne=!0,window.focus(),mtjQuery(document).unbind("click.wmpopup"),ie()}function ie(e){e=e||0,e>10?Z():g!==!0&&(e++,Q(),P().libSetTimeout(function(){ie(e)},200))}function oe(){p&&(p.clear(),p=null)}var ae;function se(e){oe(),e.canSave||ne?e.canSave&&(clearTimeout(ae),ce(),$(),z(f)):"cookies"==t?(void 0===ae&&le(),ae=P().libSetTimeout(Q,500)):Z()}var ue=i.get("StorageKeysConfigurations").hiddenIframe.popupHackTries;function le(){var e=parseInt(S.getData(ue.key)||0);e<3?(e++,S.saveData(ue.key,e.toString(),ue.expiry),mtjQuery(document).bind("click.wmpopup touchend.wmpopup",re)):Z()}function ce(){mtjQuery(document).unbind(".wmpopup")}function de(){g||(g=!0,oe(),S.removeData(ue.key),S.removeData(i.get("Consts").DOMAIN_IN_COOKIE))}function fe(e){if(c.checkMessageOrigin(e),l.shouldHandleMessage(e)){try{var t=ig(e.data)}catch(n){return}if(t.key==I.checkCanSave)se(t);else if(t.key==I.getAll){if(de(),G(t.allValues),E){var r=E;E=null,r()}he()}else if(void 0!==t.actionId)B(t);else if(t.key==I.get)if(H(t.saveObj)>0)pe(t.dataKey,t.saveObj.value);else for(var i=0;i<f.length;i++)v.removeData(t.dataKey,f[i]);else t.key==I.terminate&&ve()}}function pe(e,t){e==T&&t&&J()}function ge(e){e&&m.push(e)}function he(){if(m.length>0){var e=m.shift();e&&e()}}v.releaseCallbacks=function(){m.length=0,y={}},v.releaseCallback=function(e){for(var t=0;t<m.length;t++)if(m[t]==e)return void(m[t]=null)};function me(){var e=new o(function(e){d=e});return Y({requestType:I.terminate}),e}function ve(){a&&a.terminate(),d&&d(),d=null}_.apply(null,arguments)}function ba(){var t=this,n=null;function r(){n={}}this.saveData=function(e,t,n,r){var o={};o.value=t,o.saveTime=(new Date).getTime(),o.expiresSeconds=n;var a=i(r);a[e]=o},this.getData=function(e,n){var r=i(n),o=r[e];if(o){var a=(new Date).getTime(),s=o.saveTime+1e3*o.expiresSeconds-a;if(s>0)return o.value;t.removeData(e,n)}return},this.removeData=function(e,t){var n=i(t);delete n[e]},this.clear=function(e){n[e]={}},this.getStorageInternal=function(){return n},this.getInternalKeys=function(n,r){var o={},a=i(n);return e.safeEach(a,function(i,a){0===e.trim(i).toLowerCase().indexOf(r)&&(o[i]=t.getData(i,n))}),o};function i(e){return void 0===n[e]&&(n[e]={}),n[e]}r.apply(null,arguments)}i.register("ClientStorageManager").asFunction(function(e){return e.bySettingsFile()}).dependencies("StorageManagerFactory");function wa(){this.ONE_HOUR_SECONDS=3600;var t,n,r,o=this,a=null,s=!1;function u(e,s,u,l,c){t={type:e,mode:"client"},o.dataManager=s,a=u,n=l,r=c,o.keysConfig=i.get("StorageKeysConfigurations")}this.getStorageType=function(){return t},this.init=function(e){if(e=e||function(){},l())return void e();if(s=!0,o.dataManager.init)return o.dataManager.init(e);e()};function l(){return o.dataManager.isInitialized?o.dataManager.isInitialized():s}this.refreshGetData=function(e,t){e=e&&e.length>0?e:[d()],o.dataManager.refreshGetData?o.dataManager.refreshGetData(e,t):t&&t()},this.saveData=function(e,t,i,a){if(0===i&&n.error(null,"ClientStorageManager.saveData - expiresSeconds is 0"),e=mtjQuery.trim(e),a=d(a),void 0===t)return void o.removeData(e,a);if(void 0==i){var s="storageManager: trying to save key in storage manager without expiration, key: "+e+", value: "+t+", userGUID: "+a;n.customerLog(s,3)}o.dataManager.addToDictionary&&r.isDict(t)?c(e,t,i,a):o.dataManager.saveData(e,rg(t),i,a)};function c(e,t,n,r){o.removeData(e,r);for(var i in t)t.hasOwnProperty(i)&&void 0!==t[i]&&o.dataManager.addToDictionary(e,i,t[i],n,r)}this.getData=function(e,t,n){e=mtjQuery.trim(e),n=d(n);var r=o.dataManager.getData(e,n);if(void 0===r||""===r)return t;return ig(r)},this.addToDictionary=function(e,t,n,r,i){if(e=mtjQuery.trim(e),i=d(i),o.dataManager.addToDictionary)o.dataManager.addToDictionary(e,t,n,r,i);else{var a=o.getData(e,i);null!==a&&"object"==typeof a||(a={}),a[t]=n,o.saveData(e,a,r,i)}},this.removeFromDictionary=function(e,t,n,r){if(e=mtjQuery.trim(e),r=d(r),o.dataManager.removeFromDictionary)o.dataManager.removeFromDictionary(e,t,n,r);else{var i=o.getData(e,r);i&&void 0!==i[t]&&(delete i[t],o.saveData(e,i,n,r))}},this.addToSet=function(t,n,r,i){if(t=mtjQuery.trim(t),i=d(i),o.dataManager.addToSet)o.dataManager.addToSet(t,n,r,i);else{var a=o.getData(t,i);e.isArray(a)||(a=[]);for(var s=0;s<n.length;s++)a.indexOf(n[s])==-1&&a.push(n[s]);o.saveData(t,a,r,i)}},this.removeData=function(e,t){e=mtjQuery.trim(e),t=d(t),o.dataManager.removeData(e,t)},this.addToQueue=function(t,n,r,i,a,s){t=mtjQuery.trim(t),a=d(a);var u=o.getData(t,[],a);u||(u=[]),s&&e.isArray(n)?u=u.concat(n):u.push(n),u.splice(0,u.length-r),o.saveData(t,u,i,a)},o.convertOldCookieStorage=function(e){var t=i.get("CookiesManager"),n=t.getCookie(e),r='"#!@DeL@!#"';if(n&&n!=r&&0!==n.indexOf('"')){o.saveData(e,n,_);var a=i.get("SettingsFile").getStorageType();a&&a!=STORAGE_TYPE.Cookie&&t.setCookie(e,r,-1)}},o.increment=function(e,t,n,r,i){if(e=mtjQuery.trim(e),r=d(r),o.dataManager.increment)o.dataManager.increment(e,t,n,r,i);else{var a=o.getData(e,0,r);t!==a&&(a++,o.saveData(e,a,n,r)),i&&i(a)}},o.getInternalKeys=function(e,t){t&&""!==t||(t="wm-");var n=o.dataManager.getInternalKeys(d(e),t);return f(n),n},this.removeAllData=function(e){o.dataManager.removeAllData(d(e))},o.sessionSetData=function(e,t,n){e=mtjQuery.trim(e),o.dataManager.sessionSetData?o.dataManager.sessionSetData(e,t,n):window.sessionStorage[n+e]=t},o.sessionGetData=function(e,t,n,r){e=mtjQuery.trim(e),o.dataManager.sessionGetData?o.dataManager.sessionGetData(e,t,n,r):r&&r(window.sessionStorage[n+e]||t)},o.setSyncFlag=function(e){o.dataManager.setSyncFlag&&o.dataManager.setSyncFlag(e)};function d(e){return r.defaultValue(e,a)}function f(t){e.safeEach(t,function(e,n){void 0!==n&&""!==n&&(n=ig(n)),t[e]=n})}o.isEnabled=function(){return o.dataManager.isEnabled()},o.releaseCallbacks=function(){o.dataManager.releaseCallbacks&&o.dataManager.releaseCallbacks()},o.releaseCallback=function(e){e&&o.dataManager.releaseCallback&&o.dataManager.releaseCallback(e)},u.apply(null,arguments)}i.register("DummyClientStorageManager").asInstance({saveData:function(e,t,n,r){},getData:function(e,t,n){return t},getStorageType:function(){return{type:"jstorage"}}});function Ia(){var e,t,n=this;function r(n,r){e=r,t=n}n.saveToStorage=function(n,r,i){t.saveData(n+e,r,i)},n.getFromStorage=function(n,r){return t.getData(n+e,r)},n.removeFromStorage=function(n){return t.removeData(n+e)},n.refreshGetData=function(e,n){return t.refreshGetData(e,n)},r.apply(null,arguments)}function Pa(e){var t,n,r,o,a,s=this,u=i.get("TimerManager");function l(){n=e.storageManager,r=e.storageLifetime,o=e.encodeStorageData,a=e.decodeStorageData}var c=function(e){if(!e)return;var t=arguments;u.libSetTimeout(function(){e.apply(this,Array.prototype.slice.call(t,1))},0)},d={};function f(e,t,n){d[e]||(d[e]={success:[],fail:[]}),t&&d[e].success.push(t),n&&d[e].fail.push(n)}function p(e,t){for(var n=t?d[e].success:d[e].fail,r=[].splice.call(arguments,2,arguments.length-2),i=0;i<n.length;i++)try{c.apply(this,[n[i]].concat(r))}catch(o){}d[e]=void 0}function g(e){return!!d[e]}this.loadServerData=function(e,t,n,r,o,a){var u=g(n);if(f(n,r,o),u)return;i.get("WmAjax").execute({url:e,data:t,traditional:a,success:function(e,t,r){e.ErrorMessage?p(n,!1,e.ErrorMessage):(s.updateLocalData(n,e),p(n,!0,e))},error:function(e,t,r){p(n,!1,t)}})},this.retrieveData=function(e,r,i,o,u,l){var c=n.getData(i,null);if(c){var r=a?a(c):c;t=r}void 0!==t?o&&o(t):s.loadServerData(e,r,i,o,u,l)},this.retrieveLocalData=function(e){var r=n.getData(e,null),i=a&&r?a(r):r;return i&&(t=i),t},this.updateLocalData=function(e,i){t=i;var a=o&&i?o(i):i;n.saveData(e,a,r)},this.updateRemoteData=function(e,t,n,r){i.get("WmAjax").execute({url:e,data:t,success:function(e,t,i){e.ErrorMessage?c(r,e.ErrorMessage):c(n)},error:function(e,t,n){c(r,t)}})},l.apply(null,arguments)}i.register("RemoteDataSynchronizer").asCtor(Pa).asProto();function _a(t,n,r,o,a,s,u,l,c,d,f,p,g,h){var m,v,y,E,S,T,C,b,w,I=this,P=1948,_=3600,k="/ToDoList/UserCompletedTasksByIdsAndGoalsIds",A="/ToDoList/UpdateUserTasksCompleted";function D(){E=l.get(),m=n.get();var e=c.getSettingsValue(E.Settings,"remoteDataLifeTime",_);v=i.create("RemoteDataSynchronizer",{storageManager:r,storageLifetime:e,encodeStorageData:N,decodeStorageData:x}),y=a.error,T=o,C=r.keysConfig.todoList.endUserUniqueKey.key,b=r.keysConfig.todoList.progressPercentDataKey,w=p.isFeatureEnabled("tasksProgressUpdates")}I.init=function(e,t){S=T.register("tg",{beforeSendingManipulationFunc:V,actionUrl:A,prefixForStorage:"tg",sendingThreshold:1,dataType:"task goal",dataIdFieldName:"Id",requestParamsFunc:function(e){return{userCompletedTasksSerialized:rg(e),userGuid:s.getUserGuid()}}}),w&&g.shouldAudit()&&B(e,t)},I.getEndUserUniqueDataKey=function(e,t){return t=t||s.getUserGuid(),C+s.getEnvironmentId()+"_"+t+"_"+e};function O(e,t,n){return{userGuid:n||s.getUserGuid(),endUserId:e,taskGoalsIds:rg(t),source:s.getEnvironmentId()}}function N(e){var t=[];return mtjQuery.each(e,function(e,n){if(!n.TaskId)return;var r=mtjQuery.extend(!0,{},n);L(r,"TaskId","t"),L(r,"IsCompleted","c"),L(r,"CompletedGoals","g"),t.push(r)}),t}function x(e){var t={};return mtjQuery.each(e,function(e,n){if(!n.t)return;var r=mtjQuery.extend(!0,{},n);L(r,"t","TaskId"),L(r,"c","IsCompleted"),L(r,"g","CompletedGoals"),t[r.TaskId]=r}),t}function L(e,t,n){e.hasOwnProperty(t)&&(e[n]=e[t],delete e[t])}this.asyncRetrieveCompletedTasks=function(t,n,r,i,o){if(o=o||{},!m)return;var a=O(t,n,o.userGuid);e.param(a).length>P&&(a.taskGoalsIds=null),v.retrieveData(m+k,a,I.getEndUserUniqueDataKey(t,o.userGuid),r,i,!0)},this.syncRetrieveCompletedTasks=function(e,t,n){if(n=n||{},!m)return null;var r=v.retrieveLocalData(I.getEndUserUniqueDataKey(e,n.userGuid));if(r)return a.customerLog("syncRetrieveCompletedTasks - found completed in local data: "+c.toJSON(r),4),r;return a.customerLog("syncRetrieveCompletedTasks - going to fetch data from DB",4),v.loadServerData(m+k,O(e,t,n.userGuid),I.getEndUserUniqueDataKey(e,n.userGuid),null,null,!0),null};function F(e,t){var n=0;for(var r in e){var i=e[r];e.hasOwnProperty(r)&&i.IsCompleted&&t[i.TaskId]&&n++}return n}this.updateTaskCompleted=function(e,t,n,r,o){a.customerLog(c.formatString("updateTaskCompleted for {0} {1}",t?"task":"goal",t?t.Id:n.Id),4);var l=I.getEndUserUniqueDataKey(e);a.customerLog("Mark task as completed in storage, data = "+c.toJSON(r),4),v.updateLocalData(l,r);var d=i.get("DictionaryUtils").getDictionaryKeys(o).length;if(g.shouldAudit()){var f={endUserId:e,taskId:t?t.Id:-1,goalId:n?n.Id:-1,tasksCount:d,permutationId:s.getPermutationId(),endUserGuid:s.getEndUserGuid(),source:s.getEnvironmentId()};S.sendData(f),u.isReportingEnabled()&&(M(t,r,o,d),w&&R(e))}};function M(e,t,n,r){try{if(e&&e!=={}){var o=i.get("DeployablesManagerFactory").get(e.RelatedDeployableType),a=o.getById(e.RelatedDeployableId),s=F(t,n),l=s/r,c=Number(l.toFixed(2)),d=i.get("DeployableTypeToEventSenderAppTypeMapper"),f={type:u.EVENT_APPS.Task,oId:e.Id,oName:e.Name,pId:"-1",total:n?r:-1,aoId:a.Id,aoName:a.Name,aAppType:d.map(e.RelatedDeployableType),ratio:c};u.postEvent(u.EVENT_TYPES.Complete,f)}}catch(p){y(p)}}function B(e,t){var n=U(e),r=f.getData(n,!1);r||I.asyncRetrieveCompletedTasks(e,t,function(){R(e)})}function R(e){try{var t=i.get("UiDataProvider").uiTasksTree(),n=d.getCompletionData(t[0],"task"),r=Number((n.completedPercent/100).toFixed(2));f.saveData(U(e),!0,b.expiry);var o={type:u.EVENT_APPS.Task};s.setAnalyticsCustomFields(1,n.total),s.setAnalyticsCustomFields(2,r),u.postEvent(u.EVENT_TYPES.ProgressUpdate,o)}catch(a){y(a)}}function U(e){return b.key+s.getEnvironmentId()+"_"+s.getUserGuid()+"_"+e}function V(e,t){if(!e||0===e.length)return;for(var n=e.length-1;n>=0;n--)e[n].taskId==t.taskId&&e[n].goalId==t.goalId&&e[n].permutationId==t.permutationId&&e[n].source==t.source&&e[n].endUserGuid==t.endUserGuid&&e.splice(n,1)}D.apply(null,arguments)}i.register("TodoListDataSynchronizer").asCtor(_a).dependencies("Lib, RecorderServerManager, ClientStorageManager, ServerDataSenderManager, Logger, WalkMeInfo,EventSender, SiteConfigManager, CommonUtils, ObjectTreePercentageCalculator,ClientOrServerStorageManager, FeaturesManager, AuditingEnabledIndicator, Consts");function ka(){var e,t,n,r,o,a,s,u,l,c=86400,d="p",f="g";function p(d){e=d.serverAddress,n=d.userGuidContainer.getUserGuid(),r=d.lib.Logger.error,o=d.getPermutationId,a=d.getEndUserGuid,s=d.getAuditSource,u=e+"/AbTesting/UserCompletedGoals",l=i.get("StorageKeysConfigurations").abTestingGoals.endUserUniqueKey.key,t=i.create("RemoteDataSynchronizer",{storageManager:d.storageManager,storageLifetime:c})}function g(e){return l+n+"_"+e}function h(e,t){return{userGuid:n,endUserId:e,source:s(),permutationId:o(),goalsToCheck:t}}this.asyncRetrieveCompletedGoals=function(e,n,r,i){var o=function(n){var i=g(e),o=m(n);t.updateLocalData(i,o),r&&r(n)},a=h(e,n);t.loadServerData(u,a,g(e),o,i,!0)},this.syncRetrieveCompletedGoals=function(e){var t=v(e);if(t)return t[f];return null},this.updateGoalCompleted=function(e,n){var r=g(e),i=v(e)||m([]);i[f].push(n),t.updateLocalData(r,i)};function m(e){var t={};return t[d]=o(),t[f]=e,t}this.tempClearUserCompletedGoals=function(e){t.updateLocalData(g(e),{})};function v(e){var n=t.retrieveLocalData(g(e));if(n&&o()==n[d])return n;return null}p.apply(null,arguments)}function Aa(){var e,t=null,n=null;function r(r){t=r.goalsManager,n=r.todoListManager,e=_makeTutorial.Logger.wrapCustomerLog(p)}var i=this;function o(e){return e.GoalsNotCompleted?e.GoalsNotCompleted:[]}var a=function(e){n.updateGoalCompleted(e)};this.startWatchingTasks=function(){var e=n.getTasksGoalsNotCompleted();mtjQuery.each(e,function(e,t){if(!t.TaskId)return;i.startWatchingTask(t)})},this.startWatchingTask=function(n){var r=o(n);if(r.length>0){var i={goalCompletedFunc:a};t.addGoalsWatch(r,i)}e("Started watching Task : "+n.Name,2)},r.apply(null,arguments)}i.register("TasksPercentageCalculator").asCtor(Da).asSingleton().dependencies("ObjectTreePercentageCalculator, UIChangeTracker");function Da(e,t){var n=this;n.getTasksCompletionProgress=s;var r;function o(){t.bind(a)}function a(){r=void 0}function s(){if(void 0===r){var t=i.get("UiDataProvider").uiTasksTree();t&&t.length>0&&(r=e.calculate(t[0],"task"))}return r}o()}i.register("VisibleObjectTree").asCtor(Oa).asSingleton().dependencies("DictionaryUtils");function Oa(t){var n=this;n.getTree=r;function r(e,n){return t.getDictionaryValues(i(e,n,{}))}function i(t,n,r){var a=t.children();return o(t,n)&&(r[t.id()]=t),a&&e.each(a,function(e,t){i(t,n,r)}),r}function o(e,t){return e.type()==t&&!e.properties().hasProperty("phantom")&&e.properties().hasProperty("visible")}}i.register("FramesetsUtils").asCtor(Na).dependencies("Logger, HostData, TimerManager, FeaturesManager");function Na(t,n,r,i){var o,a=7e3,s=5,u=null,l=[],c=void 0,f=null,p=void 0,g=this;g.isFramesetsPage=m,g.checkIfAnyFrameIsUnloaded=v,g.waitForFramesToLoad=E,g.isFrameActive=S,g.getAllFramesDocuments=C,g.waitForFramesHeadsAndBodies=b,g.shouldHandlePageAsFramesets=w,g.findBiggestFrame=F,g.doForAllFrames=T;function h(){o=t.wrapCustomerLog(d)}function m(){return void 0===p&&(p=e("frameset").length>0),p}function v(e){r.libSetTimeout(x,e),c=I(),l=[],u=r.playSetInterval(P,5),null!=f&&f.clear(),f=r.libSetTimeout(L,a)}function y(e){function t(){if(l.length>0)return r.libSetTimeout(t,200),e.promise();return e.resolve()}return t()}function E(){var t=e.Deferred();return y(t)}function S(e){if(null==e)return o("Frame is not active (Frame is null)",s),!1;if(null==e.contentWindow)return o("Frame is not active (frame.contentWindow is null)",s),!1;if(null==e.contentWindow.document)return o("Frame is not active (frame.contentWindow.document is null)",s),!1;if(0==mtjQuery("head",e.contentWindow.document).length)return o('Frame is not active (mtjQuery("head", frame.contentWindow.document).length == 0)',s),!1;if(0==mtjQuery("body",e.contentWindow.document).length&&0==mtjQuery("frameset",e.contentWindow.document).length)return o('Frame is not active (mtjQuery("body", frame.contentWindow.document).length == 0)',s),!1;return!0}function T(e){for(var t=C(),n=0;n<t.length;n++)e(t[n])}function C(){for(var e=[],t=I(),n=0;n<t.length;n++)e.push(t[n].contentWindow.document);return e}function b(e){if(!g.isFramesetsPage())return void e();var t=40,n=0;i();function i(){var a=g.findBiggestFrame(),s=g.isFrameActive(a);if(s)return o("Biggest frame is active. waitCount: "+n,5,"FramesetsUtils"),void e();if(n>t)return void o("Failed waiting for head and body in biggest frame. Stopping execution"+n,1,"FramesetsUtils");r.setWalkmeTimeout(function(){n++,o("Biggest frame wasn't ready on attempt "+n,5,"FramesetsUtils"),i()},200)}}function w(){return!i.isFeatureEnabled("oldframesets")&&g.isFramesetsPage()}function I(e,t){return void 0===t&&(t=[]),mtjQuery("frame",e).each(function(){try{mtjQuery("frame, frameset",this.contentWindow.document).length>0&&(t=I(this.contentWindow.document,t)),t.push(this)}catch(e){o("Frame is cross-domain, we can't access it",s)}}),t}function P(){for(var e=0;e<c.length;e++){var t=c[e];g.isFrameActive(t)||null!=t&&null!=t.contentWindow&&_(t)}}function _(e){if(!O(e)){if(l.push(e),i.isFeatureEnabled("useDocumentReadyForIframeLoad"))return void mtjQuery(e.contentWindow.document).ready(function(){D(e)});n.isIE(9,"lte")?e.addEventListener?e.addEventListener("load",k,!1):e.attachEvent("onload",k):mtjQuery(e).bind("load.walkme",function(){D(e)})}}function k(e){D(e.currentTarget)}function A(e){n.isIE(9,"lte")?e.removeEventListener?e.removeEventListener("load",k,!1):e.detachEvent("onload",k):mtjQuery(e).unbind("load.walkme")}function D(e){A(e),N(e)}function O(e){for(var t=0;t<l.length;t++)if(l[t]==e)return!0;return!1}function N(e){for(var t=0;t<l.length;t++)l[t]==e&&l.splice(t,1)}function x(){null!=u&&(u.clear(),u=null)}function L(){for(var e=0;e<l.length;e++)mtjQuery(l[e]).unbind("load.walkme");l=[]}function F(e,t){e=e?e:document;var n=t?M(t):-1;return mtjQuery("frame",e).each(function(){try{if(mtjQuery("frame, frameset",this.contentWindow.document).length>0){var e=this.contentWindow.document;e&&(t=g.findBiggestFrame(e,t),n=t?M(t):-1)}else{var r=M(this);r>n&&(n=r,t=this)}}catch(i){}}),t}function M(e){var t=0;return t=void 0!==e.height&&void 0!==e.width?e.height*e.width:mtjQuery(e).height()*mtjQuery(e).width()}h.apply(null,arguments)}function xa(e,t,n){var r=this,i=e,o=t,a=n.wrapCustomerLog(S);r.foreachDocument=function(e,t){e(document),i.doForAllFrames(e),o.foreachIframe(n);function n(t){try{e(t.iframe.contentWindow.document)}catch(n){a("DocumentsManager - Skipping inaccessible document",3)}}}}i.register("DocumentsManager").asCtor(xa).dependencies("FramesetsUtils, IFramesManager, Logger");function La(){function e(e,t){var n={};for(var r in t){n[r]=t[r];var i="function"==typeof t[r],o="function"==typeof e[r];i&&!o?e[r]=t[r]:i&&o&&t[r].WM_VIRTUAL&&(t[r]=e[r])}return n}this.extend=function(t,n,r,i,o,a){var s=new n(r,i,o,a),u=e(t,s);t._base=u},this.VIRTUAL=function(e){return e.WM_VIRTUAL=!0,e};var t=this.VIRTUAL(function(){throw"Function is pure virtual. must override"});this.WM_PURE_VIRTUAL=function(){return t}}var La=new La;i.register("WalkmeInheritance").asInstance(La),i.register("POVisibleIframeChecker").asCtor(Fa).dependencies("CommonUtils,FeaturesManager,Logger,PostMessageListener, PostMessage");function Fa(){var t=this;t.executeIfVisible=d,t.reset=m;var n,r,i,o,a,s="isVisibleFrameAsk",u="isVisibleFrameAnswer",l=[];function c(e,t,s,u,l){i=s,n=e,o=u,r=t.isFeatureEnabled("sfLightningPo"),a=l,r&&p()}function d(e){if(!r||window==top)return e();l.push(e);try{var t={wm:!0,type:s};f(window,n.toJSON(t))}catch(o){i.error(o)}}function f(e,t){var n=e&&e.parent;if(!n||n==e)return;a.apply(n,[t,"*"]),f(n,t)}function p(){o.listen(h)}function g(t,n){if(null===n)return;var r=void 0;return e("iframe,frame",n).each(function(n,i){if(i.contentWindow==t)return r=e(i).is(":mt_visible"),!1;try{if(r=g(t,i.contentDocument),void 0!==r)return!1}catch(o){}}),r}function h(e){try{var t=n.secureEvalJSON(e.data);if(!t.wm)return;switch(t.type){case s:var r=g(e.source);void 0===r&&(r=!0),e.source.postMessage(n.toJSON({wm:!0,type:u,isVisible:r}),"*");break;case u:if(t.isVisible){var i=l.shift();i&&i()}}}catch(o){}}function m(){l=[]}c.apply(null,arguments)}i.register("PreExecutionPassOwnershipWrapper").asCtor(Ma);function Ma(){var e=this;e.wrap=r,e.setCurrent=s,e.getCurrent=i,e.clearCurrent=a,e.getCurrentStepData=o;var t,n;function r(e,t,n){s(e,t);var r=n();return a(),r}function i(){return t}function o(){return n}function a(){s(void 0,void 0)}function s(e,r){t=e,n=r}}i.register("PassOwnershipRouter").asCtor(Ba).dependencies("FlowStack, CommonEvents, OwnershipManagerProvider");function Ba(e,t,n){var r=this;r.evaluateOwnership=i,r.loseOwnership=o,r.gainOwnership=a,r.evaluateOwnershipByPeeking=s;function i(e,t,n){return u(n).evaluateOwnership(e,t)}function o(){t.raiseEvent("loseOwnership");var e=n.get();return e&&e.lostOwnership()}function a(e,n,r){t.raiseEvent("gainOwnership");var i=u();return i&&i.gainedOwnership(e,n,r)}function s(){var e=u();return e&&e.evaluateOwnershipByPeeking()}function u(t){return e.load(),n.get(t)}}i.register("OwnershipManagerProvider").asCtor(Ra).dependencies("Consts, BizflowOwnershipManager, ClientStorageManager, FlowStack");function Ra(e,t,n,r){var i=this;i.addOwnershipManager=u,i.get=l;var o,a;function s(){o={},u(e.PASS_OWNERSHIP.PassOwnershipEntity.BizFlow,t)}function u(e,t,n){o[e]=t,n&&(a=t)}function l(i){return i?o[i]:r.isEmpty()&&!n.getData(e.FLOW_BEFORE_PLAY_KEY)?a:t}s()}i.register("BizflowOwnershipManager").asCtor(Ua).dependencies("CrossDomainManager, Consts, BizflowPassOwnershipDeterminator, FlowsContainer, FlowsPlayer, TimerManager,FlowStack, WmInternals, ClientStorageManager, FlowsRestorer");function Ua(e,t,n,r,i,o,a,s,u,l){var c=this;c.determineOwner=p,c.evaluateOwnership=g,c.evaluateOwnershipByPeeking=h,c.gainedOwnership=S,c.lostOwnership=T;var d=u.keysConfig.flow.beforePlay.key;function f(){s.on(t.EVENTS.Flows.FlowStopped,function(){e.get().reset()}),s.on(t.EVENTS.Flows.FlowCompleted,function(){e.get().loseOwnership()})}function p(t,r){E({flowId:t,stageId:r});var i=e.get().optimizedDetermineOwnership();i||(e.get().reset(),n.isPassOwnershipNode(v())&&e.get().setOwnershipCondition({flowId:t,stageId:r}))}function g(e,t){return n.evaluateOwnership(m(t))}function h(){var e=v();return n.isPassOwnershipNode(e)}function m(e){if(e)return w(e.flowId,e.node.Id);var t=u.getData(d);return t?w(t.flowId,t.stageId):y()}function v(){var e=u.getData(d)||a.peek();return w(e.flowId,e.stageId)}function y(){var e=u.getData(t.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE);if(e)return w(e.flowId,e.stageId)}function E(e){u.saveData(d,e,u.keysConfig.flow.beforePlay.expiry),u.refreshGetData()}function S(e,t,n){var r=u.getData(d);r?(E(null),C(e,b(r.flowId,r.stageId))):l.restore(),e&&n&&o.resumeAllTimeouts()}function T(){i.pause()}function C(e,t){var r=t.node;if(!r)return;var o=r.Id;!e&&n.isPassOwnershipNode(r)&&(o=r.Links[0].TargetFlowNodeId),i.play(t.flowId,o)}function b(e,t){return{flowId:e,node:w(e,t)}}function w(e,t){return r.getNodeById(e,t)}f()}i.register("BizflowPassOwnershipDeterminator").asCtor(Va).dependencies("Consts, ConditionCheckerFactory");function Va(e,t){var n=this;n.isPassOwnershipNode=r,n.evaluateOwnership=i;function r(t){return t&&t.ActionType==e.FLOW_ACTION_TYPE.PassOwnership}function i(t){return r(t)?o(t)?e.PASS_OWNERSHIP.EvaluateOwnership.Owner:e.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:e.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined}function o(e){var n=t.createNew({featureName:"SwitchToFrameNode",
elementName:e.Name});return n.getCurrentEvaluationValueAndStopEvaluating(e.ConditionTrees.SwitchToFrame)}}i.register("PassOwnershipManager").asCtor(Wa).initialize(!1);function Wa(){var e,t,n,r,o,a,s,u,l,c,d,f,p,g=new Xp(this),h=2e3,m=3e3,v=1100,y=this,E=!1,S=g.Prop.Protected("isRunning",!1),T=g.Prop.Protected("storageManager",!1),C=g.Prop.Protected("allUserGuids",{}),b=g.Prop.Public("crossDomainSampleRate",{}),w=g.Prop.Protected("listenCallback");function I(n){f=i.get("CommonEvents"),p=i.get("Consts"),s=i.get("Logger"),u=i.get("FeaturesManager"),d=i.get("TimerManager"),b(P()),r=n.errorHandler,o=n.userGuid,T(n.storageManager),C(n.allUserGuids),a=n.topWindow==n.owner,c=s.wrapCustomerLog(p.PASS_OWNERSHIP.LOG_FEATURE);var l=n.storageManager.keysConfig.passOwnership;e=l.stopOwnership,t=l.play}var P=g.Virtual.Protected("getSampleRate",function(){return 200}),_=g.Public("enabled",function(){return u.isFeatureEnabled("cd_play")||u.isFeatureEnabled("passOwnership")});g.Virtual.Public("start",function(e){if(!_())return;c("starting cross domain listening..."),w(e),R()}),g.Virtual.Public("stop",function(){T().releaseCallback(U)}),g.Virtual.Public("reset",function(){if(!_())return;Q(!0),X(),d.libSetTimeout(function(){Q(!1)},v)}),g.Virtual.Public("determineOwnership",function(e){if(!_())return;c("switching owner...");var t=k(e);return t||(F(),A(),T().setSyncFlag(o)),t});var k=g.Virtual.Protected("checkIsConditionMet",function(e){return K(e),D()});g.Virtual.Public("loseOwnership",function(e,t){if(!_())return;c("losing ownership..."+document.location.href),S()&&(e&&(c("reset state: reseting the ownership condition"),X()),t?N():S(!1))});var A=g.Virtual.Protected("removeOwner",function(){});g.Virtual.Public("optimizedDetermineOwnership",function(){if(!_())return Y().gainOwnership(),!0;return O(),!1});var D=g.Virtual.Public("isConditionMet",function(e,t,n){var r=Y().evaluateOwnership(e,t,n);return r==p.PASS_OWNERSHIP.EvaluateOwnership.Owner||r==p.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined&&y.isOwnerByDefault()}),O=g.Virtual.Protected("dontStartAsOwner",function(){}),N=(g.Virtual.Protected("startAsOwner",function(){}),g.Virtual.Protected("resumeCrossDomain",function(){c("saving data to resume after unload",3),K(n),E=!0,n=null,x()}));function x(){d.setWalkmeTimeout(L,m)}var L=g.Virtual.Protected("actualResume",function(){c("continue listening after "+m+" milliseconds",3),R()}),F=g.Virtual.Protected("terminate",function(){c("owner killed, losing ownership",3),Y().loseOwnership(),y.loseOwnership()}),M=g.Virtual.Protected("gainOwnership",function(){c("gaining ownership: "+document.location.href,3),S(!0),Y().gainOwnership(E,B(),!0),E=!1}),B=g.Virtual.Protected("windowIdentifier",function(){return window.location.href}),R=g.Virtual.Protected("listen",function(){T().refreshGetData(C(),U)}),U=g.Virtual.Protected("handleOwnership",function(){var e=z();S()?e&&F():e||!H()&&!G()?e?c("waiting for other owner to die before gaining ownership...",3):E&&(E=!1):M(),d.libSetTimeout(R,W()),V()}),V=g.Protected("handleListenCallback",function(){w()&&(w()(),w(null))}),W=g.Protected("calculateDomainListenInterval",function(){return E?h:b()}),G=g.Protected("checkOwnership",function(){try{if(q())return Y().evaluateOwnership(!0)==p.PASS_OWNERSHIP.EvaluateOwnership.Owner;if(j())return c("no ownership condition, owner by default",5),!0}catch(e){r(e,"Error determining the owner of a cross domain step")}return!1}),H=g.Protected("isOwnerByPeeking",function(){var e=Y().evaluateOwnershipByPeeking();return e&&c("[passownership] owner by peeking",5),e}),j=g.Public("isOwnerByDefault",function(){return a});function Y(){return l||(l=i.get("PassOwnershipRouter")),l}function z(){return T().getData(e.key,!1,o)}function Q(t){T().saveData(e.key,t,e.expiry,o)}function q(){return n=T().getData(p.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,!1,o)}var K=g.Public("setOwnershipCondition",function(e){n=e,T().saveData(t.key,e,t.expiry,o)}),X=g.Protected("resetOwnershipCondition",function(){T().saveData(t.key,!1,t.expiry,o)});I.apply(null,arguments)}i.register("TabbedOwnershipManager").asCtor(Ga).initialize(!1);function Ga(){var e,t,n,r,o,a,s,u,l,c,d,f,p,g,h,m,v,y,E,S,T,C,b,w,I,P,_,k=new Xp(this),A=300,D="wm-setPriority",O="wm-qp-req",N="wm-qp-res",x=100,L=1,F=10,M=this,B=0,R=!1;function U(s){a=i.get("Consts"),I=i.get("CommonEvents"),w=i.get("TimerManager"),E=i.get("PassOwnershipRouter");var u=i.get("Logger");P=i.get("POVisibleIframeChecker"),b=s.isFeatureEnabled("po_doubleCheck"),k.Extends(Wa,s),o=k._base,o.crossDomainSampleRate(H()),e=2*o.crossDomainSampleRate(),t=W()?5e3:800,n=W()?2e4:5e3,r="Chrome"==i.get("HostData").browser.name?1200:700,g=s.errorHandler,p=s.userGuid,m=o.storageManager,v=o.allUserGuids,y=o.isRunning,_=u.wrapCustomerLog(a.PASS_OWNERSHIP.LOG_FEATURE),V(),le()}function V(){var e=o.storageManager().keysConfig.tabbedOwnership;u=e.priorityCheck,l=e.lastPriority,c=e.currentOwner,d=e.prioritiesQueue,f=e.priority.key}k.Virtual.Public("getPriority",function(){return s});function W(){return G()||i.get("HostData").isIEBrowser(10,"gte")}var G=k.Protected("isSlowerBrowser",function(){return i.get("HostData").isIEBrowser(9,"lte")}),H=k.Override("getSampleRate",function(){var e=o.getSampleRate();return G()&&(e*=2),e});k.Override("start",function(e){J(function(){I.raiseEvent(a.EVENTS.PassOwnership.PriorityInitialized,{priority:s}),ue(),ne(),o.start(e)})}),k.Override("stop",function(){if(!M.enabled())return;ce(),de(),_("stop ownership",4),y(!1),o.stop()}),k.Override("reset",function(){if(!M.enabled())return;S=0,_("reset ownership",4),o.resetOwnershipCondition(),Te(),y(!1)});var j=k.Override("dontStartAsOwner",function(){o.dontStartAsOwner(),we()}),Y=k.Override("startAsOwner",function(){y(!0),Se(s)});k.Override("resumeCrossDomain",function(){y(!1),R=!0,o.resumeCrossDomain()}),k.Override("actualResume",function(){R=!1,o.actualResume()}),k.Override("handleOwnership",function(){var e=Ee();K()||(y()&&s!=e&&(o.terminate(),P.reset()),y()||(!e&&o.checkOwnership()||q()?z():s==e&&Q()&&(o.gainOwnership(),he()))),w.libSetTimeout(o.listen,o.calculateDomainListenInterval()),o.handleListenCallback()});function z(){var e={priority:s,asyncCallback:Ce};I.raiseEvent(a.EVENTS.PassOwnership.PORegisterPriority,e)}var Q=k.Virtual.Protected("shouldRegainOwnership",function(){return o.checkOwnership()});function q(){if(o.isOwnerByPeeking())return B++,B>=F;B=0}function K(){if(!S)return!1;return S--,!0}k.Override("determineOwnership",function Pe(e,t){o.setOwnershipCondition(e),h=o.isConditionMet(t),h||we(),b&&!t?he(null,function(){Pe(e,!0)},b):o.determineOwnership(e);var n=h;return h=void 0,n}),k.Override("checkIsConditionMet",function(){return h}),k.Override("optimizedDetermineOwnership",function(){if(!o.enabled())return E.gainOwnership(),!0;return o.isConditionMet()?(Y(),E.gainOwnership(),!0):(j(),!1)});function X(){o.storageManager().refreshGetData(v(),function(){T=null;var e=Ie(),t=Ee(),n=q();!e||s!=e||t&&!n?!n&&t&&t!=s&&we():(_("priority is highest, gaining ownership - "+s,4),Se(s),o.gainOwnership())})}k.Override("windowIdentifier",function(){return s+":"+window.location.href}),k.Override("removeOwner",function(e,t){o.removeOwner(),Te()});function J(e){Z(function(t){var n=parseInt(t,10)||0;_("got priority "+n+" from sessionStorage",4),oe(n,function(t){0===n||t?(_((t?"inherited priority from parent":"priority is zero")+", getting a new priority",4),he(null,e,!0)):(s=n,b?$(e):e&&e())})})}function $(e){oe(s,function(t){t?he(null,e,!0):e&&e()})}var Z=k.Virtual.Protected("restorePriority",function(e){o.storageManager().sessionGetData(f,0,p,e)}),ee=k.Virtual.Protected("storePriority",function(e){m().sessionSetData(f,e,p)});function te(){return i.get("HostData").isIE()||b}function ne(){te()&&re()}function re(){var e=u.key+s,t=m().getData(e,void 0,p);t>=1&&m().increment(e,null,u.expiry,p),w.libSetTimeout(re,A)}function ie(e,t){var n=u.key+e;m().increment(n,null,u.expiry,p,function(){var e=!0;function i(){if(!e)return;m().refreshGetData(v(),function(){if(!e)return;var t=m().getData(n,void 0,p);t>1&&a(!0),w.libSetTimeout(i,x)})}var o=w.libSetTimeout(a,r);function a(r){r=!!r,m().saveData(n,0,u.expiry,p),m().removeData(n,p),e=!1,o&&o.clear(),t&&t(r)}i()})}function oe(e,t){if(!e)return void(t&&t(!1));te()?(_("checking if priority is inherited using storageManager",4),ie(e,t)):(_("checking if priority is inherited using window.opener",4),ae(e,t))}function ae(e,t){if(window.opener){var n,r,i;function o(e){_("is priority inherited: "+e,4),r&&r.clear(),n&&n(),t&&t(e)}n=br.registerEventHandler("message",function(t){try{var n=ig(t.data);n.requestType==N&&(n.priority==e?(S=L,o(!0)):(i--,0==i&&o()))}catch(r){_("Error in priority inherited message event "+r,4)}}),r=w.libSetTimeout(function(){o(!1)},1e3),i=br.postMessageToAllFramesChain(window.opener,rg({requestType:O})),0==i&&o(!1)}else t&&t(!1)}var se=k.Virtual.Protected("shouldRegisterFocusEvents",function(){return window==top});function ue(){se()&&(mtjQuery(window).bind("focus",he),mtjQuery(window).bind("mouseenter",he))}function le(){br.registerEventHandler("message",fe)}function ce(){se()&&(mtjQuery(window).unbind("focus",he),mtjQuery(window).unbind("mouseenter",he))}function de(){br.unregisterEventHandler("message",fe)}function fe(e){var t;try{switch(t=ig(e.data),t.requestType){case D:pe(t.priority);break;case O:e.source.postMessage(rg({requestType:N,priority:s}),"*")}}catch(n){t&&g(n,"error handling priority message from parent")}}var pe=k.Virtual.Protected("handleSendPriorityRequest",function(e){_("frame got new priority from parent window: "+e,4),s=e,ye(e)}),ge=[],he=k.Virtual.Public("updatePriority",function(e,t,n){if(t&&ge.push(t),C||R)return;var r=s;C=!0;var i=n?null:s;m().increment(l.key,i,l.expiry,p,function(e){e!==s&&(_("updating priority from "+r+" to "+e,4),ve(e),me(e,r));var t=ge;ge=[],C=!1;for(var n=0;n<t.length;n++)t[n](s)})}),me=k.Virtual.Protected("afterUpdatingPriority",function(e){ye(e)});function ve(e){s=e;var t=s;s=e,ee(s),(y()||Ee()==t)&&(_("is running during set priority - setting current owner",4),Se(s)),_("updated priority: "+s,4)}function ye(e){var t={requestType:D,priority:e};_("sending priority to all frames: "+e,4),mtjQuery("iframe").each(function(e,n){n.contentWindow.postMessage(rg(t),"*")})}function Ee(){return m().getData(c.key,!1,p)}function Se(e){return _("setting owner to: "+document.location.href+"owner id:"+e,4),S=L,m().saveData(c.key,e,c.expiry,p)}function Te(){_("removing current owner",4),m().saveData(c.key,null,c.expiry,p)}function Ce(){P.executeIfVisible(function(){_("register in queue with priority "+s,4),m().addToDictionary(d.key,s,be(),d.expiry,p),T&&!T.cleared||(T=w.libSetTimeout(X,e))})}function be(){return(new Date).getTime()}function we(){_("po_tabs - clear priorities queue",4),m().saveData(d.key,null,d.expiry,p)}function Ie(){var r=m().getData(d.key,!1,p);_("registered priorities: "+rg(r),4);for(var i=0,o=t;!i&&o<n;){for(var a in r)if(r.hasOwnProperty(a)){var s=parseInt(a,10);be()-r[a]<o&&s>i&&(i=s)}o+=e}return i}U.apply(null,arguments)}i.register("FramedOwnershipManager").asCtor(Ha).initialize(!1);function Ha(){var t,n,r,o,a=new Xp(this),s="walkme-priorities";function u(e){var n=i.get("Logger"),s=i.get("Consts");o=i.get("UserGuidContainer").getUserGuid(),a.Extends(Ga,e),r=a._base,t=n.wrapCustomerLog(s.PASS_OWNERSHIP.LOG_FEATURE)}a.Override("getPriority",function(){return r.getPriority()||n}),a.Override("restorePriority",function(i){if(t("[po_frames] restoring priority, temp priority is: "+n,4),window==top)r.restorePriority(i);else{var o=l();if(o&&o.length){var a=p(f());o.sort(function(e,t){return e>t?-1:e<t?1:0}),t("[po_frames] used priorities: "+rg(o),4);for(var u=0;u<o.length&&!n;u++)e.inArray(o[u],a)==-1&&(a.push(o[u]),sessionStorage.setItem(s,rg(a)),n=o[u])}c(n,i)}});function l(){var e=sessionStorage.getItem(s);if(t("[po_frames] getting session priorities: "+e,4),e)return ig(e)}function c(e,t){e&&!d(e)?t&&t(e):r.updatePriority(null,function(e){c(e,t)})}function d(t){return e.inArray(t,p(top))!=-1}a.Override("storePriority",function(n){if(n=parseInt(n,10),window==top)r.storePriority(n);else{var i=ig(sessionStorage.getItem(s)||"[]");e.inArray(n,i)==-1&&i.push(n),t("[po_frames] storing priority "+n+" in the session",4),sessionStorage.setItem(s,rg(i))}});function f(){try{top.frames;return top}catch(e){return window}}function p(e){var t=[];try{if(e!=window&&e._walkmeInternals){var n=e._walkmeInternals.ctx.get("CrossDomainManager");if(n&&n.isReady())var r=n.get().getPriority();r&&o==e._walkmeInternals.ctx.get("UserGuidContainer").getUserGuid()&&t.push(parseInt(r,10))}}catch(i){}try{for(var a=e.frames,s=0;s<a.length;s++)t=t.concat(p(a[s]))}catch(i){}return t}a.Override("afterUpdatingPriority",function(e,t){g(t)});function g(n){var r=l();if(t("[po_frames] removing priority "+n+" from session",4),r&&n){var i=e.inArray(n,r);i>=0&&(r.splice(i,1),sessionStorage.setItem(s,rg(r)))}}a.Override("handleSendPriorityRequest",function(e){}),a.Override("shouldRegisterFocusEvents",function(){return!0}),a.Override("shouldRegainOwnership",function(e,t){return!0}),u.apply(null,arguments)}var ja=function(){function t(e,t,n,r,i,o,a,s,u,l,c,d){this._mustache=e,this._commonUtils=t,this._positionHelper=n,this._commonEvents=r,this._uiUtils=o,this._siteConfigManager=a,this._timerManager=s,this._cdnServer=i.get(),this._getTopContainer=u,this._lib=l,this._hostData=c,this._consts=d}return t.prototype.activate=function(e,t,n,r,i,o){this._activateContentInNewTab=o,this.createLightBox(e,t,n,r,i)},t.prototype.getElement=function(){return this._lightBoxDiv},t.prototype.getAjaxLoader=function(n){var r=e("#"+t.AJAX_LOADER_DIV_ID,n);return r},t.prototype.remove=function(e){e||(e=this._getTopContainer(null,!1)),this.removeTakingLongMsg(!1),this.removeLightBox(e),this.removeOverlay(),this.unbindEscButton(e)},t.prototype.removeOverlay=function(){e("#"+t.OVERLAY_ID).remove()},t.prototype.unbindEscButton=function(e){e.unbind(t.KEY_UP_EVENT)},t.prototype.removeLightBox=function(n){var r=e("#"+t.LIGHTBOX_DIV_ID,n);r.exist()&&(r.find("iframe").attr("src",""),r.remove(),this._commonEvents.raiseEvent(this._consts.EVENTS.ContentRemoved,{}))},t.prototype.createLightBox=function(n,r,i,o,a){var s=this._getTopContainer(null,!1),u=this.getHtml(n,r),l=e(u);this._lightBoxDiv=l,this.addCssClasses(n,l,i),this._uiUtils.setLangAttribute(l);var c=this.createXButtonElement();l.append(c),this.handleCreatingOpenInNewTabButton(n,s,l,o),this.handleCreatingOverlay(),this.bindEscButton(s);var d=a(n);this.setTakingLongTimers(l),this.overlayContent(d,l);var f=this.handleIosIframeScrolling(d);this.appendContent(f),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxDivCreated,{lightBoxDiv:l,content:n}),s.append(l);var p=e("#"+t.RELOAD_LIGTHBOX_DIV_ID);return p.click(e.proxy(function(){var e=d.get(0);e.src=e.src,this.getAjaxLoader(l).show(),this.removeTakingLongMsg(!1),this.setTakingLongTimers(l)},this)),this._positionHelper.centerElementInParent(p,l),p.css("left","0"),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxCreated,l),l},t.prototype.overlayContent=function(t,n){t.hide();var r=e.proxy(function(){t.off("load loadeddata",r),this.removeTakingLongMsg(!0),this.getAjaxLoader(n).remove(),t.show()},this);this.shouldWaitForReady(t)?t.ready(r):t.load(r),"VIDEO"==i.get("ElementUtils").getElementTagName(t[0])&&t.bind("loadeddata",r)},t.prototype.appendContent=function(e){this._lightBoxDiv.append(e)},t.prototype.reloadButtonTimerFunction=function(n){e("#"+t.RELOAD_LIGTHBOX_DIV_ID).css("display","block"),this._reloadButtonTimer.clear(),this.getAjaxLoader(n).hide()},t.prototype.takingLongerTimerFunction=function(n){var r=e("#"+t.WAITING_DIV_ID);this._positionHelper.centerElementInParent(r,n),r.css("left","0"),r.css("display","block"),this._takingLongerTimer.clear()},t.prototype.setTakingLongTimers=function(n){this._takingLongerTimer=this._timerManager.libSetTimeout(e.proxy(function(){this.takingLongerTimerFunction(n)},this),t.TAKING_LONGER_MESSAGE_INTERVAL),this._reloadButtonTimer=this._timerManager.libSetTimeout(e.proxy(function(){this.reloadButtonTimerFunction(n)},this),t.RELOAD_BUTTON_INTERVAL)},t.prototype.removeTakingLongMsg=function(n){this._reloadButtonTimer&&this._reloadButtonTimer.clear(),this._takingLongerTimer&&this._takingLongerTimer.clear();var r=e("#"+t.RELOAD_LIGTHBOX_DIV_ID),i=e("#"+t.WAITING_DIV_ID);n?(r.remove(),i.remove()):(r.css("display","none"),i.css("display","none"))},t.prototype.handleIosIframeScrolling=function(e){var t=/iPhone|iPod|iPad/.test(navigator.userAgent);return t?this.getIframeWrapperDiv(e):e},t.prototype.getIframeWrapperDiv=function(t){var n={width:t.attr("width")||t[0].style.width,height:t.attr("height")||t[0].style.height,overflow:"auto","-webkit-overflow-scrolling":"touch"},r=e("<div />").css(n);return r.append(t),r},t.prototype.bindEscButton=function(n){n.bind(t.KEY_UP_EVENT,e.proxy(function(e){27==e.keyCode&&this.remove()},this))},t.prototype.handleCreatingOverlay=function(){var n=this._uiUtils.canDisplayOverlay();if(n){var r=this._uiUtils.displayOverlay(this._consts.POPUP_BALLOON_Z_INDEX,!1,t.OVERLAY_ID);r.click(e.proxy(function(){this.remove()},this))}},t.prototype.handleCreatingOpenInNewTabButton=function(t,n,r,i){if(i){var o="walkme-open-in-new-tab-button",a=e(this.newTabHtml(o));a.click(e.proxy(function(){this.remove(n),this._activateContentInNewTab(t)},this)),a.mouseover(e.proxy(function(){this.contentMouseOver(a,!0)},this)),a.mouseout(e.proxy(function(){this.contentMouseOver(a,!1)},this)),r.append(a)}},t.prototype.newTabHtml=function(e){throw""},t.prototype.addCssClasses=function(e,t,n){var r=this._commonUtils.formatString("walkme-{0}-light-box-{1}",n,e.Id);t.addClass(r),t.addClass("walkme-to-remove"),t.addClass("walkme-to-destroy")},t.prototype.createXButtonElement=function(){var t="walkme-light-box-x-button",n=this._siteConfigManager.get().ContentCloseTooltip,r=e(this.xButtonHtml(t,n));return r.click(e.proxy(this.closeLightBoxClicked,this)),r.mouseover(e.proxy(function(){this.contentMouseOver(r,!0)},this)),r.mouseout(e.proxy(function(){this.contentMouseOver(r,!1)},this)),r},t.prototype.xButtonHtml=function(e,t){throw""},t.prototype.contentMouseOver=function(e,t){throw""},t.prototype.closeLightBoxClicked=function(){this.remove(),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxClosed)},t.prototype.getHtml=function(e,t){return this._mustache.to_html(this.getTemplate(),this.getConfig(e,t))},t.prototype.getConfig=function(e,n){var r=this.getDimensionSize("width",e,n),i=this.getDimensionSize("height",e,n),o=this.getToolbarWidth(r);return{lightboxDivId:t.LIGHTBOX_DIV_ID,lightboxWidth:r,lightboxHeight:i,zIndex:this._consts.POPUP_BALLOON_Z_INDEX,lightboxTopbarDivId:t.LIGHTBOX_TOPBAR_DIV_ID,topbarWidth:o,ajaxLoaderDivId:t.AJAX_LOADER_DIV_ID,waitingDivId:t.WAITING_DIV_ID,reloadDivId:t.RELOAD_LIGTHBOX_DIV_ID,cdnServer:this._cdnServer}},t.prototype.shouldWaitForReady=function(e){return(this._hostData.isIE()||"Chrome"==this._hostData.browser.name)&&e[0]&&e[0].src&&e[0].src.indexOf(".pdf")>-1},t.prototype.getTemplate=function(){throw""},t.prototype.getDimensionSize=function(e,t,n){throw""},t.prototype.getToolbarWidth=function(e){throw""},t.prototype.getSize=function(){throw""},t.LIGHTBOX_DIV_ID="walkme-content-light-box",t.LIGHTBOX_TOPBAR_DIV_ID="walkme-content-light-box-top-bar",t.AJAX_LOADER_DIV_ID="walkme-ajax-loader",t.WAITING_DIV_ID="walkme-ajax-taking-long",t.RELOAD_LIGTHBOX_DIV_ID="walkme-ligth-box-reload",t.OVERLAY_ID="walkme-content-background",t.KEY_UP_EVENT="keyup.walkme",t.TAKING_LONGER_MESSAGE_INTERVAL=8e3,t.RELOAD_BUTTON_INTERVAL=15e3,t}(),Ya=function(e){__extends(t,e);function t(){e.apply(this,arguments)}return t.prototype.activate=function(t,n,r,i,o,a){e.prototype.activate.call(this,t,n,r,i,o,a),this._lib.centerElementInPage(this._lightBoxDiv,!1)},t.prototype.createLightBox=function(n,r,i,o,a){e.prototype.createLightBox.call(this,n,r,i,o,a);var s=this.getAjaxLoader(this._lightBoxDiv);this._positionHelper.centerElementInParent(s,this._lightBoxDiv),s.css("left","0"),this._positionHelper.registerResizeAndScrollEvents({element:this._lightBoxDiv,eventNameSuffix:t.WALKME_LIGHTBOX_EVENTS})},t.prototype.removeLightBox=function(n){e.prototype.removeLightBox.call(this,n),this._positionHelper.removeScrollAndResizeEvents(t.WALKME_LIGHTBOX_EVENTS)},t.prototype.getDimensionSize=function(e,t,n){var r=this.getSizeUnitSettingKey(e),i=this.getSizeUnit(t,r),o=this.getDimensionSettingKey(e),a=this._commonUtils.getSettingsValue(t.Settings,o,n[e]);if("%"==i){var s=this._positionHelper.getWindowSize();a=s[e]*a/100}return a+"px"},t.prototype.getSizeUnitSettingKey=function(e){return e+"Unit"},t.prototype.getSizeUnit=function(e,t){return this._commonUtils.getSettingsValue(e.Settings,t,"px")},t.prototype.getDimensionSettingKey=function(e){return"height"==e?t.LIGHTBOX_HEIGHT_KEY:t.LIGHTBOX_WIDTH_KEY},t.prototype.getToolbarWidth=function(e){return parseFloat(e)+4+"px"},t.prototype.getSize=function(){return{width:this._lightBoxDiv.css("width").replace("px","")+"px",height:this._lightBoxDiv.css("height").replace("px","")+"px"}},t.prototype.contentMouseOver=function(e,t){var n=t?"#404040":"#646464";e.css("backgroundColor",n)},t.prototype.xButtonHtml=function(e,t){return this._commonUtils.formatString("<div id={0} title='{1}' style='position:absolute; height: 17px; width: 17px; right: 5px; top: -19px; cursor: pointer; z-index: 2147483632; vertical-align: top;'><img src='{2}/player/resources/images/blue-x-button.png' style='margin: 4px;' /></div>",e,t,this._cdnServer)},t.prototype.newTabHtml=function(e){return this._commonUtils.formatString("<div id={0} title='Open in a new tab' style='position:absolute;height:17px; width:17px; right:25px; top:-19px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/open-in-new-tab.png' style='margin: 4px;'></div>",e,this._cdnServer)},t.prototype.getTemplate=function(){return"<div id='{{lightboxDivId}}' class='wm-lightbox-web' style='float:left; width:{{lightboxWidth}}; height:{{lightboxHeight}}; padding: 2px; z-index:{{zIndex}}; background-color:white; box-shadow:4px -4px 19px -1px #494949;'><div id='{{lightboxTopbarDivId}}' style='position: absolute; top: -23px; left: 0px; height: 25px; width: {{topbarWidth}}; background-color:#646464;'></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v2.gif) no-repeat center; width:100%; height:100px; position:relative; text-align:center; vertical-align: bottom; margin-top: -30px;'><span style='display: inline-block; color: #99d3fe; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>"},t.LIGHTBOX_WIDTH_KEY="LightboxWidth",t.LIGHTBOX_HEIGHT_KEY="LightboxHeight",t.WALKME_LIGHTBOX_EVENTS="walkmeLightBox",t}(ja),za=function(e){__extends(t,e);function t(){e.apply(this,arguments)}return t.prototype.createLightBox=function(t,n,r,i,o){e.prototype.createLightBox.call(this,t,n,r,i,o),this._lightBoxDiv.css({position:"fixed",top:0,left:0})},t.prototype.getDimensionSize=function(e,t,n){return"100%"},t.prototype.getToolbarWidth=function(e){return"100%"},t.prototype.getSize=function(){return{width:"100%",height:"100%"}},t.prototype.contentMouseOver=function(e,t){},t.prototype.getConfig=function(t,n){var r=e.prototype.getConfig.call(this,t,n);return r.padding="10px",r.title=t.Name,r},t.prototype.xButtonHtml=function(e,t){return this._commonUtils.formatString("<div id={0} title='{1}' style='position: absolute; right: 19px; top: 17px; cursor: pointer; z-index: 2147483632; vertical-align: top; height: 15px; width: 15px; background-image: url(\"{2}/player/resources/images/x-btn-resources.png\"); background-position: -5px -5px;'></div>",e,t,this._cdnServer)},t.prototype.newTabHtml=function(e){return this._commonUtils.formatString("<div id={0} title='Open in a new tab' style='position:absolute; height:11px; width:11px; right:50px; top:15px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/mobile_full_screen.png' style='margin: 4px;'></div>",e,this._cdnServer)},t.prototype.getTemplate=function(){return"<div id='{{lightboxDivId}}' class='wm-lightbox-web' style='width:{{lightboxWidth}}; height:{{lightboxHeight}}; box-sizing: border-box; z-index:{{zIndex}}; background-color: black; padding-top: 50px; padding-right: 10px;'><div style='width: 100%; box-sizing: border-box; padding: 0 15px; position: absolute; top: 0; left: 0px; line-height: 50px; background-color: #3393d1; color: white; text-align: left; font-size: 15px;'>{{title}}<div id='{{lightboxTopbarDivId}}' style='height: 100%; width: 100%;'></div></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v3.gif) no-repeat center; width:100%; height:100px; position:absolute; text-align:center; vertical-align: bottom; top: 50%; margin-top: -50px;'><span style='display: inline-block; color: white; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>"},t.LIGHTBOX_WIDTH_KEY="LightboxWidth",t.LIGHTBOX_HEIGHT_KEY="LightboxHeight",t}(ja);!function(){var e="Mustache,CommonUtils,PositionHelper,CommonEvents,CdnServer,UiUtils,SiteConfigManager,TimerManager,getTopContainer,Lib,HostData,Consts";L.register(O.PLATFORM.Web,function(){i.register("LightboxDisplayer").asProto().asCtor(Ya).dependencies(e)}),L.register(O.PLATFORM.MobileWeb,function(){i.register("LightboxDisplayer").asProto().asCtor(za).dependencies(e)})}();function Qa(){var e,t,n,r,o,a,s=this,u=i.get("Consts"),l="ContentPlayMode",c=u.PLAY_MODE;function d(r){e=r.lib,t=r.cdnServer,n=r.clickAuditManager,a=i.get("Logger").wrapCustomerLog(g),o=i.get("CommonEvents")}s.getContentTypeName=La.WM_PURE_VIRTUAL(),s.createContentElement=La.WM_PURE_VIRTUAL(),s.needsNewTabButton=La.WM_PURE_VIRTUAL(),s.defaultLightboxSize=La.WM_PURE_VIRTUAL(),s.cannotPlayInLightbox=function(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://");return t&&a("Can't play content in lightbox"),t},s.activateContent=function(e,t,r){var d=parseInt(i.get("SettingsValuesRetriever").getSettingsValue(e.Settings,l,c.NewTab));switch(a(cg("Started playing content, play mode is :{0}",d)),n.SendClickAudit(u.DEPLOYABLE_TYPE.Content,e.Id,{type:t,id:r},{contentType:e.Type}),e.Url=i.get("HtmlDecoder").decodeHtml(e.Url,["&"]),a(cg("Content url is :{0}",e.Url)),o.deprecatedRaiseEvent(u.EVENTS.LoadingContent,e),d){case c.Widget:h(e);break;case c.LightBox:s.cannotPlayInLightbox(e.Url)?(a("Falling back to playing content in a new tab instead"),p(e)):f(e);break;case c.NewTab:p(e)}},s.removeContent=function(e){r&&r.remove()};function f(e){r=i.create("LightboxDisplayer"),r.activate(e,s.defaultLightboxSize(),s.getContentTypeName(),s.needsNewTabButton(),s.createContentElement,p)}function p(e){i.get("CommonUtils").isValidUrl(e.Url)?(o.deprecatedRaiseEvent(u.EVENTS.LoadingContentInNewTab),a(cg("Opening content in new tab. Url: {0}",e.Url)),window.open(e.Url,"_blank")):a(cg("Content url is invalid: {0}",e.Url))}function h(e){throw"activateContentInWidget is unimplemented"}s.getLightboxSize=function(){return r.getSize()},d.apply(null,arguments)}function qa(){var e,t,n,r,o=this,a=null,s="VideoParameters",u=420,l=315;function c(s){La.extend(o,Qa,s),a=s.lib,e=s.vendorName,t=s.videoId,r=s.content,n=i.get("Logger").wrapCustomerLog(g)}o.getContentTypeName=function(){return"video"},o.createContentElement=function(e){return d(e)},o.needsNewTabButton=function(){return!1},o.defaultLightboxSize=function(){return{width:u,height:l}};function d(n){var o=f(n);if("html5video"==e){var a="";a+=h();var s=mtjQuery("<video controls "+a+' src="'+r.Url+'"></video>');return o.indexOf("autoplay")>-1&&s.attr("autoplay",1),s}var u=cg("[{0} {1}]{2}[/{3}]",e,o,t,e),l=i.get("BBCodeParser").parse(u),c=mtjQuery(l);return c}function f(e){var t=i.get("SettingsValuesRetriever").getSettingsValue(e.Settings,s,"");return t=p(t,e),t+=' wmode="opaque"'}function p(e,t){e=e.replace(/&quot;/gi,'"'),e=e.replace(/((width|height)="[^\\"]+)"/gi,"");var n=h();return e+=" "+n}function h(){var e=o.getLightboxSize(),t=cg('width="{0}" height="{1}"',e.width,e.height);return t}c.apply(null,arguments)}function Ka(){var e,t=this,n=null,r=900,o=500;function a(r){La.extend(t,Qa,r),n=r.lib,e=i.get("Logger").wrapCustomerLog(g)}t.getContentTypeName=function(){return"article"},t.createContentElement=function(e){return s(e)},t.needsNewTabButton=function(){return!0},t.defaultLightboxSize=function(){return{width:r,height:o}};function s(e){if(!i.get("CommonUtils").isValidUrl(e.Url))return;var n=t.getLightboxSize(),r='<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}; height: {{{height}}};"></iframe>',o=i.get("Mustache").to_html(r,{width:n.width,height:n.height,url:encodeURI(e.Url)}),a=mtjQuery(o);return a}a.apply(null,arguments)}i.register("AbPermutationManager").asCtor(Xa).dependencies("ClientStorageManager,EndUsersManager,AbPermutationManagerServerCaller, AbTestingEventCollectorCaller, AbCurrentPermutationProvider, LibDestroyer, Logger");function Xa(t,n,r,i,o,a,s){var u,l,c,d=this,f="ABTesting",p=!1,g=t.keysConfig.abPermutation;function h(){u=s.wrapCustomerLog(f)}d.setPermutations=function(e,t){l=e,c=t},d.getPermutations=function(){return l},d.initGetPermutation=function(e,t){y(l,c,e,function(e){o.setCurrentPermutation(e),t(e)})},d.getPermutation=function(){return o.getCurrentPermutation()},d.getPermutationById=function(e){for(var t=0;t<l.length;t++)if(l[t].PermutationId==e)return l[t];return!1};function m(e,t){return g.forcedPermutation.key+"-"+e+"-"+t}function v(e){return g.currentPermutation.key+"-"+e}function y(e,r,s,l){var c=parseInt(t.getData(g.permutationOverride.key));if(!isNaN(c))return o.setCurrentPermutation(c),u("Using debug permutation from 'wm-force-permutation' key: "+c,1),void l(c);if(!e)return void l(-1);var d=n.getEndUserGuid(!0);if(d===!1)return u("WalkMe ABTesting - Cannot retrieve end user. Stopping execution",1),void a.removeWalkMe("AbTesting - Cannot fetch EndUser",{sendLog:!0});var f,h=v(d),y=null!=s,C=b(e,r),I=S(h,C);if(void 0!=I&&!y)return o.setCurrentPermutation(I),u("using permutation from storage: "+I,1),void l(I);if(y){p=!0;var P=E(d,s,I);if(!P)return u("using permutation from activation rule: "+s,1),o.setCurrentPermutation(s),void l(s);u("got permutation from activation rule: "+s,2),f=s}else f=w(e),u("permutation was drawn: "+f,1);u("sending permutation id to server: "+f,2);var _=r?r.PermutationId:void 0;T(d,f,C,_,y,function(e){u("server returned permutation id : "+e,2),u("saving permutation in storage : "+e,3),t.saveData(h,e,g.currentPermutation.expiry);var n;if(y){u("Activation rule was used.",2);var r=m(d,s);t.saveData(r,1,g.forcedPermutation.expiry),n=f}else n=e;o.setCurrentPermutation(n),u("Final permutation: "+n,1),i.postEvent(y),l(n)})}function E(e,n,r){if(r==n)return!1;var i=m(e,n);
return 1!=t.getData(i)}function S(n,r){var i=parseInt(t.getData(n));if(!isNaN(i)){if(e.inArray(i,r)>-1)return u("permutation exists in storage: "+i,1),i;u("permutation exists in storage but was out of date: "+i,1)}return void u("no valid permutation exists in storage",2)}function T(e,t,n,i,o,a){r.sendPermutationToServer(e,t,n,i,o,a,C)}function C(){u("WalkMe ABTesting - Error when saving end-user permutation. Removing WalkMe",1),a.removeWalkMe("AbTesting - Cannot fetch EndUser Permutation",{sendLog:!0})}function b(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].PermutationId);return t&&n.push(t.PermutationId),n}function w(e){for(var t=0,n=Math.random(),r=0;r<e.length;r++)if(t+=e[r].Percentage,t>=n)return e[r].PermutationId;return e[e.length-1].PermutationId}h.apply(null,arguments)}i.register("AbCurrentPermutationProvider").asCtor(Ja);function Ja(){var e=this;e.setCurrentPermutation=r,e.getCurrentPermutation=n;var t=-1;function n(){return t}function r(e){t=e}}i.register("AbPermutationManagerServerCaller").asCtor($a).dependencies("RecorderServerManager, WmAjax, HostData, AuditSourceManager, UserGuidContainer");function $a(e,t,n,r,i){var o=this,a=1e4;function s(){}o.sendPermutationToServer=function(o,s,u,l,c,d,f){var p=t.execute({url:e.get()+"/AbTesting/SaveEndUserPermutation",dataType:"jsonp",data:{endUser:o,walkmeUserGuid:i.getUserGuid(),source:r.get(),permutationId:s,isForcedPermutation:c,availablePermutationsSerialized:rg(u),browser:n.browser.string,os:n.os.name,timeout:a,defaultPermutation:l}});p.success(function(e){"error"===e?f():d(e)}),p.error(function(e,t,n){f()})},s.apply(null,arguments)}i.register("AbTestingEventCollectorCaller").asCtor(Za).dependencies("Consts, EventCollectorEventSender, Logger");function Za(e,t,n){var r=this;r.postEvent=i;function i(r){try{var i={type:e.EVENT_SENDER_EVENT_APPS.AbTesting,reason:o(r)};t.postEvent(e.EVENT_SENDER_EVENT_TYPES.Draw,i)}catch(a){n.error(a)}}function o(t){var n=t?e.EVENT_SENDER_AB_TESTING_DRAW_REASONS.ActivationRule:e.EVENT_SENDER_AB_TESTING_DRAW_REASONS.Draw;return n}}i.register("UserAgent").asFunction(function(e){return e.navigator.userAgent}).asProto(),i.register("HostData").asFunction(es).dependencies("win");function es(t){var n=i.create("UserAgent",t),r=t.document,o="Firefox",a="Edge",s=function(e){var t=n.substring(e).indexOf(".");return n.substring(e,e+t)},u=function(){var e,t,i,u;if((u=n.indexOf("MSIE"))!=-1)e="IE",t=s(u+5);else if(n.indexOf("Trident")!=-1&&(u=n.indexOf("rv:"))!=-1)e="IE",t=s(u+3);else if((u=n.indexOf("Edge/"))!=-1)e=a,t=s(u+5);else if((u=n.indexOf("Chrome"))!=-1)e="Chrome",t=n.substring(u+7,n.lastIndexOf(" "));else if(/Firefox\/(\S+)/.test(n))e=o,t=RegExp.$1;else if(u=n.indexOf("Safari")!=-1)e="Safari",/Version\/(\S+)/.test(n)&&(t=RegExp.$1);else if((u=n.indexOf("Opera"))!=-1)if(e="Opera",/Version\/(\S+)/.test(n))t=RegExp.$1;else{var l=Math.max(n.lastIndexOf(" "),n.lastIndexOf("/"));t=n.substring(l+1)}else(i=n.lastIndexOf(" ")+1)<(u=n.lastIndexOf("/"))&&(e=n.substring(i,u),t=n.substring(u+1));return{name:e,version:t,string:e+" "+t,documentMode:r.documentMode}},l=function(e,t,n){switch(e){case"lt":return t<n;case"lte":return t<=n;case"gt":return t>n;case"gte":return t>=n;default:return t==n}},c=function(e,t){var n=u();if("IE"!=n.name)return!1;if(!e)return!0;return l(t,n.version,e)},d=function(e,t){if("android"!=S().name.toLowerCase())return!1;if(!e)return!0;var n=f();if(!n)return!1;return l(t,n,e)};function f(){var e=n.match(/android\s([0-9\.]*)/i);return!!e&&e[1]}var p=function(e,t,n){var i=u();if("IE"!=i.name)return!1;if(!e)return!0;var o=n&&n.ownerDocument||r,a=o.documentMode;return a||("BackCompat"==o.compatMode?a=5:"7"==i.version&&(a=7)),l(t,a,e)},g=function(e,t,n,r){return r?c(e,t)&&p(e,t,n):c(e,t)||p(e,t,n)},h=function(e){return g(e,"lt")},m=function(e){return p(5,null,e)},v=function(){return u().name==o};function y(){return u().name==a}var E=[{n:"Android",os:"Android"},{n:"Linux",os:"Linux"},{n:"X11",os:"UNIX"},{n:"iPad",os:"iOS"},{n:"iPod",os:"iOS"},{n:"iPhone",os:"iOS"},{n:"Mac",os:"MacOS"},{n:"Win",os:"Windows"}],S=function(){for(var e,t=0;t<E.length;t++){var r=E[t].n;if(n.indexOf(r)!=-1){e=E[t].os;break}}return e||(e="Unknown"),{name:e}},T=function(){try{var n=e(t);return{height:n.height(),width:n.width()}}catch(r){return null}};function C(){return t.location.href}function b(){var e=[t.location.protocol,"//",t.location.host,t.location.pathname].join("");return e}function w(){return r.title}function I(){return/android|ipad|android.+mobile|blackberry|iemobile|ip(hone|od)|phone|symbian|windows (ce|phone)/i.test(n||t.navigator.vendor||t.opera)}return{browser:u(),getUrl:C,getUrlWithoutQueryString:b,getPageTitle:w,os:S(),isIE:g,isIEOlderThan:h,isIEDoc:p,isIEBrowser:c,isQuirksMode:m,getWinSize:T,isMobile:I,isAndroid:d,isFirefox:v(),isEdge:y}}function ts(){var e,t,n,r,o,a,s,u,l,c=this,d="ABTesting",f={};function p(c){t=c.deployablesGoalManager,r=c.experiments,e=c.lib,a=c.getEndUserGuid,o=i.get("Logger").wrapCustomerLog(d),u=c.commonEvents,n=new ka({lib:e,serverAddress:c.serverAddress,getPermutationId:c.getPermutationId,getEndUserGuid:c.getEndUserGuid,getAuditSource:c.getAuditSource,storageManager:c.storageManager,userGuidContainer:c.userGuidContainer}),s=i.get("Consts"),l=i.get("ArrayUtils")}var g=function(e){var t=e.GoalType==s.DEPLOYABLE_TYPE.AbExperiment,r=m(e.Id),i=t||r;if(!i)return;var u=a(),c=n.syncRetrieveCompletedGoals(u),d=l.inArray(e.Id,c)==-1;if(!d)return;o("Experiment Goal was completed! Goal ID:"+e.Id+", Goal Name : "+e.Name,1),h(u,e);var f=t;f||v(e)};function h(e,t){n.updateGoalCompleted(e,t.Id)}function m(e){return void 0!=f[e]}function v(e){var t=f[e.Id],n={goal:{Id:e.Id,GoalType:s.DEPLOYABLE_TYPE.AbExperiment,RelatedObjectId:t,Name:e.Name},identifier:e.identifier,interactionGuid:e.interactionGuid};u.raiseEvent(s.EVENTS.AbExperimentLinkedGoalReached,n)}function y(e,t){for(var n=[],r=[],i=0;i<e.Goals.length;i++){var o=e.Goals[i];l.inArray(o.Id,t)>-1?n.push(o):r.push(o)}e.Goals=r,e.CompletedGoals=n}function E(e){for(var t=0;t<r.length;t++){var n=r[t];y(n,e)}}function S(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.Goals.length;i++){var o=r.Goals[i];t.push(o.Id),1==o.IsLinkedGoal&&(f[o.Id]=r.Id)}}var T=!1;this.startWatching=function(e){if(T)return;T=!0;var s=[];if(S(r,s),0==s.length)return o("No AbTesting goals were defined"),void(e&&e());t.onGoalCompleted(g);var l=a(),c=n.syncRetrieveCompletedGoals(l);c?(o("Completed goals data exists. Starting goals watch"),u.raiseEvent("ABTestingGoalsFetched"),C(c,e)):(o("No completed goals data exists locally. Fetching from server"),n.asyncRetrieveCompletedGoals(l,s,function(t){o("Completed goals data recieved. Starting goals watch"),u.raiseEvent("ABTestingGoalsFetched"),C(t,e)},function(){o("WalkMe ABTesting - Error when fetching end-user goals. Removing WalkMe",1),i.get("LibDestroyer").removeWalkMe("AbTesting - Cannot fetch EndUser Goals",{sendLog:!0})}))},c.isGoalReached=function(e){for(var t=n.syncRetrieveCompletedGoals(a()),r=0;r<t.length;r++)if(t[r]==e)return!0;return!1};function C(e,n){E(e);for(var i=0;i<r.length;i++){var a=r[i];o("Start watching Experiment goals. ExperimentID : "+a.Id,2),t.startWatchingDeployable(a,void 0)}n&&n()}p.apply(null,arguments)}i.register("PopupNotificationsService").asCtor(ns).dependencies("PopupBalloonDisplayer, LibDestroyer, BBCodeParser, CommonEvents, Consts, UiUtils");function ns(t,n,r,i,o,a){var s=this;s.showFailedToStartPopup=u,s.createHtmlForNotAvailablePopup=l;function u(e,t,n){var r=e.BalloonSettings,i={balloonSettings:r,alertText:t,bbCodeVersion:n},o=l(i);c(o)}function l(e){var t=e.isOldBalloon?"21px":"14px",n=r.parse(e.alertText,e.bbCodeVersion);return"<h1 class='walkme-custom-first-step-not-available-text mt-custom-first-step-not-available-text CUSTOM-TUTORIAL-ID' style='CSS-RESET font-family: "+e.balloonSettings.Font+";color: "+e.balloonSettings.HeaderColor+"; font-size: "+t+"; border: none; margin: 10px; word-wrap: break-word;'>"+n+"</h1>"}function c(r){var s={popupStepButtons:[{id:0,name:"OK",action:7}]},u=e("<div></div>");u.append(r);var l=!0;t.showSpecialPopupBalloon({htmlContent:u},446,s,function(e){mtjQuery(".walkme-action-ok",e).click(function(){n.releaseBalloons(),a.removeOverlay()})},l).then(function(){i.raiseEvent(o.EVENTS.FirstStepNotAvailable)})}}i.register("ClickAuditEventSender").asCtor(rs).dependencies("DeployablesManagerFactory, EventSender,Logger, ReportInitiatorMapper");function rs(e,t,n,r){var i=this;i.send=a;function o(){}function a(e){try{var r=t.getEventAppByDeployable(e.auditType),i={type:e.initiatorType,objectId:e.initiatorId},o=u(r,e.auditType,e.objectId,i,e.additionalParams),a=s(r);t.postEvent(a,o)}catch(l){n.error(l)}}function s(e){switch(e){case t.EVENT_APPS.Launcher:return t.EVENT_TYPES.Click;default:return t.EVENT_TYPES.Play}}function u(n,r,i,o,a){var s,u,f=e.get(r),p={};if(f){var g=f.getById(i);g&&(s=g.Name,p=f.getActionData(g),u=f.isWithAction(g))}switch(n){case t.EVENT_APPS.Launcher:return l(n,i,s,p);case t.EVENT_APPS.Content:return d(n,i,s,o,u,a);default:return c(n,i,s,o,u)}}function l(e,t,n,r){return{type:e,oId:t,oName:n,aType:r.Type,aAppType:r.aAppType,aoId:r.ItemId,aoName:r.Name,pId:"-1"}}function c(e,t,n,i,o){return{type:e,oId:t,oName:n,pInit:r.map(i),pId:"-1",oIsWithAction:o}}function d(e,t,r,i,o,a){var s=c(e,t,r,i,o,a);return a&&null!=a.contentType?s.oType=a.contentType:n.error(null,"No contentType was not provided for resouce params"),s}o.apply(null,arguments)}i.register("HtmlElementsDataProvider").asCtor(is).dependencies("Consts, inArrayFunc");function is(t,n){var r=this;r.isInput=a,r.isSelectInput=s;var i;function o(){i=["input","textarea","select"]}function a(e){return u(e,i)}function s(e){return u(e,["select"])}function u(t,r){var i=e(t),o=i.prop("nodeName");return o&&n(o.toLowerCase(),r)!=-1}o.apply(null,arguments)}function os(e,t,n,r,i){var o=this;function a(e,t){var n=r.timing.map,i=n[t]-n[e];return i}o.run=function(){if(!n.isFeatureEnabled("addLoadingTime"))return;var r=a("snippetStartInit","walkmeReadyEnd");t.raiseEvent(e.EVENTS.WalkMeTotalLoadingTime,{totalLoadTime:r});var o="WalkMe total loading time was "+r+" ms";i.customerLog(o,3,e.EVENTS.WalkMeTotalLoadingTime)}}i.register("LoadingTimeInformer").asCtor(os).dependencies("Consts, CommonEvents, FeaturesManager, WmInternals, Logger"),i.register("FontLoadManager").asCtor(as).dependencies("FeaturesManager, Consts");function as(e,t){var n=this;n.shouldReturnWhenFontLoadFailed=function(n){return!e.isFeatureEnabled(t.FEATURES.DisableReturnWhenFontLoadFailed)&&n}}__webpack_require__(76).registerToCtx(i),i.register("ElementTextExtractor").asCtor(ss);function ss(){var e=this,t=70;e.getElementTextArray=function(e,t){var r=[];return n(e,r,[3],t),r};function n(e,t,o,a){if(o[0]>0){var s=!0;if(a&&a(e)===!1&&(s=!1),s)if(!e||3!==e.nodeType&&4!==e.nodeType){if(e&&1===e.nodeType&&!e.tagName.match(/^(script|style)$/i))for(var u=e.childNodes,l=0,c=u.length;l<c;l++)n(u[l],t,o,a)}else{var d=r(e.nodeValue);d=d.toLowerCase(),d=i(d),d&&(t.push(d),o[0]--)}}}function r(e){return e=e.replace(new RegExp(String.fromCharCode(160),"g")," "),e=e.replace(new RegExp(String.fromCharCode(10),"g"),""),e=e.replace(new RegExp(String.fromCharCode(13),"g"),""),e=e.replace(new RegExp(String.fromCharCode(9),"g"),""),e=e.replace(new RegExp(" ","g"),""),e=mtjQuery.trim(e),e=e.substring(0,t)}function i(e){if(!o(e))return e;for(var t=-1,n=e.length,r="";++t<n;){var i=e.charAt(t);if(!/[\uD800-\uDBFF]/.test(i)&&!/[\uDC00-\uDFFF]/.test(i)){r+=i;continue}r+=a(i)}return r}function o(e){var t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;return null!=t.exec(e)}function a(e){var t=e.charCodeAt(0),n=t.toString(16).toUpperCase(),r=n.length>2,i="\\"+(r?"u":"x")+("0000"+n).slice(r?-4:-2);return i}}i.register("ElementLastKeeper").asCtor(us).asSingleton().dependencies("TimerManager, FeaturesManager, CommonEvents, Consts");function us(t,n,r,i){var o=this,a=".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-front:visible",s=!0,u=[];function l(){}function c(){if(s){for(var e=[],n=0;n<u.length;n++)try{f(u[n],n)}catch(r){e.push(n)}for(var n=e.length-1;n>=0;n--)u.splice(n,1)}u.length&&t.libSetTimeout(c,3e3)}function d(e){return e.nextAll(a).length>0}function f(e,t){var n=e.parent(),o=n.contents().length;if(!d(e)&&p(e[0])+t+1!=o){var a=document.activeElement;e.appendTo(n),r.raiseEvent(i.EVENTS.ElementLocationChanged,{activeElement:a,element:e})}}function p(e){for(var t=0;e=e.previousSibling;)t++;return t}o.addElement=function(e,r){if(n.isFeatureEnabled("noElk"))return;u.length||t.libSetTimeout(c,3e3),r?u.unshift(e):u.push(e)},o.removeElement=function(t){if(n.isFeatureEnabled("noElk"))return;var r=e.inArray(t,u);r!=-1&&u.splice(r,1)},o.setState=function(e){if(n.isFeatureEnabled("noElk"))return;s=e},l.apply(null,arguments)}i.register("AnalyticsManager").asCtor(ls).dependencies("ClientStorageManager, Logger, WmAjax, EventSender, PetaServerNameManager, AuditingEnabledIndicator");function ls(e,t,n,r,i,o){var a,s="wm-ueuT",u="uniqueEndUser",l=this;function c(){a=t.error,t.customerLog("Analytics manager was created",3,u)}l.auditUniqueEndUser=function(n,r,i){try{var o=e.getData(s)!=i;if(o){d(n,r,i),t.customerLog("auditUniqueEndUser: sent unique user request. userGuid="+n+" permutationId="+r+"endUserGuid="+i,3,u);var l=e.keysConfig.analytics.lastAuditedUser;e.saveData(l.key,i,l.expiryFunc())}}catch(c){a(c,"Failed while auditing unique end users")}};function d(e,a,s){if(!o.isEnabled())return!0;try{r.postEvent(r.EVENT_TYPES.Loaded,{type:r.EVENT_APPS.Walkme})}catch(u){t.error(u)}var l=i.get();if(!l)return!0;var c=l+"/Analytics/UniqueEndUser",d={userId:e,permutationId:a,endUserGuid:s};n.execute({url:c,data:d})}c.apply(null,arguments)}i.register("ClickAuditManager").asCtor(cs).dependencies("DeployablesManagerFactory, ServerDataSenderManager, Logger,HostData, GuidGenerator, DeployableTypes, EventSender, WalkMeInfo,ClickAuditEventSender, ReportInitiatorMapper, AuditingEnabledIndicator,Consts, CommonUtils, SafeFullUrlProvider");function cs(e,t,n,r,i,o,a,u,l,c,d,f,p,g){var h=this;h.SendClickAudit=C,h.SendWidgetOpen=b,h.SendShoutOutAudit=w,h.SendInteractionAudit=I,h.init=A;var m,v,y,E,S;function T(){S=n.wrapCustomerLog(s)}function C(e,t,n,r){t=p.isDefined(t)?t:-1;var i,o;if(n?(i=n.type,o=n.hasOwnProperty("objectId")?n.objectId:n.id):i=f.STEP_PLAY_INITIATOR_ENUM.NONE,void 0===e||!d.isEnabled())return!0;var a=k(),s={auditType:e,objectId:t,auditGuid:a,playInitiator:i,initiatorId:o};return m.sendData(s),l.send({auditType:e,objectId:t,initiatorType:i,initiatorId:o,additionalParams:r}),a}function b(e){if(!d.isEnabled()||!v)return!0;var t={userId:u.getUserGuid(),fullUrl:g.get(),source:u.getEnvironmentId(),browser:r.browser.string,os:r.os.name,permutationId:u.getPermutationId(),endUserGuid:u.getEndUserGuid(),auditGuid:k()};v.sendData(t);try{var i;return e&&(i=c.map(e)),a.postEvent(a.EVENT_TYPES.Open,{type:a.EVENT_APPS.Player,pInit:i})}catch(o){return n.error(o),!0}}function w(t,r,i,s){if(!d.isEnabled())return!0;var u={shoutOutId:t,deployableType:r,clickType:i,auditGuid:k(),relatedClickAuditGuid:s};y.sendData(u);try{var l=e.get(o.ShoutOut),c=l.getById(t);if(P(i)){var f=l.getActionData(c);return a.postEvent(a.EVENT_TYPES.Click,{type:a.getEventAppByDeployable(r),oId:t,oName:c.Name,aType:f.Type,aAppType:f.aAppType,aoId:f.ItemId,aoName:f.Name,pId:"-1"})}if(_(i))return a.postEvent(a.EVENT_TYPES.Close,{type:a.getEventAppByDeployable(r),oId:t,oName:c.Name,pId:"-1",reason:i})}catch(p){return n.error(p),!0}}function I(e,t,n,r){if(!d.isEnabled())return!0;var i={deployableId:e,deployableType:t,interactionType:n,auditGuid:k(),relatedClickAuditGuid:r};E.sendData(i)}function P(e){return e===f.SHOUTOUT_CLICK_TYPE.Action}function _(e){return e===f.SHOUTOUT_CLICK_TYPE.Close||e===f.SHOUTOUT_CLICK_TYPE.XButton||e===f.SHOUTOUT_CLICK_TYPE.RemindMeLater}function k(){return(new Date).getTime()+"-"+i.generateGuid()}function A(){m=t.register("ca",{actionUrl:"/Statistics/AddClickAudits",prefixForStorage:"ca",sendingThreshold:1,dataType:"click audit",dataIdFieldName:"Id",requestParamsFunc:O}),v=t.register("wo",{actionUrl:"/Statistics/AddWidgetOpens",prefixForStorage:"wo",sendingThreshold:1,dataType:"widget open",dataIdFieldName:"Id",requestParamsFunc:function(e){return{serizlizedWidgetOpens:rg(e)}}}),y=t.register("ac",{actionUrl:"/Statistics/AddShoutOutAudits",prefixForStorage:"ac",sendingThreshold:1,dataType:"shoutOut click",dataIdFieldName:"Id",requestParamsFunc:O}),E=t.register("di",{actionUrl:"/Statistics/AddInteractionAudits",prefixForStorage:"di",sendingThreshold:1,dataType:"deployable interaction",dataIdFieldName:"Id",requestParamsFunc:N})}function D(t){var n,r,i=t[0],a=i.auditType,s=i.objectId;if(void 0!=a&&void 0!=s&&(n=e.get(a),n&&n.getById&&(r=n.getById(s),r&&r.userGuid)))return r.userGuid;var l=t[0].shoutOutId;if(void 0!=l&&(n=e.get(o.ShoutOut),n&&n.getById&&(r=n.getById(l),r&&r.userGuid)))return r.userGuid;return u.getUserGuid()}function O(e){var t=D(e),n=r.browser.string,i=r.os.name,o=u.getEnvironmentId(),a=u.getEndUserGuid(),s=u.getPermutationId(),l=g.get();return{serizlizedClickAudits:rg(e),userGuid:t,fullUrl:l,source:o,browser:n,os:i,permutationId:s,endUserGuid:a}}function N(e){var t=D(e),n=r.browser.string,i=r.os.name,o=u.getEnvironmentId(),a=u.getEndUserGuid(),s=u.getPermutationId(),l=g.get();return{serizlizedInteractionAudits:rg(e),userGuid:t,fullUrl:l,source:o,browser:n,os:i,permutationId:s,endUserGuid:a}}T.apply(null,arguments)}i.register("JQueryElementFinder").asCtor(ds).dependencies("CommonUtils, PositionHelper, IsInEditor, FrameContentsProvider, ElementUtils, HtmlDecoder, Logger, StringUtils, JQuerySelectorRunner");function ds(t,n,r,i,o,a,s,u,l){var c=this,d=["parent","children","next"];function f(e){return"object"==typeof e&&null!==e}function p(e,t,n){var r;return r=f(e)?y(e,t,n):l.run(e,n)}function g(e,t,n){var r=void 0;if(void 0!=e&&(r=p(e,t,n),r.length>0)){var a=o.getElementTagName(r[0]);"IFRAME"==a||"FRAME"==a?(t&&(t.ElementDescription.extended.elementIframe&&r.data("iframe",t.ElementDescription.extended.elementIframe),t.ElementDescription.extended.elementIframe=r),r=i.getFrameContents(r)):t&&(t.ElementDescription.extended.elementIframe=!1)}return r}function h(e){if(void 0!=e&&mtjQuery.inArray(e,d)>-1)return!0;return!1}function m(t,n){var r;try{r=t[n]().eq(0)}catch(i){s.error(i,"runJqueryMethod : element has no method named '"+n+"'"),r=e()}return r}function v(t,n){if(void 0!=t.method){var r;r=f(t.method)?t.method.name:t.method,h(r)?n=m(n.eq(0),r):(s.customerLog("Unknown jQuery Selector Method : '"+r+"'"),n=e())}return n}function y(t,n,r){try{var i=g(t.context,n,r),o=p(t.element,n,i);return o=v(t,o)}catch(a){return s.customerLog("jQuery Element Finder: Could not parse input"),e()}}function E(t){if(t=e.trim(t),!u.startsWith(t,"{")){var n=new Object;return n.element=t,n}try{return ig(t)}catch(r){return null}return null}c.findElementsByjQueryComplexSelector=function(e){e=a.decodeHtml(e,["&",'"',"'",">"]);var t=E(e),n=y(t);return n},c.getjQueryElementText=function(e){var n=c.findElementsByjQueryComplexSelector(e);return t.checkElementText(n)},c.findElements=function(e,t){if(!e.JquerySelector)return[];var i=e.JquerySelector;i=i.replace(/&quot;/gi,'"'),i=i.replace(/&apos;/gi,"'"),i=i.replace(/&#39;/gi,"'"),i=i.replace(/&amp;/gi,"&"),i=i.replace(/&gt;/gi,">");var a,c="context:",d=",element:",f="func:";if(u.startsWith(i,c)){var p=i.substr(c.length),g=p.substr(p.indexOf(d)+d.length);p=p.substr(0,p.indexOf(d));var h=l.run(p);if(!(h.length>0))return[];"IFRAME"==o.getElementTagName(h[0])?e.ElementDescription.extended.elementIframe=h:e.ElementDescription.extended.elementIframe=!1,h=h.contents(),a=l.run(g,h),s.customerLog("jQuery selector found these elements:",5),s.customerLog(C,5)}else if(u.startsWith(i,f))try{var m=i.substr(f.length),v=mtjQuery.parseJSON(m),T=S(v);T.iframe&&(e.ElementDescription.extended.elementIframe=mtjQuery(T.iframe));var C=mtjQuery(T.result);return(void 0==t||t)&&(C=C.filter(n.getVisibleFilter(e))),s.customerLog("func selector found these elements:",5),s.customerLog(C,5),C}catch(b){return r.get()?(console.log("Using jQuery selector with function raised an exception:"),console.log(b)):(s.customerLog("Using jQuery selector with function raised an exception:"),s.customerLog(b)),[]}else{var w=E(i);a=y(w,e)}return a.length>0&&(void 0==t||t)&&(a=a.filter(n.getVisibleFilter(e))),s.customerLog("jQuery selector found these elements:",5),s.customerLog(a,5),a};function S(e){function t(e,t){for(var n=e.split("."),r=t,i=0;i<n.length;i++)r=r[n[i]];return r}var n={result:null,iframe:null},r=new Array;if(e.params)for(var i=0;i<e.params.length;i++)r.push(e.params[i].value);var o=window;if(e.iframe){if(o=mtjQuery(e.iframe),0==o.length)throw"Iframe not found: "+e.iframe;o=o.contents()[0],o=o.parentWindow||o.defaultView,n.iframe=mtjQuery(e.iframe)}var a=t(e["function"],o);if(!a)throw"Function not found: "+e["function"];var s;if(e["this"]){if(s=t(e["this"],o),!s)throw"'This' not found: "+e["this"]}else s=e["function"].indexOf(".")==-1?null:t(e["function"].substring(0,e["function"].lastIndexOf(".")),o);var u=a.apply(s,r);return n.result=u,n}}i.register("JQuerySelectorRunner").asCtor(fs).dependencies("");function fs(){var e=this;e.run=t;function t(e,t){return mtjQuery(e,t)}}i.register("AbTasksValidator").asCtor(ps).dependencies("SiteConfigManager, HostData, TodoListManager, UiDataProvider, FeaturesManager");function ps(e,t,n,r,i){var o=this;function a(){}o.shouldTrackAbTasks=function(){var t=parseInt(e.get().TodoListSettings.isActive);if(t&&s())return!0;if(n.hasTaskGoalCompletionCondition())return!0;if(i.isFeatureEnabled("untrack_tasks")&&!t)return!1;return l()};function s(){for(var e=r.uiTasksTree(),t=0;t<e.length;t++)if(u(e[t]))return!0;return!1}function u(e){if("task"==e.type())return!0;var t=e.children();if(!t||0===t.length)return!1;for(var n=0;n<t.length;n++)if(u(t[n]))return!0;return!1}function l(){if(!t.isIEBrowser(9,"lte"))return!0;var e="abTasksIE"+t.browser.version;if(i.isFeatureEnabled(e))return!0;return!1}a.apply(null,arguments)}i.register("ResourceInjector").asCtor(gs);function gs(){var e=this;e.inject=t;function t(e,t){e.append(t)}}i.register("ResourceManager").asCtor(hs).dependencies("Logger, CommonUtils, HostData, win, IsInEditor, CdnServer, ResourceInjector, FeaturesManager, wmjQuerySafe, Mustache, FontLoadManager");function hs(t,n,r,o,a,s,u,l,d,f,p){var g,h,m=this,v={},y="walkme-framesets-fix-id",E="walkme-",S="Comic Sans MS",T="QW@HhsXJ",C=50,b=2500,w=function(e,t,n){var r=this;return r.b(n=n||""),r.b("@font-face {"),r.b("\n"+n),r.b("font-family: '"),r.b(r.v(r.f("family",e,t,0))),r.b("';"),r.b("\n"+n),r.b("src: url("),r.b(r.v(r.f("src",e,t,0))),r.b(") "),r.s(r.f("format",e,t,1),e,t,0,69,89,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("format('"),n.b(n.v(n.f("format",e,t,0))),n.b("')")}),e.pop()),r.b(";"),r.b("\n"+n),r.b("font-weight: "),r.b(r.v(r.f("weight",e,t,0))),r.b(";"),r.b("\n"+n),r.b("font-style: "),r.b(r.v(r.f("style",e,t,0))),r.b(";"),r.b("\n"+n),r.b("}"),r.fl()},I=i.get("TimerManager");function P(){g=t.wrapCustomerLog(c),"Edge"==r.browser.name&&(S="Arial"),h={}}m.font=function(n,i,o,a){if(l.isFeatureEnabled("noFonts"))return void(o&&o());if(i&&i.length||(i=e("head")),!i.length)return t.error(null,"cannot inject font - head element does not exist"),void(a&&a());var s=i[0].ownerDocument;if(r.isIEDoc(8,"lte",i[0])&&"widget-font"!=n.name&&!l.isFeatureEnabled("loadAllFonts"))return g("Not loading font '"+n.name+"' (IE7/8), to load all fonts enable the loadAllFonts feature",4),void(o&&o());g("Start loading font '"+n.name+"'",4);var u="wm-font-"+n.id,c=e("#"+u,i);if(c&&c.length)return void M(n,s,o,a);var d=v[E+n.name];if(d)return e.inArray(i[0],d.heads)==-1&&d.heads.push(i[0]),void M(n,s,o,a);if(p.shouldReturnWhenFontLoadFailed(h[E+n.name]))return void a();var f=m.getResourcePath(n.url);if(r.isIEDoc(8,"lte",i[0])){if(D(i,n.name))return void M(n,s,o,a);x(n,u,i,f)}else _(n)&&(f=f.concat("_svg")),O(n,u,i,f);var y;y=r.isIEDoc(8,null,i[0])?function(){l.isFeatureEnabled("highPerf")||L(5),o&&o()}:o,M(n,s,y,a)};function _(e){return k(e)&&A()}function k(e){return"widget-font"==e.name||"lib-font"==e.name}function A(){return r.isAndroid("4.3","lt")&&"Chrome"!=r.browser.name}function D(e,t){for(var n=0;n<e[0].ownerDocument.styleSheets.length;n++)if(e[0].ownerDocument.styleSheets[n][t])return!0;return!1}m.preloadResources=function(t,n){var i;t=t||e("head");for(var o=0;o<n.length;o++){var i=m.getResourcePath(n[o].url);i+=r.isIEDoc(8,null,t[0])?".eot":".js";var a=new Image;a.src=i,a.onload=function(){}}},m.fonts=function(e,t,n,r){var i=e.length,o=!1;if(i||n&&n(),n||r)for(var a=0;a<e.length;a++)m.font(e[a],t,function(){0==--i&&(o?r&&r():n&&n())},function(){o=!0,0==--i&&r&&r()});else for(var a=0;a<e.length;a++)m.font(e[a],t)};function O(t,n,r,i){g("Start loading embeded file for font '"+t.name+"'",4),N(t,n,r),e.ajax({type:"GET",url:i+".js",dataType:"script",cache:!0})}function N(e,t,n){var r=E+e.name;v[r]={name:r,tagId:t,heads:[n[0]]}}m.finishFontLoad=function(t,n){g("finish loading font '"+t+"'",4);for(var r="",i=0;i<n.length;i++)r+=f.to_html(w,{family:t,src:n[i].src,format:n[i].format,weight:n[i].weight,style:n[i].style});var o=v[t];delete v[t];for(var i=0;i<o.heads.length;i++)m.injectCss(r,o.tagId,e(o.heads[i]),t,null,!0)};function x(e,t,i,o){g("Start loading eot file for font '"+e.name+"'",4),o+=".eot",r.isIEBrowser(8)&&l.isFeatureEnabled("fixFontsCompatibility")&&(o+="?frame="+n.getFrameIndex(i[0].ownerDocument.parentWindow));var a=f.to_html(w,{family:E+e.name,src:o,weight:"normal",style:"normal"});r.isIEBrowser(8)?G(a,t,i):U(a,i,e.name,t)}function L(e){if(!e)return;F(top),I.libSetTimeout(function(){L(e-1)},100)}function F(t){try{var n=e("head",t.document);G("",y,n),I.libSetTimeout(function(){n.find("#"+y).remove()},100)}catch(r){}for(var i=t.frames,o=0;o<i.length;o++)F(i[o])}function M(t,n,r,i){if(!r&&!i)return void g("Stop Tracking font '"+t.name+"' because we don't have success/fail Callback",4);g("Start tracking font '"+t.name+"'",4);var o=e(n.createElement("span")).addClass("walkme-font-tester").important({position:"absolute",top:"-9999px",left:"-9999px",visibility:"hidden","font-family":S,"font-size":"250px","line-height":"normal"}).html((t.dummeyText||T)+"a").appendTo(e("body",n).or("html",n)),a=o[0].offsetWidth,s=o[0].offsetHeight,u=E+t.name;o.important("font-family",u+","+S),B(o,a,s,b,u,r,i)}function B(e,t,n,r,i,o,a){if(!d(e).isSafe())return;var s=5;g("================================================================================",s),g("Tracking font '"+i+"'",s),g("Comparison tester width: "+t+" === "+e[0].offsetWidth,s),g("Comparison tester height: "+n+" === "+e[0].offsetHeight,s),g("================================================================================",s),t===e[0].offsetWidth&&n===e[0].offsetHeight?r<0?(g("Finished with failure tracking font '"+i+"'",4),e.remove(),h[i]=!0,a&&a()):I.libSetTimeout(function(){B(e,t,n,r-C,i,o,a)},C):(g("Finished successfully tracking font '"+i+"'",4),e.remove(),h[i]=!1,o&&o())}m.getResourcePath=function(e){if(e&&e.indexOf("/"))return e;var t=s.get();return e=t+e},m.injectCss=function(e,t,n,r,i,o){R()?U(e,n,r,t,i):G(e,t,n,i,o)},m.refreshContentCss=function(e,t){var n=G(t+" :before,"+t+" :after{content:none !important;}",null,e);I.libSetTimeout(function(){n.remove()},0)},m.emptyStyleSheets=function(){if(!R())return;for(var e=document.styleSheets,t=0;t<e.length;t++)e[t].walkmeToRemove&&(e[t].disabled=!0)};function R(){return!!document.createStyleSheet}function U(e,t,n,r,i){try{V(e,t,n,r,i)||W(e,t,n,r,i)}catch(o){throw g("Cannot inject style sheet"),o}}function V(e,t,n,r,i){var a=o._walkmeInternals;if(a&&a.customInjectStyleSheetFuncs){g("Attempting to use custom CSS Injector");for(var s=0;s<a.customInjectStyleSheetFuncs.length;s++){var u=a.customInjectStyleSheetFuncs[s];"function"==typeof u&&u(e,t,n,r,i)}return!0}return!1}function W(t,n,r,i,o){var a,s=n?n[0].ownerDocument:e("body")[0].ownerDocument;o&&(a=H(o,s));var u=void 0===a?s.createStyleSheet(""):s.createStyleSheet("",a);u.cssText=t,u.owningElement.id=i,u.walkmeToRemove=!0,u[r]=!0}function G(t,n,r,i,o){var s,l=r||e("head");a.get()&&mtjQuery("#"+n,l).remove();var c=e('<style type="text/css" class="walkme-to-remove">'+(o?"":t)+"</style>");if(n&&c.attr("id",n),i&&(s=l.find("#"+i)),s&&s.length>0?s.first().before(c):u.inject(l,c),o){var d=c.prop("styleSheet");d?d.cssText=t:c.append(t)}return c}function H(e,t){for(var n=t.styleSheets,r=0;r<n.length;r++)if(n[r].owningElement.id==e)return r}P.apply(null,arguments)}i.register("IFramesManager").asCtor(ms).dependencies("Logger, TimerManager, FeaturesManager");function ms(t,n,r){var i=this;i.remapTopIframes=g;var o,a,s,u="iframe:not(#walkme-hidden-iframe),frame",l=-1,c=!1,d=[],f=t.wrapCustomerLog("IFramesManager");i.mapIframes=function(){if(S())return void y();c||(y(),p(document,void 0)),c=!0};function p(t,n,r){var i=(new Date).getMilliseconds();if(e(t).find(u).each(function(){var t=h(this,n);t.documentAccessible&&p(e(t.iframe.contentWindow.document),t),r&&v(t)}),void 0==n){var o=(new Date).getMilliseconds(),a=o-i;f("Mapping iframes took "+a+" ms",5)}}function g(){if(S())return;s&&s.clear();var t=(new Date).getMilliseconds();l++;var r=[];e(document).find(u).each(function(){for(var e=!1,t=0;t<o.length;t++)if(o[t].iframe==this){o[t].foundInRemap=l,e=!0;break}e||r.push(this)});for(var i=0;i<o.length;i++)if(o[i].foundInRemap!=l){var a=o[i];m(a.iframe),o.splice(i,1)}for(var i=r.length-1;i>=0;i--)h(r[i],void 0);var c=(new Date).getMilliseconds(),d=c-t;f("Remapping top iframes took "+d+" ms",5),s=n.libSetTimeout(g,1e4)}i.getAll=function(){return o},i.foreachIframe=function(e,t){n(a);function n(r){for(var i=0;i<r.children.length;i++){var o=r.children[i];t&&!o.documentAccessible||(e(o),n(o))}}},i.onIframeLoad=function(e){d.push(e)},i.unbindIframeLoad=function(e){for(var t=d.length-1;t>=0;t--)if(d[t]===e){d.splice(t,1);break}},i.releaseEvents=function(){if(!o)return;for(var e=0;e<o.length;e++)m(o[e].iframe)};function h(t,n){var r={iframe:t,documentAccessible:E(t),children:[]};return n?n.children.push(r):o.push(r),v(r),e(t).on("load.wmIframeManager",function(){r.children=[],E(t)&&(p(e(t.contentWindow.document),r,!0),v(r))}),r.documentAccessible||f("Cross domain iframe detected: "+t.src,4),r}function m(t){try{e(t).off("load.wmIframeManager")}catch(n){}}function v(e){for(var t=d.length-1;t>=0;t--)d[t](e)}function y(){o=[],a={children:o}}function E(e){try{e.contentWindow.document}catch(t){return!1}return!0}function S(){return r.isFeatureEnabled("dontMapIframes")}}i.register("UIChangeTracker").asCtor(vs).dependencies("Lib, HashChangeNotifier, HistoryChangeNotifier, IFrameLoadChangeNotifier,ClickChangeNotifier, AjaxCallsChangeNotifier, UserInputChangeNotifier, ElementsRedrawer,Logger, IFramesManager, TimerManager, WalkMeVisibilityChecker"),i.register("UICT_DEFAULT_THROTTLE_TIME_WINDOW").asInstance(2e3),i.register("UICT_THROTTLE_FIRST_EVENT_BLOCK_TIME_WINDOW").asInstance(250);function vs(e,t,n,r,o,a,s,u,l,c,d,f){var p=this;p.init=w,p.isEnabled=P,p.stop=_,p.bind=A,p.bindPreListener=k,p.unbind=D,p.callListeners=N,p.triggerUIChange=L,p.triggerThrottledUIChange=M,p.isActivated=W,p.getElementRedrawerType=G,p.getCurrentIndex=I,p.triggerUIChangeAPI=H;var g,h,m=[],v=[],y=!1,S=!1,T=0,C={};function b(){g=[t,n,r,o,a,s],h=l.wrapCustomerLog(E)}function w(){if(p.triggerUIChangeAPI=L,S&&_(),S=!0,!p.isEnabled())return;c.mapIframes();for(var e=[],t=0;t<g.length;t++)g[t].start(),g[t].isActivated()&&e.push(g[t].getSpaTypeName());e.length>0?(y=!0,h("UIChangeTracker - Creating UIChangeTracker for types: "+e.join(", ")+". Using the following redrawer: "+u.getRedrawerName(),2)):h("UIChangeTracker - Did not activate",2)}function I(){return T}function P(){return f.isWalkMeVisible()}function _(){if(S=!1,!p.isEnabled())return;for(var e=0;e<g.length;e++)g[e].isActivated()&&g[e].stop()}function k(e){v.push(e)}function A(e){m.push(e)}function D(e){O(v,e),O(m,e)}function O(e,t){for(var n=0;n<e.length;n++)if(e[n]===t){
e.splice(n,1);break}}function N(){T++,x(v),x(m),C={}}function x(e){for(var t=e.length-1;t>=0;t--)try{e[t]({uiChangeIndex:T,notifiers:C})}catch(n){}}function L(e){e&&(C[e]=!0),F()}function F(){u.redrawElements()}function M(e){e&&(C[e]=!0),V()}var B=!1,R=!1,U=!1;function V(e){B?U||(R=!0):(F(),B=!0,U=!0,d.libSetTimeout(t,i.get("UICT_DEFAULT_THROTTLE_TIME_WINDOW")),d.libSetTimeout(function(){U=!1},i.get("UICT_THROTTLE_FIRST_EVENT_BLOCK_TIME_WINDOW")));function t(){R&&(F(),d.libSetTimeout(t,i.get("UICT_DEFAULT_THROTTLE_TIME_WINDOW"))),B=R,R=!1}}function W(){return y}function G(){return"ElementsRedrawer"}function H(){h("UIChangeTracker - Not triggering UI Change. Wait For WalkMe to Load",2)}b()}i.register("PageChangeTracker").asCtor(ys).dependencies("UIChangeTracker, WalkMeVisibilityChecker, Consts");function ys(e,t,n){var r=this;r.init=c,r.stop=d,r.bind=f,r.unbind=p,r.triggerPageChange=g,r.getCurrentIndex=h,r.isActivated=v;var i,o=[],a=!1,s=0,u=!1;function l(){i=[n.UI_CHANGE_NOTIFIERS.HASH,n.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS,n.UI_CHANGE_NOTIFIERS.HISTORY,n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR,n.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR]}function c(){if(a)return;if(a=!0,!m())return;e.bindPreListener(y),u=!0}function d(){if(a=!1,!m())return;e.unbind(y)}function f(e){o.push(e)}function p(e){for(var t=0;t<o.length;t++)if(o[t]===e){o.splice(t,1);break}}function g(){E()}function h(){return s}function m(){return t.isWalkMeVisible()}function v(){return u}function y(e){if(S(e.notifiers))return;E()}function E(){s++;for(var e=o.length-1;e>=0;e--)try{o[e]({uiChangeIndex:s})}catch(t){}}function S(e){if(!e)return!0;for(var t=0;t<i.length;t++)if(e[i[t]])return!1;return!0}l()}i.register("HashChangeNotifier").asCtor(Es).injectToReady().dependencies("UIChangeTracker,SPAConfig,Consts");function Es(){var e,t,n,r=this,i=null,o=!1;r.ready=function(r,i,o){e=r,t=i,n=o},r.start=function(){s()&&(a(),o=!0)},r.stop=function(){o&&(window.onhashchange=i,i=null,o=!1)},r.isActivated=function(){return o},r.getSpaTypeName=function(){return"Hash"};function a(){i=window.onhashchange,window.onhashchange=function(){i&&i.apply(null,arguments),e.triggerUIChange(n.UI_CHANGE_NOTIFIERS.HASH)}}function s(){return t.getValue(n.UI_CHANGE_NOTIFIERS.HASH)&&!t.getValue(n.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS)}}i.register("HistoryChangeNotifier").asCtor(Ss).injectToReady().dependencies("UIChangeTracker,SPAConfig,Consts");function Ss(){var e,t,n,r=this,i=null,o=null,a=!1;r.ready=function(r,i,o){e=r,t=i,n=o},r.start=function(){t.getValue(n.UI_CHANGE_NOTIFIERS.HISTORY)&&(s(),a=!0)},r.stop=function(){a&&(window.onpopstate=i,i=null,window.history.pushState=o,o=null,a=!1)},r.isActivated=function(){return a},r.getSpaTypeName=function(){return"History"};function s(){if(!window.history||!window.history.pushState)return;i=window.onpopstate,window.onpopstate=function(){i&&i.apply(null,arguments),e.triggerUIChange(n.UI_CHANGE_NOTIFIERS.HISTORY)},o||(o=window.history.pushState,window.history.pushState=function(){o.apply(window.history,arguments),e.triggerUIChange(n.UI_CHANGE_NOTIFIERS.HISTORY)})}}i.register("IFrameLoadChangeNotifier").asCtor(Ts).injectToReady().dependencies("UIChangeTracker,SPAConfig,IFramesManager,HtmlDecoder,Logger,Consts");function Ts(){var t,n,r,i,o,a,s=this,u=!1;s.ready=function(e,s,u,l,c,d){t=e,n=s,i=u,o=l,a=c,r=d},s.start=function(){void 0!=n.getValue(r.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)&&(l(),u=!0)},s.stop=function(){var t=f();t&&e(t).off("load.wmSpa"),u=!1},s.isActivated=function(){return u},s.getSpaTypeName=function(){return"IFrame load"};function l(){var e=f(),t=!e,n=t?"all iframes/frames":e;a.customerLog("UIChangeTracker - iframeLoadSelector config defined. Listening to iframe load events for "+n,2);var r;t?r=p:(c(document),r=d),i.foreachIframe(r,!0),i.onIframeLoad(function(e){e.iframeLoadListenerSet=!1,r(e)})}function c(n){e(n).find(f()).on("load.wmSpa",function(){t.triggerUIChange(r.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)})}function d(t){if(!t.iframeLoadListenerSet&&t.documentAccessible){var n=e(t.iframe.contentWindow.document);c(n),t.iframeLoadListenerSet=!0}}function f(){var e=n.getValue(r.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR);return o.decodeHtml(e,["&",'"',"'"])}function p(n){n.iframeLoadListenerSet||(e(n.iframe).on("load.wmSpa",function(){t.triggerUIChange(r.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)}),n.iframeLoadListenerSet=!0)}}i.register("ClickChangeNotifier").asCtor(Cs).injectToReady().dependencies("UIChangeTracker,SPAConfig,Logger,Consts");function Cs(){var t,n,r,i,o=this,a=!1;o.ready=function(e,o,a,s){t=e,n=o,r=a,i=s},o.start=function(){u()&&(s(),a=!0)},o.stop=function(){u()&&(e(document).off("mousedown.wmSpa"),e(document).off("click.wmSpa"),e(document).off("mouseup.wmSpa")),a=!1},o.isActivated=function(){return a},o.getSpaTypeName=function(){return"Click"};function s(){r.customerLog("UIChangeTracker - clickSelector config defined. Listening to click events for "+u(),2),e(document).on("mousedown.wmSpa",u(),l),e(document).on("click.wmSpa",u(),l),e(document).on("mouseup.wmSpa",u(),l)}function u(){return n.getValue(i.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR)}function l(){t.triggerThrottledUIChange(i.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR)}}i.register("UserInputChangeNotifier").asCtor(bs).injectToReady().dependencies("UIChangeTracker,SPAConfig,IFramesManager,Logger,Consts");function bs(){var t,n,r,i,o,a=this,s=!1;a.ready=function(e,a,s,u,l){t=e,n=a,r=s,i=u,o=l},a.start=function(){n.getValue(o.UI_CHANGE_NOTIFIERS.USER_INPUT)&&(u(),s=!0)},a.stop=function(){d(),s=!1},a.isActivated=function(){return s},a.getSpaTypeName=function(){return"User input"};function u(){c(e(document)),r.foreachIframe(l,!0),r.onIframeLoad(function(e){e.userInputListenerSet=!1,l(e)})}function l(t){if(!t.userInputListenerSet&&t.documentAccessible){var n=e(t.iframe.contentWindow.document);c(n),t.userInputListenerSet=!0}}function c(e){e.on("click.wmUITrack",p),e.on("dblclick.wmUITrack",p),e.on("mousedown.wmUITrack",p),e.on("mouseup.wmUITrack",p),n.getValue("userInputHoverOff")||(e.on("hover.wmUITrack",p),e.on("mouseenter.wmUITrack",p),e.on("mouseleave.wmUITrack",p),e.on("mousemove.wmUITrack",p),e.on("mouseout.wmUITrack",p),e.on("mouseover.wmUITrack",p)),e.on("keydown.wmUITrack",p),e.on("keypress.wmUITrack",p),e.on("keyup.wmUITrack",p)}function d(){i.customerLog("UIChangeTracker - Stopped listening to User Input",2),f(e(document))}function f(t){t.off("click.wmUITrack"),t.off("dblclick.wmUITrack"),t.off("mousedown.wmUITrack"),t.off("mouseup.wmUITrack"),n.getValue("userInputHoverOff")||(t.off("hover.wmUITrack"),t.off("mouseenter.wmUITrack"),t.off("mouseleave.wmUITrack"),t.off("mousemove.wmUITrack"),t.off("mouseout.wmUITrack"),t.off("mouseover.wmUITrack")),t.off("keydown.wmUITrack"),t.off("keypress.wmUITrack"),t.off("keyup.wmUITrack"),t.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{f(e(this.contentWindow.document)),e(this).off("load.wmUITrack")}catch(t){i.customerLog("User input change tracker did not stop listening for all iframes.. This can occur for cross-domain iframes ",4)}})}function p(){t.triggerThrottledUIChange(o.UI_CHANGE_NOTIFIERS.USER_INPUT)}}i.register("AjaxCallsChangeNotifier").asCtor(ws).injectToReady().dependencies("UIChangeTracker,IFramesManager, TimerManager, Logger, AjaxCallsChangeNotifierFilter");function ws(){var t,n,r,o,a,s,u,l,c=this,d=!1;c.ready=function(e,r,i,o,l){t=e,n=r,a=i,s=o,u=l},c.start=function(){l=i.get("SPAAjaxConfig"),l.active&&(f(),d=!0)},c.stop=function(){m(),d=!1},c.isActivated=function(){return d},c.getSpaTypeName=function(){return l.name};function f(){p(window),n.foreachIframe(h,!0),n.onIframeLoad(function(e){e.ajaxCallsListenerSet=!1,h(e)})}function p(e){e.XMLHttpRequest&&(r=e.XMLHttpRequest.prototype.send,o=e.XMLHttpRequest.prototype.open,g(e.XMLHttpRequest))}function g(e){var t=e.prototype.send,n=e.prototype.open;e.prototype.open=function(e,t){return this._wmUrl=t,n.apply(this,arguments)};var r=function(){var e=this;a.setWalkmeTimeout(function(){var t=e.onreadystatechange;e.onreadystatechange=function(){t&&t.apply(e,arguments),u.filter(e._wmUrl)&&l.handler()}},0),t.apply(this,arguments)};e.prototype.send=r}function h(e){!e.ajaxCallsListenerSet&&e.documentAccessible&&(p(e.iframe.contentWindow),e.ajaxCallsListenerSet=!0)}function m(){s.customerLog("UIChangeTracker - Stopped listening to Ajax calls",2),v(window),y(e(document))}function v(e){e.XMLHttpRequest&&(e.XMLHttpRequest.prototype.send=r,e.XMLHttpRequest.prototype.open=o)}function y(t){t.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{v(this.contentWindow),y(e(this.contentWindow.document)),e(this).off("load.wmAjaxResposive")}catch(t){s.customerLog("Ajax calls were not overridden for all iframes. (ajax calls ui tracker). This can occur for cross-domain iframes ",4)}})}}i.register("AjaxCallsChangeNotifierFilter").asCtor(Is).dependencies("EventServerBaseUrl, RecorderServerManager");function Is(e,t){var n=this;n.filter=function(n){if(!n)return!0;var r=e.get();if(0===n.indexOf(r))return!1;var i=t.get();if(0===n.indexOf(i))return!1;return!0}}i.register("SPAConfig").asCtor(Ps).dependencies("SiteConfigManager, ObjectJpath");function Ps(e,t){var n=this;n.getValue=r;function r(n){return t.getValue(e.get(),"Settings.spaConfig."+n)}}i.register("SPAAjaxConfig").dependencies("SPAConfig,HashAjaxConfig,ThrottledAjaxConfig,DummyAjaxConfig,Consts").asFunction(_s);function _s(e,t,n,r,i){return e.getValue(i.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS)?t:e.getValue(i.UI_CHANGE_NOTIFIERS.AJAX_CALLS)?n:r}i.register("HashChecker").asCtor(ks).dependencies("win,Logger");function ks(e,t){var n,r,i=this;i.hashChanged=a;function o(){n=e.location.hash,r=t.wrapCustomerLog("HashChecker")}function a(){var t=n!=e.location.hash;return t?(r("Hash has changed. Previous hash: "+n+". New hash: "+e.location.hash,3),n=e.location.hash):r("Hash has't changed",3),t}o()}i.register("HashAjaxConfig").asCtor(As).dependencies("HashChecker,UIChangeTracker,Consts");function As(e,t,n){this.name="Hash on Ajax Calls",this.handler=r,this.active=!0;function r(){e.hashChanged()&&t.triggerUIChange(n.UI_CHANGE_NOTIFIERS.HASH_ON_AJAX_CALLS)}}i.register("ThrottledAjaxConfig").asCtor(Ds).dependencies("UIChangeTracker,Consts");function Ds(e,t){this.name="Ajax Calls",this.handler=n,this.active=!0;function n(){e.triggerThrottledUIChange(t.UI_CHANGE_NOTIFIERS.AJAX_CALLS)}}i.register("DummyAjaxConfig").asCtor(Os).dependencies("Logger");function Os(e){this.name="Dummy ajax handler",this.handler=t,this.active=!1;function t(){e.customerLog("That's a dummy ajax calls handler. If you see it, please check your configuration")}}i.register("ElementsRedrawer").asCtor(Ns).injectToReady().dependencies("Lib,TimerManager,UIChangeTracker, CommonUtils, Logger,IFramesManager, SPAConfig");function Ns(){var e,t,n,r,i,o,a,s,u=this,l=300,c="redrawTimeout",d=!1;u.ready=function(r,u,l,c,d,f,p){e=r,t=u,n=l,i=d.wrapCustomerLog(E),o=c,a=f,s=p},u.redrawElements=function(){var e=function(){if(d)return void i("UIChangeTracker - Canceling uiChange, already waiting for redraw",4);i("UIChangeTracker - UI change triggered",2),d=!0;var e=p();i("UIChangeTracker - redrawing in "+e,4),r&&(r.clear(),r=void 0),r=t.libSetTimeout(f,e)};t.libSetTimeout(e,0)},u.getRedrawerName=function(){return"ElementsRedrawer"};function f(){d=!1,a.remapTopIframes(),n.callListeners()}function p(){return parseInt(s.getValue(c))||l}}i.register("ScrollManager").asCtor(xs).asProto().dependencies("CommonUtils, ElementUtils, FeaturesManager, HostData, Logger, Consts, ScrollUtils, ElementInIframeIndicator, PositionHelper, IFrameScrollManager, SiteConfigManager");function xs(e,t,n,r,i,o,a,s,u,l,c,d){var f,p,g,h,m,v=this;function y(){f=d.element,g=d.balloonDrawer,h=d.settings,p=f.offset(),m=c.get()}v.scrollToElementIfNeeded=function(e,t,n,r,o,s,u,l){try{var c,d=!1,f=v.getScrollOptions(r);if(a.shouldTryAnimateScroll(e,s,r)){c=E(e,o,f,u,l);try{T(c,e,f,o,u,n)&&(d=!0)}catch(p){}}d&&s!=a.SCROLL_MODES.Normal||(c=e,S(c,e,o,f,n))}catch(p){i.error(p)}},v.getScrollOptions=function(t){var n=e.getSettingsValue(t,"endScroll",-1);if(n>=0)return{distance:parseInt(n,10),unit:e.getSettingsValue(t,"scrollUnit","%"),force:e.getSettingsValue(t,"forceScroll",0)}},v.scrollToBalloon=function(e,t,n){var r=v.calculateScrollMargins(e,t);if(!u.isElementInViewport(n,r)){var i=e.offset().top>n.offset().top;C(n,t,i)}};function E(e,n,r,i,o){var a,s=o[0],u=e,l=t.getElementViewport(e),c=v.calculateScrollMargins(e,r),d=p.top<i.offset().top||p.top+e.height()<i.offset().top+i.height(),f=l.top()-0+l.height()-0;!r||1!=n&&3!=n?d?(a=f-c.bottom<=p.top+e.height()+i.height()+s.height()?"down":"up",u="down"==a?i:e):(a=l.top()+c.top>=p.top-i.height()-s.height()?"up":"down",u="down"==a?e:i):u=e.outerHeight()>i.height()?e:i;var g=P(e.height(),i.height(),n,s.height(),l.height()-0);return g&&(u=i),u}this.calculateScrollMargins=function(e,t){if(t&&t.force){var n=b(e,t);return{top:n,bottom:0}}return o.DEFAULT_POSITIONS};function S(e,t,n,r,i){var o=v.calculateScrollMargins(e,r);v.isElementVisibleBeforeScroll(e,o,n)||C(e,r,!0,s.isInIframe(t)),i&&i()}function T(e,t,i,a,u,l){if(r.isQuirksMode(f[0]))return!1;if(c("html"))return!0;if(!v.isElementVisibleBeforeScroll(t,v.calculateScrollMargins(t,i),a))return c("body");return!1;function c(r){var c={duration:"slow",rootElement:r,elementToFindScrollableFor:t,complete:function(){l&&l()},heightLimit:!n.isFeatureEnabled("noHgtLmt"),customScrollElement:m.Custom.customScrollElement,forceFindScrollable:n.isFeatureEnabled(o.FEATURES.ForceFindScrollable),isElementInIFrame:s.isInIframe(t)};if(i){var d=u.height();c.endScroll={scrollOptions:i,balloonHeight:I(t,a,d),totalDrawnHeight:w(t,a,d)}}return e.scrollintoview(c)}}v.isElementVisibleBeforeScroll=function(e,t,n){return u.isElementInViewport(e,t)&&a.isBalloonPositionVisibleRelativeToParents(e,n)};function C(e,t,n,r){t&&!r?window.scrollTo(0,e.offset().top-b(e,t)):l.doNormalScroll(e,n,t)}function b(e,n){return"px"==n.unit?n.distance:t.getElementViewport(e).height()*n.distance/100}function w(n,r,i){var o=n.outerHeight(),a=t.getElementViewport(n).height()-0;return P(o,i,r,g.arrowHeight(),a)?i:0==r||2==r?o+i+g.arrowHeight()+1-parseInt(e.getSettingsValue(h,"topOffset",0)):Math.max(o,i)}function I(t,n,r){var i=t.height(),o=parseInt(e.getSettingsValue(h,"topOffset",0));return 0==n?r+g.arrowHeight()+1-o:2==n?i+r+g.arrowHeight()+1-o:r>i?r-o:(i-r)/2+r-o}function P(e,t,n,r,i){return 0==n||2==n?e+t+r>i:e>i}y.apply(null,arguments)}i.register("IFrameScrollManager").asCtor(Ls).dependencies("HostData");function Ls(t){var n=this;function r(){}n.doNormalScroll=function(n,r,i){n[0].scrollIntoView(r);var o="hidden"===e("html").css("overflow"),a="hidden"===e("body").css("overflow");if(t.isQuirksMode(n[0])||o||a){var s=e("html");s[0].scrollIntoView()}},r.apply(null,arguments)}i.register("AutoStartHelper").dependencies("CrossDomainManager").asCtor(Fs);function Fs(e){var t=this;t.addAutoStartHelper=o,t.clearCache=a,t.checkShouldAutoStart=s;var n,r={};function o(e,t){r[t]=e}function a(e){var t=u(e,"clearCache");t&&t.clearCache()}function s(t,n,r){var i=u(t),o=i&&i.checkShouldAutoStart(t,n,r);if(void 0==o&&e.get().enabled()){var a=l(t);return!a||a.checkShouldAutoStart(t,n,r)}if(void 0==o)return!0;return o}function u(t,n){if(!e.get().enabled())return l(t);return c(n)}function l(e){return r[e]}function c(e){if(n||(n=i.get("PassOwnershipAutoStartHelper")),n[e])return n}}i.register("PassOwnershipAutoStartHelper").asCtor(Ms).dependencies("Consts, DeployableTypes, Logger, CrossDomainManager, FlowsContainer");function Ms(e,t,n,r,i){var o=this;o.checkShouldAutoStart=s;var a=n.wrapCustomerLog(v);function s(e,t){var n=u(e);if(void 0!=n){var i=l(e,t),o=r.get().isConditionMet(!0,i,n);if(!o)return a(r.get().isOwnerByDefault()?"AutoStartHelper - not top window, not starting":"AutoStartHelper - condition not met, not starting"),!1}}function u(n){var r=void 0;return n==t.Tutorial?r=e.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru:n==t.BusinessSolution&&(r=e.PASS_OWNERSHIP.PassOwnershipEntity.BizFlow),r}function l(e,n){return e==t.Tutorial?{walkthruId:n.Id,step:n.Steps[0]}:{flowId:n.Flow.Id,node:i.getNodeById(n.Flow.Id,n.Flow.RootFlowNodeId)}}}i.register("AutoStartManager").asCtor(Bs).dependencies("ClientOrServerStorageManager, Logger, AutoStartHelper, DeployablesManagerFactory, DeployableTypes, ClientStorageManager, TimerManager, CommonUtils,ElementFinder, Consts, CommonEvents, AutoStartDeployablesIterator, AutostartDeployablesOrchestrator, AutoStartConditionParamsProvider, ConditionTreeGetter, ConditionCheckerFactory, WmInternals");function Bs(e,t,n,r,o,a,s,u,l,c,d,f,p,g,h,m,y){var E=this,S=t.wrapCustomerLog(v);function T(){}this.run=function(){p.deployablesChecksStarting(),S("Trying to find a deployable that can auto start",1),n.clearCache(),l.wrapSession(function(){var e=function(e,t,n){var r=C(e,n,t);r?k(e,t,n,r):p.deployableCannotAutoplay(t,n)};f.iterate(e)})};function C(e,t,n){if(!P(t))return S("Deployable doesn't support auto start: "+t.Name,4),!1;var r=w(t,n);if(r.forceStart)return S("Deployable can auto start (remind me later): "+t.Name,4),r.startResult;if(r.canStart)return b(e,t,n);return!1}function b(e,t,n){if(e.autoStartEnabled(t.Id)){var r=A(n,t);if(r.shouldStart)return S("Deployable can auto start (storage): "+t.Name,4),r}return!1}function w(t,n){var r={forceStart:!1,canStart:!1},i=n?n+"-":"",o=e.keysConfig.remindMeLater.remindMeLater.key+"-"+i+t.Id,a=e.getData(o,void 0,void 0,void 0);if(a){var s=ig(a);s.expiry&&s.expiry<Date.now()&&(r.forceStart=!0,r.startResult={shouldStart:!0,repeatCookieExpiry:-1,store:function(){e.removeData(o)}})}else r.canStart=!0;return r}function P(e){return u.getSettingsValue(e.Settings,"ASEnabled",0)}function k(e,t,n,r){var i=u.getSettingsValue(n.Settings,"ASCTEnabled",0);if(1!=i)return S("Non-conditional autostart, trying to auto start "+n.Name,3),B(t,n,r);S("Autostart is enabled for deployable: "+n.Name,3);var o=h.get(t,n,"ASCT");if(""!=o)try{D(e,t,n,r,o)}catch(a){}}this.checkRepeatCookie=function(n,r,i){var o={shouldStart:!0,repeatCookieExpiry:-1},s=i?a:e;if("always"==r);else{"visit"==r&&(n+="-v");var l=1,c=s.getData(n,void 0,void 0,l);c==l?o.shouldStart=!1:u.isNumber(r)?o.repeatCookieExpiry=r:"visit"==r?o.repeatCookieExpiry=I:"once"==r?o.repeatCookieExpiry=_:t.error(new Error("checkRepeatCookie bad value: "+r))}return o.store=function(){o.repeatCookieExpiry>=0&&s.saveData(n,1,o.repeatCookieExpiry)},o};function A(e,t){var n=x(e,t),r=u.getSettingsValue(t.Settings,"ASRep","visit");return""===r&&(r="visit"),E.checkRepeatCookie(n,r)}function D(e,t,n,r,i){var o=g.get(t,n),a=m.createConditionChecker(i,o);O(t,n,r,i,a),N(e,t,n,r,i,a)}function O(e,t,n,r,i){var o=i.getCurrentEvaluationValueAndStopEvaluating(r);F(o,e,t,n,n,i)}function N(e,t,n,r,i,o){var a=!0;o.onEvaluated(function(i){var s=C(e,n,t);s&&F(i,t,n,s,r,o,a)}),o.evaluateAsyncAndDontEvaluateImmediately(i)}function x(e,t){var n=a.keysConfig.autoStart.repeat.key;if(0==e)return n+"-"+t.Id;return n+"-"+e+"-"+t.Id}function L(e,t,r){return n.checkShouldAutoStart(e,t,r)}function F(e,t,n,r,i,o,a){e?(S("Autostart condition met, trying to auto start: "+n.Name,3),M(t,n,r,i,o,a)):S("Condition didn't meet, not starting deployable: "+n.Name,3),d.deprecatedRaiseEvent(c.EVENTS.AutoStart.ConditionEvaluated,n,{result:e})}function M(e,t,r,a,s,u){function l(){n.clearCache(e);var i=B(e,t,r,u);i&&a.repeatCookieExpiry!=-1&&s.cleanResources()}e==o.Tutorial?i.get("WalkthruStepsLoader").afterStepsLoaded(t.TutorialId,l):l()}function B(e,t,n,r){if(y.bind(c.EVENTS.AutoStart.Activated,o),L(e,t,r)){var i=parseFloat(u.getSettingsValue(t.Settings,"Delay",0));return i?s.libSetTimeout(function(){p.deployableCanAutoplay(e,t)},1e3*i):p.deployableCanAutoplay(e,t),!0}return p.deployableCannotAutoplay(e,t),!1;function o(r,i){y.unbind(c.EVENTS.AutoStart.Activated,o),i.deployableType==e&&i.deployable==t&&n.store()}}T.apply(null,arguments)}i.register("DeployablesRunnerFactory").asCtor(Rs).dependencies("DeployableTypes, ImmediateDeployablesRunner, QueueDeployableRunner");function Rs(e,t,n){var r=this;r.get=a;var i=[];function o(){i[e.ShoutOut]=t,i[e.Tutorial]=n,i[e.BusinessSolution]=n,i[e.Survey]=n}function a(e){return i[e]}o()}i.register("ImmediateDeployablesRunner").asCtor(Us).dependencies("Consts, CommonEvents, DeployablesManagerFactory, Logger");function Us(e,t,n,r){var i=this;i.run=s;var o;function a(){o=r.wrapCustomerLog(v)}function s(r,i){o("Autostarting: "+i.Name,3),t.raiseEvent(e.EVENTS.AutoStart.Activated,{deployableType:r,deployable:i}),n.get(r).activateById(i.Id,{type:e.STEP_PLAY_INITIATOR_ENUM.AUTOSTART})}a()}i.register("QueueDeployableRunner").asCtor(Vs).dependencies("ImmediateDeployablesRunner, AutoStartRunningState");function Vs(e,t){var n=this;n.run=i;var r=[];function i(e,t){r.push({deployableType:e,deployable:t}),o()}function o(){t.isSomeoneRunning().then(a).fail(function(){var t=r.shift();e.run(t.deployableType,t.deployable)})}function a(){r=[]}}i.register("AutoStartRunningState").asCtor(Ws).dependencies("AutoStartTypes");function Ws(t){var n=this;n.isSomeoneRunning=r,n.cleanResources=i;function r(){var n=e.Deferred(),r=t.getRunningStateServices();i();function i(){var e=r.shift();if(!e)return void n.reject();e.isRunning().then(n.resolve,i)}return n.promise()}function i(){for(var e=t.getRunningStateServices(),n=0;n<e.length;n++)e[n].cleanResources&&e[n].cleanResources()}}i.register("EventBasedRunningState").asCtor(Gs).asProto().dependencies("WmInternals");function Gs(t,n){var r=this;r.isRunning=f,r.cleanResources=p;var i,o=[{eventNames:n.resetEvents,method:u},{eventNames:n.startingEvents,method:l},{eventNames:n.resolvingEvents,method:c},{eventNames:n.rejectingEvents,method:d}];function a(){u(),s(!0)}function s(e){for(var n=e?t.bind:t.unbind,r=0;r<o.length;r++)for(var i=o[r],a=0;a<i.eventNames.length;a++){var s=i.eventNames[a];n(s,i.method)}}function u(){i=e.Deferred(),i.reject()}function l(){i=e.Deferred()}function c(){i.resolve()}function d(){i.reject()}function f(){return i.promise()}function p(){s(!1)}a()}i.register("SurveyRunningState").dependencies("Consts").asFunction(function(e){return i.create("EventBasedRunningState",{resetEvents:[e.EVENTS.Surveys.SurveyCompleted],startingEvents:[e.EVENTS.Surveys.StartSurvey],resolvingEvents:[e.EVENTS.Surveys.SurveyPlayed],rejectingEvents:[e.EVENTS.Surveys.SurveyFailedShowing]})}),i.register("BizFlowRunningState").dependencies("Consts").asFunction(function(e){return i.create("EventBasedRunningState",{resetEvents:[e.EVENTS.Flows.FlowStopped,e.EVENTS.Flows.FlowCompleted],startingEvents:[e.EVENTS.Flows.RestoringFlow,e.EVENTS.Flows.FlowStarted],resolvingEvents:[e.EVENTS.Flows.UIFlowStageShown],rejectingEvents:[e.EVENTS.Flows.FailedToStart]})}),L.register([O.PLATFORM.Web,O.PLATFORM.MobileWeb,O.PLATFORM.Desktop],function(){i.register("AutostartDeployablesOrchestrator").asCtor(Hs).dependencies("DeployablesRunnerFactory")});function Hs(e){var t=this;t.deployableCanAutoplay=n,t.deployableCannotAutoplay=function(){},t.deployablesChecksStarting=function(){};function n(t,n){e.get(t).run(t,n)}}L.register([O.PLATFORM.Web,O.PLATFORM.MobileWeb,O.PLATFORM.Desktop],function(){i.register("AutoStartConditionParamsProvider").asCtor(js)});function js(){var e=this;e.get=t;function t(e,t){var n={trackUIChange:!0,stopPollingAfterEvaluateTrue:!1,evaluationPollingIntervalMs:2e3,onlyPollConditionFunctions:!0,featureName:v,elementName:t.Name};return n}}i.register("AutoStartTypes").asCtor(Ys).dependencies("DeployableTypes, BizFlowRunningState, SurveyRunningState");function Ys(t,n,r){var i=this;i.addDeployable=l,i.getDeployableTypes=s,i.getRunningStateServices=u;var o;function a(){o=[{type:t.ShoutOut},{type:t.BusinessSolution,runningState:n},{type:t.Survey,runningState:r}]}function s(){return e.map(o,function(e){return e.type})}function u(){return e(o).filter(function(e,t){return t.runningState}).map(function(e,t){return t.runningState}).toArray()}function l(e,t,n){var r=c(n);o.splice(r+1,0,{type:e,runningState:t})}function c(t){var n=-1;return e.each(o,function(e,r){r.type==t&&(n=e)}),n}a()}L.register([O.PLATFORM.Web,O.PLATFORM.MobileWeb,O.PLATFORM.Desktop],function(){i.register("AutoStartDeployablesIterator").asCtor(zs).dependencies("DeployablesManagerFactory, AutoStartTypes")});function zs(e,t){var n=this;n.iterate=r;function r(n){for(var r=t.getDeployableTypes(),i=0;i<r.length;i++)for(var o=r[i],a=e.get(o),s=a.getAll(),u=0;u<s.length;u++){var l=s[u];n(a,o,l)}}}i.register("PermalinkDeployableProvider").asCtor(Qs).dependencies("DeployablesManagerFactory, DeployableTypes, Consts, SiteConfigManager");function Qs(e,t,n,r){var i=this;i.getByString=o;function o(e){var n=a(),r=n.exec(e);if(r&&r.length>1){var i=r[2]||r[1],o=r[2]?r[1]:t.Tutorial,u={type:parseInt(o,10),id:parseInt(i,10)};if(s(u))return u}}function a(){var e,t=r.get();return e=t.IsDisplayPoweredBy===n.IS_DISPLAY_POWERED_BY.Hide?/(?:walkme|walkthroughid)=([0-9]+)-?([0-9]*)/:/walkme=([0-9]+)-?([0-9]*)/}function s(t){var n=e.get(t.type);if(!n)return;var r=n.getById(t.id);if(!r)return;return!0}}i.register("PermalinkString").asFunction(function(e){return e.location.href}).asProto(),i.register("PermalinkManager").asCtor(qs).dependencies("CrossDomainManager, DeployablesManagerFactory, Lib, DeployableTypes, CommonUtils, Consts, CommonEvents, TimerManager, PermalinkDeployableProvider");function qs(t,n,r,o,a,s,u,l,c){var d,f=this;f.window=window,f.isTrainingInStartingMode=m;var p=[o.Tutorial,o.BusinessSolution];f.run=function(){if(g()){var t=c.getByString(i.create("PermalinkString",f.window));if(t){var r=e.inArray(t.type,p)!=-1,o=n.get(t.type),a=o.getById(t.id),m=h(a,r);l.libSetTimeout(function(){u.raiseEvent(s.EVENTS.PermalinkClicked),o.activateById(t.id,{type:s.STEP_PLAY_INITIATOR_ENUM.PERMALINK}),r&&(d=!1)},m),r&&(d=!0)}}};function g(){return!t.get().enabled()||t.get().isOwnerByDefault()}function h(e,n){var r=1e3*parseFloat(a.getSettingsValue(e.Settings,"Delay",0)),i=n&&t.get().enabled()?2*t.get().crossDomainSampleRate():1;return Math.max(r,i)}function m(){return d}}i.register("RecorderServerManager").asCtor(Ks).args([""]),i.register("EventServerBaseUrl").asCtor(Ks).args([""]),i.register("PetaServerNameManager").asCtor(Ks);function Ks(){var e,t=this;function n(t){e=t}t.set=function(t){e=t},t.get=function(){return e},n.apply(t,arguments)}i.register("AuditSourceManager").asCtor(Xs).dependencies("Consts");function Xs(e){var t=this;t.set=i,t.get=o;var n;function r(){n=e.SOURCES.production}function i(t){var r=e.SOURCES[t];n=void 0!=r?r:parseInt(t)}function o(){return n}r()}i.register("IsInEditor").asCtor(Ks).args([!1]),i.register("IsInWYSIWYG").asCtor(Ks).args([!1]),i.register("IconTemplates").asInstance({customImages:[],htmlImages:[]}),i.register("FeaturesManager").asCtor(Js).dependencies("SiteConfigManager");function Js(e){var t=this;t.isFeatureEnabled=function(t){var n=e.get();if("undefined"!=n.Features&&n.Features)return n.Features.indexOf(t)>-1;return!1},t.isReady=function(){var t=e.get();return t&&0!==t.length}}i.register("LanguageManager").asCtor($s).dependencies("win, Lib, ClientOrServerStorageManager, CommonEvents, Consts");function $s(e,t,n,r,i){var o=this,a=n.keysConfig.language.current.key,s=n.keysConfig.language.current.expiry,u="_default_",l="",c=[],d=[];o.setLanguages=function(e){c.length=d.length=0;var t=n.getData(a);t==u&&(t=l);for(var o=!1,s=0;s<e.length;s++){var f=e[s].languages;r.raiseEvent(i.EVENTS.BeforeLanguageSet,{languages:f});for(var p=0;p<f.length;p++){var g=f[p];c.push(g),g.showInPlayer&&d.push(g),g.shortName===t&&(o=!0)}}o||n.removeData(a)},o.getAllLanguages=function(){return c},o.getMenuLanguages=function(){return d},o.getCurrentLanguage=function(){var e=f();return h(e,c)?e:l};function f(){var t=n.getData(a);if(t==u&&(t=l),!t&&t!==l&&e.walkme_get_language)try{t=e.walkme_get_language()}catch(r){}if(!t||!h(t,c))return l;return t}o.changeLanguage=function(e){var t=e;if(e===l&&(t=u),p(t)||!h(e,c))return!1;return n.saveData(a,t,s),!0};function p(e){var t=f();return t===l&&(t=u),t===e}o.fixLanguageUrlInDataFiles=function(e,t){for(var n=f(),r=0;r<e.length;r++){var i=e[r];i.url=g(i,n,t)}return e};function g(e,t,n){var r=e.url;return t&&h(t,e.languages)&&(r=r.substring(0,r.length-3),r=r+"_"+t+".js"),r}function h(e,t){for(var n=0;n<t.length;n++)if(t[n].shortName==e)return!0;return!1}o.isLanguageSupported=function(e){return h(e,c)}}i.register("OverlayManager").asCtor(Zs).asSingleton().dependencies();function Zs(){var t,n,r=[];this.create=function(l,c,d){var f={element:l,color:d,opacity:c};return{remove:function(){i(f),f==n&&(n=u(),n?a(n):(t.remove(),t=null))},show:function(){f.zIndex=l[0].style.zIndex,f.index=l.index(),e.inArray(f,r)<0&&r.push(f),n&&n!=f&&!s(f,n)||(n=f,a(f))},getOverlayElement:function(){return t||o(f),t}}};function i(t){var n=e.inArray(t,r);n>-1&&r.splice(n,1)}function o(e){t||(t=l()),t.css({zIndex:e.zIndex,backgroundColor:e.color||"#000",opacity:e.opacity||.7})}function a(e){o(e),t.insertBefore(e.element)}function s(e,t){return e.zIndex>t.zIndex||e.zIndex==t.zIndex&&e.index>t.index}function u(){if(!r.length)return;for(var e=r[0],t=1;t<r.length;t++)s(r[t],e)&&(e=r[t]);return e}function l(){var t=e('<div id="walkme-overlay-all" style="position: fixed; height: 100%; width: 100%; top: 0; left: 0;"/>');return t}}i.register("ServerStorageAjaxCaller").asCtor(eu).dependencies("AuditSourceManager, RecorderServerManager, Logger, WmAjax, EndUsersManager");function eu(e,t,n,r,i){var o,a,s,u,l=this,c=1e4;function d(){}l.init=function(){o=e.get(),a=i.getEndUserGuid(),s=t.get(),u=s+"/EndUserStorage/Get"},l.get=function(e,t,i,s){var l={walkmeUserGuid:e,source:o,endUserGuid:a,secondsSinceUpdate:t};r.execute({url:u,data:l,success:function(r,u,l){r.Data.ErrorMessage?(n.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+e+", source: "+o+", end user: "+a+", seconds since update: "+t+". Error: "+r.Data.ErrorMessage+"."),s&&s()):i(r.Data)},error:function(r,i,u){n.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+e+", source: "+o+", end user: "+a+", seconds since update: "+t+". Error: "+i+"."),s&&s()},timeout:c})},d.apply(null,arguments)}i.register("ServerStorageManager").asCtor(tu).dependencies("Consts, UserGuidContainer, EndUserStorageDataSender, ClientStorageManager, AuditSourceManager, ServerStorageAjaxCaller, CommonUtils, SettingsFile, EndUsersManager");function tu(t,n,r,i,o,a,s,u,l){var c,d,f,p,g,h,m=this,v=!1,y=!0,E=I,S=i.keysConfig.serverStorage.currentEndUserGuid,T=i.keysConfig.serverStorage.currentEnvironment,C=i.keysConfig.serverStorage.lastGetDataTime,b=["wm-c-test","wm-dbg-cnf","wm-dbg","wm-ueug","wm-fgug","wm-gb","wm-load-testme","wm-prsst","wm-sf-lst-usr","wm-sf-users-data","wm-sat","wm-sst","wm-sk","wm-SrvSmt","wm-wtchd","wm-cond-win","wm-prf-stt","wm-prf-snk","wm-cdstop","wm-cdplay","wm-po-pc","wm-po-r","wm-po-q","wm-dt","wm-ne","wm-nx","wm_abg_","wm_ct_","wm-po-p",S.key,T.key,"wm-ftr-cnf","wm-ftr","wm-ltm","wm-ct-prv","wm-lg-act"];function w(){c=r,g=!1,m.keysConfig=i.keysConfig}m.init=function(e,t){if(g)return void(e&&e());g=!0,c.init(),a.init(),d=n.getUserGuid(),f=l.getEndUserGuid(),p=o.get();var r=i.getData(C.key,null,d);r&&(y=!1),P()&&(_(),r=null),k();var u=s.getDateAtUTC(),h=null==r?null:(u-r)/1e3;A(h)?D(h,u,e,t):e&&e()};function P(){var e=i.getData(S.key,null,d),t=i.getData(T.key,null,d);return!y&&(e!=f||t!=p)}function _(){for(var t=i.getInternalKeys(d),n=0;n<b.length;n++)e.each(t,function(e){0==e.indexOf(b[n])&&delete t[e]});for(var r in t)t.hasOwnProperty(r)&&i.removeData(r,d)}function k(){i.saveData(S.key,f,S.expiry,d),i.saveData(T.key,p,T.expiry,d)}function A(e){var t=u.getStorageType(),n=t[i.keysConfig.serverStorage.invalidateIntervalKey.key]||E;return null===e||n<=e}function D(e,t,n,r){a.get(d,e,function(e){m.updateLocalStorage(e,t),h=0,n&&n()},function(){h=1,r&&r()})}m.updateLocalStorage=function(e,t){v=!!y,m.updateLocalStorageItems(e),i.saveData(C.key,t,C.expiry,d)},m.updateLocalStorageItems=function(e){
for(var t=0;t<e.length;t++){var n=e[t];n.IsDeleted?i.removeData(n.Key,d):i.saveData(n.Key,ig(n.Value),n.SecondsToExpiry,d)}},m.shouldUpdateOldKeys=function(){return v},m.getStorageType=function(){var e=i.getStorageType();return e.mode="server",e},m.refreshGetData=i.refreshGetData,m.saveData=function(e,t,n,r){void 0==r&&(r=d),N(e,n,r)&&c.update(e,t,n,r),i.saveData(e,t,n,r)},m.getData=function(e,t,n,r){return void 0!==r&&O(n)&&(t=r),i.getData(e,t,n)};function O(e){return h}m.addToDictionary=function(e,t,n,r,o){N(e,r,o)&&c.updatePropertyInObject(e,t,n,r,o||d),i.addToDictionary(e,t,n,r,o)},m.addToSet=function(e,t,n,r){void 0==r&&(r=d),N(e,n,r)&&c.addToSet(e,t,n,r),i.addToSet(e,t,n,r)},m.removeData=function(e,t){void 0==t&&(t=d),c.remove(e,t),i.removeData(e,t)},m.addToQueue=i.addToQueue,m.convertOldCookieStorage=i.convertOldCookieStorage,m.increment=i.increment,m.getInternalKeys=i.getInternalKeys,m.removeAllData=i.removeAllData,m.sessionSetData=i.sessionSetData,m.sessionGetData=i.sessionGetData,m.setSyncFlag=i.setSyncFlag;function N(e,n,r){var i=!1;return n>=t.TIME_PERIODS.OneHourSeconds&&(i=!0),i}w.apply(null,arguments)}i.register("EndUserStorageDataSender").asCtor(nu).dependencies("CommonUtils, AuditSourceManager, ServerDataSenderManager, Logger, EndUsersManager, UserGuidContainer");function nu(e,t,n,r,i,o){var a,s,u,l,c,d,f,p=this;function g(){c=n.register("up",{actionUrl:"/EndUserStorage/UpdatePropertyInObject",prefixForStorage:"up",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:p.updateRequestParamsFunc,shouldTruncateData:!1}),d=n.register("as",{actionUrl:"/EndUserStorage/AddToSet",prefixForStorage:"as",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:p.updateRequestParamsFunc,shouldTruncateData:!1}),l=n.register("us",{actionUrl:"/EndUserStorage/Update",prefixForStorage:"us",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:p.updateRequestParamsFunc,shouldTruncateData:!1}),f=n.register("rs",{actionUrl:"/EndUserStorage/Remove",prefixForStorage:"rs",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:p.removeRequestParamsFunc,shouldTruncateData:!1})}p.init=function(){a=o.getUserGuid(),s=i.getEndUserGuid(),u=t.get()},p.updatePropertyInObject=function(e,t,n,r,i){a=i||a;var o={Key:e,FieldKey:t,FieldValue:n,Expiry:r};c.sendData(o)},p.addToSet=function(e,t,n,r){a=r||a,d.sendData(h(e,t,n))},p.update=function(e,t,n,r){a=r||a,l.sendData(h(e,t,n))};function h(t,n,r){return{Key:t,Value:e.toJSON(n),Expiry:r}}p.remove=function(e,t){a=t||a,f.sendData({Key:e})},p.getUpdateTypedDataSender=function(){return l},p.getRemoveTypedDataSender=function(){return f},p.updateRequestParamsFunc=function(t){return{walkmeUserGuid:a,source:u,endUserGuid:s,keyValueExpiryListSerialized:e.toJSON(t)}},p.removeRequestParamsFunc=function(t){return{walkmeUserGuid:a,source:u,endUserGuid:s,keyListSerialized:e.toJSON(t)}},g.apply(null,arguments)}i.register("SettingsCacheBusterActivator").asCtor(ru).asSingleton().dependencies("Lib, Logger, CommonUtils, LocalStorageService");function ru(e,t,n,r){var i=this;i.activeIfPublishedRecently=l;var o,a="wm-settings-cache-bust",s=900;function u(){o=t.wrapCustomerLog("SettingsCacheBusterActivator")}function l(e){if(!r)return;if(c(e)){var t=new Date(e+1e3*s);d(t)}}function c(e){var t=((new Date).getTime()-e)/1e3,n=t<s;return o("SettingsCacheManager.shouldActivateSettingsCacheBuster - secondsSincePublish: "+t,5),n}function d(e){o(n.formatString("SettingsCacheManager - Will fetch newset settings file until {}",e),3);var t=e.getTime()-(new Date).getTime();if(t<=0)return;r.setItem("walkMe_"+a,rg({val:"true",exp:(new Date).getTime()+t}))}u.apply(null,arguments)}i.register("SettingsCacheManager").asCtor(iu).asSingleton().dependencies("Lib,SettingsFile,Logger,CommonUtils,WmAjax,TimerManager, SettingsCacheBusterActivator,CommonEvents, LocalStorageService");function iu(e,t,n,r,i,o,a,s,u){var l,c=1e3;function d(){l=n.wrapCustomerLog("SettingsCacheManager")}this.start=function(){l("SettingsCacheManager.start - Check if need to fetch settings ",5),u?f({onSuccess:p,onFailure:m,queryStringParams:"forceUpdate="+(new Date).getTime()}):l("SettingsCacheManager - storage is not enabled , settings file will not be checked",3)};function f(e){var n=t.getUrl()+"?"+e.queryStringParams;l("SettingsCacheManager - Fetching newest settings file from: "+n,3),i.execute({url:n,cache:!1,dataType:"jsonp",jsonpCallback:"fixedCallback",success:e.onSuccess,error:e.onFailure})}function p(e,t,n){if(l("SettingsCacheManager.settingsFileReceived - publishDate: "+new Date(e.PublishDate),5),!e.PublishDate)return;a.activeIfPublishedRecently(e.PublishDate),g(e)&&(s.raiseEvent(O.EVENTS.SettingsFileNewPublish,{settingsData:e}),h())}function g(e){var n=t.getSettingsFile().PublishDate!=e.PublishDate;return l("SettingsCacheManager.shouldActivateSettingsCacheBuster - isNewPublish: "+n,5),n}function h(){o.setWalkmeTimeout(function(){f({onFailure:m,queryStringParams:"b="+(new Date).getTime()})},c)}function m(e,t,n){l(r.formatString("SettingsCacheManager - Error fetching settings file. jqXHR: {0}, textStatus: {1}, errorThrown: {2}",e,t,n))}d.apply(null,arguments)}i.register("EndUserDataConverter").asCtor(ou).dependencies("ClientOrServerStorageManager, DeployablesManagerFactory, CommonUtils, EndUserDataConverterConfig, SiteConfigManager, UserGuidContainer");function ou(t,n,r,i,o,a){var s=this;s.registerConverter=y,s.convertData=E;var u,l,c=i.get(),d=c.fixedKeys,f=c.keyNamesWithSuffixes,p=c.repeatKeysWithRelatedObject,g=c.keysWithRepeat,h="-",m=c.keysWithThreeParts;function v(){u=a.getUserGuid(),l=[]}function y(e){l.push(e)}function E(){if(t.shouldUpdateOldKeys&&t.shouldUpdateOldKeys()){var n=t.getInternalKeys(u);S(n),e.each(l,function(e,t){t.convert(n,u)})}}function S(e){for(var n in e)if(e.hasOwnProperty(n)){var r=T(n,e);r.Key&&t.saveData(r.Key,r.Value,r.Expiry,u)}}function T(e,t){var n,r={};if(d[e])n=d[e];else if(g[e])n=C(e);else{var i=P(e);if(i){var o=i.KeyWithoutSuffix;f[o]?n=f[o]:p[o]&&(n=b(i))}}return n&&(r.Key=e,r.Value=t[e],r.Expiry=n),r}function C(e){var t=g[e],n=t.SettingsKey,i=t.PropertyForKey,a=r.getSettingsValue(o.get().Settings[n],i,void 0),s=w(a);return s}function b(e){var t=p[e.KeyWithoutSuffix],i=e.SuffixParts;if("v"==i[i.length-1])return I;for(var o=0;o<t.length;o++){var a=t[o];if(a.Parts==i.length){var s,u=a.DeployableTypeIndex,l=void 0!==u?i[u]:a.DeployableType,c=n.get(parseInt(l)),d=c.getById(i[a.DeployableIdIndex]);a.SubSettings?s=r.getSettingsValue(d.Settings,a.SubSettings,void 0):d&&(s=d.Settings);var f;return s&&(f=r.getSettingsValue(s,a.SettingsKey,void 0)),w(f)}}}function w(e){var t;return r.isNumber(e)&&e>=I?t=e:"once"==e&&(t=_),t}function P(t){var n,r,i=t.split(h);if(i.length>1){var o,a=i[0]+h+i[1];i.length>2&&(o=a+h+i[2]),e.inArray(o,m)>-1?(n=o,r=i.slice(3)):(n=a,r=i.slice(2))}var s={KeyWithoutSuffix:n,SuffixParts:r};return s}v.apply(null,arguments)}i.register("EndUserDataConverterConfig").asCtor(au).dependencies("Consts");function au(e){var t=this;t.get=n;function n(){return{fixedKeys:{"wm-lang":P,"wm-ldv":_,"wm-ag-rep-v":I,"wm-ag-d":_},keyNamesWithSuffixes:{"wm-stpcond":_},repeatKeysWithRelatedObject:{"wm-ASRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"ASRep",DeployableType:e.DEPLOYABLE_TYPE.Tutorial},{Parts:2,DeployableTypeIndex:0,DeployableIdIndex:1,SettingsKey:"ASRep"}],"wm-SrvWtRep":[{Parts:2,DeployableIdIndex:0,SubSettings:"survey",SettingsKey:"repeat",DeployableType:e.DEPLOYABLE_TYPE.Tutorial}],"wm-SrvRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"repeat",DeployableType:e.DEPLOYABLE_TYPE.Survey}]},keysWithRepeat:{"wm-ag-rep":{SettingsKey:"AG",PropertyForKey:"repeat"}},keysWithThreeParts:["wm-ag-rep"]}}}i.register("WalkmeConfigManager").asCtor(su).dependencies("WmAjax, SettingsFile, PerformanceAPI");function su(e,t,n){var r=this;function i(){}r.init=function(i){var o=t.getSettingsFile(),a=o.WalkMeConfigFile;a?(n.measure("loadWalkmeConfigStart"),e.loadTextFile(a,"WalkMeConfigCallback",s,void 0,!0)):i&&i();function s(e,t,o){n.measure("loadWalkmeConfigEnd"),window._walkmeInternals.walkmeConfig=e,r.Data=e,i&&i()}},i.apply(null,arguments)}i.register("ShoutOutActionDataProvider").asCtor(uu).dependencies("Consts, DeployablesDataProvider, CommonUtils, ActionsFactory");function uu(t,n,r,i){var o=this,a="none",s={};s={playWt:{idField:"wtId",deployableType:t.DEPLOYABLE_TYPE.Tutorial,eventType:t.EVENT_SENDER_ACTIONS.PlayWalkthru,aAppType:t.EVENT_SENDER_EVENT_APPS.Walkthru},playContent:{idField:"contentId",deployableType:t.DEPLOYABLE_TYPE.Content,eventType:t.EVENT_SENDER_ACTIONS.PlayResource,aAppType:t.EVENT_SENDER_EVENT_APPS.Content},playShuttle:{idField:"shuttleId",deployableType:t.DEPLOYABLE_TYPE.Shuttle,eventType:t.EVENT_SENDER_ACTIONS.PlayShuttle,aAppType:t.EVENT_SENDER_EVENT_APPS.Shuttle},openMenu:{eventType:t.EVENT_SENDER_ACTIONS.OpenMenu},none:{eventType:t.EVENT_SENDER_ACTIONS.None},playBf:{idField:"bfId",deployableType:t.DEPLOYABLE_TYPE.BusinessSolution,eventType:t.EVENT_SENDER_ACTIONS.PlayBizFlow,aAppType:t.EVENT_SENDER_EVENT_APPS.BizFlow}},o.fillActionData=l,o.isWithAction=c;function u(){}function l(t,r){var i;if(r=r||{},t.Actions&&(i=e.grep(t.Actions,function(e){return d(e)})[0])){var o=s[i.Type];if(o){r.Type=o.eventType;var a=i.Args;a&&a[o.idField]&&(r.ItemId=a[o.idField].toString(),r.Name=n.getDeployableName(o.deployableType,r.ItemId),r.aAppType=o.aAppType)}}return r}function c(e){var t=e.Actions;if(t)for(var n=0;n<t.length;n++){var r=t[n];if(d(r)&&r.Type!=a)return!0}return!1}function d(e){return i.get(e.Type).Type==t.DEPLOYABLE_ACTION_TYPES.Action}u.apply(null,arguments)}i.register("LauncherActionDataProvider").asCtor(lu).dependencies("Consts, DeployablesDataProvider");function lu(e,t){var n=this,r="none",i={playWt:{idField:"wtId",deployableType:e.DEPLOYABLE_TYPE.Tutorial,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayWalkthru,aAppType:e.EVENT_SENDER_EVENT_APPS.Walkthru},playContent:{idField:"contentId",deployableType:e.DEPLOYABLE_TYPE.Content,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayResource,aAppType:e.EVENT_SENDER_EVENT_APPS.Content},playSurvey:{idField:"surveyId",deployableType:e.DEPLOYABLE_TYPE.Survey,actionEntityType:e.EVENT_SENDER_ACTIONS.PlaySurvey,aAppType:e.EVENT_SENDER_EVENT_APPS.Survey},playShuttle:{idField:"shuttleId",deployableType:e.DEPLOYABLE_TYPE.Shuttle,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayShuttle,aAppType:e.EVENT_SENDER_EVENT_APPS.Shuttle},shoutOut:{idField:"id",deployableType:e.DEPLOYABLE_TYPE.ShoutOut,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayShoutOut,aAppType:e.EVENT_SENDER_EVENT_APPS.ShoutOut},openMenu:{actionEntityType:e.EVENT_SENDER_ACTIONS.OpenMenu,aAppType:e.EVENT_SENDER_EVENT_APPS.None,aType:e.EVENT_SENDER_ACTIONS.OpenMenu},playBf:{idField:"bfId",deployableType:e.DEPLOYABLE_TYPE.BusinessSolution,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayBizFlow,aAppType:e.EVENT_SENDER_EVENT_APPS.BizFlow},checkMyForm:{idField:"businessSolutionId",deployableType:e.DEPLOYABLE_TYPE.BusinessSolution,actionEntityType:e.EVENT_SENDER_ACTIONS.PlaySmartTipSet,aAppType:e.EVENT_SENDER_EVENT_APPS.SmartTipSet},openTeachMe:{actionEntityType:e.EVENT_SENDER_ACTIONS.OpenCoursesMenu,aAppType:e.EVENT_SENDER_EVENT_APPS.None,aType:e.EVENT_SENDER_ACTIONS.OpenCoursesMenu}};n.fillActionData=a,n.isWithAction=s;function o(){}function a(e,n){if(n=n||{},null==e)return n;var r=e.Settings;if(r&&r.action){var o=r.action,a=i[o.actionType];if(a){n.Type=a.actionEntityType;var s=o.arguments;s&&s[a.idField]&&(n.ItemId=s[a.idField].toString(),n.Name=t.getDeployableName(a.deployableType,n.ItemId),n.aAppType=a.aAppType)}}return n}function s(e){var t=e.Settings;if(t&&t.action){var n=t.action.actionType;if(n&&n!=r)return!0}return!1}o.apply(null,arguments)}i.register("DeployablesRestorer").asCtor(cu).dependencies("BusinessSolutionsManager, CrossDomainManager");function cu(t,n){var r=this;r.restore=u,r.addRestorer=s;var i,o;function a(){o=0,i=[],s(t)}function s(e,t){i.push(e),t&&o++}function u(t){if(n.get().enabled())return;var r=0;e.each(i,function(e,n){n.restore(function(){r++,c(r)&&t&&t()})}),l()&&t&&t()}function l(){return 0==o}function c(e){return e==o}a()}i.register("RunningDeployablesStopper").asCtor(du).dependencies("FlowsPlayer");function du(t){var n=this;n.stop=a,n.addStopper=o;var r;function i(){r=[t]}function o(e){r.push(e)}function a(t){e.each(r,function(e,n){n.stop(t)})}i()}i.register("DeployablesDataProvider").asCtor(fu).dependencies("DeployablesManagerFactory");function fu(e){var t=this;t.getDeployableName=r;function n(){}function r(t,n){if(null==t||null==n)return;var r=e.get(t);if(!r)return;var i=r.getById(n);if(i)return i.Name;return}n.apply(null,arguments)}function pu(){var e=this;e.run=function(){}}L.register(O.PLATFORM.Web,function(){i.register("PlatformInitializer").asCtor(pu)}),L.register(O.PLATFORM.MobileWeb,function(){i.register("PlatformInitializer").asCtor(pu)}),L.register(O.PLATFORM.Desktop,function(){i.register("PlatformInitializer").asCtor(pu)}),i.register("WindowBeforeUnloadHandler").asCtor(gu).dependencies("win");function gu(t){var n=this;n.init=o,n.register=c,n.cleanResources=d;var r,i;function o(){d(),a(),s()}function a(){r=[]}function s(){i=t.onbeforeunload,t.onbeforeunload=u}function u(){if(l(),i)return i.apply(t,arguments)}function l(){e.each(r,t);function t(e,t){t()}}function c(e){r.push(e)}function d(){t.onbeforeunload===u&&(t.onbeforeunload=i)}}i.register("CrossDomainManager").dependencies("Logger, FeaturesManager, ClientStorageManager, AuditSourceProvider, UserGuidContainer").asCtor(hu);function hu(e,t,n,r,o){var a=this;a.isReady=l,a.get=u;var s;function u(){return l()||c(),s}function l(){return!!s}function c(){var a;a=t.isFeatureEnabled("po_frames")||t.isFeatureEnabled("passOwnership")?"FramedOwnershipManager":t.isFeatureEnabled("po_tabs")?"TabbedOwnershipManager":"PassOwnershipManager",i.entry(a).args({storageManager:n,errorHandler:e.error,userGuid:o.getUserGuid(),owner:window,isFeatureEnabled:t.isFeatureEnabled,allUserGuids:o.getAllUserGuids(),topWindow:top,isPlayMode:r.isInPlayMode()}),s=i.get(a)}}i.register("PageIdentifiersAPI").asCtor(mu).dependencies("ElementFinder, CommonUtils, UIChangeTracker");function mu(e,t,n){var r=this;r.setPageIdentifiers=a,r.capture=s;var i=e.getPageComparerCacheManagerEditorApi();function o(){if(!i.isEnabled())return;n.bind(u),i.updateCurrentPage()}function a(e){if(!i.isEnabled())return;if(i.resetCollection(),e)for(var t=0;t<e.length;t++){var n=e[t];i.addSerializedPage(n.PageDescription,n.Id)}}function s(){if(!i.isEnabled())return null;var e=i.captureCurrentPage();return t.toJSON(e)}function u(){if(!i.isEnabled())return;i.updateCurrentPage()}o()}i.register("jQueryCacheCleaner").asCtor(vu).dependencies("HostData, TimerManager");function vu(t,n){var r=this;r.init=a,r.destroy=s;var i;function o(){}function a(){u()}function s(){i&&(i.clear(),i=null)}function u(){l(),i=n.setWalkmeTimeout(u,1e4)}function l(){try{for(var t in e.cache){var n=e.cache[t],r=c(n);r&&delete e.cache[t]}}catch(i){}}function c(e){try{if(e&&e.handle&&e.handle.elem)return d(e.handle.elem);if(e&&e.data&&e.data.iframe)return d(mtjQuery(e.data.iframe)[0])}catch(t){return!0}return!1}function d(e){var t=e.documentElement;t&&(e=e.documentElement);var n=e.parentNode;if(!n)return!0;var r=e.ownerDocument,i=r.defaultView||r.parentWindow;if(!i)return!0}o()}i.register("wmjQuerySafe").asInstance(yu);function yu(e){return i.create("wmjQuerySafeProxy",{element:e})}var Eu=Su();i.register("wmjQuerySafeProxy").asCtor(Eu).asProto().dependencies("wmjQuery, wmjQuerySafe, EventBinder");function Su(){e.prototype.isSafe=t,e.prototype.getDocument=n,e.prototype.off=r,e.prototype.stop=i("stop"),e.prototype.remove=i("remove"),e.prototype.find=i("find"),e.prototype.show=i("show");function e(e,t,n,r){this.wmjQuery=e,this.wmjQuerySafe=t,this.eventBinder=n,this._element=e(r.element)}function t(){try{return this._element[0].ownerDocument,!0}catch(e){return!1}}function n(){var e=this,t=this;return this.safeExecute(function(){t=e.wmjQuerySafe(e._element[0].ownerDocument)}),t}function r(e,t){var n=this;return this.safeExecute(function(){n.eventBinder.unbind(n._element,e,t)}),this}function i(e){return function(){var t=this,n=arguments,r=t;return t.safeExecute(function(){var i=t._element[e].apply(t._element,n);r=t.wmjQuerySafe(i)}),r}}return e.prototype.safeExecute=function(e){try{e()}catch(t){this._element=this.wmjQuery()}},e}i.register("PopupStepElementProvider").asCtor(Tu).dependencies("TopContainerProvider");function Tu(e){var t=this;t.get=n;function n(t){var n=e.getTopContainer();if(0==n.length)return!1;var r=mtjQuery(".walkme-popup-element",n);if(r.length<=0||t){var i="walkme-popup-element",o="walkme-popup-element";t&&(i+="-"+r.length),r=mtjQuery(n[0].ownerDocument.createElement("div")),r.attr("id",i),r.attr("class",o),r.css("width","0px;"),r.css("height","0px;"),mtjQuery(n.append(r))}return r}}i.register("UserGuidContainer").asCtor(Cu).dependencies("CommonUtils, ArrayUtils, SettingsFile");function Cu(e,t,n){var r=this;r.getUserGuid=a,r.setUserGuid=s,r.getAllUserGuids=u;var i=null,o=[];function a(){return i}function s(n){n=e.defaultValue(n,"No-User-Guid"),t.inArray(n,o)==-1&&o.push(n),i=n}function u(){return n.getAllUserGuids()||o}}i.register("AnalyticsPropertiesManager").asCtor(bu).dependencies("SiteConfigManager, ValueProviderFactory");function bu(e,t){var n=this;n.setPredefinedPropertyValue=a,n.getPropertyValue=s,n.init=o;var r;function i(){r={}}function o(){var n=e.get().Settings;if(n&&n.analyticsProperties)for(var i=0;i<n.analyticsProperties.length;i++){var o=n.analyticsProperties[i],a=t.get(o);r[o.name]=a}}function a(e,n){var i=t.getPredefinedProvider(n);r[e]=i}function s(e){if(r[e])return r[e].get();return}i.apply(this,arguments)}i.register("ValueProviderFactory").asCtor(wu).dependencies("FeaturesManager, Consts, ValueCalculatorFactory");function wu(e,t,n){var r=this;r.get=a,r.getPredefinedProvider=u;function o(){}function a(n){var r=s(n);if(e.isFeatureEnabled(t.FEATURES.StickyCustomVars)){var o={calculateValueFunc:r};return i.create("StickyValueProvider",o)}if(e.isFeatureEnabled(t.FEATURES.StrongStickyCustomVars)){var o={calculateValueFunc:r};return i.create("StrongStickyValueProvider",o)}var a=r();return u(a)}function s(e){var t=n.get(e.calculationMethod),r=e.variable,i=function(){return t.calculate(r)};return i}function u(e){var t={value:e};return i.create("PredefinedValueProvider",t)}o.apply(this,arguments)}i.register("StickyValueProvider").asCtor(Iu).asProto();function Iu(e){var t=this;t.get=o;var n,r;function i(e){r=e.calculateValueFunc,a()}function o(){return void 0===n&&a(),n}function a(){n=r()}i.apply(this,[e])}i.register("StrongStickyValueProvider").asCtor(Pu).asProto();function Pu(e){var t=this;t.get=o;var n,r;function i(e){r=e.calculateValueFunc}function o(){return a(),n}function a(){n=r()}i.apply(this,[e])}i.register("PredefinedValueProvider").asCtor(_u).asProto();function _u(e){var t=this;t.get=i;var n;function r(e){n=e.value}function i(){return n}r.apply(this,[e])}i.register("TopMostCssStyleSettter").asCtor(ku);function ku(){var e=this;e.setTopMostCssStyle=t;function t(e,t){e.css("position","absolute"),e.css("z-index",t),e.addClass("SkipThisFixedPosition")}}i.register("ElementCenterer").asCtor(Au).dependencies("FramesetsUtils, BiggestFrameProvider, PositionHelper, FacebookCanvasIndicator");function Au(e,t,n,r){var i=this;i.centerElementInPage=a;function o(){}function a(i,o,a,l){var c=window;if(e.shouldHandlePageAsFramesets()&&(c=t.getBiggestFrame().contentWindow),r.isInFacebookCanvas())return u(i,o);var d={top:0,left:0};a&&(d.top+=a.top,d.left+=a.left);var f=n.calculateOffset(i.parent()[0],c);return d.top-=f.top,d.left-=f.left,s(i,o,mtjQuery(c).scrollLeft(),mtjQuery(c).scrollTop(),mtjQuery(c).width(),mtjQuery(c).height(),d,l)}function s(e,t,n,r,i,o,a,s){if(void 0==a||null==a)var a={top:0,left:0};n>500&&(n=0);var u=(o-mtjQuery(e).outerHeight())/2+r+a.top,l=(i-mtjQuery(e).outerWidth())/2+n+a.left;if(u=Math.round(u>0?u:0),l=Math.round(l>0?l:0),Math.abs(u-mtjQuery(e).offset().top)<2&&Math.abs(l-mtjQuery(e).offset().left)<2)return;u+="px",l+="px",mtjQuery(e).css({position:"absolute",margin:0}),t?(s=s?s:{duration:400},mtjQuery(e).animate({top:u,left:l},s)):mtjQuery(e).css({top:u,left:l})}function u(e,t){FB.Canvas.getPageInfo(function(n){l(e,t,n)})}function l(e,t,n){s(e,t,n.scrollLeft,n.scrollTop,mtjQuery(window).width(),n.clientHeight)}o()}i.register("PositionHelper").asCtor(Du).dependencies("Lib, UiUtils, Logger, CommonUtils, Consts, FeaturesManager, ElementUtils, ScrollUtils, DocumentUtils, FindElementCornerFunctions, CommonEvents, HostData, FrameContentsProvider, BiggestFrameProvider, FramesetsUtils, SettingsValuesRetriever");function Du(t,n,r,i,o,a,s,u,l,c,d,f,p,g,h,m){var v,y,E,S,T=this,C={ALL_POINTS:0,ANY_POINT:1},b={0:"mt_visible",1:"wm_vsb_st",2:"wm_interact_any_point",3:"wm_interact_all_points"},w=5e3;function I(){v=e.expr.filters.mt_hidden,B()}T.getVisibleFilter=function(e){return":"+b[(e.Settings||e).filter||0]};function P(e){var t=0,n=0,r=mtjQuery(e),o=r.offset();if(t=o.top,n=o.left,a.isFeatureEnabled("iframepadding")&&r.is("iframe")&&(n+=parseFloat(r.css("padding-left")),t+=parseFloat(r.css("padding-top"))),e.ownerDocument){var s=_(i.getBody(e.ownerDocument)),u=_(e.ownerDocument.documentElement);t-=s.top==u.top?s.top:s.top+u.top,n-=s.left==u.left?s.left:s.left+u.left}var l={left:n,top:t};return l}function _(e){if(!e)return{top:0,left:0};return{top:e.scrollTop||0,left:e.scrollLeft||0}}function k(e){var t=0,n=0;do"FRAME"==s.getElementTagName(e)?(t+=mtjQuery(e).offset().top,n+=mtjQuery(e).offset().left):(t+=e.offsetTop||0,n+=e.offsetLeft||0),e=e.offsetParent;while(e);var r={left:n,top:t};return r}this.getPosRelativeToWindow=function(e,t,n){var r,i,o,a,s=0,c=0;for(t=t||top,n&&!window.opera&&e&&e.tagName&&"input"==e.tagName.toLowerCase()&&(s+=e.scrollLeft,c+=e.scrollTop);e;){if(i=e.ownerDocument,o=l.getDocumentWindow(i),n&&o==t){var d=u.getScrollOffset(i);s+=d.Left,c+=d.Top}if(a=!o||o==t,r=n?P(e):k(e),s+=r.left,c+=r.top,a)break;e=o.frameElement}var f={left:s,top:c};return f};function A(e,t){var n={};if(e.left>t.right||t.left>e.right)return null;if(e.bottom<t.top||t.bottom<e.top)return null;return n.left=Math.max(e.left,t.left),n.right=Math.min(e.right,t.right),n.top=Math.max(e.top,t.top),n.bottom=Math.min(e.bottom,t.bottom),n.height=n.bottom-n.top,n.width=n.right-n.left,n}function D(e,t){var n=t.left,r=t.top;e.left+=n,e.right+=n,e.top+=r,e.bottom+=r}function O(e,t){var n=u.getScrollOffset(t);e.left+=n.Left,e.right+=n.Left,e.top+=n.Top,e.bottom+=n.Top}this.getRectRelativeToWindow=function(e,t,n){var r,i,o,a=!1,s={left:0,top:0};for(o=e.length>1?T.getMultipleElementsRect(e):t.getBoundingClientRect(),n=n||top;!a;){r=t.ownerDocument,i=l.getDocumentWindow(r);var u=r.documentElement.getBoundingClientRect();if(o=A(o,u),!o)return o;a=!i||i==n,a||(s=i.frameElement.getBoundingClientRect(),D(o,s),t=i.frameElement)}return O(o,r),o};function N(e){var t=s.getElementViewport(e);return{height:t.height(),width:t.width(),top:t.top(),left:t.left()}}this.getDrawingArea=function(e,t,n){if(!n||T.isElementInViewport(e))return N(t?mtjQuery("body"):e);var r=mtjQuery(document);return{top:0,left:0,height:r.height(),width:r.width()}},this.isElementScrolledOut=function(e,t,n){var r=p.getFrameContents(t),i=e.offset().top,a=e.offset().left,s=e.outerHeight(),u=e.outerWidth(),l=parseInt(n);if(l==o.POSITION_TYPE.Bottom&&(i+=s),l==o.POSITION_TYPE.Right&&(a+=u),r.scrollTop()>i||t.height()+r.scrollTop()<i)return!0;if(r.scrollLeft()>a||t.width()+r.scrollLeft()<a)return!0;return!1},T.getCenterPositionByBounds=function(e){var t=e.left+e.width/2,n=e.top+e.height/2;return{left:t,top:n}},T.getEmbedInElementPosition=function(e,t){var n={},r=parseInt(m.getSettingsValue(t,"leftOffset",0)),i=parseInt(m.getSettingsValue(t,"topOffset",0));return x(e,n,{top:i,left:r}),n},this.getElementBounds=function(e,t,n,r){var o={},a=e[0];if(t){var s=T.getMultipleElementsRect(e),u=i.getElementDocument(e),l=T.getOffsetRect(a,u,n);o=T.getElementBoundsWithRectAndOffset(s,l)}else{var c=T.getPosRelativeToWindow(a,n,!0);x(e,o,c)}return o=J(o,r)},T.getMultipleElementsRect=function(e){for(var t,n,r,i,o,a=0;a<e.length;a++)o=e[a].getBoundingClientRect(),(void 0===t||o.left<t)&&(t=o.left),(void 0===n||o.top<n)&&(n=o.top),(void 0===i||o.bottom>i)&&(i=o.bottom),(void 0===r||o.right>r)&&(r=o.right);return{top:n,left:t,right:r,bottom:i}};function x(e,t,n){t.top=n.top,t.left=n.left;var r=e.outerWidth(),i=e.outerHeight();if(e.length>1){var o=T.getMultipleElementsRect(e);r=o.right-o.left,i=o.bottom-o.top}t.height=i,t.width=r,t.bottom=t.top+t.height,t.right=t.left+t.width}T.isElementVisible=function(t,n){var r=!0;try{t[0].tagName}catch(i){r=!1}if(r){n=n||0;var o=":"+b[n];e(t).filter(o).length!=e(t).length&&(r=!1)}return r},T.registerResizeAndScrollEvents=function(e){var n=e.callback;n||(n=function(e,n){t.centerElementInPage(e,!0,n)});var r=h.shouldHandlePageAsFramesets()?g.getBiggestFrame().contentWindow:window;L(r,e.element,e.offset,e.eventNameSuffix,n)},T.getWindowSize=function(){var t=e(h.shouldHandlePageAsFramesets()?g.getBiggestFrame().contentWindow:window),n={height:t.height(),width:t.width()};return n};function L(e,t,n,r,i){T.removeScrollAndResizeEvents(r);var o=M(r);mtjQuery(e).bind(o,function(){t.stop(!1,!0),n=F(n,r),i(t,n)})}function F(e,t){var n={offset:e,eventName:t,defaultValue:e};return d.raiseEvent(o.EVENTS.Scrolls.ScrollFired,n),n.returnValue}T.removeScrollAndResizeEvents=function(e){var n=window;if(t.shouldHandlePageAsFramesets()){var r=g.getBiggestFrame();null!=r&&(n=r.contentWindow)}var i=M(e);mtjQuery(n).unbind(i)},T.centerElementInParent=function(e,t){var n=t.outerHeight()/2-e.outerHeight()/2,r=t.outerWidth()/2-e.outerWidth()/2;e.css("top",n+"px"),e.css("left",r+"px")};function M(e){return e=e?e:"walkme",cg("scroll.{0}, resize.{0}, scrollstop.{0}, orientationchange.{0}",e)}function B(){R("wm_hdn_st",function(t){var n=e(t);return n.is(":mt_hidden")||!y&&!H(n)}),R("wm_vsb_st",function(t){return!e.expr.filters.wm_hdn_st(t)}),R("wm_interact_any_point",function(e){return Y(e,C.ANY_POINT)}),R("wm_interact_all_points",function(e){return Y(e,C.ALL_POINTS)})}T.extendVisibilityFilters=function(){y=!1,e.expr.filters.mt_hidden=v;e.expr.filters.mt_hidden;if(a.isFeatureEnabled("strongMtVisible")&&(y=!0,W(function(e){return!H(e)})),a.isFeatureEnabled("anyPointInteractable")&&W(function(e){return!Y(e[0],C.ANY_POINT)}),a.isFeatureEnabled("nonVisibleIframe")){var t=function(e){var t=e.data("iframe");return!(!t||!t.is(":mt_hidden"))};W(t),G(t)}if(a.isFeatureEnabled("visibleOpacity")&&(W(U),G(U)),window._walkmeInternals&&window._walkmeInternals.customMtHiddenFuncs)for(var n=window._walkmeInternals.customMtHiddenFuncs,r=n.length-1;r>=0;r--)W(n[r])};function R(t,n){e.expr.filters[t]=n}function U(t){if(V(t))return!0;var n=!1;return t.parents().each(function(){if(V(e(this)))return n=!0,!1}),n}function V(e){if(0==e.css("opacity"))return!0;var t=e[0].filters;return t&&t.alpha&&0===t.alpha.opacity}function W(t){var n=e.expr.filters.mt_hidden;e.expr.filters.mt_hidden=function(r){return n(r)||t(e(r))}}function G(t){W(t);var n=e.expr.filters.wm_vsb_st,r=e.expr.filters.wm_interact_any_point,i=e.expr.filters.wm_interact_all_points;e.expr.filters.wm_vsb_st=function(r){return n(r)&&!t(e(r))},e.expr.filters.wm_interact_any_point=function(n){return r(n)&&!t(e(n))},e.expr.filters.wm_interact_all_points=function(n){return i(n)&&!t(e(n))}}function H(t){for(var n=t.parents().add(t),r=n.length-1;r>0;r--)if(j(e(n[r]),e(n[r-1])))return!1;return!0}function j(e,t){if("absolute"==e.css("position"))return!1;if("hidden"!=t.css("overflow"))return!1;var n=de(t,"border-top"),r=de(t,"padding-top"),i=t.offset().top,o=n+r+i,a=t.height(),s=o+a,u=t.offset().left,l=u+t.width();if(o==s)return!0;var c=de(e,"border-top"),d=de(e,"padding-top"),f=e.offset().top,p=c+d+f,g=e.height(),h=p+g,m=e.offset().left,v=m+e.width(),y=h<o,E=p>s,S=v<u,T=m>l;return y||E||S||T}function Y(t,n){var r=t.ownerDocument,i=e(t),o=i.parents("html"),a=i.parents("body"),s=a.scrollTop()||o.scrollTop(),u=a.scrollLeft()||o.scrollLeft(),l={element:i,html:o,topScroll:s,leftScroll:u,workingDocument:r};return n==C.ALL_POINTS?z(l):Q(l)}function z(e){for(var t=c.length-1;t>=0;t--)if(!q(c[t],e))return!1;return!0}function Q(e){for(var t=c.length-1;t>=0;t--)if(q(c[t],e))return!0;return!1}function q(t,n){var r=n.element,i=t(r),o=i.x-n.leftScroll,a=i.y-n.topScroll,s=n.workingDocument.elementFromPoint(o,a);return s==r[0]||e.contains(r[0],s)}T.findNearestSelfOrParentByType=function(t,n){var r=t[0];if(!r)return;for(var i=[],o=0;o<n.length;o++)i.push(n[o].toLowerCase());for(var a=r.tagName.toLowerCase();"body"!=a&&"frameset"!=a&&"head"!=a;){if(e.inArray(a,i)>-1)return e(r);r=r.parentNode,a=r.tagName.toLowerCase()}},T.findFirstSelfOrChildByType=function(e,t){if(!e.exist())return;var n=t.join(", ");if(e.is(n))return e.first();var r=e.children(n).first();if(r.exist())return r;if(e.is("table"))return K(e,t)};function K(e,t){var n;if(n=T.findFirstSelfOrChildByType(e.children("tr"),t),n&&n.exist())return n;if(n=T.findFirstSelfOrChildByType(e.children("thead").children("tr"),t),n&&n.exist())return n;if(n=T.findFirstSelfOrChildByType(e.children("tbody").children("tr"),t),n&&n.exist())return n;if(n=T.findFirstSelfOrChildByType(e.children("tfoot").children("tr"),t),n&&n.exist())return n}T.getColumn=function(t){var n=[],r=T.findNearestSelfOrParentByType(t,["table"]);if(!r)return;var i,o=["td","th"];if(i=t.is(o)?t:t.is("table")||t.is("tr")?T.findFirstSelfOrChildByType(t,o):T.findNearestSelfOrParentByType(t,o),!i)return;var a,s,u=null,l=i.index(),c=e([]);e.merge(c,r.children("tr")),e.merge(c,r.children("thead, tbody, tfoot").children("tr"));for(var d=0;d<c.length;d++)a=c[d].cells[l],a&&(null==u&&(u=a.colSpan),a.colSpan<u&&(n.length=0,u=a.colSpan),a.colSpan==u&&(s=e(a),s.height()&&s.width()&&n.push(a)));return e(n,r)},this.getBodyInheritedMargin=function(){var e={top:0,left:0};if(!a.isFeatureEnabled("calcInheritedMargin"))return e;var t=!1,n=mtjQuery("body").find("div").filter(function(){if(t)return!1;var e=mtjQuery(this);if("relative"!=e.css("position"))return!1;var n=null,r=null,i=parseInt(e.css("margin-top")),o=0!=i&&parseInt((r=e.position()).top)==-1*parseInt((n=e.offset()).top),a=!1;if(!o){var s=parseInt(e.css("margin-left"));a=0!=s&&parseInt(null!=r?r.left:e.position().left)==-1*parseInt(null!=n?n.left:e.offset().left)}return t=(o||a)&&X(e)}).eq(0);return n.length>0&&(e={top:parseInt(n.css("margin-top")),left:parseInt(n.css("margin-left"))}),e};function X(e){var t=!0;return e.parentsUntil("html").each(function(e,n){"relative"!=mtjQuery(n).css("position")&&(t=!1)}),t}function J(e,t){var n=parseInt(m.getSettingsValue(t,"leftOffset",0)),r=parseInt(m.getSettingsValue(t,"topOffset",0));return e.top=e.top+r,e.left=e.left+n,e.right=e.right+n,e.bottom=e.bottom+r,e}T.fixFirefoxAutoMarginBug=function(e,t,r,i){if(f.isFirefox&&$(t,r)){e.top+=T.tryParsingStyleValue(r.marginTop);var o=n.getStyle(t.parentElement,i),a=(T.tryParsingStyleValue(o.width)-T.tryParsingStyleValue(r.width))/2;if(a<0)return;e.left+=a}};function $(e,t){if("BODY"==e.tagName&&"relative"==t.position&&"auto"==e.style.marginLeft&&"auto"==e.style.marginRight&&0==T.tryParsingStyleValue(t.marginLeft))return!0}T.tryParsingStyleValue=function(e){return"string"==typeof e&&(e=e.replace("px","")),isNaN(e)?0:parseInt(e)};function Z(e,t){return(new Date).getTime()-e<t}T.getCollapsedMargin=function(){return E&&Z(S,w)?E:(E=ee(),S=(new Date).getTime(),E)};function ee(){var t={top:0,left:0};if(!a.isFeatureEnabled("collapsedMargins"))return t;var n=e("body"),r=0;if(te(n)){n.css("margin-top");n.find("> div").each(function(){var t=e(this),n=t.offset().top,i=t.position().top;if(parseInt(t.css("margin-top"),10)>0){var o=n-i;o>r&&(r=o)}})}return t.top+=r,t}function te(e){return e.offset().top<=0&&"relative"==e.css("position")&&(!f.isIE()||"visible"==e.css("overflow-x")&&"visible"==e.css("overflow-y"))&&(!f.isIEBrowser(9)||ne(e))}function ne(t){try{var n=e("<div />");n.important({
position:"absolute",top:0,visibility:"hidden"}),t.append(n);var r=n.offset().top;return n.remove(),r>0}catch(i){return!1}}T.getOffsetRect=function(e,t,n){try{var o=i.getBody(t),a=u.getScrollTop(t,o),s=u.getScrollLeft(t,o),l=T.calculateOffset(o,n);return a-=l.top,s-=l.left,{top:Math.round(a),left:Math.round(s)}}catch(c){r.error(c)}},T.calculateOffset=function(e,t){for(var r=e,i=n.getStyle(e,t);i&&"static"==i.position;)r=r.parentNode,i=n.getStyle(r,t);var o=T.getBodyInheritedMargin();o.top=T.tryParsingStyleValue(o.top),o.left=T.tryParsingStyleValue(o.left);var a={top:o.top,left:o.left},s=T.getCollapsedMargin();if(a.top+=s.top,a.left+=s.left,i)for(ie(a,r,i,"margin"),oe(a,r,i),re(a,r,i),T.fixFirefoxAutoMarginBug(a,r,i,t),r=r.parentNode,i=n.getStyle(r,t);i;)ie(a,r,i,"margin"),ie(a,r,i,"padding"),oe(a,r,i),re(a,r,i),r=r.parentNode,i=n.getStyle(r,t);return a};function re(e,t,n){"static"!=n.position&&(e.top+=T.tryParsingStyleValue(n.top),e.left+=T.tryParsingStyleValue(n.left))}function ie(e,t,n,r){e.top+=T.tryParsingStyleValue(n[r+"Top"]),e.left+=T.tryParsingStyleValue(n[r+"Left"])}function oe(e,t,n){if(/(html|body)/i.test(t.tagName))return;e.top+=ae(n.borderTopWidth),e.left+=ae(n.borderLeftWidth)}function ae(e){var t=1,n=3,r=5,i=0;switch(e){case"thin":i=t;break;case"medium":i=n;break;case"thick":i=r;break;default:i=Math.round(parseFloat(e))}return i}T.getElementBoundsWithRectAndOffset=function(e,t){var n=e.left+t.left,r=e.top+t.top,i=e.right-e.left,o=e.bottom-e.top,a=e.right+t.left,s=e.bottom+t.top;return{top:r,left:n,width:i,height:o,right:a,bottom:s}},T.isElementInViewport=function(t,n){n=e.extend({},o.DEFAULT_POSITIONS,n);var r=ue(t),i=t.offset();r.top+=i.top,r.left+=i.left,T.fixOffsetForIE(t,r);var u=a.isFeatureEnabled("fixIframeScroll")?s.getElementViewport(t):s.getWindowViewport(),l=a.isFeatureEnabled("bodyClientHeight")?e("body")[0].clientHeight:u.height(),c=u.top()+n.top,d=u.left()+n.left,f=l-n.bottom+(u.top()-0),p=u.width()-n.right+(u.left()-0),g=ce(r.top,r.left+t.width(),r.top+t.height(),r.left,c,p,f,d);return g};function se(e){try{if("1.7.1"!=e.jquery)return;var t=e[0].ownerDocument.documentMode;if(7==t||8==t){var n=e.data("iframe");if(n&&"FRAME"==n[0].tagName)return!0}}catch(r){}}T.fixOffsetForIE=function(e,t){if(se(e)){var n=e[0].ownerDocument,r=br.getBody(n);t.top+=r.scrollTop||n.documentElement.scrollTop,t.left+=r.scrollLeft||n.documentElement.scrollLeft}};function ue(e){for(var t=le(e),n={top:0,left:0},r=0;r<t.length;r++){var o=t[r].offset(),a=i.getBody(t[r][0].contentWindow.document);n.top+=o.top,n.top-=a.scrollTop||t[r][0].contentWindow.document.documentElement.scrollTop,n.left+=o.left,n.left-=a.scrollLeft||t[r][0].contentWindow.document.documentElement.scrollLeft}return n}function le(e,t){var n=e.data("iframe");return t||(t=[]),n&&(t.push(n),le(n,t)),t}function ce(e,t,n,r,i,o,a,s){return n<=a&&e>=i&&r>=s&&t<=o}function de(e,t){var n=e.css(t);return n?parseFloat(n):0}I.apply(null,arguments)}i.register("PopupPosition").asCtor(Ou).asProto().dependencies("Positions, Lib");function Ou(e,t,n){var r=this;r.positionElementInPage=s;var i,o;function a(){o=n.animator,i=n.pagePosition}function s(n,r){i===e.Center?t.centerElementInPage(n,!1,r):u(n,!0,r)}function u(t,n,r){t.css({position:"fixed"});var a=null,s="",u="wm-position-",l=r.top||0,c=r.left||0;switch(i){case e.Top:s=u+"top",a={top:0,left:"50%",marginLeft:-(t.outerWidth()/2)+c,marginTop:l};break;case e.Right:s=u+"right",a={right:0,top:"50%",marginTop:-(t.outerHeight()/2)+l,marginRight:-c};break;case e.Bottom:s=u+"bottom",a={bottom:0,left:"50%",top:"auto",marginLeft:-(t.outerWidth()/2)+c,marginBottom:-l};break;case e.Left:s=u+"left",a={left:0,top:"50%",marginTop:-(t.outerHeight()/2)+l,marginLeft:c};break;case e.TopLeft:s=u+"top-left",a={left:0,top:0,marginTop:l,marginLeft:c};break;case e.TopRight:s=u+"top-right",a={right:0,top:0,marginTop:l,marginRight:-c};break;case e.BottomRight:s=u+"bottom-right",a={right:0,bottom:0,top:"auto",marginBottom:-l,marginRight:-c};break;case e.BottomLeft:s=u+"bottom-left",a={left:0,bottom:0,top:"auto",marginBottom:-l,marginLeft:c}}t.addClass(s),t.css(a),n&&o.setPagePositionOffset({marginTop:a.marginTop,marginLeft:a.marginLeft,marginBottom:a.marginBottom,marginRight:a.marginRight},i)}a.apply(null,arguments)}i.register("DomEventDispatcher").asCtor(Nu).dependencies("HostData");function Nu(e){var t,n=this;function r(){if(!e.isIEBrowser())try{o("click");t=!0}catch(n){t=!1}}n.dispatchEvent=function(e,n){if(t){var r=o(n);e.dispatchEvent(r)}else if(window.dispatchEvent){var r=i(n);e.dispatchEvent(r)}else"input"==n&&(n="propertychange"),e.fireEvent("on"+n)};function i(e){var t=document.createEvent("UIEvents");return t.initUIEvent(e,!0,!0,window,1),t}function o(e){return new Event(e,{bubbles:!0})}r.apply(null,arguments)}i.register("InputGenerator").asCtor(xu).dependencies("TextInjector, DomEventDispatcher, Logger, TimerManager, CssInjector, HostData, Consts,CommonEvents, WmInternals, FeaturesManager");function xu(t,n,r,i,o,a,s,u,l,c){var d=this;d.click=m,d.hover=v,d.focus=E,d.text=S,d.select=C,d.selectByText=b,d.swipe=w;var f,p=n.dispatchEvent,g={MouseEnter:"mouseenter",MouseOver:"mouseover"};function h(){f={inject:function(e,n,r){t.injectText(e,n,r&&r.ElementDescription)},paste:function(e){a.isIEBrowser()||p(e[0],"paste")},input:function(e){p(e[0],"input")}}}function m(e,t){N(e)&&d.select(e.parent(),e[0].value),x(e),t&&t()}function v(e,t){P(e);var n=o.addElementClass(e,":hover");n?l.bind(s.EVENTS.BeforeWalkmeRemoved,y):k(e.is("a")&&e.parent().is("li")?e.parent():e),t&&t()}function y(){l.unbind(s.EVENTS.BeforeWalkmeRemoved,y),o.removeElementClass()}function E(e,t){I(e,"focus",t)}function S(t,n,r,o,a){r=r||0,p(t[0],"focus"),i.setWalkmeTimeout(function(){var s=T();e.each(s,function(e,r){f[r](t,n,a)}),i.setWalkmeTimeout(function(){p(t[0],"change"),p(t[0],"blur"),o&&o()},r)},r)}function T(){return c.isFeatureEnabled("injectTextPasteFirst")?["paste","inject","input"]:["inject","paste","input"]}function C(e,t,n){e.val()!=t&&(p(e[0],"focus"),e.val(t),p(e[0],"change")),n&&n()}function b(t,n,r){var i=t.find("option:selected");if(i.text()!=n){p(t[0],"focus");for(var o=t[0].options,a=0;a<o.length;a++)if(o[a].text==n){e(o[a]).attr("selected","selected"),p(t[0],"change");break}}r&&r()}function w(e,t){I(e,"swipe",t)}function I(e,t,n){p(e[0],t),e[t](),n&&n()}function P(t){var n=t.closest("a");t=0!==n.length?n:t,e.each(g,function(n,r){A(t,r,e),window.jQuery&&A(t,r,jQuery),D(t,r)})}function _(e,t){switch(t){case g.MouseOver:e.trigger("mouseover");break;case g.MouseEnter:default:e.trigger("mouseenter")}}function k(t){var n=t.find("*:mt_hidden");n.filter(function(){return"none"==e(this).css("display")}).css("display","block"),n.css("visibility","visible"),n.css("opacity","1")}function A(t,n,r){var i=O(t,!0);e.each(i,function(e,t){t=r(t),_(t,n)})}function D(t,n){var r=O(t,!0);e.each(r,function(e,t){p(t,n)})}function O(e,t){var n=e.find("*:mt_visible");return t&&n.push(e[0]),n}function N(e){return e.is("option")&&e.parent().is("select")}function x(e){if(!e[0])return;p(e[0],"mousedown"),p(e[0],"mouseup"),c.isFeatureEnabled("autoClickNoMouseover")||e.trigger("mouseover"),e[0].click(),u.raiseEvent(s.EVENTS.Walkthrus.InputGeneratedClick,{element:e})}h.apply(null,arguments)}i.register("TextInjector").asCtor(Lu).dependencies("TextInjectorsProvider, Logger");function Lu(e,t){var n=this;n.injectText=o,n.retrieve=a,n.adaptText=s;var r;function i(){r=e.get()}function o(e,t){u(r,"inject",e,t)}function a(e){return u(r,"retrieve",e)}function s(e,t){return u(r,"adaptText",e,t)}function u(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i],a=l(o,t,n,r);if(void 0!==a)return a}}function l(e,n,r,i){try{if(e.canInject(r))return e[n](r,i)||!1}catch(o){t.error(o,"error in executing text action "+n)}}i()}i.register("CkEditorTextInjector").asCtor(Fu);function Fu(){var e=this;e.inject=n,e.canInject=t,e.retrieve=r,e.adaptText=i;function t(e){var t=s(e);return t.CKEDITOR&&e.find(".cke").length>0&&a(e)}function n(e,t){var n=o(e);n.setData(t)}function r(e){var t=o(e);return t.getData()}function i(e,t){return t.replace(/(\r\n|\r|\n)/g,"<br>")}function o(e){var t=a(e),n=s(e);return n.CKEDITOR.instances[t]}function a(e){return e.find('[style*="visibility: hidden"]').attr("id")}function s(e){var t=e[0].ownerDocument;return t.defaultView||t.parentWindow}}i.register("JQueryTextInjector").asCtor(Mu).dependencies("HtmlElementsDataProvider");function Mu(e){var t=this;t.inject=r,t.canInject=n,t.retrieve=i,t.adaptText=o;function n(){return!0}function r(t,n){e.isInput(t)?t.val(n):t.text(n)}function i(e){return e.val()}function o(e,t){return t}}i.register("TextInjectorsProvider").asCtor(Bu).dependencies("JQueryTextInjector, CkEditorTextInjector");function Bu(e,t){var n=this;n.get=r;function r(){return[t,e]}}var Ru=function(){function e(){this._overlayManager=i.get("OverlayManager"),this._uiUtils=i.get("UiUtils"),this._canDisplayOverlay=this._uiUtils.canDisplayOverlay()}return e.prototype.setUiObject=function(e){this._uiObject=e},e.prototype.setSettings=function(e){this._settings=e},e.prototype.getOverlay=function(){if(this._canDisplayOverlay&&this._settings.overlay){var e=this._settings.overlay.opct,t=this._settings.overlay.color;return this._overlay=this._overlay||this._overlayManager.create(this._uiObject,e,t),this._overlay}},e.prototype.removeOverlay=function(){this._canDisplayOverlay&&this._overlay&&this._overlay.remove()},e}();i.register("PopupUIUtil").asCtor(Ru).asProto(),i.register("GuidGenerator").asCtor(Uu);function Uu(){var e=this;e.generateGuid=t;function t(e){var t=e?"":"-";return n()+n()+t+n()+t+n()+t+n()+t+n()+n()+n()}function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}}i.register("BalloonUtils").asCtor(Vu).dependencies("Consts, HostData, CommonUtils, CdnServer");function Vu(e,t,n,r){var i=this;i.setStyleForBalloon=function(t,n,o){t.css("border",""+n.BalloonBorderWidth+"px solid "+n.BorderColor),i.fixGradientColorsInConfiguration(n,"Color"),i.fixGradientColorsInConfiguration(n,"BalloonColor2");var a=void 0!=n.BalloonColor2?n.BalloonColor2:n.Color,s=void 0!=n.BalloonRadius?n.BalloonRadius:15,u=""+s+"px";if(t.css("-moz-border-radius",u),t.css("-webkit-border-radius",u),t.css("border-radius",u),n.Color==a?t.css("background",n.Color):(t.css("background","-moz-linear-gradient(top, "+n.Color+", "+a+")"),t.css("background","-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+n.Color+"), color-stop(100%,"+a+"))"),t.css("background","-webkit-linear-gradient(top, "+n.Color+" 0%,"+a+" 100%)"),t.css("background","-o-linear-gradient(top, "+n.Color+" 0%,"+a+" 100%)"),t.css("background","-ms-linear-gradient(top, "+n.Color+" 0%,"+a+" 100%)"),t.css("background","linear-gradient(to bottom, "+n.Color+" 0%,"+a+" 100%)"),t.css("filter","progid:DXImageTransform.Microsoft.gradient( startColorstr='"+n.Color+"', endColorstr='"+a+"',GradientType=0 )"),t.css("background-image").indexOf("gradient")==-1&&(t.css("background-image","url('"+r.get()+"/player/resources/images/spacer.gif')"),t.css("background-repeat","repeat")),i.isGradientWithBorderRadiusCompatible()||t.css("border-radius","0px")),!o){var l="0px 0px";switch(parseInt(n.Position)){case e.POSITION_TYPE.Top:l="-3px -3px";break;case e.POSITION_TYPE.Right:l="4px -4px";break;case e.POSITION_TYPE.Bottom:l="4px 4px";break;case e.POSITION_TYPE.Left:l="-4px 4px"}var c=" 3px rgba(0, 0, 0, 0.2)";t.css("-moz-box-shadow",l+c),t.css("-webkit-box-shadow",l+c),t.css("box-shadow",l+c)}},i.fixGradientColorsInConfiguration=function(e,n){e[n]&&"transparent"!=e[n]||(e[n]=t.isIE()?"#00000000":"transparent")},i.isGradientWithBorderRadiusCompatible=function(){return!t.isIE(9,"lte")},i.fixConfiguration=function(e){return e.BalloonColor2=n.isDefined(e.BalloonColor2)?e.BalloonColor2:e.Color,e.ButtonBgColor2=n.isDefined(e.ButtonBgColor2)?e.ButtonBgColor2:e.ButtonBgColor,e.BalloonBorderWidth=n.isDefined(e.BalloonBorderWidth)?parseInt(e.BalloonBorderWidth):1,e.BalloonButtonRadius=n.isDefined(e.BalloonButtonRadius)?parseInt(e.BalloonButtonRadius):15,e.ButtonShadowWidth=n.isDefined(e.ButtonShadowWidth)?parseInt(e.ButtonShadowWidth):0,e.BalloonRadius=n.isDefined(e.BalloonRadius)?parseInt(e.BalloonRadius):15,e.FooterTextColor=n.isDefined(e.FooterTextColor)?e.FooterTextColor:e.HeaderColor,e}}function Wu(e,t,n){var r=this;r.getElementTagName=i,r.getElementViewport=o,r.getWindowViewport=a;function i(e){var t=e.tagName;return t.toUpperCase&&(t=t.toUpperCase()),t}function o(t){var r=e.getElementDocument(t),i=n.getDocumentWindow(r),o=s(i);return o}function a(){var e=s(window);return e}function s(e){var n=e.document,r=mtjQuery(e);return r.left=function(){return t.getScrollOffset(n).Left},r.top=function(){return t.getScrollOffset(n).Top},r}}i.register("ElementUtils").asCtor(Wu).dependencies("CommonUtils, ScrollUtils, DocumentUtils");function Gu(){var e=this;e.getDocumentWindow=t;function t(e){return e.parentWindow||e.defaultView}}i.register("DocumentUtils").asCtor(Gu);function Hu(e,t,n,r,i){var o=this;o.SCROLL_MODES={Animated:0,Normal:1,None:2},o.getScrollOffset=function(t){var n=e.getBody(t),r=o.getScrollTop(t,n),i=o.getScrollLeft(t,n);return{Top:r,Left:i}},o.getScrollTop=function(e,t){return e.documentElement.scrollTop||t.scrollTop},o.getScrollLeft=function(e,t){return e.documentElement.scrollLeft||t.scrollLeft},o.jspScrollAttempt=function(t){var n=e.getJspParent(t),r=e.getClientjQuery();if(n)return r(n).data("jsp").scrollToElement(t,!0,!1),!0;return!1},o.shouldScroll=function(e,t,r){if(r!=n.STEP_TYPE.Popup&&t!=o.SCROLL_MODES.None&&"fixed"!=e.css("position"))return!0;return!1},o.shouldTryAnimateScroll=function(e,t,s){var u=r.isFeatureEnabled(n.FEATURES.AvoidCheckInIframe),l=t===o.SCROLL_MODES.Animated&&a(s);return u||(l=l&&!i.isInIframe(e)),l},o.isBalloonPositionVisibleRelativeToParents=function(e,n){return t.isBalloonPositionVisibleRelativeToParents(e,n)};function a(t){return 1!=e.getSettingsValue(t,"scrollOld","0")}}i.register("ScrollUtils").asCtor(Hu).dependencies("CommonUtils, BalloonPositionVisibilityChecker, Consts,FeaturesManager, ElementInIframeIndicator"),i.register("CookieValueCalculator").asCtor(ju).dependencies("CookiesManager");function ju(e){var t=this;t.calculate=n;function n(t){var n=e.getCookie(t);if(n===!1)return;return n}}i.register("JQueryValueCalculator").asCtor(Yu).dependencies("JQueryElementFinder");function Yu(e){var t=this;t.calculate=n;function n(t){var n=e.getjQueryElementText(t);if(""===n)return;return n}}i.register("VariableValueCalculator").asCtor(zu).dependencies("CommonUtils");function zu(e){var t=this;t.calculate=n;function n(t){var n=e.getWindowVar(t);return n}}i.register("LocalStorageValueCalculator").asCtor(Qu).dependencies("LocalStorageService");function Qu(e){var t=this;t.calculate=n;function n(t){return e?e.getItem(t):void 0}}i.register("ValueCalculatorFactory").asCtor(qu).dependencies("Logger, Consts, CookieValueCalculator, JQueryValueCalculator, VariableValueCalculator, LocalStorageValueCalculator");function qu(e,t,n,r,i,o){var a=this;a.get=s;function s(a){switch(a){case t.VALUE_CALCULATOR_TYPE.JQuery:return r;case t.VALUE_CALCULATOR_TYPE.Cookie:return n;case t.VALUE_CALCULATOR_TYPE.Variable:return i;case t.VALUE_CALCULATOR_TYPE.LocalStorage:return o;default:e.error(new Error("Unknown calculation method"))}}}i.register("CssClassesAppender").asCtor(Ku);function Ku(){var e=this;e.appendClasses=t;function t(e,t){if(t)for(var n=0;n<t.length;n++)e.addClass(t[n])}}i.register("ImageLoader").asCtor(Xu).dependencies("TimerManager");function Xu(t){var n=this;n.getImageSize=i;var r=100;function i(n,i){var o,a=e("<img />");a.load(s),a.attr("src",n),o=t.setWalkmeInterval(u,r);function s(){var e={width:a[0].width,height:a[0].height};i(e),clearInterval(o),a.unbind("load")}function u(){a[0].width&&a[0].height&&s()}}}function Ju(n,r,i){var o=this;o.init=y,o.register=v;var a="alt",s="accessibility",u="body",l="walkme-accessibility",c=1,d=27,f=32,p=800,g={TITLE:".wm-title",CONTENT:".wm-template-text",ACTION_BUTTON:".wm-blue-btn",CLOSE_LINK:".wm-close-link",CLOSE_BUTTON:".wm-close-button"},h={TITLE:1,CONTENT:2,ACTION_BUTTON:3,CLOSE_LINK:7,CLOSE_BUTTON:8},m=[];function v(e){m.push(e)}function y(){n.isFeatureEnabled(s)&&E()}function E(){t.bind("LauncherIsShown",I),t.bind("show-end",_),S(),e.each(m,function(e,t){t.bindEvents()})}function S(){var e=window.walkme_event;window.walkme_event=function(t){if(e&&e(t),"BalloonCreated"==t.Type){var n=t.ExtraData.Element;T(n)}}}function T(t){var n=C(i,t);k(t,n.selectors,h);var r=e(n.elemWithContent);r.on("focus",function(){e(this).addClass(l)}),r.on("blur",function(){e(this).removeClass(l)});var a=e(i.CLOSE_LINK,t);w(t,a),r.keyup(b),o.setFocus(r.first())}o.setFocus=function(e){r.libSetTimeout(function(){e.focus()},p)};function C(t,n){var r={};r.elemWithContent=[],r.selectors={};for(var i in t)if(t.hasOwnProperty(i)){var o=e(t[i]+":visible",n);o.each(function(){var n=e(this);n.text()&&(r.selectors[i]=t[i],r.elemWithContent.push(n[0]))})}return r}function b(e){if(e.keyCode===f){var t=e.srcElement?e.srcElement:e.target;t.click()}}function w(t,n){n.length>0&&e(t).keyup(function(e){e.keyCode===d&&n.click()})}function I(e,t,n){var r=n.launcherDiv,i=r.attr("title"),o=n.customText?n.customText:n.name;P(r,o,i)}function P(e,t,n){var r=t;n&&(t?r+=". "+n:r=n),r&&e&&e.attr(a,r)}function _(t,n){if(n&&n._uiComponent&&n._uiComponent.UiComponentId==c){var r=e("#wm-shoutout-"+n._uiComponent.Id),i=C(g,r),a=e(i.elemWithContent);k(r,i.selectors,h);var s=e(g.CLOSE_BUTTON,r);w(r,s),a.keyup(b),o.setFocus(a.first())}}function k(t,n){t=t?t:e(u);for(var r in n)if(n.hasOwnProperty(r)){var i=e(n[r],t);h?A(i,h[r]):A(i)}}function A(e,t){if(void 0===t)for(var n=0;n<e.length;n++)r.addTabIndex(e.eq(n),0);else for(var n=0;n<e.length;n++)r.addTabIndex(e.eq(n),t+n)}}i.register("focusableBalloonSelectors").asInstance({TITLE:".walkme-custom-balloon-title",CONTENT:".walkme-custom-balloon-content",ACTION_BUTTON:".walkme-custom-balloon-button",CLOSE_LINK:".walkme-custom-balloon-close-button"}),i.register("JawsAccessibilityUtil").asCtor(Ju).dependencies("FeaturesManager, CommonUtils,focusableBalloonSelectors"),i.register("Mapper").asCtor($u);function $u(){var e=this;e.setIfDefined=t;function t(e,t,n){if(void 0===t||null===t)return;e[n]=t}}i.register("PromiseUtils").asCtor(Zu);function Zu(){var t=this;t.executePromiseChain=r,t.executeParallely=o,t.executeParallelyOnArray=i;function n(){}function r(t,n){for(var r=e.when(n);t.length;){var i=t[0];r=r.pipe(i),t.splice(0,1)}return r}function i(t,n){if(!t||0==t.length)return e.when();for(var r=[],i=0;i<t.length;i++){var a=t[i],s=n(a);r.push(s)}return o(r)}function o(t){return e.when.apply(e,t)}n()}i.register("ConditionTreeUtils").asCtor(el).dependencies("NewToOldConditionConverter");function el(e){var t=this;t.anyMatchesCondition=r,t.checkIfTreeContainsSelectedElement=i;var n="SelectedElement";function r(t,n){if(t&&t.Root&&(t=e.convert(t.Root)),!t||!t.nodeType)return!1;var i=n(t);if(i)return!0;var o=!1,a=!1;return t.leftSon&&(a=r(t.leftSon,n)),t.rightSon&&(o=r(t.rightSon,n)),a||o}function i(e){return r(e,function(e){return"Func"==e.nodeType&&0==e.funcName.indexOf(n)})}}i.register("DictionaryUtils").asCtor(tl);function tl(){var e=this;e.getDictionarySize=n,e.getDictionaryKeys=r,e.getDictionaryValues=i,e.reverseDictionary=o;function t(){}function n(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}function r(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function i(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function o(e){if(!e)return{};var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];n=a(n)?parseFloat(n):n,t[r]=n}return t}function a(e){return!isNaN(e)}t()}i.register("LocationService").asCtor(nl).dependencies("UrlCommonStringsRemover, HtmlDecoder, win");function nl(e,t,n){var r=this;r.getUrlResourceName=i,r.getUrlLocation=s,r.getCurrentLocation=o,r.getCurrentUrlPath=a;function i(){return e.remove(n.location.href)}function o(){return n.location.href}function a(){return n.location.pathname}function s(e){return u(e)}function u(e){if(e=t.decodeHtml(e,["&"]),0==e.length)return e;return"/"==e.charAt(0)?n.location.protocol+"//"+n.location.hostname+(n.location.port?":"+n.location.port:"")+e:e}}i.register("RedirectService").asCtor(rl).dependencies("CommonUtils, win, LocationService, UrlCommonStringsRemover");function rl(e,t,n,r){var i=this;i.redirect=o,i.canRedirect=a,i.isUrlDifferentFromCurrentOnlyInHash=u;function o(e){var r=s();t.location=n.getUrlLocation(e);var i=s();return r.url==i.url&&r.hash!=i.hash}function a(t,i){if(!e.isValidUrl(t))return!1;var o=n.getUrlResourceName(),a=n.getUrlLocation(t);return a=r.remove(a),i||o!=a}function s(){var e=t.location.hash,n=t.location.href.replace(e,"");return{url:n,hash:e}}function u(e){var t=n.getUrlResourceName(),i=n.getUrlLocation(e);i=r.remove(i);var o=t.split("#"),a=i.split("#");if(a.length>1)return o.length>1?o[0]==a[0]&&o[1]!=a[1]:o[0]==a[0];return!1}}i.register("UrlCommonStringsRemover").asCtor(il);function il(){var e=this;e.remove=t;function t(e){return e=e.replace("http://",""),e=e.replace("https://",""),e=e.replace("www.",""),"/"==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}}i.register("Stack").asCtor(ol).asProto();function ol(){var e=this;e.init=r,e.peek=i,e.pop=o,e.push=a,e.clear=s,e.isEmpty=u,e.length=l,e.getAll=c;var t;function n(){r()}function r(e){t=e||[]}function i(){return u()?null:t[t.length-1]}function o(){return t.pop()}function a(e){t.push(e)}function s(){r()}function u(){return 0==l()}function l(){return t?t.length:0}function c(){return t}n()}i.register("DisabledElementsRemover").asCtor(al);function al(){var e=this;e.remove=t;function t(e,t){if(!e)return;for(var n=e.length;n-- >0;){var r=e[n];t(r)&&e.splice(n,1)}}}i.register("PlayGuidGenerator").asCtor(sl).dependencies("GuidGenerator");function sl(e){var t=this;t.generateNewPlayGuid=n;function n(t){var n=e.generateGuid();return n=(new Date).getTime()+"-"+t+"-"+n}}i.register("DevModeAlertRaiser").asCtor(ul).dependencies("Logger, Consts, TopContainerProvider, HostData, Lib, Mustache");function ul(e,t,n,r,o,a){var s=this,u="-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;";s.devModeAlert=c;function l(){}function c(){var t=i.get("ExternalWalkMeConfig").get("platform"),n="Lib on "+walkme_lib_notify_ServerName+": "+o.SVNRevision;if(window.walkme_lib_version&&(n+=", Version: "+walkme_lib_version),window.walkme_lib_upload_date&&(n+=", Uploaded On: "+walkme_lib_upload_date),window.walkme_lib_uploader&&(n+=", By: "+walkme_lib_uploader),r.isQuirksMode())return void e.customerLog(n,5);d(t,n,walkme_lib_notify_ServerName)}function d(e,n,r){var i="position: fixed !important;top: 3px !important;left: 30px !important;width: auto !important;max-width: 50px;height: 20px !important;padding: 4px !important;border: none !important;border-radius: 10px !important;margin: 0 !important;box-sizing: content-box !important;font-family: Verdana, sans-serif !important;font-size: 14px !important;line-height: 21px !important;opacity: 0.7;overflow: hidden !important;white-space: nowrap !important;cursor: pointer !important;transition: all 400ms !important;"+(e===t.PLATFORM.MobileWeb?u:""),o="<div id='walkme-dev-mode-alert' class='walkme-to-remove' style='"+i+"z-index: {{{popupBalloonZindex}}} !important; background-color: {{{backgroundColor}}} !important;'><span id='walkme-env-wrapper' style='pointer-events: none !important;'>{{{env}}}</span><span id='walkme-message-wrapper' style='display: none !important; pointer-events: none !important;'> - {{{message}}}</span></div>";m(o,n,r);var a=h();a.mouseenter(g),a.mouseleave(p),a.click(f),e===t.PLATFORM.MobileWeb&&(a.touchstart(g),a.touchend(p))}function f(){var e=h()[0],t=e.style.left;t?(e.style.left="",e.style.right=t):(e.style.left=e.style.right,e.style.right="")}function p(){var e=h()[0];e.style["max-width"]="50px",e.style.opacity="0.7",e.children[1].style.display="none"}function g(){var e=h()[0];e.style["max-width"]="1100px",e.style.opacity="1",e.children[1].style.display="inline"}function h(){return mtjQuery("#walkme-dev-mode-alert")}function m(e,r,i){var o=a.to_html(e,{popupBalloonZindex:t.POPUP_BALLOON_Z_INDEX,backgroundColor:v(walkme_lib_notify_ServerName),message:r,env:i}),s=n.getTopContainer(null,!0);mtjQuery("#walkme-dev-mode-alert",s).remove(),s.append(o)}function v(e){var t,e=e.toLowerCase();switch(e){case"dev":t="lightblue";break;case"qa":t="red";break;case"test":t="yellow";break;case"local":t="lightgreen";break;default:t="pink"}return t}l()}i.register("getTopContainer").dependencies("TopContainerProvider").asFunction(function(e){return e.getTopContainer}),i.register("TopContainerProvider").asCtor(ll).dependencies("BiggestFrameProvider, FramesetsUtils, FrameContentsProvider, ElementUtils, FeaturesManager, Consts");function ll(e,t,n,r,i,o){var a=this;a.getTopContainer=u;function s(){}function u(r,a){var s;return s=r?r.parents("body"):i.isFeatureEnabled(o.FEATURES.ShadowRootsInspector)?mtjQuery(document.getElementsByTagName("body")):mtjQuery("body"),0!=s.length&&"FRAMESET"!=l(s[0])||(s=r?r.parents("html"):a||!t.shouldHandlePageAsFramesets()?mtjQuery("html"):mtjQuery("body",n.getFrameContents(mtjQuery(e.getBiggestFrame())))),s}function l(e){return r.getElementTagName(e)}s()}i.register("HtmlDecoder").asCtor(cl).dependencies("ArrayUtils");function cl(e){var t=this;t.decodeHtml=r;function n(){}function r(t,n){for(var r,i={"&amp;":"&","&apos;":"'","&#39;":"'","&quot;":'"',"&lt;":"<","&gt;":">"},o=[],a=0,s=0,u=0;a<t.length;){if(r=!1,"&"==t.charAt(a)){var l=t.substring(a,a+6).toLowerCase(),c=i[l];u=c?6:u;var d=t.substring(a,a+5).toLowerCase(),f=i[d];u=f?5:u;var p=t.substring(a,a+4).toLowerCase(),g=i[p];u=g?4:u;var h=g||f||c,m=e.inArray(h,n)!=-1;if(h&&m){var v=t.substring(s,a);o.push(v),o.push(h),a+=u,s=a,r=!0}}r||a++}var y=t.substring(s,a);o.push(y);var E=o.join("");return E}n()}i.register("FacebookCanvasIndicator").asCtor(dl);function dl(){var e=this;e.isInFacebookCanvas=n;function t(){}function n(){try{if(FB._inCanvas&&FB.Canvas.getPageInfo){if(1==window.walkme_dont_use_fb_scroll)return!1;return!0}}catch(e){return!1}}t()}i.register("LocationMatcher").asCtor(fl).dependencies("UrlCommonStringsRemover, LocationService, StringUtils");function fl(e,t,n){var r=this;r.isLocationMatchString=i;function i(r){var i,o,a="regexp:";if(n.startsWith(r,a)){r=r.substr(a.length),o=t.getCurrentLocation();try{i=o.match(r)}catch(s){return!1}}else{r=r.replace(new RegExp("[*]","g"),".*"),r=r.replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&"),o=t.getUrlResourceName(),r=e.remove(r),o=o.toLowerCase(),r=r.toLowerCase();try{i=o.match(r)}catch(s){return!1}}if(null==i)return!1;return i[0]==o}}i.register("StringUtils").asCtor(pl);function pl(){var e=this;e.startsWith=t,e.endsWith=n;function t(e,t){return 0==e.indexOf(t)}function n(e,t){return e.length>=t.length&&e.lastIndexOf(t)+t.length==e.length}}i.register("ActionsFactory").asCtor(gl).dependencies("ClientOrServerStorageManager, Consts, SmartTipSetsManager, BusinessSolutionsManager, InitiatorTypeToDeployableTypeMapper, DeployablesManagerFactory, Logger");function gl(t,n,r,o,a,s,u){var l=this;l.get=c,l.addActions=d;function c(e,t,n,r){var i=f[e]||f.none;return new i(t||{},n,r)}function d(t){e.extend(f,t)}var f={none:T,playBf:v,openMenu:g,playContent:y,playSurvey:E,shoutOut:S,destroy:C,playShuttle:b,remindMeNextDay:w,remindMeNextTime:I,openTeachMe:h,checkMyForm:p};function p(e,t,i){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var t=r.getSetManagerById(e.businessSolutionId);t?t.turnOnWithImmediateValidations():u.customerLog("Failed to run set's validation. No set for Id : "+e.businessSolutionId)}catch(n){var i="Failed to run set's validations",o=cg(i,e.businessSolutionId,rg(n));u.customerLog(o)}}}function g(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{void 0!=window.WalkMePlayerAPI&&WalkMePlayerAPI.toggleMenu(m(t,r))}catch(e){u.customerLog(cg("Failed opening menu. Exception: {0}",rg(e)))}}}function h(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{void 0!=window.TeachMePlayerAPI&&TeachMePlayerAPI.toggleMenu(m(t,r))}catch(e){u.customerLog(cg("Failed opening TeachMe menu. Exception: {0}",rg(e)))}}}function m(e,t){var n={type:e};if(t){n.objectId=t.Id;var r=t.Settings.action;n.collectionId=r&&r.arguments&&r.arguments.collectionId}return n}function v(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){var n=e&&e.playBfFromBeginning?void 0:e.NodeId;try{o.activateById(e.bfId,{type:t,objectId:r.Id},n)}catch(i){var a="Failed playing BizFlow with id {0} starting from step {1}. Exception is: {2}",s=cg(a,e.bfId,n,rg(i));u.customerLog(s)}}}function y(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var n=e.contentId;WalkMeAPI.startContentById(n,t,r.Id)}catch(i){var o="Failed playing content with id {0}. Exception is: {1}",a=cg(o,e.wtId,rg(i));u.customerLog(a)}}}function E(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var n=e.surveyId,i={type:t,objectId:r?r.Id:void 0};WalkMeAPI.startSurveyById(n,i)}catch(o){var a="Failed playing survey with id {0}. Exception is: {1}",s=cg(a,e.surveyId,rg(o));u.customerLog(s)}}}function S(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){try{i.get("ShoutOutsManager").activateById(e.id,{type:t,objectId:r.Id})}catch(n){u.customerLog(cg("Failed playing deployable with id {0}. Exception is: {1}",e.wtId,rg(n)))}}}function T(e){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){}}function C(e){this.isValid=function(){return!0},this.doAction=function(){e&&e.uiComponent&&e.uiComponent.destroy()},this.Type=n.DEPLOYABLE_ACTION_TYPES.Close}function b(e,t,r){this.isValid=function(){return!0},this.doAction=function(){try{var i={type:t};r&&(i.objectId=r.Id);var o=e.shuttleId;s.get(n.DEPLOYABLE_TYPE.Shuttle).activateById(o,i)}catch(a){var l="Failed playing shuttle with id {0}. Exception is: {1}",c=cg(l,e.wtId,rg(a));u.customerLog(c)}},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function w(e,t,r){this.doAction=function(){var e=new Date;e.setDate(e.getDate()+1),_(e,t,r)},this.Type=n.DEPLOYABLE_ACTION_TYPES.RemindMeLater}function I(e,t,r){this.doAction=function(){_(new Date,t,r)},this.Type=n.DEPLOYABLE_ACTION_TYPES.RemindMeLater}function _(e,n,r){var i=a.map(n),o=t.keysConfig.remindMeLater.remindMeLater.key+"-"+i+"-"+r.Id,s={expiry:e.getTime()};t.saveData(o,rg(s),P)}}i.register("PropertyUtils").asCtor(hl).dependencies("Lib, Consts, SiteConfigManager, DeployablesManagerFactory, FeaturesManager");function hl(e,t,n,r,i){var o=this;o.isGroup=function(e){if(!e)return!1;return void 0!==e.LinkedDeployables},o.isCollection=function(e){return e&&e.deployableType==t.DEPLOYABLE_TYPE.Collection},o.isSearchEnabled=function(){var e=n.get();return e.Settings&&Number(e.Settings.search)},o.hasChildren=function(e){for(var t=e.LinkedDeployables,n=0;n<t.length;n++){var i=r.get(t[n].DeployableType),a=i.getById(t[n].DeployableID),s=o.isGroup(a)?o.hasChildren(a):a;if(s)return!0}return!1},o.hasVisibleChildren=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(a(r))return!0}return!1};function a(e){var n=e.properties().hasProperty(t.UI_PROPERTIES.Visible);return i.isFeatureEnabled("displayOnlyInSearch")&&(n=n&&!e.properties().hasProperty(t.UI_PROPERTIES.DisplayOnlyInSearch)),n}o.supportsDeployableType=function(e,t){var n=e.Settings,r=n&&n.DeployableTypes;if(r&&mtjQuery.inArray(t+"",e.Settings.DeployableTypes)!=-1)return!0;return!1},o.hasUncompletedChildren=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r._typeId===t.DEPLOYABLE_TYPE.Category){if(o.hasUncompletedChildren(r._children))return!0;
}else if(a(r)&&!r.properties().hasProperty(t.UI_PROPERTIES.Completed))return!0}return!1},o.isTab=function(e){var t=e.Settings;return t&&t.DeployableTypes},o.isTasksTab=function(e){return o.isGroup(e)&&o.supportsDeployableType(e,t.DEPLOYABLE_TYPE.Task)},o.isHelpTab=function(e){return o.isGroup(e)&&o.supportsDeployableType(e,t.DEPLOYABLE_TYPE.Tutorial)},o.isCourse=function(e){return e&&e.deployableType==t.DEPLOYABLE_TYPE.Course}}i.register("PropertiesFactory").asCtor(ml).dependencies("FeaturesManager, CommonEvents, Consts, ShowInMenuCheckerFactory, SiteConfigManager, DeployablesManagerFactory, Logger, ArrayUtils");function ml(e,t,n,r,i,o,a,s){var u,l,c=this;function d(){u=a.wrapCustomerLog("showWidget"),bl._tasksManager=o.get(n.DEPLOYABLE_TYPE.Task),l=e.isFeatureEnabled("displayOnlyInSearch")}c.generateAll=function(a){var c=[new yl(a,o),new wl(a,e,t,n,r,i,u),new bl(a,n,i,o),new El(a,n,i),new Tl(a,n,o),new Sl(a,n),new Cl(a,n)];return l&&(c=c.concat(new Il(a,n,o,s))),c},d()}var vl=function(){function t(e){this.logger=null,this.lib=null,this.deployable=null,this.isLoaded=!1,this.properties=[],this.propertyNames=[],this.utils=null,this.children=[],this.lib=e.lib,this.deployable=e.deployable,this.utils=e.utils,this.children=e.children}return t.prop=function(e){return e.toLowerCase()},t.prototype.getAll=function(){return this.isLoaded||this.load(),this.properties},t.prototype.hasProperty=function(t,n){return!n&&this.isLoaded||this.load(),e.inArray(t,this.properties)!=-1},t.prototype.load=function(){this.isLoaded=!0},t.prototype.clear=function(){this.properties=[],this.isLoaded=!1},t.prototype.generateSingle=function(e,t){var n=t?[e]:[];this.properties=n},t.prototype.canGenerate=function(t){return e.inArray(t,this.propertyNames)!=-1},t}(),yl=function(e){__extends(t,e);function t(t,n){e.call(this,t),this.deployablesManagerFactory=n,this.propertyNames=[]}return t.prototype.load=function(){var t=this.deployable.Settings;if(this.properties=[],!t||!t.DeployableTypes)return;for(var n=0;n<t.DeployableTypes.length;n++){var r=this.deployablesManagerFactory.get(t.DeployableTypes[n]).name();this.properties.push(vl.prop("contains-"+r))}e.prototype.load.call(this)},t}(vl),El=function(e){__extends(t,e);function t(t,n,r){e.call(this,t),this.consts=n,this.siteConfigManager=r,this.propertyNames=[n.UI_PROPERTIES.Search,n.UI_PROPERTIES.SearchProviders]}return t.prototype.load=function(){var t=[];this.utils.isTab(this.deployable)&&this.utils.supportsDeployableType(this.deployable,this.consts.DEPLOYABLE_TYPE.Tutorial)&&(t.push(vl.prop(this.consts.UI_PROPERTIES.Search)),this.isSearchEnabled()&&t.push(vl.prop(this.consts.UI_PROPERTIES.SearchProviders))),this.properties=t,e.prototype.load.call(this)},t.prototype.isSearchEnabled=function(){var e=this.siteConfigManager.get();return e.Settings&&Number(e.Settings.search)},t}(vl),Sl=function(e){__extends(t,e);function t(t,n){e.call(this,t),this.consts=n,this.propertyNames=[n.UI_PROPERTIES.Default]}return t.prototype.load=function(){var t=br.isTrue(this.deployable.Settings,this.consts.UI_PROPERTIES.Default,!1);t&&this.utils.hasUncompletedChildren(this.children)&&this.generateSingle(this.consts.UI_PROPERTIES.Default,!0),e.prototype.load.call(this)},t}(vl),Tl=function(e){__extends(t,e);function t(n,r,i){e.call(this,n),this.consts=r,this.deployablesManagerFactory=i,this.propertyNames=[t._videoProperty,t._articleProperty]}return t.prototype.load=function(){if(this.deployable.deployableType==this.consts.DEPLOYABLE_TYPE.Content){var n=this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.Content).types(),r=this.deployable.Type;switch(r){case n.Video:this.generateSingle(t._videoProperty,!0);break;case n.Article:this.generateSingle(t._articleProperty,!0)}}e.prototype.load.call(this)},t._videoProperty=vl.prop(i.get("Consts").UI_PROPERTIES.Video),t._articleProperty=vl.prop(i.get("Consts").UI_PROPERTIES.Article),t}(vl),Cl=function(e){__extends(t,e);function t(t,n){e.call(this,t),this.consts=n,this.propertyNames=[n.UI_PROPERTIES.Accessible]}return t.prototype.load=function(){var t=!this.utils.isTab(this.deployable);this.generateSingle(this.consts.UI_PROPERTIES.Accessible,t),e.prototype.load.call(this)},t}(vl),bl=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,t),this.consts=n,this.siteConfigManager=r,this.deployablesManagerFactory=i,this._parentType=t.parentType,this._isLmsDeployable=this._parentType==n.DEPLOYABLE_TYPE.Course||this._parentType==n.DEPLOYABLE_TYPE.Lesson,this._parentId=t.parentId,this.propertyNames=[n.UI_PROPERTIES.Completed,n.UI_PROPERTIES.StrikedOut,n.UI_PROPERTIES.Uncompleted,n.UI_PROPERTIES.Active,n.UI_PROPERTIES.Inactive,n.UI_PROPERTIES.Phantom,n.UI_PROPERTIES.ProgressBar]}return t.prototype.load=function(){this._isLmsDeployable?this.handleLmsCompletion():this.handleTaskCompletion(),e.prototype.load.call(this)},t.prototype.handleLmsCompletion=function(){var e=i.get("LmsCompletionManager"),t=e.isCompleted(this.deployable.deployableType,this.deployable.Id,this._parentType,this._parentId);t?this.generateSingle(this.consts.UI_PROPERTIES.Completed,!0):this.generateSingle(this.consts.UI_PROPERTIES.Uncompleted,!0)},t.prototype.handleTaskCompletion=function(){var e=[];if(this.deployable.deployableType==this.consts.DEPLOYABLE_TYPE.Task){var n=t._tasksManager.isTaskCompleted(this.deployable);this.handleCompletionProperties(e,n),this.handleActiveProperties(e,n),this.handlePhantomTask(e,this.deployable.Settings)}else this.utils.isTasksTab(this.deployable)&&e.push(vl.prop(this.consts.UI_PROPERTIES.ProgressBar));this.properties=e},t.prototype.handleCompletionProperties=function(e,t){if(t){e.push(vl.prop(this.consts.UI_PROPERTIES.Completed));var n=this.siteConfigManager.get();Number(n.TodoListSettings.strikeOutCompletedTasks)&&e.push(vl.prop(this.consts.UI_PROPERTIES.StrikedOut))}else e.push(vl.prop(this.consts.UI_PROPERTIES.Uncompleted))},t.prototype.handleActiveProperties=function(e,t){this.isActive(t)?e.push(vl.prop(this.consts.UI_PROPERTIES.Active)):e.push(vl.prop(this.consts.UI_PROPERTIES.Inactive))},t.prototype.isActive=function(e){var n=t._tasksManager.isTaskActive(this.deployable);return e&&!this.shouldPlayAfterCompletion()&&(n=!1),n},t.prototype.shouldPlayAfterCompletion=function(){var e=this.siteConfigManager.get(),t=Number(e.TodoListSettings.allowPlayAfterCompletion);return t},t.prototype.handlePhantomTask=function(e,t){t.Phantom&&e.push(vl.prop(this.consts.UI_PROPERTIES.Phantom))},t}(vl),wl=function(e){__extends(t,e);function t(n,r,i,o,a,s,u){e.call(this,n),this.featuresManager=r,this.commonEvents=i,this.consts=o,this.showInMenuCheckerFactory=a,this.siteConfigManager=s,this.customerLog=u,this.propertyNames=[t._visiblePropertyName,t._invisiblePropertyName]}return t.prototype.load=function(){var t=!0;this.checkTasksCondition(this.deployable)&&this.checkDisplayCondition(this.deployable)||(t=!1),t&&this.utils.isGroup(this.deployable)&&(t=this.getGroupVisibility(this.deployable,this.children)),this.generateVisibleProprty(t),e.prototype.load.call(this)},t.prototype.getGroupVisibility=function(e,t){if(this.utils.isTab(e))return this.getTabVisibility(e,t);if(this.utils.isCourse(e))return this.getCourseVisibility(e,t);return this.utils.hasVisibleChildren(e,t)},t.prototype.getCourseVisibility=function(e,t){var n=this.utils.hasVisibleChildren(e,t),r=!!e.Quiz;return n||r},t.prototype.getTabVisibility=function(e,t){var n,r=this.featuresManager.isFeatureEnabled("dontShowTabsWithNoVisibleChildren");if(r)n=this.utils.hasVisibleChildren(e,t);else{var i=this.doesSupportSearchProviders(e);n=i||this.utils.hasChildren(e)}return n||(this.utils.isTasksTab(e)&&this.customerLog("Show widget - not showing tasks tab because there are no tasks and the tab doesn't support search.",2),this.utils.isHelpTab(e)&&this.customerLog(br.formatString("Show widget - not showing tab named {0} because there are no children and the tab doesn't support search.",this.deployable.Name),2)),n},t.prototype.generateVisibleProprty=function(e){e?this.generateSingle(t._visiblePropertyName,!0):this.generateSingle(t._invisiblePropertyName,!0)},t.prototype.doesSupportSearchProviders=function(e){var t=!1,n=this.utils.supportsDeployableType(e,this.consts.DEPLOYABLE_TYPE.Tutorial);return n&&this.utils.isSearchEnabled()&&(t=!0),t},t.prototype.checkTasksCondition=function(e){var t=!0,n=this.siteConfigManager.get().TodoListSettings,r=this.utils.supportsDeployableType(e,this.consts.DEPLOYABLE_TYPE.Task);return n&&(r?(t=this.hasUncompletedChildren(n)&&1==n.isActive,t&&(t=this.checkCondition(n))):this.utils.isCollection(e)&&1==n.showOnlyTasksTab&&(t=!1)),t},t.prototype.checkCondition=function(e){var t=e.activateCondition,n=!0;return t&&(n=i.get("ConditionTreeEvaluator").evaluate(t),n||this.customerLog("Show widget - not showing tasks tab because it was segmented out by a condition in todo list settings.",2),this.commonEvents.deprecatedRaiseEvent(this.consts.EVENTS.TasksConditionEvaluated,this.siteConfigManager.get())),n},t.prototype.hasUncompletedChildren=function(e){var t=e.hideComplete&&parseInt(e.hideComplete);if(t){var n=this.utils.hasUncompletedChildren(this.children);return n||this.customerLog("Show widget - not showing tasks tab because all tasks are completed",2),n}return!0},t.prototype.checkDisplayCondition=function(e){var t=this.showInMenuCheckerFactory.getDisplayConditionCheckerFunc(e.deployableType);return t(e)},t._visiblePropertyName=vl.prop(i.get("Consts").UI_PROPERTIES.Visible),t._invisiblePropertyName=vl.prop(i.get("Consts").UI_PROPERTIES.Invisible),t}(vl),Il=function(e){__extends(t,e);function t(t,n,r,i){var o=e.call(this,t)||this;return o.consts=n,o.deployablesManagerFactory=r,o.arrayUtils=i,o.propertyNames=[n.UI_PROPERTIES.DisplayOnlyInSearch],o._parentType=t.parentType,o._parentId=t.parentId,o}return t.prototype.getParentDeployable=function(){var e=this.deployablesManagerFactory.get(this._parentType);return e?e.getById(this._parentId):void 0},t.prototype.load=function(){var t=!1;if(this._parentType&&this._parentId&&!this.utils.isGroup(this.deployable)){var n=this.deployable.Id,r=this.getParentDeployable();if(r&&r.LinkedDeployables){var i=this.arrayUtils.filter(r.LinkedDeployables,function(e){return e.DeployableID===n&&e.Settings})[0];t=i&&i.Settings.displayOnlyInSearch,this.generateSingle(this.consts.UI_PROPERTIES.DisplayOnlyInSearch,t)}}e.prototype.load.call(this)},t}(vl),Pl=function(){function e(e,t,n,r){this._lib=e,this._propertyUtils=t,this._propertiesFactory=n,this._deployable=r.deployable,this._deployableChildren=r.deployableChildren,this._parentType=r.parentType,this._parentId=r.parentId,this.createNewProperties()}return e.prototype.getAll=function(){var e=this,t=[];return this._lib.wrapFESession(function(){for(var n=0;n<e._properties.length;n++)t=t.concat(e._properties[n].getAll())}),t},e.prototype.clearCache=function(){for(var e=0;e<this._properties.length;e++)this._properties[e].clear()},e.prototype.hasProperty=function(e,t){for(var n=0;n<this._properties.length;n++)if(this._properties[n].canGenerate(e)&&this._properties[n].hasProperty(e,t))return!0;return!1},e.prototype.createNewProperties=function(){var e={lib:this._lib,deployable:this._deployable,logger:{},children:this._deployableChildren,utils:this._propertyUtils,parentType:this._parentType,parentId:this._parentId};this._properties=this._propertiesFactory.generateAll(e)},e}();function _l(e,t,n){this.create=function(r){return new Pl(e,t,n,r)}}i.register("PropertiesGeneratorFactory").asCtor(_l).dependencies("Lib,PropertyUtils,PropertiesFactory");var kl=function(){function e(e){var t=e.id;this._type=e.type,this._typeId=e.typeId,this._id=t,this._description=e.description,this._children=e.childNodes,this._name=e.name,this._propertiesGenerator=e.propertiesGenerator,this._keywords=e.keywords?e.keywords:[];var n=e.activateFunction;this.activate=function(e){n(t,e)}}return e.prototype.children=function(){return this._children},e.prototype.properties=function(e){return e&&this._propertiesGenerator.clearCache(),this._propertiesGenerator},e.prototype.type=function(){return this._type.toLowerCase()},e.prototype.typeId=function(){return this._typeId},e.prototype.name=function(){return this._name},e.prototype.id=function(){return this._id},e.prototype.description=function(){return this._description||""},e.prototype.keywords=function(){return this._keywords},e}();i.register("DeployableTreeNodeCreator").asInstance(function(e){return new kl(e)}),i.register("DeployableTreeNodeFactory").asCtor(Al).dependencies("Consts, CommonUtils, DeployableTreeNodeCreator, PropertiesGeneratorFactory, DeployablesManagerFactory");function Al(e,t,n,r,i){var o=this;o.generate=a;function a(e,t,n){var o=i.get(e.deployableType),a={deployable:e,deployableChildren:t};n&&(a.parentType=n.deployableType,a.parentId=n.Id);var u=r.create(a);return s({deployable:e,deployableManager:o,children:t,propertiesGenerator:u})}function s(e){return n({typeId:e.deployable.deployableType,type:e.deployableManager.name(),id:e.deployable.Id,activateFunction:t,description:e.deployable.Description,childNodes:e.children,name:e.deployable.Name,propertiesGenerator:e.propertiesGenerator,keywords:u(e.deployable)});function t(t,n){e.deployableManager.activateById(t,n)}}function u(n){switch(n.deployableType){case e.DEPLOYABLE_TYPE.BusinessSolution:var r=t.getSettingsValue(n.Settings,"Keywords",void 0);return r;default:return n.Keywords}}}i.register("UiDataProvider").asCtor(Dl).dependencies("Consts, ObjectsTreeGenerator, DeployablesManagerFactory, ArrayUtils, PropertyUtils, CommonEvents");function Dl(e,t,n,r,i,o){this.uiObjectsTree=s,this.uiTasksTree=u;var a=e.DEPLOYABLE_TYPE.Collection;function s(){var t=l(d(a));return o.raiseEvent(e.EVENTS.UIObjectsTreeCreated,{uiObjectsTree:t}),t}function u(){return l(r.filter(d(a),c))}function l(e){return t.generate(e)}function c(t){return i.supportsDeployableType(t,e.DEPLOYABLE_TYPE.Task)}function d(e){for(var t=n.get(e).getAll(),r=0;r<t.length;r++)t[r].deployableType=e;return t}}i.register("ObjectsTreeGenerator").asCtor(Ol).dependencies("DeployableTreeNodeFactory, DeployablesManagerFactory");function Ol(e,t){var n=this;n.generate=r;function r(e){return i(e),o(e,null)}function i(e){if(!e)return;e.sort(function(e,t){return e.OrderIndex-t.OrderIndex})}function o(t,n){if(!t)return;for(var r=[],i=0;i<t.length;i++){var s=a(t[i]),u=o(s,t[i]);r.push(e.generate(t[i],u,n))}return r}function a(e){if(!e.LinkedDeployables)return null;for(var t=[],n=e.LinkedDeployables,r=0;r<n.length;r++){var i=s(n[r].DeployableType,n[r].DeployableID);i&&t.push(i)}return t}function s(e,n){var r=t.get(e),i=r.getById(n);return i&&(i.deployableType=e),i}}i.register("ObjectTreePercentageCalculator").asCtor(Nl).asProto().dependencies("VisibleObjectTree, Logger");function Nl(t,n){var r=this;r.calculate=i,r.getCompletionData=o;function i(e,t){return o(e,t).completedPercent}function o(e,n){var r=t.getTree(e,n);return{completedPercent:a(s(r),r.length),total:r.length}}function a(e,t){return t>0?Math.round(100*e/t):0}function s(t){var r=e.grep(t,function(e){return n.customerLog("ObjectTreePercentageCalculator - Task "+e.id()+" completed: "+u(e),4),u(e)});return r&&r.length||0}function u(e){return e.properties().hasProperty("completed")}}var xl=function(e){__extends(t,e);function t(t,n){var r={deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Category};e.call(this,r),this._name="Category"}return t}(Ei);i.register("CategoriesManager").asCtor(xl).dependencies("Lib, Consts");var Ll=function(e){__extends(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Tutorial}),this.permalinkManager=r,this._name="Walkthru"}return t.prototype.activateById=function(e,t){WalkMeAPI.startWalkthruById({id:e,fromStep:0,playInitiator:t})},t.prototype.autoStartEnabled=function(e){if(this.permalinkManager.isTrainingInStartingMode())return!1;return!0},t}(Ei);i.register("TutorialsManager").asCtor(Ll).dependencies("Lib, Consts, PermalinkManager");var Fl=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u,l,c,d,f,g,h,m,v,y,E,S,T){var C=this;t.call(this,{lib:e,type:n.DEPLOYABLE_TYPE.Task}),this.consts=n,this.siteConfigManager=r,this.recorderServerManager=i,this.clientStorageManager=o,this.logger=a,this.walkMeInfo=s,this.contentsManager=u,this.tutorialsManager=l,this.commonEvents=c,this.auditTasksManager=d,this.deployablesManagerFactory=f,this.dictionaryUtils=g,this.conditionCheckerFactory=h,this.settingsValuesRetriever=m,this.arrayUtils=v,this.conditionTreeEvaluator=y,this.businessSolutionsManager=E,this._todoListDataSynchronizer=S,this.featuresManager=T,this._name="Task",this.customerLog=_makeTutorial.Logger.wrapCustomerLog(p),this._isPreviewMode=s.getEnvironmentId()==n.SOURCES.preview,this._isPlayMode=s.getEnvironmentId()==n.SOURCES.play,this._siteConfig=r.get();var b=parseInt(this._siteConfig.TodoListSettings.isActive)&&this.conditionTreeEvaluator.evaluate(this._siteConfig.TodoListSettings.activateCondition),w=i.get();this._endUserId=e.getEndUserId(),this._logError=a.error,this.setDeployables([]),this.customerLog('Initializing TodoListManager (isActive: "'+b+'", serverAddress: "'+w+'", userGuid: "'+s.getUserGuid()+'", endUserId: "'+this._endUserId+'")',3),window.walkMeRemoveTasksData&&(o.removeData(this._todoListDataSynchronizer.getEndUserUniqueDataKey(this._endUserId)),window.walkMeRemoveTasksData=!1),u.onActivated(function(e,t){C.updateDeployableCompleted(e,t)})}return n.prototype.init=function(){this._todoListDataSynchronizer.init(this._endUserId,this.getTaskGoalsIds(this.deployablesDict))},n.prototype.setDeployables=function(e){if(!e)return;t.prototype.setDeployables.call(this,e);var n=parseInt(this._siteConfig.TodoListSettings.isActive)&&this.conditionTreeEvaluator.evaluate(this._siteConfig.TodoListSettings.activateCondition);n=n&&e&&e.length>0,this.setActiveState(n),this.removeInvalidTasks()},n.prototype.activateById=function(e,t){var n=this.getById(e),r=this.deployablesManagerFactory.get(n.RelatedDeployableType);try{t=t||{type:this.consts.STEP_PLAY_INITIATOR_ENUM.NONE},t.objectId=void 0==t.id?t.objectId:t.id,this.auditTasksManager.auditTaskPlayed(n,t)}catch(i){this._logError(i)}var o={type:this.consts.STEP_PLAY_INITIATOR_ENUM.TASK,objectId:e};r.activateById(n.RelatedDeployableId,o)},n.prototype.getById=function(e){var n=t.prototype.getById.call(this,e);if(!n||!this.validateTask(n))return;return n},n.prototype.isTaskCompleted=function(e){var t=this.getCompletedTasks(),n=!!t&&this.arrayUtils.inArray(e.Id,t)>-1;return n},n.prototype.isTaskConditionsPassed=function(e){var t=!0;switch(e.RelatedDeployableType){case this.consts.DEPLOYABLE_TYPE.Tutorial:if(e.RelatedDeployableId){var n=i.get("WalkthrusContainer").getWalkthruById(e.RelatedDeployableId);t=_makeTutorial.canShowTutorial(n)}}return t},n.prototype.isTaskActive=function(e){var t=e.Settings;if(!parseInt(t.ActivateConditionEnabled))return!0;return this.conditionTreeEvaluator.evaluate(t.ActivateCondition)},n.prototype.isTaskDisplayed=function(e){var t=e.Settings;if(!parseInt(t.DisplayConditionEnabled))return!0;var n=this.conditionCheckerFactory.createOld({bypassUIChange:!0,featureName:p,elementName:e.Name}),r=n.getCurrentEvaluationValueAndStopEvaluating(t.DisplayCondition);return r},n.prototype.compareTasks=function(e,t){if(e.Index<t.Index)return-1;if(e.Index>t.Index)return 1;return 0},n.prototype.areAllTaskGoalsCompleted=function(e,t){for(var n=0;n<e.Goals.length;n++){var r=e.Goals[n];if(!r.Id)continue;if(this.arrayUtils.inArray(r.Id,t.CompletedGoals)===-1)return 0}return 1},n.prototype.deactivateIfAllTasksCompleted=function(e,t){this.areAllTasksCompleted(e,t)&&this.deactivate()},n.prototype.areAllTasksCompleted=function(e,t){for(var n in e){var r=e[n];if(this.validateTask(r)){var i=t[r.Id];if(!i)return!1;if(!i.IsCompleted)return!1}}return!0},n.prototype.validateTask=function(e){if(!e.Id)return!1;if(e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.Tutorial&&e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.Content&&e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.BusinessSolution)return this.customerLog("Task (id: "+e.Id+") is of unknown type: "+e.RelatedDeployableType),!1;if(!e.RelatedDeployableId)return this.customerLog("Task (id: "+e.Id+") does not have any related Walk-Thru id"),!1;var t;if(t=e.RelatedDeployableType===this.consts.DEPLOYABLE_TYPE.Tutorial?this.tutorialsManager:e.RelatedDeployableType===this.consts.DEPLOYABLE_TYPE.Content?this.contentsManager:this.businessSolutionsManager,!t.getById(e.RelatedDeployableId))return this.customerLog("Task (id: "+e.Id+") related deployable ("+e.RelatedDeployableType+") (id: "+e.RelatedDeployableId+") does not exist"),!1;return!0},n.prototype.syncTaskCompletionWithLocalData=function(e){this.customerLog("syncing local tasks completion data",3),this.customerLog(e,5);for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(n.IsCompleted)continue;var r=n.CompletedGoals,i=this.getById(t);if(i&&i.Goals){var o=i.Goals;if(o&&r&&r.length>0&&o.length>0){var a=this.areAllTaskGoalsCompleted(i,n);a&&(n.IsCompleted=1,this.completeTask(i,e))}}}},n.prototype.getGoalFromTask=function(e,t){for(var n=0;n<e.Goals.length;n++)if(e.Goals[n].Id==t)return e.Goals[n]},n.prototype.hasTaskGoalCompletionCondition=function(){return void 0===this._hasTaskGoalCompletionConditionCache&&(this._hasTaskGoalCompletionConditionCache=this.hasTaskGoalCompletionConditionInner()),this._hasTaskGoalCompletionConditionCache},n.prototype.hasTaskGoalCompletionConditionInner=function(){return this.checkForDeployablesAutostartConditions()||this.checkForWidgetConditions()||this.checkForAbExpermintesGoalsConditions()},n.prototype.checkForDeployablesAutostartConditions=function(){var e,t,n,r,i,o,a;for(var s in this.consts.DEPLOYABLE_TYPE)if(this.consts.DEPLOYABLE_TYPE.hasOwnProperty(s)&&(o=this.consts.DEPLOYABLE_TYPE[s],n=this.deployablesManagerFactory.get(o),t=n&&n.getAll()))for(var u=0;u<t.length;u++)if(e=t[u],r=this.settingsValuesRetriever.getSettingsValue(e.Settings,"ASCTEnabled",0),r&&(i=this.settingsValuesRetriever.getSettingsValue(e.Settings,"ASCT",""),a=this.isTaskGoalFunctions(i)))return!0;return!1},n.prototype.checkForWidgetConditions=function(){var e=this.settingsValuesRetriever.getSettingsValue(this._siteConfig.Settings,this.consts.DISPLAY_WIDGET_CONDITION,"");return this.isTaskGoalFunctions(e)},n.prototype.checkForAbExpermintesGoalsConditions=function(){var e=this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.AbExperiment);if(!e)return!1;for(var t,n,r,i,o=e.getAll(),a=0;a<o.length;a++){t=o[a],r=t.Goals;for(var s=0;s<r.length;s++)if(n=r[s],i=this.settingsValuesRetriever.getSettingsValue(n.Settings,"Conditions",""),this.isTaskGoalFunctions(i))return!0}},n.prototype.isTaskGoalFunctions=function(e){function t(e){return"Func"==e.nodeType?"TaskGoalReached"==e.funcName||"TaskGoalNotReached"==e.funcName:("And"==e.nodeType||"Or"==e.nodeType)&&(t(e.leftSon)||t(e.rightSon))}return null!=e&&t(e)},n.prototype.completeGoal=function(e,t,n){var r=t[e];r.CompletedGoals.push(n);var i=this.deployablesDict[e];r.IsCompleted=this.areAllTaskGoalsCompleted(i,r);var o=this.getGoalFromTask(i,n);r.IsCompleted?this.completeTask(i,t,o):(t[r.TaskId]=r,this.customerLog("Server update completed GOAL (taskId: "+e+", goalId: "+n+")",3),this._todoListDataSynchronizer.updateTaskCompleted(this._endUserId,null,o,t,this.deployablesDict))},n.prototype.completeTask=function(e,t,n){try{var r=n?n.Id:-1;t[e.Id]={TaskId:e.Id,IsCompleted:1,CompletedGoals:[]},this.commonEvents.raiseEvent(this.consts.EVENTS.TaskCompleted,{TaskId:e.Id}),this._todoListDataSynchronizer.updateTaskCompleted(this._endUserId,e,n,t,this.deployablesDict),this.deactivateIfAllTasksCompleted(this.deployablesDict,t),this.customerLog("Server update completed TASK (taskId: "+e.Id+", goalId: "+r+")",3)}catch(i){this.deactivate(),this._logError(i,"An error occurred while trying to complete a Task")}},n.prototype.didTasksFinishLoading=function(){return this._tasksFinishedLoading},n.prototype.setTasksFinishedLoadingCallback=function(e){this._tasksFinishedLoadingCallback=e},n.prototype.raiseTasksFinishedCallback=function(e){this._tasksFinishedLoading=!0,this._tasksFinishedLoadingCallback&&this._tasksFinishedLoadingCallback(e),this._tasksFinishedLoadingCallback=null},n.prototype.loadTasks=function(e,t){var n=this;if(this.customerLog("loadTasks - start loading completion data",3),this._isPlayMode)return this.customerLog("loadTasks - Play mode - returning empty tasks completion data",3),this.deactivateIfAllTasksCompleted(this.deployablesDict,{}),void e({});if(!this._endUserId)return this.customerLog("loadTasks - No end user - Deactivating",3),void this.deactivate();try{var r=function(t){n.syncTaskCompletionWithLocalData(t),n.customerLog("Tasks completion data loaded successfully",3),n.commonEvents.raiseEvent(n.consts.EVENTS.TasksLoaded,{completedTasks:t}),n.deactivateIfAllTasksCompleted(n.deployablesDict,t),e&&e(t),n.raiseTasksFinishedCallback()},i=function(e){n.customerLog("Tasks completion data failed loading",3),n.deactivate(),t&&t(e)};this.shouldRetrieveCompletedTasks()?this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),r,i):r({})}catch(o){this.deactivate(),this._logError(o,"An error occurred while trying to load completed tasks to the local storage")}},n.prototype.getTaskGoalsIds=function(e){var t={};return mtjQuery.each(e,function(e,n){t[e]=n.Goals?mtjQuery.map(n.Goals,function(e){return e.Id}):[]}),t},n.prototype.getTaskIdByGoalId=function(e){for(var t=this.dictionaryUtils.getDictionaryKeys(this.deployablesDict),n=t.length-1;n>=0;n--){var r=this.deployablesDict[t[n]];if(this.hasWantedGoal(r,e))return r.Id}},n.prototype.hasWantedGoal=function(e,t){for(var n=e.Goals.length-1;n>=0;n--)if(e.Goals[n].Id==t)return t},n.prototype.getCompletedTasks=function(){if(this.customerLog("Getting completed tasks",3),this._isPlayMode)return this.customerLog("Play mode - returning empty array of completed tasks",3),[];if(!this._endUserId)return this.deactivate(),null;if(!this.shouldRetrieveCompletedTasks())return null;try{var e=this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));if(!e)return null;var t=[];return mtjQuery.each(e,function(e,n){if(!n.TaskId)return;n.IsCompleted&&t.push(n.TaskId)}),this.customerLog("Returning completed tasks ("+t+")",3),t}catch(n){this.deactivate(),this._logError(n,"An error occurred while trying to retrieve completed tasks")}return null},n.prototype.updateGoalCompleted=function(e){var t=this,n=e.RelatedObjectId,r=e.Id,i=e.Name;if(this.customerLog("Updating completed goal (taskId: "+n+", goalId: "+r+", goalName: "+i+")",3),this.commonEvents.sendAutomationEvent(this.consts.EVENTS.Goals.GoalReached,{GoalId:r,GoalName:i}),this._isPlayMode)return void this.customerLog("Play mode - exiting without updating",3);if(!this._endUserId)return void this.deactivate();try{this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),function(e){var i=e[n];if(i||(i={TaskId:n,IsCompleted:0,CompletedGoals:[]},e[n]=i),i.IsCompleted)return;if(t.arrayUtils.inArray(r,i.CompletedGoals)>-1)return;t.completeGoal(i.TaskId,e,r)})}catch(o){this.deactivate(),this._logError(o,"An error occurred while trying to update task completed")}},n.prototype.updateDeployableCompleted=function(e,t){var n=this;if(this.customerLog("Updating completed deployable ("+t+") deployableId: "+e+")",3),this._isPlayMode)return void this.customerLog("Play mode - exiting without updating",3);if(!this._endUserId)return void this.deactivate();mtjQuery.each(this.deployablesDict,function(r,i){if(!i.Id)return;if(i.RelatedDeployableType!==t)return;if(parseInt(i.RelatedDeployableId)!==e)return;if(i.Goals&&i.Goals.length>0)return;n._todoListDataSynchronizer.asyncRetrieveCompletedTasks(n._endUserId,n.getTaskGoalsIds(n.deployablesDict),function(e){if(e[i.Id]&&e[i.Id].IsCompleted)return;n.completeTask(i,e)})})},n.prototype.getTasksGoalsNotCompleted=function(){var e=this;if(this._isPlayMode)return this.customerLog("Play mode - not getting tasks not completed goals",3),[];this.customerLog("Getting tasks uncompleted goals",3);var t=this.shouldRetrieveCompletedTasks()?this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict)):[];t||(t=[]);var n=[];return mtjQuery.each(this.deployablesDict,function(r,i){if(!i.Id)return;var o=t[i.Id];if(o&&o.IsCompleted)return;var a={TaskId:i.Id,Name:i.Name,GoalsNotCompleted:[]};mtjQuery.each(i.Goals,function(t,n){if(!n.Id)return;var r=o&&o.CompletedGoals?o.CompletedGoals:[];if(e.arrayUtils.inArray(n.Id,r)===-1){var i=mtjQuery.extend(!0,{},n);a.GoalsNotCompleted.push(i)}}),n.push(a)}),n},n.prototype.getApiTasks=function(e){var t=this;this.customerLog("Getting tasks fot the API",3);var n=this.getCompletedTasks();n||(n=[]);var r=[];return mtjQuery.each(this.deployablesDict,function(i,o){if(!t.validateTask(o))return;var a=n&&t.arrayUtils.inArray(o.Id,n)>-1?1:0,s={Index:o.OrderIndex,Name:o.Name,Id:o.Id,IsCompleted:a,Settings:lg(o.Settings),Description:o.Description,RelatedDeployableType:o.RelatedDeployableType,RelatedDeployableId:o.RelatedDeployableId};e&&(s.ConditionsPassed=t.isTaskConditionsPassed(o),s.IsActive=t.isTaskActive(o),s.IsDisplayed=t.isTaskDisplayed(o)),delete s.Settings.ActivateConditionEnabled,delete s.Settings.ActivateCondition,r.push(s)}),r.sort(this.compareTasks),r},n.prototype.isTaskGoalReached=function(e,t){var n=this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));if(!n)return!1;var r=n[e];if(!r)return!1;if(r.IsCompleted)return!0;return this.arrayUtils.inArray(t,r.CompletedGoals)!==-1},n.prototype.isActive=function(){return this._isActive},n.prototype.setActiveState=function(e){this.customerLog("Setting todo list active state to: "+e,3),this._isActive=e},n.prototype.activate=function(){var e=this;this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),function(t){if(e.areAllTasksCompleted(e.deployablesDict,t))return;e.setActiveState(!0)})},n.prototype.deactivate=function(){this.raiseTasksFinishedCallback(!1),this.setActiveState(!1)},n.prototype.toggleActiveState=function(){this.setActiveState(!this.isActive())},n.prototype.removeInvalidTasks=function(){for(var e=this.getAll(),t=0;t<e.length;t++)this.validateTask(e[t])||delete this.deployablesDict[e[t].Id]},n.prototype.shouldRetrieveCompletedTasks=function(){return!e.isEmptyObject(this.deployablesDict)||this.featuresManager.isFeatureEnabled("forceRetrieveCompletedTasks")},n}(Ei);i.register("TodoListManager").asCtor(Fl).dependencies("Lib, Consts, SiteConfigManager, RecorderServerManager, ClientStorageManager, Logger, WalkMeInfo, ContentsManager, TutorialsManager, CommonEvents, AuditTasksManager, DeployablesManagerFactory, DictionaryUtils,ConditionCheckerFactory, SettingsValuesRetriever, ArrayUtils, ConditionTreeEvaluator, BusinessSolutionsManager, TodoListDataSynchronizer, FeaturesManager");var Ml=function(e){__extends(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Launcher}),this._name="Launcher",this._launcherActionDataProvider=r}return t.prototype.getActionData=function(t){var n=e.prototype.getActionData.call(this,t);return this._launcherActionDataProvider.fillActionData(t,n)},t.prototype.isWithAction=function(e){return this._launcherActionDataProvider.isWithAction(e)},t}(Ei);i.register("LaunchersManager").asCtor(Ml).dependencies("Lib, Consts, LauncherActionDataProvider");var Bl=function(e){__extends(t,e);function t(t,n,r,i,o,a,s,u,l,c,d,f){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Shuttle}),this.Consts=n,this.win=r,this.TimerManager=i,this.WalkMeGoalsManager=o,this.ClickAuditManager=a,this.CommonUtils=s,this.playGuidGenerator=u,this.walkmeVisibleReporter=l,this.htmlDecoder=c,this.logger=d,this.commonEvents=f,this._name="Shuttle"}return t.prototype.activateById=function(e,n){
var r=this;try{n=n||{};var i=this.deployablesDict[e];if(!i)return void this.logger.customerLog(cg("Shuttle with id {0} doesn't exist",e),3);this.ClickAuditManager.SendClickAudit(this.Consts.DEPLOYABLE_TYPE.Shuttle,i.Id,{type:n.type,id:n.objectId});var o=parseInt(this.CommonUtils.getSettingsValue(i.Settings,t.PLAY_MODE_SETTING_KEY,this.Consts.PLAY_MODE.SameTab));this.commonEvents.raiseEvent(this.Consts.EVENTS.Shuttles.ActivatingShuttle,{shuttle:i});var a=this.getShuttleUrl(i.DestinationUrl);this.CommonUtils.isValidUrl(a)&&(this.WalkMeGoalsManager.startWatchingDeployable(i,this.playGuidGenerator.generateNewPlayGuid(i.Id)),this.walkmeVisibleReporter.report(),o==this.Consts.PLAY_MODE.NewTab&&this.win.open(a,"_blank"),o==this.Consts.PLAY_MODE.SameTab&&this.TimerManager.libSetTimeout(function(){r.win.location.href=a},t.TIME_BEFORE_REDIRECTING))}catch(s){this.logger.customerLog(cg("Failed playing shuttle with id {0}. Exception is {1}",e,s),3)}},t.prototype.getShuttleUrl=function(e){if(e=this.htmlDecoder.decodeHtml(e,["&"]),this.win._walkmeInternals.customShuttleUrl){var t=this.win._walkmeInternals.customShuttleUrl(e);return t}return e},t.PLAY_MODE_SETTING_KEY="ShuttlePlayMode",t.TIME_BEFORE_REDIRECTING=100,t}(Ei);i.register("ShuttlesManager").asCtor(Bl).dependencies("Lib, Consts, win, TimerManager, WalkMeGoalsManager, ClickAuditManager, CommonUtils, PlayGuidGenerator,WalkmeVisibleReporter, HtmlDecoder, Logger, CommonEvents");var Rl=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u,l,c){t.call(this,{deployables:[],lib:e,type:n.DEPLOYABLE_TYPE.Content}),this.consts=n,this.logger=l,this.commonEvents=c,this._cdnServer=null,this._currentContentActivator=null,this._activateCallbacks=[],this._name="Content",this._cdnServer=r.get(),this._clickAuditManager=o,this._walkMeGoalsManager=i,this._featuresManager=a,this._playGuidGenerator=s,this._walkmeVisibleReporter=u}return n.prototype.onActivated=function(e){this._activateCallbacks.push(e)},n.prototype.activateById=function(e,t){try{t=t||{};var n=this.deployablesDict[e];if(!n)return void this.logger.customerLog(cg("Content with id {0} doesn't exist",e),3);var r={lib:this.lib,cdnServer:this._cdnServer,clickAuditManager:this._clickAuditManager,content:n};this.removeContent(),this.commonEvents.raiseEvent(this.consts.EVENTS.Contents.ActivatingContent,{content:n}),this._currentContentActivator=this.getContentActivator(n.Type,r),this._currentContentActivator.activateContent(n,t.type,t.objectId),this._walkmeVisibleReporter.report(),this._walkMeGoalsManager.startWatchingDeployable(n,this._playGuidGenerator.generateNewPlayGuid(n.Id));for(var i=0;i<this._activateCallbacks.length;i++)this._activateCallbacks[i](n.Id,this.consts.DEPLOYABLE_TYPE.Content)}catch(o){this.logger.customerLog(cg("Failed playing content with id {0}. Exception is {1}",e,o),3)}},n.prototype.getContentActivator=function(e,t){var r=null;switch(e){case n.CONTENT_TYPES.Video:var i=this.getVideoIdAndVendor(t.content.Url);i?(t.videoId=i.videoId,t.vendorName=i.vendorName,r=new qa(t)):r=new Ka(t);break;case n.CONTENT_TYPES.Article:r=new Ka(t);break;default:throw cg("Invalid content type : {0}",e)}return r},n.prototype.getVideoIdAndVendor=function(t){var n,r=/^(?:http|https):\/\/.*youtube\..*v=([\w-]+)/i,i=/^(?:http|https):\/\/.*youtu.be\/([\w-]+)/i,o=/^(?:http|https):\/\/.*youtube.*\/embed\/([\w-]+)/i,a=/^(?:http:\/\/|https:\/\/).*vimeo.*\/([\w-]+)/i,s=[{regex:r,vendorName:"youtube"},{regex:i,vendorName:"youtube"},{regex:o,vendorName:"youtube"},{regex:a,vendorName:"vimeo"}];return e.each(s,function(e,r){var i=t.match(r.regex);if(i&&i.length>1)return n={videoId:i[1],vendorName:r.vendorName},!1}),!n&&this._featuresManager.isFeatureEnabled("html5video")&&(n={vendorName:"html5video"}),n},n.prototype.removeContent=function(){this._currentContentActivator&&this._currentContentActivator.removeContent()},n.prototype.types=function(){return n.CONTENT_TYPES},n.CONTENT_TYPES={Article:0,Video:1},n}(Ei);i.register("ContentsManager").asCtor(Rl).dependencies("Lib, Consts, CdnServer, WalkMeGoalsManager, ClickAuditManager, FeaturesManager, PlayGuidGenerator,WalkmeVisibleReporter, Logger, CommonEvents");var Ul=function(e){__extends(t,e);function t(t,n){var r={deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Collection};e.call(this,r),this._name="Tab"}return t}(Ei);i.register("CollectionsManager").asCtor(Ul).dependencies("Lib, Consts");var Vl=function(e){__extends(t,e);function t(t,n,r,i){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Course}),this.consts=n,this.quizPlayer=r,this.initiatorManager=i,this._name="Course"}return t.prototype.activateQuizByCourseId=function(e){var t=this.deployablesDict[e],n=t&&t.Quiz;if(!n)return;var r=this.quizPlayer;this.initiatorManager.setForScope({type:this.consts.STEP_PLAY_INITIATOR_ENUM.COURSE,objectId:e,appType:this.consts.EVENT_SENDER_EVENT_APPS.Course},function(){r.playQuiz(n)})},t.prototype.getCourseByQuizId=function(e){for(var t in this.deployablesDict)if(this.deployablesDict.hasOwnProperty(t)){var n=this.deployablesDict[t];if(n.Quiz&&n.Quiz.Id==e)return n}},t.prototype.getQuizByCourseId=function(e){var t=this.deployablesDict[e],n=t&&t.Quiz;return n},t.prototype.releaseAll=function(e){this.quizPlayer.releaseAll(e)},t}(Ei);i.register("CoursesManager").asCtor(Vl).dependencies("Lib, Consts, QuizPlayer, InitiatorManager");var Wl=function(e){__extends(t,e);function t(t,n){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Lesson}),this._name="Lesson"}return t}(Ei);i.register("LessonsManager").asCtor(Wl).dependencies("Lib, Consts");var Gl=function(e){__extends(t,e);function t(t,n){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.AbExperiment}),this._name="Experiments"}return t}(Ei);i.register("ExperimentsManager").asCtor(Gl).dependencies("Lib, Consts");var Hl=function(e){__extends(t,e);function t(t,n,r,i,o,a,s,u,l,c,d){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.ShoutOut}),this.Consts=n,this.UIComponentsFactory=r,this.WalkMeGoalsManager=i,this.ClickAuditManager=o,this.ClientOrServerStorageManager=a,this.actionDataProvider=s,this.commonEvents=u,this.playGuidGenerator=l,this.walkmeVisibleReporter=c,this.logger=d,this._appendChain=[],this._activeComponents=[],this._name="ShoutOut",this.type=n.DEPLOYABLE_TYPE.ShoutOut}return t.prototype.getStopConditionKey=function(e,n){return t.STOP_CONDITION_KEY+this.type+"-"+e.Id+"-"+n},t.prototype.activateById=function(e,n,r){var i=this;try{if(this.handleActiveComponent(e,n))return;var o=this.deployablesDict[e];if(!o)return void this.logger.customerLog(cg("ShoutOut with id {0} doesn't exist",e),3);var a=this.UIComponentsFactory.get(o.UiComponentId,[o]);this.pushActiveComponent(a);var s=this.auditActivation(o,n);a.once("show-end",function(){i.WalkMeGoalsManager.startWatchingDeployable(o,i.playGuidGenerator.generateNewPlayGuid(o.Id)),a.once("action-start",function(e,n){var r;n==i.Consts.DEPLOYABLE_ACTION_TYPES.RemindMeLater?r=i.Consts.SHOUTOUT_CLICK_TYPE.RemindMeLater:n==i.Consts.DEPLOYABLE_ACTION_TYPES.Action?(i.setStopCondition(o,t.STOP_CONDITIONS.Action),r=i.Consts.SHOUTOUT_CLICK_TYPE.Action):n==i.Consts.DEPLOYABLE_ACTION_TYPES.Close&&(i.setStopCondition(o,t.STOP_CONDITIONS.Cancel),r=i.Consts.SHOUTOUT_CLICK_TYPE.Close),i.auditClick(o,i.type,r,s),i.commonEvents.raiseEvent(i.Consts.EVENTS.ShoutOutClosed,{shoutOut:o,clickType:r})}),a.once("x-clicked",function(){i.setStopCondition(o,t.STOP_CONDITIONS.XButton),i.auditClick(o,i.type,i.Consts.SHOUTOUT_CLICK_TYPE.XButton,s),i.commonEvents.raiseEvent(i.Consts.EVENTS.ShoutOutClosed,{shoutOut:o,clickType:i.Consts.SHOUTOUT_CLICK_TYPE.XButton})}),a.once("destroy-end",function(){i.commonEvents.raiseEvent(i.Consts.EVENTS.UIComponentDestroyed),i.commonEvents.raiseEvent(i.Consts.EVENTS.DeployableDestroyed)})}),this.appendComponent(a,o),this.walkmeVisibleReporter.report();var u={deployable:o,uiComponent:a,deployableType:this.type};return this.commonEvents.raiseEvent(this.Consts.EVENTS.DeployableCreated,u),a}catch(l){this.logger.customerLog(cg("Failed playing shoutOut with id {0}. Exception is {1}",e,l),3)}},t.prototype.getActionData=function(t){var n=e.prototype.getActionData.call(this,t);return this.actionDataProvider.fillActionData(t,n)},t.prototype.isWithAction=function(e){return this.actionDataProvider.isWithAction(e)},t.prototype.handleActiveComponent=function(e,t){var n=this.getActiveComponent(e);return n&&this.isLauncherInitiation(t)&&this.flickerActiveComponent(n),!!n},t.prototype.isLauncherInitiation=function(e){return e&&e.type==this.Consts.STEP_PLAY_INITIATOR_ENUM.LAUNCHER},t.prototype.flickerActiveComponent=function(e){e.unbind("hide-end."+t.ACTIVE_COMPONENT_SUFFIX),e.once("hide-end."+t.ACTIVE_COMPONENT_SUFFIX,function(){e.show()}),e.hide()},t.prototype.getActiveComponent=function(e){for(var t=this._activeComponents.length-1;t>=0;t--)if(this._activeComponents[t].getComponent().Id==e)return this._activeComponents[t]},t.prototype.appendComponent=function(e,t){var n=this;e.once("append-end",function(){e.show(),n.handleNextShoutOut()}),this._isAppending?this._appendChain.push(e):(this._isAppending=!0,e.append())},t.prototype.handleNextShoutOut=function(){var e=this._appendChain.splice(0,1)[0];e?e.append():this._isAppending=!1},t.prototype.setStopCondition=function(e,t){if(!e.Settings.stopOn||!e.Settings.stopOn[t])return;var n=this.getStopConditionKey(e,t);this.ClientOrServerStorageManager.saveData(n,1,_)},t.prototype.auditActivation=function(e,t){return t=t||{},this.ClickAuditManager.SendClickAudit(this.type,e.Id,{type:t.type,id:t.objectId})},t.prototype.auditClick=function(e,t,n,r){this.ClickAuditManager.SendShoutOutAudit(e.Id,t,n,r)},t.prototype.pushActiveComponent=function(e){var n=this,r=this._activeComponents.length;this._activeComponents.push(e),e.bind(t.EVENT_DESTROY_BEGIN,function(){e.unbind(t.EVENT_DESTROY_BEGIN),n._activeComponents.splice(r,1)})},t.prototype.releaseAll=function(e){try{for(var n=0;n<this._activeComponents.length;n++){var r=this._activeComponents[n];r.unbind(t.EVENT_DESTROY_BEGIN),r.destroy()}this._activeComponents.length=0}catch(i){}e&&e()},t.prototype.autoStartEnabled=function(e){var t=this.deployablesDict[e],n=t.Settings.stopOn;for(var r in n)if(n.hasOwnProperty(r)&&this.checkStopCondition(t,r,n[r]))return!1;return!0},t.prototype.checkStopCondition=function(e,t,n){if(!n)return!1;var r=this.getStopConditionKey(e,t);if(this.ClientOrServerStorageManager.getData(r,!1))return!0},t.EVENT_DESTROY_BEGIN="destroy-begin.manager",t.ACTION_NAME_DESTROY="destroy",t.STOP_CONDITION_KEY="wm-stpcond-",t.ACTIVE_COMPONENT_SUFFIX="acs",t.COOKIE_LIFE_10_YEARS=31536e4,t.STOP_CONDITIONS={XButton:"x",Cancel:"close",Action:"action"},t}(Ei);i.register("ShoutOutsManager").asCtor(Hl).dependencies("Lib, Consts, UIComponentsFactory, WalkMeGoalsManager, ClickAuditManager, ClientOrServerStorageManager, ShoutOutActionDataProvider, CommonEvents, PlayGuidGenerator, WalkmeVisibleReporter, Logger");var jl=function(t){__extends(n,t);function n(e,n,r){t.call(this,{deployables:[],lib:e,type:n.DEPLOYABLE_TYPE.SearchProviderUrl}),this._consts=n,this._conditionCheckerFactory=r,this._name="SearchProviderUrl",this.segmentedProvidersUrls=[]}return n.prototype.getAllSegmented=function(){return this.segmentedProvidersUrls},n.prototype.setSegmentedProviders=function(){this.segmentedProvidersUrls=[];var t=this.getAll();if(t.length>0){var n=this._conditionCheckerFactory.createConditionChecker(t[0].Settings.DisplayCondition);this.segmentedProvidersUrls=e(t).filter(function(e,t){return n.getCurrentEvaluationValueAndStopEvaluating(t.Settings.DisplayCondition)}).map(function(e,t){return t.Id}).toArray()}},n.STOP_CONDITIONS={Interacted:"interacted"},n}(Ei);i.register("SearchProviderUrlsManager").asCtor(jl).dependencies("Lib, Consts, ConditionCheckerFactory");var Yl=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u,l,c,d,f,p,g,h,m,v,y,E,S,T){t.call(this,{deployables:[],lib:e,type:n.DEPLOYABLE_TYPE.Survey}),this.consts=n,this.recorderServerManager=i,this.permalinkManager=o,this.guidGenerator=a,this.commonUtils=s,this.commonEvents=u,this.eventSender=c,this.logger=d,this.reportInitiatorMapper=f,this.endUsersManager=p,this.popupBalloonDisplayer=g,this.wmAjax=h,this.clientStorageManager=m,this.walkmeVisibleReporter=v,this.auditingEnabledIndicator=y,this.questionToEventMapper=E,this.safeFullUrlProvider=S,this.featuresManager=T,this._surveyStartedInCurrentPage=!1,this._surveyIsShown=!1,this._name="Survey",this._auditSource=l.get(),this._getPermutationId=r.getCurrentPermutation()}return n.prototype.submitResults=function(e){if(this._surveyIsShown=!1,e.answers.length>0)return this.sendResultsArrayToServer("SurveyCompleted",e),this.addSubmitCookie(e.surveyGuid),this.sendSurveyCompletedEvent(e,"CompletedWithAnswers"),!0;return this.sendSurveyCompletedEvent(e,"CompletedWithNoAnswers"),!1},n.prototype.submitExit=function(e){this._surveyIsShown=!1,this.sendResultsArrayToServer("SurveyExited",e),this.sendSurveyCompletedEvent(e,"ExitButtonClicked")},n.prototype.sendSurveyCompletedEvent=function(e,t){var n={surveyGuid:e.surveyGuid,status:t};e.answers&&e.answers.length>0&&(n.answers=e.answers),this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyCompleted,n)},n.prototype.sendResultsArrayToServer=function(e,t){if(!this.auditingEnabledIndicator.isEnabled())return;t.permutationId=this._getPermutationId,t.endUserGuid=this.endUsersManager.getEndUserGuid();var r=rg(t),i=this.wmAjax.execute({type:this.featuresManager.isFeatureEnabled("surveyAnswerExtendedLimit")&&this.featuresManager.isFeatureEnabled("blockJsonp")?"POST":"GET",url:this.recorderServerManager.get()+"/Survey/"+e,data:{surveyDataSerialized:r},timeout:n.SEND_TO_SERVER_TIMEOUT});i.success(function(e){}),i.error(function(e,t,n){})},n.prototype.addSubmitCookie=function(e){var t="wm-SrvSmt-"+e;this.clientStorageManager.saveData(t,1,I)},n.prototype.startSurvey=function(e,t){var n=this,r=!0;this._surveyIsShown=!0;var i=window.walkmeExternalSurvey;if(this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.StartSurvey,e),i&&(e.surveyJson.Settings.isExternal||e.isSurveyExternal)){this.logger.customerLog("Starting external survey"),e.playGuid=e.surveyPlayGUID,e.source=this._auditSource;var o=i(e,e.callback);o===!1?(r=!1,this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyFailedShowing)):this.sendSurveyPlayedEvent(e.surveyJson)}else this.startInternalSurvey(e,function(t){t.show().then(function(){return n.commonEvents.raiseEvent("SurveyOnScreen")}),n.sendSurveyPlayedEvent(e.surveyJson)});return this.reportSurveyStarted(e,t,e.surveyJson.Questions),r},n.prototype.startInternalSurvey=function(e,t){var n=e.surveyJson.Settings.shouldShowOneByOne;1==n?(this.logger.customerLog(cg("Starting one by one survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),__webpack_require__.e(6,function(n){var r=[n(153)];(function(){t(i.create("OneByOneSurvey",e))}).apply(null,r)})):(this.logger.customerLog(cg("Starting regular survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),__webpack_require__.e(7,function(n){var r=[n(170)];(function(){t(i.create("AllQuestionsSurvey",e))}).apply(null,r)}))},n.prototype.sendSurveyPlayedEvent=function(e){this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyPlayed,{surveyId:e.Id})},n.prototype.surveyIsShown=function(){return this._surveyIsShown},n.prototype.submitSurvey=function(e,t,n,r){var o=this.buildAnswersObjectForServer(e,n);e.submitResults(o),this.logger.customerLog(cg("Submitting answers for survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name));var a=this;__webpack_require__.e(8,function(r){var o=[r(171)];(function(){a._surveyQuestionAndAnswerText=i.get("SurveyQuestionAndAnswerText"),a.reportSurveySubmitted(e,t,n)}).apply(null,o)}),r&&r()},n.prototype.surveyExited=function(e,t,n,r){this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyExited,{surveyParams:e,questions:t,answers:r,callback:n}),this.logger.customerLog(cg("Survey with id {0} and name {1} exited",e.surveyJson.Id,e.surveyJson.Name));var i=this.buildAnswersObjectForServer(e,[]);e.submitExit(i),this.reportSurveyExited(e,t),n&&n()},n.prototype.buildAnswersObjectForServer=function(e,t){var n={};return n.playGuid=e.surveyPlayGUID,n.surveyGuid=e.surveyJson.Guid,n.tutorialId=e.tutorialId,n.source=this._auditSource,n.customVarsData=this.commonUtils.getWindowData(A.Var,e.surveyJson.Settings.customVar),n.customCookiesData=this.commonUtils.getWindowData(A.Cookie,e.surveyJson.Settings.customCookie),n.answers=[].concat.apply([],t),n.fullUrl=this.safeFullUrlProvider.get(),n},n.prototype.activateById=function(t,n,r){var i=this;r=r||{};var o=this.deployablesDict[t];if(!o)return this.logger.customerLog(cg("Survey with id {0} doesn't exist",t),3),!1;if(e(".walkme-survey-id-"+t).length>0)return this.logger.customerLog(cg("Survey with id {0} is already on screen",t),3),!1;r.surveyJson=o,r.submitResults=function(e){i.submitResults(e)},r.submitExit=function(e){i.submitExit(e)},r.drawBalloonFunc=this.popupBalloonDisplayer.showSpecialPopupBalloon,r.surveyPlayGUID=r.surveyPlayGUID||this.guidGenerator.generateGuid();var a=this.startSurvey(r,n);return this._surveyStartedInCurrentPage=a||this._surveyStartedInCurrentPage,a},n.prototype.autoStartEnabled=function(e){return!this._surveyStartedInCurrentPage&&!this.permalinkManager.isTrainingInStartingMode()},n.prototype.reportSurveyExited=function(e,t){try{var n=this.mapSurveyParamsToEvent(e,t);n.reason=this.eventSender.CANCEL_REASONS.Xclick,this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Close,n)}catch(r){this.logger.error(r,"reportSurveyExited")}},n.prototype.reportSurveyStarted=function(e,t,n){try{this.walkmeVisibleReporter.report();var r=mtjQuery.extend(this.mapSurveyParamsToEvent(e,n),this.mapEventSource(e),this.reportInitiatorMapper.mapForExtend(t));this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Play,r)}catch(i){this.logger.error(i,"reportSurveyStarted")}},n.prototype.reportSurveySubmitted=function(e,t,n){try{var r=this.mapSurveyParamsToEvent(e,t);this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Submitted,r);for(var i=0;i<t.length;i++)for(var o=t[i],a=this.questionToEventMapper.map(o,e),s=n[i],u=0;u<s.length;u++){var l=mtjQuery.extend({},r,a,this.mapAnswerToProps(s[u],e.surveyJson),{indx:i+1});this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Submitted,l)}}catch(c){this.logger.error(c,"reportSurveySubmitted")}},n.prototype.mapEventSource=function(e){if(!e.eventSource)return{};return{reason:e.eventSource}},n.prototype.mapSurveyParamsToEvent=function(e,t){var n=this.eventSender.EVENT_APPS.Survey,r={type:n,oId:e.surveyJson.Id,oName:e.surveyJson.Name,pId:e.surveyPlayGUID,total:0};return t&&t.length&&(r.total=t.length),r},n.prototype.mapAnswerToProps=function(e,t){var n={};n.oId=e.questionId;var r=this._surveyQuestionAndAnswerText.getQuestionAndAnswerTextFromSurvey(t,e.questionId,e.answerId);return n.oName=r.questionText,e.answerId&&(n.aoId=e.answerId,n.value=r.answerText),e.answerText&&(n.value=e.answerText),n.aType=this.consts.EVENT_SENDER_ACTIONS.SurveyQuestionAnswered,n.aAppType=this.consts.EVENT_SENDER_EVENT_APPS.SurveyQuestionAnswer,n},n.SEND_TO_SERVER_TIMEOUT=1e4,n}(Ei);exports.SurveysManager=Yl,i.register("SurveysManager").asCtor(Yl).dependencies("Lib, Consts, AbCurrentPermutationProvider, RecorderServerManager, PermalinkManager, GuidGenerator, CommonUtils, CommonEvents, AuditSourceManager, EventSender, Logger, ReportInitiatorMapper, EndUsersManager, PopupBalloonDisplayer, WmAjax, ClientStorageManager, WalkmeVisibleReporter, AuditingEnabledIndicator, QuestionToEventMapper, SafeFullUrlProvider, FeaturesManager");var zl=function(e){__extends(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.ConditionBlock}),this.timerManager=r,this._resultsCache={}}return t.prototype.activateById=function(e,n){var r=this;if(void 0!=this._resultsCache[e])return this._resultsCache[e];var o={elementName:"conditionBlock"+e},a=i.get("ConditionCheckerFactory").createOld(o);a.onValueChanged(function(e){n&&n(e)});var s=this.getById(e);return a.evaluateAsync(s.ConditionsTree),this._resultsCache[e]=a.getCachedValue(),a.cleanResources(),this.timerManager.libSetTimeout(function(){r._resultsCache[e]=void 0},t.RESULT_CACHE_TIME),this._resultsCache[e]},t.RESULT_CACHE_TIME=500,t}(Ei);i.register("ConditionBlocksManager").asCtor(zl).dependencies("Lib,Consts,TimerManager");var Ql=function(e){__extends(t,e);function t(t,n,r,i,o,a,s,u){e.call(this,{deployables:[],lib:t}),this.oldConditionsCombiner=n,this.tagsInjector=r,this.tagsSegmentationProperties=i,this.deployablesManagerFactory=o,this.consts=a,this.newConditionsCombiner=s,this.featuresManager=u,this._name="Tag"}return t.prototype.injectTagsToDeployables=function(){var e=this.getAll();this.injectConditionsToDeployable(e)},t.prototype.injectConditionsToDeployable=function(e){var t=this.getCombinedDeployableTagsConditions(e,"Or");for(var n in this.consts.DEPLOYABLE_TYPE)if(this.consts.DEPLOYABLE_TYPE.hasOwnProperty(n)){var r=this.consts.DEPLOYABLE_TYPE[n],i=this.deployablesManagerFactory.get(r);if(i)for(var o=i.getAll(),a=0;a<o.length;a++){var s=o[a],u=t[r]&&t[r][s.Id],l=this.tagsSegmentationProperties.properties[r];s.Settings||(s.Settings={});var c=u;l&&(c=this.tagsInjector.inject(s,u,l)),s.Settings.ASEnabled&&this.injectConditionTreeToDeployableAutostart(s,c,l,"And")}}},t.prototype.injectConditionTreeToDeployableAutostart=function(e,t,n,r){this.shouldInjectTagsIntoAutoStart(n)&&(n&&n.isNewConditions?e.ConditionTrees.ASCT=this.newConditionsCombiner.combine(r,t,e.ConditionTrees.ASCT):e.Settings.ASCT=this.oldConditionsCombiner.combine(r,t,e.Settings.ASCT)),e.Settings.ASCT&&(e.Settings.ASCTEnabled=1)},t.prototype.shouldInjectTagsIntoAutoStart=function(e){return!e||!e.dontInjectTagsIntoAutoStartFeature||!this.featuresManager.isFeatureEnabled(e.dontInjectTagsIntoAutoStartFeature)},t.prototype.getCombinedDeployableTagsConditions=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];if(i.Settings&&i.Settings.Condition)for(var o=i.LinkedDeployables.length-1;o>=0;o--){var a=i.LinkedDeployables[o],s=this.deployablesManagerFactory.get(a.DeployableType),u=s.getById(a.DeployableID);u&&this.updateTagsConditionDictionary(n,i,u,a.DeployableType,t)}}return n},t.prototype.updateTagsConditionDictionary=function(e,t,n,r,i){e[r]||(e[r]={});var o=e[r][n.Id];e[r][n.Id]=this.oldConditionsCombiner.combine(i,t.Settings.Condition,o)},t}(Ei);i.register("TagsManager").asCtor(Ql).dependencies("Lib, OldConditionsCombiner, TagsInjector, TagsSegmentationProperties, DeployablesManagerFactory, Consts, NewConditionsCombiner, FeaturesManager");function ql(e){var t;this.concat=function(n){if(e&&e.adapt(n),t)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);else t=n},this.get=function(e){for(var n=t,r=0;r<arguments.length;r++)n=n[arguments[r]];return n}}i.register("Positions").asInstance({Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}),i.register("FontsData").asFunction(function(){var e=new ql;return e.concat({"walkme-opensans":{id:"opensans",name:"opensans",url:"/player/resources/fonts/opensans"}}),e.concat({"lib-font":{id:"libFont",name:"lib-font",url:"/player/resources/fonts/lib-font_v1",dummeyText:"&#xed50;"}}),e}),i.register("LocalStorageService").dependencies("CommonUtils, Logger").asFunction(function(e,t){if(e.isLocalStorageEnabled())return window.localStorage;return t.customerLog("localStorage is not enabled"),!1}),i.register("DesignTemplates").asCtor(Kl).dependencies("ArrayUtils");function Kl(e){var t=this;t.reset=r,t.set=i;function n(){r()}function r(){i([])}function i(n){if(!n)return;t.value=e.filter(n,function(e){return e}),o()}function o(){t.defaults={};var n=e.filter(t.value,function(e){return e.isDefault});e.foreach(n,function(e){t.defaults[e.entityType]=e.id})}n()}i.register("DesignTemplatesCalculatedCssGetter").asCtor(Xl).dependencies("DesignTemplates, ArrayUtils");function Xl(e,t){var n=this;n.get=r;function r(){var n=t.map(e.value,function(e){return e.css});return n.join(" ")}}i.register("SpecificEntityDesignTemplateCssClassGetter").asCtor(Jl).dependencies("SharedConsts, DesignTemplates");function Jl(e,t){var n=this;n.get=r;function r(n,r){if(!n)return;var i=n.DesignTemplateId||t.defaults[r];return i?e.designTemplateCssClassPrefix+i:void 0}}i.register("DesignTemplateHtmlGetter").asCtor($l).dependencies("DesignTemplates");function $l(e){var t=this;t.get=n;function n(t){if(!t)return;for(var n=0;n<e.value.length;n++){var r=e.value[n];if(r.id==t)return r.html}}}i.register("PlaceholdersReplacer").asCtor(Zl).dependencies("NamedPlaceholderReplacer, VariablePlaceholderReplacer");function Zl(e,t){var n=this,r=/^[A-Za-z][A-Za-z0-9\-_:\\.]*$/;n.replace=i;function i(e,n,r,i){o(e,n,i),t.replace(e.html,r)}function o(t,n,r){for(var i=0;i<n.length;i++){var o=n[i];a(o.Name)&&e.replace(t,o,r)}}function a(e){return r.test(e)}}i.register("NamedPlaceholderReplacer").asCtor(ec).dependencies("NamedDataPlaceholderReplacer, NamedActionPlaceholderReplacer");function ec(e,t){var n=this;n.replace=o;var r="wm-placeholder",i="wm-action-placeholder";function o(n,r,o){var s=a(n.html,r.Name);if(e.replace(s,r.Config,o),s.attr(i)==r.Name){var u={element:s,entityType:n.type};t.replace(u,r,o,n.actionArgs)}}function a(e,t){var n="["+r+"='"+t+"'],["+i+"='"+t+"']";return e.find(n).andSelf().filter(n)}}i.register("NamedDataPlaceholderReplacer").asCtor(tc).dependencies("BBCodeParser, CommonUtils");function tc(e,t){var n=this;n.replace=r;function r(e,t,n){i(e,t.attributes||{}),o(e,t.content,n),a(e,t.css)}function i(e,t){for(var n in t)t.hasOwnProperty(n)&&e.attr(n,t[n])}function o(n,r,i){if(void 0!=r){var o=e.parse(t.nl2br(r),i.bbCodeParserVersion);n.html(o)}}function a(e,t){if(void 0!=t){var n=e.attr("style"),r="";n&&(r=n),e.attr("style",r+";"+t)}}}i.register("VariablePlaceholderReplacer").asCtor(nc);function nc(){var e=this;e.replace=n;var t={"wm-variable-current-step":"passedVisibleSteps","wm-variable-total-steps":"totalVisibleSteps"};function n(e,n){for(var r in t){var i="["+r+"]",o=e.find(i).andSelf().filter(i);o.prepend(n[t[r]])}}}i.register("NamedActionPlaceholderReplacer").asCtor(rc).dependencies("ActionsFactory, SharedConsts, wmjQuery, PlaceholderActionWrapper, ActionClickedEventBinder, IsInEditor");function rc(e,t,n,r,i,o){var a=this;a.replace=s;function s(a,s,u,l){var c=a.element,d=s.Config;if(d.IsActive)if(a.entityType==t.ENTITY_TYPE.step&&"destroy"==d.Type)c.addClass("walkme-action-close");else{var f={};n.extend(f,d.Args,l);var p=e.get(d.Type,f,u.type,u.initiator).doAction,g=r.wrapByEntityType(a.entityType,p,f,d);c.bind("click",g),o.get()||i.bind(c,{placeholderConfiguration:s,initiatorData:u.initiator})}else c.remove()}}i.register("ActionClickedEventBinder").asCtor(ic).dependencies("EventSender, Consts, SharedConsts, EventDataTypesProvider, ActionClickedActivatedObjectGetter, FlowDataPersister");function ic(e,t,n,r,i,o){var a=this;a.add=d,a.bind=f;var s,u,l=-1;function c(){s=n.ENTITY_TYPE,u={},u[s.shoutout]={appType:t.EVENT_SENDER_EVENT_APPS.ShoutOut},u[s.balloon]={appType:t.EVENT_SENDER_EVENT_APPS.BizFlowStep,getPlayGuid:o.getPlayGuid}}function d(e,t,n){u[e]={appType:t,getPlayGuid:n}}function f(e,t){e.bind("click",p(t))}function p(n){var o=n.placeholderConfiguration,a=n.initiatorData,s=u[o.EntityType],c=s.getPlayGuid?s.getPlayGuid():l;return function(){var n=i.get(o.Config);e.postEvent(t.EVENT_SENDER_EVENT_TYPES.ActionClicked,{type:t.EVENT_SENDER_EVENT_APPS.Action,oId:o.Id,oName:o.Name,owId:o.EntityId,owType:s.appType,owName:g(o.EntityType,a),pId:c,aType:r.getDataActionType(o.Config.Type),aAppType:r.getDataActionAppType(o.Config.Type),aoId:n.objectId,aoName:n.objectName})}}function g(e,t){var n;switch(e){case s.shoutout:n=t.Name;break;case s.step:n=t.StepTitle||t.StepText;break;case s.balloon:n=t.Title||t.Text}return n}c()}i.register("EventDataTypesProvider").asCtor(oc).dependencies("Consts");function oc(e){var t=this;t.getDataActionType=a,t.getDataActionAppType=s;var n=e.EVENT_SENDER_ACTIONS,r=e.EVENT_SENDER_EVENT_APPS,i={none:n.None,playBf:n.PlayBizFlow,playWt:n.PlayWalkthru,openMenu:n.OpenMenu,playContent:n.PlayResource,playShuttle:n.PlayShuttle,destroy:n.Close,remindMeNextTime:n.Close,remindMeNextDay:n.Close},o={playContent:r.Content,playBf:r.BizFlow,playShuttle:r.Shuttle,playWt:r.Walkthru};function a(e){return i[e]}function s(e){return o[e]}}i.register("ActionClickedActivatedObjectGetter").asCtor(ac).dependencies("ContentsManager, BusinessSolutionsManager, TutorialsManager, ShuttlesManager");function ac(e,t,n,r){var i=this;i.get=o;function o(i){var o={},a=i.Args;if(!a)return o;switch(i.Type){case"playContent":o.objectId=a.contentId,o.objectName=e.getById(a.contentId).Name;break;case"playBf":o.objectId=a.bfId,o.objectName=t.getById(a.bfId).Name;break;case"playWt":o.objectId=a.wtId,o.objectName=n.getById(a.wtId).Name;break;case"playShuttle":o.objectId=a.shuttleId,o.objectName=r.getById(a.shuttleId).Name}return o}}i.register("ShoutOutActionPlaceholderClassesAdder").asCtor(sc).dependencies("MainShoutOutActionElementsGetter, ActiveMainShoutOutActionPlaceholderConfigsGetter");function sc(e,t){var n=this;n.addClasses=a;var r="walkme-action-",i="action",o="close";function a(n,r){var a=e.getMainElementsWithPlaceholders(n),u=t.getActiveMainElementPlaceholderConfigs(r,a);if(u[i]&&s(u,a,0,i),u[o]){var l=1==u.length?0:1;s(u,a,l,o)}}function s(e,t,n,r){var i=u(n,e[r].Config.Type);t[r].element.addClass(i)}function u(e,t){return r+t+"-"+e}}i.register("HtmlRulesApplier").asCtor(uc);function uc(){var e=this;e.apply=t;function t(e,t){return e.replace(/{{{cssReset}}}/g,t.cssReset).replace(/{{colors.xBtn}}/g,t.colors&&t.colors.xBtn).replace(/{{direction.oppositeSide}}/g,t.direction&&t.direction.oppositeSide).replace(/{{xBtn.marginHorizental}}/g,t.xBtn&&t.xBtn.marginHorizental).replace(/{{xBtn.marginTop}}/g,t.xBtn&&t.xBtn.marginTop).replace(/{{data.balloonCloseTooltip}}/g,t.data&&t.data.balloonCloseTooltip).replace(/{{direction.basic}}/g,t.direction&&t.direction.basic).replace(/{{top.title.paddingTop}}/g,t.top&&t.top.title&&t.top.title.paddingTop).replace(/{{direction.side}}/g,t.direction&&t.direction.side).replace(/{{top.textAlign}}/g,t.top&&t.top.textAlign).replace(/{{colors.header}}/g,t.colors&&t.colors.header).replace(/{{{data.title}}}/g,t.data&&t.data.title).replace(/{{{title}}}/g,t.title).replace(/{{top.content.sideMargin}}/g,t.top&&t.top.content&&t.top.content.sideMargin).replace(/{{top.content.oppositeSideMargin}}/g,t.top&&t.top.content&&t.top.content.oppositeSideMargin).replace(/{{colors.content}}/g,t.colors&&t.colors.content).replace(/{{{data.content}}}/g,t.data&&t.data.content)}}i.register("MainShoutOutActionElementsGetter").asCtor(lc);function lc(){var e=this;e.getMainElementsWithPlaceholders=a;var t=".wm-template-main-bg",n=".wm-close-link",r="wm-action-placeholder",i="action",o="close";function a(e){var r={};return s(e,r,t,i),s(e,r,n,o),r}function s(e,t,n,i){var o=e.find(n),a=o.attr(r);a&&(t[i]={placeholderName:a,element:o})}}i.register("ActiveMainShoutOutActionPlaceholderConfigsGetter").asCtor(cc);function cc(){var e=this;e.getActiveMainElementPlaceholderConfigs=r;var t="action",n="close";function r(e,r){for(var i={length:0},o=0;o<e.length&&i.length<2;o++){var a=e[o];a.Config.IsActive&&(r[t]&&a.Name==r[t].placeholderName?(i[t]=a,i.length++):r[n]&&a.Name==r[n].placeholderName&&(i[n]=a,i.length++))}return i}}i.register("PlaceholderActionWrapper").asCtor(dc).dependencies("ShoutOutPlaceholderActionWrapper");function dc(e){var t=this;t.wrapByEntityType=i;var n=[];function r(){n.push(e)}function i(e,t,r,i){for(var o=0;o<n.length;o++)if(n[o].getType()==e)return n[o].wrap(t,r,i);return t}r()}i.register("ShoutOutPlaceholderActionWrapper").asCtor(fc).dependencies("SharedConsts");function fc(e){var t=this;t.getType=r,t.wrap=i;var n="destroy";function r(){return e.ENTITY_TYPE.shoutout}function i(e,t,r){var i=function(){e(),r.Type!=n&&t.uiComponent.destroy()};return i}}i.register("ShoutOutPlaceholdersReplacer").asCtor(pc).dependencies("PlaceholdersReplacer, SharedConsts");
function pc(e,t){var n=this;n.replace=r;function r(n,r,i){var o={html:r,type:t.ENTITY_TYPE.shoutout},a={};i&&(o.actionArgs={uiComponent:i},a.initiator=i._uiComponent,a.type=i.getInitiatorType(),a.bbCodeParserVersion=i._settings.v),e.replace(o,n||[],{},a)}}i.register("XButtonRemover").asCtor(gc).dependencies("XButtonDisplayChecker");function gc(e){var t=this;t.removeIfShould=n;function n(t,n){if(e.shouldDisplayX(n))return;t.find(".walkme-custom-balloon-close-button").remove()}}i.register("PluginConfigs").asCtor(hc);function hc(){var e=this;e.reset=n,e.set=r;function t(){n()}function n(){r([])}function r(t){e.value=t}t()}i.register("PluginConfigsGetter").asCtor(mc).dependencies("PluginConfigs");function mc(e){var t=this;t.get=n;function n(t){if(!(t&&e&&e.value&&e.value.length))return;for(var n=0;n<e.value.length;n++){var r=e.value[n];if(r.PluginName===t)return JSON.parse(r.Config)}}}i.register("BBCodeDeployables").asCtor(vc).dependencies("Consts, BBCodeDeployableActivators, BBCodeSurveyActivator");function vc(e,t,n){var r=this;r.add=s,r.get=a;var i;function o(){i=[{linkSelector:".walkme-action-start-resource",idDataKey:"data-resource-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Resource,activator:t.resourceActivator},{linkSelector:".walkme-action-start-bf",idDataKey:"data-bizflow-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Bizflow,activator:t.bizflowActivator},{linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Survey,activator:n.surveyActivator}]}function a(){return i}function s(e){i.push(e)}o()}i.register("BBCodeEventsBinder").asCtor(yc).dependencies("CommonEvents, BBCodeDeployables, Consts");function yc(t,n,r){var i=this;i.bind=o;function o(i,o,s){e(n.get()).each(function(n,u){e(u.linkSelector,i).each(function(){e(this).click(function(){var t=parseInt(e(this).attr(u.idDataKey));a(u.clickEvent,u.activator,t,s,o)}),t.raiseEvent(r.EVENTS.RegisterBBCodeDeployableClick,{element:e(this)})})})}function a(e,n,r,i,o){t.raiseEvent(e,{id:r,asyncCallback:function(){n(r,i),o&&o()}})}}i.register("BBCodeSurveyActivator").asCtor(Ec).dependencies("InitiatorTypeToAppTypeMapper, RunningDeployablesStopper");function Ec(e,t){var n=this;n.surveyActivator=s,n.addActivator=a;var r;function o(){r=[{canActivate:function(e){return e>=0},activate:function(e,t){i.get("SurveysManager").activateById(t,e)}}]}function a(e){r.push(e)}function s(n,i){t.stop();for(var o=e.mapBbcodeInitiator(i),a=0;a<r.length;a++)if(r[a].canActivate(n)){r[a].activate(o,n);break}}o()}i.register("BBCodeDeployableActivators").asCtor(Sc).dependencies("InitiatorTypeToAppTypeMapper, BusinessSolutionsManager, ContentsManager, RunningDeployablesStopper");function Sc(e,t,n,r){var i=this;i.bizflowActivator=o,i.resourceActivator=a;function o(n,r){var i=e.mapBbcodeInitiator(r);t.activateById(n,i)}function a(t,i){var o=e.mapBbcodeInitiator(i);r.stop(),n.activateById(t,o)}}i.register("BBCodeAttributeState").asCtor(Tc).dependencies("BBCodeParserConsts, BBCodeDataState, BBCodeNestedTagParser");function Tc(e,t,n){var r=this;r.go=i;function i(r){for(r.currentIndex=r.currentIndex+1;r.currentIndex<r.exp.length;r.currentIndex++){var i=r.exp.charAt(r.currentIndex);switch(i){case e.OPEN_TAG:n.parse(r,e.ATTRIBUTE_STATE);break;case e.CLOSE_TAG:return t.go(r);default:r[e.ATTRIBUTE_STATE]+=i}}}}i.register("BBCodeCloseTagState").asCtor(Cc).dependencies("BBCodeParserConsts, BBCodeTagTranslator");function Cc(e,t){var n=this;n.go=r;function r(n){for(n.currentIndex=n.currentIndex+1;n.currentIndex<n.exp.length;n.currentIndex++){var r=n.exp.charAt(n.currentIndex);switch(r){case e.CLOSE_TAG:return t.translateTag(n);default:n[e.CLOSE_TAG_STATE]+=r}}}}i.register("BBCodeDataState").asCtor(bc).dependencies("BBCodeParserConsts, BBCodeCloseTagState, BBCodeNestedTagParser");function bc(e,t,n){var r=this;r.go=i;function i(r){for(r.currentIndex=r.currentIndex+1;r.currentIndex<r.exp.length;r.currentIndex++){var i=r.exp.charAt(r.currentIndex);switch(i){case e.OPEN_TAG:if("/"==r.exp.charAt(r.currentIndex+1))return t.go(r);n.parse(r,e.DATA_STATE);break;default:r[e.DATA_STATE]+=i}}}}i.register("BBCodeOpenTagState").asCtor(wc).dependencies("BBCodeParserConsts, BBCodeDataState, BBCodeAttributeState");function wc(e,t,n){var r=this;r.go=i;function i(r){for(r.currentIndex=r.startIndex+1;r.currentIndex<r.exp.length;r.currentIndex++){var i=r.exp.charAt(r.currentIndex);switch(i){case e.OPEN_TAG:r.startIndex=r.currentIndex;break;case e.CLOSE_TAG:return t.go(r);case"=":case" ":return n.go(r);default:r[e.OPEN_TAG_STATE]+=i}}}}i.register("BBCodeNestedTagParser").asCtor(Ic);function Ic(){var e=this;e.parse=t;function t(e,t){var n=i.get("BBCodeSingleTagParser").parseSingleTag(e.exp,e.currentIndex);e[t]+=n.parsedExpPart||"",e.exp!=n.exp?(e.currentIndex=n.startIndex,e.exp=n.exp):e[t]+=e.exp.charAt(e.currentIndex)}}i.register("BBCodeParser").asCtor(Pc).dependencies("CommonUtils, BBCodeSingleTagParser, BBCodeOverrideStyle");function Pc(e,t,n){var r=this,i={font:"font-family:$1",size:"font-size:$1px",color:"color:$1"},o=["onblur","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","onerror","onfocus","onfocusin","onfocusout","onhashchange","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onreset","onresize","onscroll","onselect","onsubmit","ontextinput","onunload","onwheel"],a={};function s(){for(var e in i)a["\\["+e+"=([^\\]]+)]"]='<span style="'+i[e]+'">',a["\\[/"+e+"]"]="</span>"}r.parse=function(e,r){if(!e)return"";for(var i=0,o={exp:u(e),length:e.length};i<o.exp.length-1;)o=t.parseSingleTag(o.exp,i),i=o.startIndex;return n.getHtmlWithOverrideStyles(o.exp,r)};function u(e){if(e=l(e),e=c(e),e.replace)for(var t in a)e=e.replace(new RegExp(t,"g"),a[t]);return e}function l(e){return e.replace?e.replace(/javascript:/gi,""):e}function c(e){if(!e.indexOf)return e;if(e.indexOf("on")<0)return e;for(var t=0;t<o.length;t++)e=e.replace(new RegExp(o[t]+"\\s*=","gi"),"^");return e}s.apply(null,arguments)}i.register("BBCodeOverrideStyle").dependencies("ArrayUtils, wmjQuery").asCtor(_c);function _c(e,t){var n=this;n.getHtmlWithOverrideStyles=l;var r={b:"font-weight: bold !important",u:"text-decoration: underline !important",i:"font-style: inline !important",span:i};function i(e){if(e.is("[data-span]"))return;var t=e[0],n=o(t);return p(e,n),n}function o(e){var t=e.style;return void 0!==t.length?a(t):s(t)}function a(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+=u(r,e[r])}return t}function s(e){var t="";for(var n in e){var r=e[n];"cssText"!==n&&r&&"string"==typeof r&&(t+=u(n,r))}return t}function u(e,t){return e+": "+t+" !important;"}function l(e,t){if(!t)return e;var n=mtjQuery("<div></div>").html(e);return c(n,""),n.html()}function c(e,t){var n=t.split(";");h(e,n);var r=v(n);f(e,n),p(e,v(n));var i=d(e,r);e.children().each(function(){c(mtjQuery(this),i)})}function d(t,n){var r=e.filter(g(t).split(";"),function(e){return/!\s*important/.test(e)}).join(";");return r+";"+n}function f(e,t){var n=g(e),r=n.split(";");t.push.apply(t,r)}function p(e,t){t?e.attr("style",t):e.removeAttr("style")}function g(e){return e.attr("style")||""}function h(e,t){var n=m(e);n&&t.push.apply(t,n.split(";"))}function m(e){var t=e.prop("tagName").toLowerCase(),n=r[t];if("function"==typeof n)return n(e);if("string"==typeof n)return n}function v(e){return mtjQuery.trim(y(e).join(";"))}function y(e){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(!i)continue;var o=t.inArray(i,e);r===o&&n.push(mtjQuery.trim(i))}return n}}i.register("BBCodeSingleTagParser").asCtor(kc).dependencies("BBCodeParserConsts, BBCodeOpenTagState");function kc(e,t){var n=this;n.parseSingleTag=r;function r(n,r){var o=n.indexOf(e.OPEN_TAG,r);if(o>-1){var a=i(n,o),s=t.go(a);if(s)return s}return{exp:n,startIndex:n.length}}function i(t,n){var r={startIndex:n,currentIndex:n,exp:t};return r[e.OPEN_TAG_STATE]="",r[e.ATTRIBUTE_STATE]="",r[e.DATA_STATE]="",r[e.CLOSE_TAG_STATE]="",r}}i.register("BBCodeTagTranslator").asCtor(Ac).dependencies("BBTagHandlerProvider");function Ac(e){var t=this;t.translateTag=n;function n(e){var t=e.exp.substring(e.startIndex,e.currentIndex+1),n=r(e,t),i=void 0!=n?n:t;return i!=t&&(e.exp=e.exp.replace(t,i)),{startIndex:e.currentIndex+(i.length-t.length),exp:e.exp,parsedExpPart:i}}function r(t,n){if("/"+t.openTag!=t.closeTag)return n;t.attr.indexOf("javascript:")>-1&&(t.attr="");var r=e.get(t.openTag);return r.getHTML(n,t.openTag,t.attr,t.data)}}i.register("BBCodeParserConsts").asCtor(Dc);function Dc(){var e=this;e.ATTRIBUTE_STATE="attr",e.DATA_STATE="data",e.OPEN_TAG_STATE="openTag",e.CLOSE_TAG_STATE="closeTag",e.OPEN_TAG="[",e.CLOSE_TAG="]"}i.register("BBCodeUtils").asCtor(Oc).dependencies("CommonUtils");function Oc(t){var n=this;this.generateCustomTagAttributes=function(e){var t="";if(mtjQuery.each(e,function(e,n){t+=e+'="'+n+'" '}),t=t.replace(/\s+$/,""))return" "+t;return t},this.getStrictProperties=function(e,t,r){var i=n.getProperties(e,t,r);return a(i,e),i},this.getProperties=function(e,t,n){void 0!=t&&(t=t.replace(/&quot;/gi,'"'));var i=o(t);return s(n,e,i),r(i),i};function r(e){for(var t=["width","height"],n=0;n<t.length;n++){var r=t[n];e[r]&&(e[r]=i(e[r]))}}function i(e){if(e&&(t.isNumber(e)||e.match(/^\d+$/)))return e+"px";return e}function o(e){for(var t,n={},r=new RegExp('([^\\s]+)="([^\\"]*)"',"g");t=r.exec(e);){var i=t[1],o=t[2];n[i]=o}return n}function a(t,n){e.each(t,function(r,i){var o=e.inArray(r,n)==-1;o&&delete t[r]})}function s(e,t,n){if(void 0==e)return;for(var r=0;r<t.length;r++){var i=t[r],o=n[i],a=void 0==o,s=void 0!=e[i],u=a&&s;u&&(n[i]=e[i])}}}i.register("BBCodePropertiesConfig").asFunction(Nc);function Nc(){var e=["title"],t=["alt"].concat(e),n=["style","class","id","tabindex","aria-label","aria-live","role"].concat(e),r=["width","height"].concat(n),i=["channelmode","directories","fullscreen","left","top","target","location","menubar","resizable","scrollbars","status","titlebar","toolbar"].concat(r),o=["border","cellspacing","cellpadding"].concat(n),a=["autoplay"].concat(r),s=["href"].concat(n),u={table:o,tr:n,th:n,td:n,tbody:n,p:n,div:r,span:r,iframe:r,youtube:a,vimeo:a,wistia:a,brightcove:a,html5video:a,wt:s,bf:s,flow:s,swt:s,url:i,flash:r,img:t,b:e,u:e,i:e,ul:e,li:e,survey:s,trg:n,resource:s};return u}i.register("BBCodeVideoVendorsConfig").asCtor(xc).dependencies("RecorderServerManager,Logger");function xc(e,t){var n;this.get=function(e){var n=r(e);if(n)return n;t.error(new Error("Unsupported video vendor "+e))};function r(e){return n=n||{youtube:{url:i("http://www.youtube.com/embed/"),name:"youtube",allowFullScreen:"allowfullscreen"},vimeo:{url:i("http://player.vimeo.com/video/"),name:"vimeo",allowFullScreen:"webkitAllowFullScreen mozallowfullscreen allowFullScreen"},wistia:{url:i("http://fast.wistia.net/embed/iframe/"),name:"wistia",allowFullScreen:"allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen",additionalParams:' allowtransparency="true" scrolling="no" class="wistia_embed" name="wistia_embed"'}},n[e]}function i(e){return o()?e.replace("http:","https:"):e}function o(){return e.get()&&e.get().indexOf("https:")!=-1}}i.register("BBCodeUrlTagHandler").asCtor(Lc).dependencies("BBCodePropertiesConfig,BBCodeUtils, CommonUtils, SiteConfigManager, Mustache");function Lc(e,t,n,r,i){var o=0,a={url:'href="',anchor:'name="',email:'href="mailto: '};this.getHTML=function(n,r,o,u){var c=o;if(c){var p=c.split(" ");if(!f(p[0],e[r])){var g=p[0];c=p.splice(1,p.length-1).join(" ")}}var h,m=t.getStrictProperties(e[r],c,{"class":"",style:"",target:"_blank"}),v={classes:m["class"],target:m.target,src:d(g||u),label:u,style:m.style,title:m.title,data:c.replace(new RegExp("^"+g||u),"")};h=m.height&&m.width?s(m,v):l(m,v,a[r]);var y=i.to_html(h,v);return y};function s(e,t){var n='<span id="walkme-new-window-link-{{{spanId}}}"'+(t.title?' title="{{{title}}}"':"")+"><a class=\"walkme-custom-bbcode-link {{{classes}}}\" style=\"color: inherit; text-decoration:underline; {{{style}}}\" href=# onclick=\"event.preventDefault ? event.preventDefault() : event.returnValue = false;_walkmeInternals.ctx.get('CommonEvents').raiseEvent('BBCodeLinkClicked', {Src : '{{{src}}}' });window.open({{{srcForOpen}}},'{{{target}}}',{{{specs}}});\" data-url='"+t.data+"'>{{{label}}}</a></span>",r=o++;t.spanId=r;var i=u(e);return t.specs="'"+i+"'",t.srcForOpen="'"+t.src.replace(/\'/g,"")+"'",n}function u(e){for(var t=["width","height","channelmode","directories","fullscreen","left","top","location","menubar","resizable","scrollbars","status","titlebar","toolbar"],n="",r=t.length-1;r>=0;r--){var i=t[r];e[i]&&(n+=cg("{0}={1},",i,e[i].replace(/\'/g,"").replace(/px$/,"")))}return n.length>0&&(n=n.substring(0,n.length-1)),n}function l(e,t,n){var r="<a"+(t.title?' title="{{{title}}}"':"")+' target="{{{target}}}" class="walkme-custom-bbcode-link {{{classes}}}" onclick="_walkmeInternals.ctx.get(\'CommonEvents\').raiseEvent(\'BBCodeLinkClicked\', {Src : \'{{{src}}} \'});" style="color: inherit; text-decoration:underline; {{{style}}}" {{{linkTypes}}}{{{src}}}" data-url=\''+t.data+"'>{{{label}}}</a>";return t.linkTypes=n,r}var c=function(){var e=r.get().Settings;return e&&e.UrlWl};function d(e){var t=c();if(void 0==t)return e;for(var r=0;r<t.length;r++)if(n.isLike(e,t[r]))return e;return""}function f(e,t){for(var n=0;n<t.length;n++){var r=e.indexOf("=");if(r>-1&&(e=e.substring(0,r)),t[n]==e)return!0}return!1}}i.register("BBCodeWTTagHandler").asCtor(Fc).dependencies("BBCodePropertiesConfig, BBCodeUtils, CommonUtils");function Fc(e,t,n){this.getHTML=function(r,i,o,a){var s=-1,u=o;if(u){var l=u.split(" ");s=l[0],s=n.isNumber(s)?s:-1,u=l.splice(1,l.length-1).join(" ")}var c=t.getStrictProperties(e[i],u,{"class":"",style:""}),d=c["class"],f=c.style;return delete c["class"],delete c.style,'<a style="cursor: pointer; '+f+'" class="walkme-custom-bbcode-wt-link walkme-action-start-wt '+d+'" data-walkthru-id="'+s+'"'+t.generateCustomTagAttributes(c)+" data-"+i+"='"+u+"'>"+a+"</a>"}}i.register("BBCodeBFTagHandler").asCtor(Mc).dependencies("BBCodePropertiesConfig, BBCodeUtils, CommonUtils");function Mc(e,t,n){this.getHTML=function(r,i,o,a){var s=-1,u=o;if(u){var l=u.split(" ");s=l[0],s=n.isNumber(s)?s:-1,u=l.splice(1,l.length-1).join(" ")}var c=t.getStrictProperties(e[i],u,{"class":"",style:""}),d=c["class"],f=c.style;return delete c["class"],delete c.style,'<a style="cursor: pointer; '+f+'" class="walkme-custom-bbcode-bf-link walkme-action-start-bf '+d+'" data-bizflow-id="'+s+'"'+t.generateCustomTagAttributes(c)+" data-"+i+"='"+u+"'>"+a+"</a>"}}i.register("BBCodeImgTagHandler").asCtor(Bc).dependencies("BBCodeUtils, BBCodePropertiesConfig");function Bc(e,t){this.getHTML=function(r,i,o,a){var s=e.getStrictProperties(t[i],o),u=o;if(u){var l=u.split(" ");u=l.splice(1,l.length-1).join(" ")}return'<img src="'+a+'"'+n(o)+e.generateCustomTagAttributes(s)+" data-"+i+"='"+u+"'/>"};function n(e){var t=r(e);return t.toTagAttributes()}function r(e){var t=new RegExp("^(\\d+)x(\\d+)[^\\]]*"),n=o(e,t);return{height:n[0],width:n[1],toTagAttributes:i}}function i(){return this.height&&this.width?' width="'+this.height+'px" height="'+this.width+'px" style="width:'+this.height+"px; height:"+this.width+'px"':""}function o(e,t){var n=t.exec(e);return null!=n&&n.length>2?n.splice(0,1):n=[void 0,void 0],n}}i.register("BBCodeVideoTagHandler").asCtor(Rc).dependencies("BBCodePropertiesConfig, BBCodeUtils, BBCodeVideoVendorsConfig, Mustache");function Rc(t,n,r,i){this.getHTML=function(e,a,s,u){var l=n.getProperties(t[a],s,{width:420,height:315}),c=o(l),d=r.get(a),f=d.url+u+"?"+c,p='<iframe data-{{{vendorName}}}-id="{{{videoId}}}" src="{{{src}}}" frameborder="0" {{{allowFullScreen}}} style="position:relative; width: {{{width}}}; height: {{{height}}};"{{{additionalParams}}}></iframe>',g=i.to_html(p,{vendorName:d.name,videoId:u,width:l.width,height:l.height,src:f,allowFullScreen:d.allowFullScreen,additionalParams:d.additionalParams});return g};function o(t){var n="",r=lg(t);return delete r.height,delete r.width,e.each(r,function(e,t){n+=cg("{0}={1}&",e,t)}),n}}i.register("BBCodeIframeTagHandler").asCtor(Uc).dependencies("BBCodeUtils, BBCodePropertiesConfig, Mustache");function Uc(e,t,n){this.getHTML=function(i,o,a,s){var u=e.getProperties(t[o],a,{width:420,height:315});r(u);var l='<iframe src="{{{src}}}" frameborder="0"'+e.generateCustomTagAttributes(u)+" data-"+o+"='"+a+"'></iframe>";return n.to_html(l,{src:s})};function r(e){var t="width: "+e.width+"; height: "+e.height+";";e.style=t+(e.style||""),delete e.width,delete e.height}}i.register("BBCodeHTMLTagHandler").asCtor(Vc).dependencies("BBCodeUtils, BBCodePropertiesConfig");function Vc(e,t){this.getHTML=function(n,r,i,o){return"p"==r&&(i=" "+i),"<"+r+e.generateCustomTagAttributes(e.getStrictProperties(t[r],i))+" data-"+r+"='"+i+"'>"+o+"</"+r+">"}}i.register("BBCodeSurveyTagHandler").asCtor(Wc).dependencies("BBCodeUtils, BBCodePropertiesConfig, CommonUtils");function Wc(e,t,n){var r=this;r.getHTML=i;function i(r,i,o,a){var s=-1,u=o;if(u){var l=u.split(" ");s=n.isNumber(l[0])?l[0]:-1}var c=e.getStrictProperties(t[i],u);return delete c["class"],delete c.style,'<a data-survey-id="'+s+'" class="walkme-custom-bbcode-survey walkme-action-start-survey" style="cursor: pointer;"'+e.generateCustomTagAttributes(c)+">"+a+"</a>"}}i.register("BBCodeResourceTagHandler").asCtor(Gc).dependencies("BBCodeUtils, BBCodePropertiesConfig, CommonUtils");function Gc(e,t,n){this.getHTML=function(r,i,o,a){var s="",u=o;if(u){var l=u.split(" ");s=n.isNumber(l[0])?l[0]:""}var c=e.getStrictProperties(t[i],u);return delete c["class"],delete c.style,'<a data-resource-id="'+s+'" class="walkme-action-start-resource" style="cursor: pointer;"'+e.generateCustomTagAttributes(c)+">"+a+"</a>"}}i.register("BBCodeFlashTagHandler").asCtor(Hc).dependencies("BBCodeUtils, BBCodePropertiesConfig, Mustache");function Hc(e,t,n){this.getHTML=function(r,i,o,a){var s=e.getStrictProperties(t[i],o,{width:420,height:315}),u='<div class="walkme-custom-flash-wrapper" style="width: {{{width}}}; height: {{{height}}};"><object type="application/x-shockwave-flash" data="{{{swf}}}" allowNetworking="none" allowFullScreen="false" width="{{{width}}}" height="{{{height}}}"><param name="SRC" value="{{{swf}}}"/><param name="allowNetworking" value="none"/><param name="allowFullScreen" value="false"/></object></div>',l=n.to_html(u,{swf:a,width:s.width,height:s.height});return l}}i.register("BBCodeJQueryTagHandler").asCtor(jc).dependencies("CommonUtils, JQueryElementFinder, IsInWYSIWYG");function jc(t,n,r){this.getHTML=function(a,s,u,l){if(r.get()){var c=e("<img>");return c.attr("alt",o(l)),c.attr("dynamic-type","jquery"),c.attr("class","dynamic-text-content"),c.prop("outerHTML")}var d=t.encodeText(n.getjQueryElementText(l));return i.get("BBCodeParser").parse(d)};function o(e){var t=e.replace(/\n/g,""),n=decodeURIComponent(t),r=/(.*?)\[\/jquery]/,i=r.exec(n);return i?i[1]:t}}i.register("BBCodeCookieTagHandler").asCtor(Yc).dependencies("CommonUtils, IsInWYSIWYG");function Yc(e,t){this.getHTML=function(n,r,o,a){if(t.get())return'<img alt="'+a+'" dynamic-type="cookie" class="dynamic-text-content">';var s=e.getWindowCookie(a);return null!=s&&s!==!1||(s=""),i.get("BBCodeParser").parse(e.encodeText(s))}}i.register("BBCodeVarTagHandler").asCtor(zc).dependencies("CommonUtils, IsInWYSIWYG");function zc(e,t){this.getHTML=function(n,r,o,a){if(t.get())return'<img alt="'+a+'" dynamic-type="var" class="dynamic-text-content">';var s=e.getWindowVar(a);return null!=s&&s!==!1||(s=""),i.get("BBCodeParser").parse(e.encodeText(s))}}i.register("BBCodeWmDataTagHandler").asCtor(Qc).dependencies("CommonUtils, IsInWYSIWYG, ClientStorageManager");function Qc(e,t,n){this.getHTML=function(r,o,a,s){if(t.get())return'<img alt="'+s+'" dynamic-type="wm-data" class="dynamic-text-content">';var u=n.getData(s);return null!==u&&u!==!1||(u=""),i.get("BBCodeParser").parse(e.encodeText(u))}}i.register("BBCodeHTML5VideoTagHandler").asCtor(qc).dependencies("BBCodeUtils, BBCodePropertiesConfig, Mustache");function qc(e,t,n){this.getHTML=function(r,i,o,a){var s=e.getProperties(t[i],o,{width:420,height:315}),u='<video controls height="{{height}}" width="{{width}}" {{autoplay}} src="{{{src}}}"></video>',l=n.to_html(u,{src:a,width:s.width,height:s.height,autoplay:s.autoplay?"autoplay":""});return l}}i.register("BBCodeCustomTagHandler").asCtor(Kc);function Kc(){var e=this;e.getHTML=t;function t(e,t,n,r){var i=window.walkme_custom_bbcode_parser;if("function"==typeof i)return i(e,t,n,r)}}i.register("BBCodeTriggerTagHandler").asCtor(Xc).dependencies("CommonUtils");function Xc(e){var t=this;t.getHTML=n;function n(t,n,r,i){var o=-1,a=r;if(a){var s=a.split(" ");o=s[0],o=e.isNumber(o)?o:-1,a=s.splice(1,s.length-1).join(" ")}return'<a style="cursor: pointer;" class="trg-'+o+'" data-'+n+"='"+a+"'>"+i+"</a>"}}i.register("BBTagHandlerProvider").asCtor(Jc).dependencies("BBCodeUrlTagHandler, BBCodeWTTagHandler, BBCodeBFTagHandler, BBCodeImgTagHandler, BBCodeVideoTagHandler,BBCodeIframeTagHandler, BBCodeHTMLTagHandler, BBCodeSurveyTagHandler, BBCodeFlashTagHandler,BBCodeJQueryTagHandler, BBCodeCookieTagHandler, BBCodeVarTagHandler, BBCodeWmDataTagHandler,BBCodeCustomTagHandler, BBCodeTriggerTagHandler, BBCodeResourceTagHandler, BBCodeHTML5VideoTagHandler");function Jc(e,t,n,r,i,o,a,s,u,l,c,d,f,p,g,h,m){var v=this;v.get=y;function y(v){switch(v){case"url":return e;case"wt":return t;case"bf":case"flow":case"swt":return n;case"img":return r;case"youtube":case"vimeo":case"wistia":return i;case"html5video":return m;case"iframe":return o;case"b":case"u":case"i":case"table":case"tr":case"th":case"td":case"tbody":case"div":case"span":case"ul":case"li":case"p":return a;case"survey":return s;case"resource":return h;case"flash":return u;case"jquery":return l;case"cookie":return c;case"var":return d;case"wm-data":return f;case"trg":return g;default:return p}}}i.register("UIVariationsAdapter").asCtor(Zc).dependencies("ResourceManager"),i.register("UITemplatesAdapter").asCtor(ed).dependencies("ResourceManager");function $c(e,t,n){if(!e)return n;n=n||{};var r=e.attributes;if(r)for(var i in r)if(r.hasOwnProperty(i)&&"string"==typeof r[i]&&(r[i]=r[i].replace("###ResourcesDir###",t),"font-family"==i)){n.fonts=n.fonts||[];var o=r[i].split(",");n.fonts.push(mtjQuery.trim(o[0]))}var a=e.children;if(a)for(var s in a)a.hasOwnProperty(s)&&$c(a[s],t,n);return n}function Zc(e){this.adapt=function(t){if(!t)return;for(var n in t){var r=e.getResourcePath("/player/resources/templates/"+n),i=$c(t[n],r);t[n].metaData=i}}}function ed(e){this.adapt=function(t){if(!t)return;for(var n in t)if(t[n])for(var r in t[n]){var i=t[n][r];if(i&&i.Css){var o=e.getResourcePath("/player/resources/templates/"+n+"/"+r),a=$c(i.Css,o);i.Css.metaData=a}}}}i.register("UITemplates").asCtor(ql).dependencies("UITemplatesAdapter"),i.register("UIVariations").asCtor(ql).dependencies("UIVariationsAdapter"),i.register("UIDisplayers").asFunction(function(){var e=new ql;return e.concat({1:"PopupDisplayer"}),e}).asSingleton(),i.register("UIComponents").asFunction(function(){var e=new ql;return e.concat({1:"ShoutOut",2:"ShoutOut",3:"Quiz",4:"QuizAnnouncement"}),e}).asSingleton();var td=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u,l){t.call(this,e,n,i,a,l),this._bbCodeEventsBinder=o,this._consts=a,this._commonEvents=r,this._specificEntityDesignTemplateCssClassGetter=s,this._sharedConsts=u,this.createUi()}return n.prototype.registerEvents=function(){t.prototype.registerEvents.call(this),this.registerBBCodeEvents()},n.prototype.registerBBCodeEvents=function(){var e=this.getBBcodeEventCallback(),t={objectId:this._uiComponent.Id,type:O.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT};this._bbCodeEventsBinder.bind(this._uiCreator.ui,e,t)},n.prototype.getBBcodeEventCallback=function(){var t=e.proxy(function(){this.destroy()},this),n={uiCreator:this._uiCreator,defaultt:t,defaultValue:t,returnValue:null};this._commonEvents.raiseEvent("shoutoutBBCodeClickCallback",n);var r=n.returnValue;return r},n.prototype.createConfig=function(){var e=t.prototype.createConfig.call(this),n=this._specificEntityDesignTemplateCssClassGetter.get(this._uiComponent,this._sharedConsts.templateEntityType.popup);return n&&(e.designTemplateCssClass=n),e},n.prototype.getInitiatorType=function(){return O.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT},n}(K);i.register("ShoutOut").asCtor(td).asProto().dependencies("ActionsFactory, CommonUtils, CommonEvents, BBCodeParser, BBCodeEventsBinder, Consts, SpecificEntityDesignTemplateCssClassGetter, SharedConsts");var nd=function(){function t(){this.events={}}return t.prototype.setUI=function(t,n,r,o,a){var s=t.Actions?e(t.Actions).filter(function(e,t){return t.IsActive}).length:0,u="wm-one-button";2==s?u="wm-two-buttons":0==s&&(u="wm-no-buttons"),r.ButtonsClass=u,this.ui=i.get("TemplatesFactory").get(t.UITemplateId,t.UITemplateVersion,n,r,o,t.DesignTemplateId,t.DesignTemplatePlaceholderConfigs,a)},t.prototype.registerEvents=function(e,t,n,r,i){this.events[e]={name:t,actionId:n,body:r.libAction}},t.prototype.getUI=function(){return this.bindEvents(),this.ui},t.prototype.bindEvents=function(){},t}(),rd=function(t){__extends(n,t);function n(){t.apply(this,arguments)}return n.prototype.bindEvents=function(){var t=this;e.safeEach(this.events,function(e,n){t.ui.find(e).on(n.name,n.body)})},n}(nd);L.register(O.PLATFORM.Web,function(){i.register("UICreator").asCtor(rd).asProto()}),L.register(O.PLATFORM.MobileWeb,function(){i.register("UICreator").asCtor(rd).asProto()}),L.register(O.PLATFORM.Desktop,function(){i.register("UICreator").asCtor(rd).asProto()});var id=function(t){__extends(n,t);function n(n){t.call(this),this._isVisible=!1;var r=i.get("Lib"),o=i.get("FramesetsUtils").shouldHandlePageAsFramesets()?i.get("BiggestFrameProvider").getBiggestFrame().contentWindow:window;this._lib=r,this._topWindow=e(o),this._topContainer=i.get("TopContainerProvider").getTopContainer(),this._settings=n}return n.prototype.setUiObject=function(e){this._uiObject=e},n.prototype.getContainer=function(){return this._topWindow},n.prototype.append=function(e){this._topContainer.append(this._uiObject),e&&e()},n.prototype.remove=function(e){this._uiObject.remove(),this._isVisible=!1,e&&e()},n.prototype.show=function(e){this._uiObject.show(),this._isVisible=!0,e&&e()},n.prototype.hide=function(e){this._uiObject.hide(),this._isVisible=!1,e&&e()},n.prototype.isVisible=function(){return this._isVisible},n}(q),od=function(t){__extends(n,t);function n(e,n){t.call(this,n),this.domSessionManager=e,this.DEFAULT_Z_INDEX=2147483631,this._positions=i.get("Positions"),this._popupUtil=i.get("PopupUIUtil"),this._popupUtil.setSettings(n)}return n.prototype.setUiObject=function(e){t.prototype.setUiObject.call(this,e),this._popupUtil.setUiObject(this._uiObject)},n.prototype.show=function(t){if(this._isVisible)return void(t&&t());this.unbindEvents();var n;n=this._settings["z-index"]?this._settings["z-index"]:this.DEFAULT_Z_INDEX,this._uiObject.css("z-index",n);var r=e.proxy(function(){this._isVisible=!0,t&&t()},this);this.pop(r)},n.prototype.pop=function(e){var t=parseInt(this._settings.position,10),n=t==this._positions.Center;n?this.popCenter(e):this.popCorner(t,e)},n.prototype.handleOverlay=function(){var e=Number(this._uiObject[0].style.zIndex),t=this._popupUtil.getOverlay();t&&(e==this.DEFAULT_Z_INDEX&&this._uiObject.css("z-index",e+1),t.show())},n.prototype.popCorner=function(e,t){this._uiObject.css({position:"fixed"}),this.handleOverlay();var r=(this._settings.marginV||0)+"px",i=(this._settings.marginH||0)+"px";switch(e){case this._positions.Top:this._uiObject.addClass(n.POSITION_PREFIX+"top"),this._uiObject.css({top:0,left:"50%",marginLeft:-(this._uiObject.outerWidth()/2),marginTop:r});break;case this._positions.Right:this._uiObject.addClass(n.POSITION_PREFIX+"right"),this._uiObject.css({right:0,top:"50%",marginTop:-(this._uiObject.outerHeight()/2),marginRight:i});break;case this._positions.Bottom:this._uiObject.addClass(n.POSITION_PREFIX+"bottom"),this._uiObject.css({bottom:0,left:"50%",marginLeft:-(this._uiObject.outerWidth()/2),marginBottom:r});break;case this._positions.Left:this._uiObject.addClass(n.POSITION_PREFIX+"left"),this._uiObject.css({left:0,top:"50%",marginTop:-(this._uiObject.outerHeight()/2),marginLeft:i});break;case this._positions.TopLeft:this._uiObject.addClass(n.POSITION_PREFIX+"top-left"),this._uiObject.css({left:0,top:0,marginTop:r,marginLeft:i});break;case this._positions.TopRight:this._uiObject.addClass(n.POSITION_PREFIX+"top-right"),this._uiObject.css({right:0,top:0,marginTop:r,marginRight:i});break;case this._positions.BottomRight:this._uiObject.addClass(n.POSITION_PREFIX+"bottom-right"),this._uiObject.css({right:0,bottom:0,marginBottom:r,marginRight:i});break;case this._positions.BottomLeft:this._uiObject.addClass(n.POSITION_PREFIX+"bottom-left"),this._uiObject.css({left:0,bottom:0,marginBottom:r,marginLeft:i})}this.fadeIn(t)},n.prototype.popCenter=function(t){this._uiObject.addClass("wm-position-center"),this._lib.centerElementInPage(this._uiObject,!1),this.handleOverlay(),this.fadeIn(t),this._resizeHandler=e.proxy(function(){this._uiObject.stop(!1,!0),this._lib.centerElementInPage(this._uiObject,!0)},this),this._topWindow.bind(n.MOVEMENT_EVENTS,this._resizeHandler)},n.prototype.fadeIn=function(e){var t=this;this.domSessionManager.mutate(function(){t._uiObject.stop(!0,!1).css("opacity",1).hide().fadeIn(400,e)})},n.prototype.hide=function(t){if(this._popupUtil.removeOverlay(),!this._isVisible)return void(t&&t());this.unbindEvents(),this._uiObject.stop(!0,!1).css("opacity",1).show().fadeOut(200,e.proxy(function(){this._isVisible=!1,t&&t()},this))},n.prototype.remove=function(t){this.hide(e.proxy(function(){this._uiObject.remove(),t&&t()},this))},n.prototype.unbindEvents=function(){this._resizeHandler&&this._topWindow.unbind(n.MOVEMENT_EVENTS,this._resizeHandler),this._resizeHandler=null},n.EVENT_SUFFIX="walkmeDisplayer",n.MOVEMENT_EVENTS="scroll."+n.EVENT_SUFFIX+", resize."+n.EVENT_SUFFIX,n.POSITION_PREFIX="wm-position-",n}(id);L.register([O.PLATFORM.Web,O.PLATFORM.Desktop],function(){i.register("PopupDisplayer").asCtor(od).asProto().dependencies("DOMSessionManager")});var ad=function(t){__extends(n,t);function n(){t.apply(this,arguments),this._css="/* Template 4.3 Only Fallbacks */ /* All */ @media only screen and (max-width: 640px) {   .wm-template-light,   .wm-template-standout-title,   .wm-template-standout-actions {    min-width: 85% !important;   }    } /* Light */ @media only screen and (max-height: 400px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 400px; \t} }  /* Standout Title */ @media only screen and (max-height: 400px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 75px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 50px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 175px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 150px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 275px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 250px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 375px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 350px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 400px; \t} }  /* Standout Action */ @media only screen and (max-height: 400px) { \t.wm-template-standout-actions .wm-template-text{ \t\tmax-height: 75px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 50px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-button { \t\tpadding-top: 8px; \t\tpadding-bottom: 8px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 175px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 150px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 275px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 250px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 375px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 350px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 400px; \t} }",
this._resourceManager=i.get("ResourceManager")}return n.prototype.append=function(n){this._uiObject.css("position","fixed");var r=e("#walkme-mobile-css-old-version");0==r.length&&this._resourceManager.injectCss(this._css,"walkme-mobile-css-old-version"),t.prototype.append.call(this,n)},n.prototype.pop=function(e){this.handleOverlay(),this.fadeIn(e)},n.prototype.handleOverlay=function(){t.prototype.handleOverlay.call(this);var n=this._popupUtil.getOverlay(),r=n&&n.getOverlayElement();if(!r)return;r.on("click.walkme touchend.walkme",e.proxy(function(){this.remove()},this))},n}(od);L.register(O.PLATFORM.MobileWeb,function(){i.register("PopupDisplayer").asCtor(ad).asProto().dependencies("DOMSessionManager")});var sd=function(){function t(e,t,n,r,i,o,a,s,u,l,c,d,f){this.CLASSES_PREFIX="wm-",this.STATES_DATA_KEY="templatesFactoryStates",this.HANDLE_SHOUTOUT_CSS_EVENT="handleShoutOutCss",this._logger=e,this._mustache=t,this._uiTemplates=n,this._resourceManager=r,this._fontsData=i,this._siteConfigManager=o,this._hostData=a,this._commonUtils=s,this._designTemplateHtmlGetter=u,this._additionalTemplatesHandlers=l,this._shoutOutPlaceholdersReplacer=c,this._shoutOutActionPlaceholderClassesAdder=d,this._arrayUtils=f}return t.prototype.addResources=function(e,t,n,r,i){var o=this._uiTemplates.get(e,t).Css;this.loadVariationsFonts([o].concat(n),r,i)},t.prototype.get=function(e,t,n,r,i,o,a,s){var u=this._commonUtils.clone(this._uiTemplates.get(e,t)),l=r||{},c=this._designTemplateHtmlGetter.get(o);c&&(u.Html=u.Html.replace(/{{{templateHtml}}}/g,c),l.templateHtml=c);var d=this._commonUtils.createElementInDocument(this._mustache.to_html(u.Html,l),i||window.document);this._shoutOutPlaceholdersReplacer.replace(a,d,s),c&&a&&this._shoutOutActionPlaceholderClassesAdder.addClasses(d,a),this.addDefaultClasses(d),this.inheritProperties(d);var f=d.wrap("<div />").parent(),p=this,g=n&&this._arrayUtils.map(n,function(e,t){return p.runCssHandlerWithParams(i,f,e,0==t)}),h=this.runCssHandlerWithParams(i,f,u.Css),m=this._arrayUtils.any(g,function(e){return!!e});if(m)for(var v=g.length-1;v>=0;v--){var y=g[v];y&&this.recursiveApplyStyle(f,y)}return h&&this.recursiveApplyStyle(f,h),(m||h)&&this.addResetCss(d),this.addStateHandler(d),d.unwrap(),d.addClass(r.designTemplateCssClass),d.hide()},t.prototype.runCssHandlerWithParams=function(e,t,n,r){return void 0===r&&(r=!1),this._additionalTemplatesHandlers.run(this.HANDLE_SHOUTOUT_CSS_EVENT,arguments,n)},t.prototype.loadVariationsFonts=function(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i].metaData&&e[i].metaData.fonts;if(o)for(var a=0;a<o.length;a++){var s=this._fontsData.get(o[a]);s&&r.push(s)}}this._resourceManager.fonts(r,n||null,t,t)},t.prototype.addDefaultClasses=function(e){var t=this._siteConfigManager.get().Direction||"ltr";e.addClass(this.CLASSES_PREFIX+t),e.addClass(this.CLASSES_PREFIX+this._hostData.browser.name.toLowerCase()),"IE"==this._hostData.browser.name&&e.addClass(this.CLASSES_PREFIX+"ie-"+this._hostData.browser.version)},t.prototype.inheritProperties=function(t){var n=this,r=t.allCss();t.children().each(function(t,i){var o=e(i);o.cssReset(r),n.inheritProperties(o)})},t.prototype.addResetCss=function(e){},t.prototype.addStateHandler=function(t){var n=this;t.find("*").andSelf().each(function(t,r){r=e(r);var i=r.data(n.STATES_DATA_KEY);if(!i)return;var o=i.hover;n.addHoverState(r,o);var a=i.click;n.addClickState(r,a),r.removeData(n.STATES_DATA_KEY)})},t.prototype.addHoverState=function(e,t){if(!t)return;var n=e.attr("style");e.hover(function(){e.css(t)},function(){e.attr("style",n)})},t.prototype.addClickState=function(e,t){if(!t)return;var n=e.attr("style");e.mousedown(function(n){e.css(t)}),e.bind("mouseup blur",function(){e.attr("style",n)})},t.prototype.recursiveApplyStyle=function(e,t){if(!t||!t.children)return;this.changePropertyOrder(t,"*");for(var n in t.children){if(!t.children.hasOwnProperty(n))continue;var r=n.split(":"),i=e.find(r[0]),o=t.children[n].attributes;for(var a in o)!o.hasOwnProperty(a)||this._commonUtils.isIe7or8()&&"-ms-filter"==a||this.handleCSS(i,a,o[a],r[1]);this.recursiveApplyStyle(i,t.children[n].children)}},t.prototype.changePropertyOrder=function(e,t){if(e.children[t]){var n=e.children[t];delete e.children[t],e.children[t]=n}},t.prototype.handleCSS=function(e,t,n,r){if(n instanceof Array)for(var i in n)this.appendCSS(e,t,n[i],r);else this.appendCSS(e,t,n,r)},t.prototype.appendCSS=function(e,t,n,r){if(!r)return void e.cssReset(t,n);r=r.toLowerCase(),this.stateCss(r,e,t,n)},t.prototype.stateCss=function(e,t,n,r){var i=t.data(this.STATES_DATA_KEY)||{};i[e]||(i[e]={}),i[e][n]||(i[e][n]=r),t.data(this.STATES_DATA_KEY,i)},t}(),ud=function(e){__extends(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}return t.prototype.addResetCss=function(e){var t=this._siteConfigManager.get().Direction||"ltr";e.find("span,button,input,label,a,b,br,img,i,u").cssReset("display","inline"),e.find("li").cssReset("display","list-item"),e.find("ul").cssReset("padding-left","40px"),e.find("*").andSelf().cssReset(k).cssReset("direction",t)},t}(sd);L.register(O.PLATFORM.MobileWeb,function(){i.register("TemplatesFactory").asCtor(ud).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils, DesignTemplateHtmlGetter, AdditionalTemplatesHandlers, ShoutOutPlaceholdersReplacer, ShoutOutActionPlaceholderClassesAdder, ArrayUtils")}),L.register([O.PLATFORM.Web,O.PLATFORM.Desktop],function(){i.register("TemplatesFactory").asCtor(ud).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils, DesignTemplateHtmlGetter, AdditionalTemplatesHandlers, ShoutOutPlaceholdersReplacer, ShoutOutActionPlaceholderClassesAdder, ArrayUtils")}),i.register("UIComponentsFactory").asCtor(ld).asSingleton().dependencies("Logger, UIComponents, CommonEvents"),i.register("DisplayersFactory").asCtor(ld).asSingleton().dependencies("Logger, UIDisplayers, CommonEvents");function ld(e,t,n){this.get=function(r,o){try{var a=t.get(r),s=i.create(a,o);return s.once("show-end",function(){n.deprecatedRaiseEvent("show-end",s)}),s}catch(u){e.error(u,"error generating class")}}}i.register("DataFixer").asCtor(cd).dependencies("SettingsValuesRetriever");function cd(e){var t=this;t.fixSteps=function(e,n){for(var r=e.Steps,i=0;i<r.length;i++)t.fixStep(r[i],i,n)},t.fixStep=function(t,n,r){if(t.fixed)return;t.StepIndex=n,t.Configuration&&t.Configuration!=-1?(t.End=t.Configuration.End,t.Duration=t.Configuration.Duration,t.Delay=t.Configuration.Delay,t.Position=t.Configuration.Position):t.Configuration=r.BalloonSettings,t.IgnorePosition=void 0!=t.IgnorePosition?t.IgnorePosition:parseInt(e.getSettingsValue(t.Settings,"ignorePosition",0)),t.fixed=!0}}i.register("PerformanceBILogger").asFunction(function(e,t){if(t.isEnabled()&&e.isEnabled())return new dd(e);return new fd}).dependencies("ThrottledBILogger, PerformanceDataIntegrityKeeper");function dd(e){var t=this;t.measure=n;function n(e){var t=i.create("PerformanceStopwatch",[e]);return t.start().then(r),t}function r(t){e.send("feperf",t)}}function fd(){this.measure=function(){return{stop:function(){}}}}i.register("PerformanceTimestampAdder").asCtor(pd).dependencies("CommonEvents");function pd(e){var n=this;n.addTimeStamp=r;function r(n){try{t.addTimeStamp(n),e.deprecatedRaiseEvent("PerfTimestamp",n)}catch(r){}}}var gd=function(){function e(e,t,n,r){var i=this;this.performanceDataIntegrityKeeper=e,this.consts=t,this.eventBase=n,this.key=r,this._deferredPromise={},this._deferredPromise.promise=new o(function(e,t){i._deferredPromise.resolve=e,i._deferredPromise.reject=t})}return e.now=function(){if(window.performance&&window.performance.now)return window.performance.now();return(new Date).getTime()},e.prototype.start=function(){var t=this;this._startTime=e.now(),this.eventBase.bind(this.consts.EVENTS.BeforeWalkmeRemoved,this._deferredPromise.reject),this.performanceDataIntegrityKeeper.onViolation(this._deferredPromise.reject);var n=function(){t.cleanResources()};return this._deferredPromise.promise.then(n,n),this._deferredPromise.promise},e.prototype.stop=function(){this._deferredPromise.resolve({key:this.key,duration:e.now()-this._startTime})},e.prototype.cancel=function(){this._deferredPromise.reject()},e.prototype.getPromise=function(){return this._deferredPromise.promise},e.prototype.cleanResources=function(){this.performanceDataIntegrityKeeper.unbind(this._deferredPromise.reject)},e}();i.register("PerformanceStopwatch").asCtor(gd).asProto().dependencies("PerformanceDataIntegrityKeeper, Consts, WmInternals");function hd(e,t){var n=this;n.measure=a;var r,o=["widgetEndLoad","dataFileStartLoad","dataFileEndLoad","postLibStartLoad","walkmeReady","walkmeReadyEnd","loadWalkmeConfigStart","loadWalkmeConfigEnd","widgetStartLoad","widgetStartInit","widgetEndInit","debuggerStartInit","debuggerEndInit"];function a(n){if(t.inArray(n,o)>-1)return e.addTimeStamp(n);return s().measure(n)}function s(){return r||(r=i.get("PerformanceBILogger")),r}this.isEnabled=u,this.registerProfilerCallback=u,this.startProfile=u;function u(){}}i.register("PerformanceAPI").asCtor(hd).dependencies("PerformanceTimestampAdder, ArrayUtils"),i.register("UIEventRaiser").asCtor(md).dependencies("ElementFinder");function md(t){var n=this;n.trigger=i,n.bind=a,n.unbind=s;var r=e(n);function i(e,n){var i;t.wrapSession(function(){i=r.triggerHandler(e)}),n&&o.all(i||[]).then(n)}function a(e,t){r.on(e,t)}function s(e,t){r.off(e,t)}}var vd=yd();i.register("UIVisibilityManagerType").asInstance(vd),i.register("UIVisibilityManager").asCtor(vd).asProto().dependencies("Logger, ConditionCheckerFactory, ConditionTreeUtils, Consts, UIChecksTriggerer, DOMSessionManager");function yd(){var t=function(n,r,a,s,u,l,c){var d=this;this.watchForVisibility=I,this.getVisibilityState=P,this.shouldShow=N,this.cleanResources=_;var f,p,g,h,m,v,y,E=3,S=s.FEATURES_LOGS.Flows;function T(){C(),b(),g=s.VISIBILITY_STATE.HIDDEN,h=a.checkIfTreeContainsSelectedElement(c.conditionTree),t.registerInstance(d)}function C(){c.elementVisibilityParams&&(c.elementVisibilityParams.logContext=c.logContext,p=i.create("ElementVisibilityEvaluator",c.elementVisibilityParams))}function b(){c.conditionCheckerParams&&(c.conditionCheckerParams.evaluationPollingIntervalMs=2e3,c.conditionCheckerParams.onlyPollConditionFunctions=!0,c.conditionCheckerParams.evaluateSonar=!1,c.conditionCheckerParams.stopPollingAfterEvaluateTrue=!1,c.conditionCheckerParams.getSelectedElement=w,f=r.createConditionChecker(c.conditionTree,c.conditionCheckerParams))}function w(){return p&&p.getElement()}function I(){return v=!1,n.customerLog(cg("UIVisibilityManager watchForVisibility for {0} with stickyType {1}, with condition {2}, isRemoveByCondition {3}",c.logContext,c.stickyType,!!f,c.isRemoveByCondition),E,S),u.bindCheckByState(k),u.bindCheckIfShouldHideOrReposition(B),H()&&u.bindCheckIfShouldShow(D),f&&(f.evaluateAsyncAndDontEvaluateImmediately(c.conditionTree),f.onSonar(D)),D()}function P(){return g}function _(){g=s.VISIBILITY_STATE.HIDDEN,W(),u.unbindCheckByState(k),u.unbindCheckIfShouldHideOrReposition(B),u.unbindCheckIfShouldShow(D),l.remove(N),y=null,p&&p.cleanResources(),f&&f.cleanResources(),t.unregisterInstance(d),v=!0}function k(){P()==s.VISIBILITY_STATE.HIDDEN?O():A()}function A(){L()&&F()||V()}function D(e){var t=o.resolve();if(P()==s.VISIBILITY_STATE.HIDDEN&&(t=O()),e){var n=e.result||[];return n.push(t),n}return t}function O(){return y?y.then(D):y=l.measure(N).then(x)}function N(){var t=h?[L,F]:[F,L],n=!0;return e.each(t,function(e,t){n=n&&t()}),n}function x(e){if(y=null,v)return;e?R():H()||c.trackUIChanges||_()}function L(){if(!p)return!0;return p.evaluateElementVisibility()==s.VISIBILITY_STATE.VISIBLE}function F(){if(!f)return!0;return f.getValue()}function M(){L()||V()}function B(){P()==s.VISIBILITY_STATE.VISIBLE&&c.isRemoveByCondition&&!F()&&V()}function R(){if(v)return;g=s.VISIBILITY_STATE.VISIBLE,p&&(m=u.bindCheckRemoveForElement(w(),M)),U(),c.stickyType!=s.STICKY_TYPE.STRONG&&u.unbindCheckIfShouldShow(D)}function U(){c.onShow&&(n.customerLog(cg("UIVisibilityManager elementIsShown for {0}",c.logContext),E,S),c.onShow(w()))}function V(){W(),g=s.VISIBILITY_STATE.HIDDEN,G(),c.stickyType==s.STICKY_TYPE.STRONG||c.trackUIChanges||_()}function W(){m&&(m.unbind(),m=null)}function G(){c.onRemove&&(n.customerLog(cg("UIVisibilityManager elementWasRemoved for {0}",c.logContext),E,S),c.onRemove())}function H(){return c.stickyType==s.STICKY_TYPE.SOFT||c.stickyType==s.STICKY_TYPE.STRONG}T.apply(null,arguments)};return t.instances={},t.sequence=0,t.registerInstance=function(e){e._id=t.sequence,++t.sequence,t.instances[e._id]=e},t.unregisterInstance=function(e){delete t.instances[e._id]},t.cleanResources=function(){for(var e in t.instances)t.instances.hasOwnProperty(e)&&t.instances[e].cleanResources();t.instances={}},t}i.register("UIChecksTriggerer").asCtor(Ed).dependencies("UIChangeTracker, TimerManager, MutationObserverWrapper, EventsTriggerSyncer, UIEventRaiser, PerformanceAPI");function Ed(e,t,n,r,i,o){var a=this;a.bindCheckByState=E,a.bindCheckIfShouldShow=S,a.bindCheckIfShouldHideOrReposition=T,a.unbindCheckByState=C,a.unbindCheckIfShouldShow=b,a.unbindCheckIfShouldHideOrReposition=w,a.bindCheckRemoveForElement=y;var s="CheckByState",u="CheckIfShouldShow",l="CheckIfShouldHideOrReposition",c=2e3,d=800;function f(){e.bind(p),g(),m()}function p(){i.trigger(s)}function g(){var e=o.measure("pollForShow");i.trigger(u,function(){e.stop(),h()})}function h(){var e=r.sync("pollForShowLoop");t.setWalkmeTimeout(g,e||c)}function m(){i.trigger(l,v)}function v(){var e=r.sync("pollForRemoveLoopStart");t.setWalkmeTimeout(m,e||d)}function y(e,t){if(n.isEnabled())return n.watchElement(e,t);return T(t),{unbind:function(){w(t)}}}function E(e){i.bind(s,e)}function S(e){i.bind(u,e)}function T(e){i.bind(l,e)}function C(e){i.unbind(s,e)}function b(e){i.unbind(u,e)}function w(e){i.unbind(l,e)}f()}i.register("UIPopupOverlayManager").asCtor(Sd).dependencies("FlowsContainer, FlowStack, Consts, SpotlightChecker, FeaturesManager");function Sd(e,t,n,r,i){var o=this;o.shouldKeepOverlay=a;function a(r){if(!i.isFeatureEnabled(n.FEATURES.SWTConsecutivePopups))return!1;var o=t.peek(),a=e.getNodeById(o.flowId,o.stageId),d=s(a);if(d&&u(d)&&l(d))return c(o.flowId,r);return!1}function s(e){return e&&e.Type==n.FLOW_STEP_TYPE.UI&&e.UIElements[0]}function u(e){return e.Type==n.FLOW_UIELEMENT_TYPE.Popup}function l(e){return r.isSpotlight(e.Settings)}function c(t,n){var r=e.getNodeById(t,n),i=s(r);return i&&u(i)&&l(i)}}i.register("ElementInteractionEvents").asFunction(Td).dependencies("Consts, FeaturesManager");function Td(e,t){var n=[e.EVENT_SENDER_EVENT_TYPES.Click,e.EVENT_SENDER_EVENT_TYPES.Blur];return t.isFeatureEnabled("extendedEvents")&&(n.push(e.EVENT_SENDER_EVENT_TYPES.MouseEnter),n.push(e.EVENT_SENDER_EVENT_TYPES.Focus)),n}i.register("ElementInteractionEventsBinder").asCtor(Cd).asProto().dependencies("wmjQuerySafe, ElementInteractionEvents");function Cd(t,n){var r=this;r.bind=i,r.unbind=o;function i(t,r,i){var o=e(t);e(n).each(function(e,t){o.off(t+r),o.on(t+r,{eventName:t},a)});function a(e){i(e.data.eventName)}}function o(r,i){var o=t(r);e(n).each(function(e,t){o.off(t+i)})}}var bd=function(){function e(t,n,r,i,o,a,s,u){this.logger=t,this.consts=n,this.elementFinder=r,this.positionHelper=i,this.timerManager=o,this.uiChangeTracker=a,this.elementIframesAttachedIndicator=s,this._log=t.wrapCustomerLog(e.LOG_FEATURE),this._logContext=u.logContext,this._findElementParams=u.findElementParams,this._watchElementTimeoutTime=u.elementEvaluationIntervalMs||e.WATCH_ELEMENT_DEFAULT_TIMEOUT,this._trackUIChanges=u.trackUIChanges,u.element?(this._element=u.element,this._state=this.consts.VISIBILITY_STATE.VISIBLE):this._state=this.consts.VISIBILITY_STATE.HIDDEN}return e.prototype.evaluateElementVisibilityAsynch=function(t){this._log(cg("ElementVisibilityEvaluator evaluateElementVisibility for {0}",this._logContext),e.DEFAULT_LOG_LEVEL),this._isStopEvaluate=!1,this.handleUIChangeTracking(),this._watchElementTimeoutTime<0?t||this.evaluateElementVisibility():this.evaluateElementVisibilityAsynchLoop()},e.prototype.handleUIChangeTracking=function(){var e=this;this._trackUIChanges&&(this._onUIChange=function(){e._isStopEvaluate||e.evaluateElementVisibility()},this.uiChangeTracker.bind(this._onUIChange))},e.prototype.evaluateElementVisibility=function(){var t=this.findByState();return this._log(cg("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} new state is {1}",this._logContext,t),e.DEFAULT_LOG_LEVEL),t!=this._state&&(this._log(cg("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} state changed from {1} to {2}",this._logContext,this._state,t),e.DEFAULT_LOG_LEVEL),this.callOnValueChangeIfExist(t)),this._state=t,this.getElementVisibility()},e.prototype.getElementVisibility=function(){return this._state},e.prototype.calculateElementVisibility=function(){return this.findIfVisible()},e.prototype.getElement=function(){return this._element},e.prototype.setOnVisibilityChanged=function(e){this._onVisibilityChanged=e},e.prototype.cleanResources=function(){this._log(cg("ElementVisibilityEvaluator cleanResources for {0}",this._logContext),e.DEFAULT_LOG_LEVEL),this._elementTimeoutObject&&(this._elementTimeoutObject.clear(),this._elementTimeoutObject=void 0),this._state=this.consts.VISIBILITY_STATE.HIDDEN,this._isStopEvaluate=!0,this._watchElementTimeoutTime=e.WATCH_ELEMENT_DEFAULT_TIMEOUT,this._element=void 0,this._onVisibilityChanged=void 0,this.uiChangeTracker.unbind(this._onUIChange)},e.prototype.findByState=function(){var e;switch(this._state){case this.consts.VISIBILITY_STATE.VISIBLE:e=this.findIfHidden();break;case this.consts.VISIBILITY_STATE.HIDDEN:e=this.findIfVisible();break;default:this._log(cg("ElementVisibilityEvaluator findByState unknown state {0} for {1}",this._state,this._logContext),1)}return e},e.prototype.evaluateElementVisibilityAsynchLoop=function(){this.evaluateElementVisibility(),this.scheduleEvaluateElementVisibilityAsynchLoop()},e.prototype.scheduleEvaluateElementVisibilityAsynchLoop=function(){var e=this;this._isStopEvaluate||(this._elementTimeoutObject=this.timerManager.setWalkmeTimeout(function(){e.evaluateElementVisibilityAsynchLoop()},this._watchElementTimeoutTime))},e.prototype.findIfVisible=function(){var e=this,t=this.consts.VISIBILITY_STATE.HIDDEN;return this.elementFinder.wrapSession(function(){e._element=e.findElementByParams()}),this._element&&(t=this.consts.VISIBILITY_STATE.VISIBLE),t},e.prototype.findIfHidden=function(){var e,t=this.consts.VISIBILITY_STATE.HIDDEN;e=this._findElementParams.IdentifySettings?this._findElementParams.IdentifySettings.filter:void 0;var n=this.positionHelper.isElementVisible(this._element,e);return n&&this.elementIframesAttachedIndicator.areIframesAttached(this._element)&&(t=this.consts.VISIBILITY_STATE.VISIBLE),t},e.prototype.callOnValueChangeIfExist=function(e){this._onVisibilityChanged&&(this._log(cg("ElementVisibilityEvaluator callOnValueChangeIfExist calling onValueChange for {0}",this._logContext),5),this._onVisibilityChanged(e))},e.prototype.findElementByParams=function(){return this.elementFinder.findElement(this._findElementParams.IdentifySettings,this._findElementParams.isVisible,this._findElementParams.score,this._findElementParams.mode)},e.WATCH_ELEMENT_DEFAULT_TIMEOUT=-1,e.DEFAULT_LOG_LEVEL=3,e.LOG_FEATURE="elementVisibility",e}();i.register("ElementVisibilityEvaluator").asCtor(bd).asProto().dependencies("Logger, Consts, ElementFinder, PositionHelper, TimerManager, UIChangeTracker, ElementIframesAttachedIndicator"),i.register("ElementIframesAttachedIndicator").asCtor(wd);function wd(){var e=this;e.areIframesAttached=t;function t(e){try{for(var t=!0,n=e.data("iframe");n&&t;)t=t&&n&&n.parents("html").length>0,n=n.data("iframe");return t}catch(r){return!1}}}i.register("UIElementVisibilityAttributes").asCtor(Id).dependencies("Consts, CommonUtils");function Id(e,t){var n=this;n.getStickyType=r,n.getIsRemoveByCondition=i;function r(n){var r=t.getSettingsValue(n,e.IS_STICKY_SETTING_KEY,!1),i=e.STICKY_TYPE.ONCE;if(r){var o=parseInt(t.getSettingsValue(n,e.STICKINESS_TYPE_SETTING_KEY,null));i=o==e.OLD_STICKIES.STICKINESS_TYPES.soft?e.STICKY_TYPE.SOFT:e.STICKY_TYPE.STRONG}return i}function i(e){return void 0==e.condHide?!!e.isEvaluationFrequency:!!e.condHide}}i.register("UiElementPositionTracker").asCtor(Pd).asProto().dependencies("ElementPositionCalculator, UIChecksTriggerer");function Pd(e,t,n){var r=this;r.track=l,r.destroy=f;var i,o,a,s;function u(){i=n.element,o=n.positionChangedCallback,a=n.embedmentType}function l(){s=e.getElementPosition(a,i),t.bindCheckIfShouldHideOrReposition(c)}function c(){var t=e.getElementPosition(a,i);d(t)&&(s=t,o&&o())}function d(e){return s.top!=e.top||s.left!=e.left||s.height!=e.height||s.width!=e.width}function f(){t.unbindCheckIfShouldHideOrReposition(c)}u()}i.register("UiElementPositionTrackerCreator").asCtor(_d).dependencies("EmbedmentTypeProvider");function _d(e){var t=this;t.create=r;function n(){}function r(t,n){var r=!1,o=e.get(r,t),a={element:t,positionChangedCallback:n,embedmentType:o};return i.create("UiElementPositionTracker",a)}n()}i.register("UiWindowSizeTracker").asCtor(kd).asProto().dependencies("win, Consts, CommonUtils, wmjQuery");function kd(e,t,n,r,i){var o=this;o.track=d,o.destroy=f;var a,s,u,l;function c(){a=i.callback}function d(){l=n.registerEventHandler(t.WINDOW_EVENTS.Resize,p,!1,e)}function f(){l&&l()}function p(e){if(!g())return;a.apply(void 0,arguments)}function g(){var t=r(e),n=t.width(),i=t.height(),o=s!=n||u!=i;return s=n,u=i,o}c()}i.register("UiChangesTrackerWrapper").asCtor(Ad).asProto().dependencies("EmbedmentTypeProvider");function Ad(e){var t,n,r=this;r.trackChanges=o,r.stopTrackingChanges=a;function o(e){s(e),t.track(),e.isEmbedInElement||(u(e),n.track())}function a(){t&&t.destroy(),n&&n.destroy(),n=null}function s(e){var e={callback:e.callback};t=i.create("UiWindowSizeTracker",e)}function u(t){var t={embedmentType:e.get(!1,t.element),element:t.element,positionChangedCallback:t.callback};n=i.create("UiElementPositionTracker",t)}}function Dd(e){var t=this;t.createUIElement=a;var n={};function r(){o()}function o(){n[e.FLOW_UIELEMENT_TYPE.Popup]=s,n[e.FLOW_UIELEMENT_TYPE.Element]=u}function a(e){return n[e.Type](e)}function s(e){return i.create("UIPopUpBalloon",e)}function u(e){return i.create("UIElementBalloon",e)}r.apply(null,arguments)}i.register("UIElementFactory").asCtor(Dd).dependencies("Consts"),i.register("FlowBalloonDisplayer").asCtor(Od).asProto().dependencies("Logger, SiteConfigManager, Consts, PositionHelper, FlowStack, BalloonDrawerProvider, BBCodeEventsBinder,FlowDataPersister, ComplexHtmlElementsProvider, FlowVisualStepsIndicator, FeaturesManager");function Od(t,n,r,o,a,s,u,l,c,d,f,p){var g=this;g.showAndWaitForTrigger=A,g.destroy=D;var h,m,v,y,E,S,T,C,b,w,I,P=3,_=r.FEATURES_LOGS.Flows;function k(){v=p.uiElement,E=v.Triggers,y={title:v.Title,content:v.Text,subText:W()},m=v.Id,S=p.balloonButtons,T=p.stepType,I=!1}function A(n){return h=e.Deferred(),t.customerLog(cg("FlowBalloonDisplayer showUIElement showing balloon {0}",m),P,_),w=n,N(),h.promise()}function D(){var t=e.Deferred();return O(function(){t.reject({wasElementShown:I})}),t.promise()}function O(e){R(),U(e)}function N(){var d=n.get(),f=d.BalloonSettings,p=s.getBalloonDrawer(f,v),g=a.peek().flowId;v.Settings.customButtons=e.map(S,function(e){return e.template});var m,E=c.getComplexHtmlElements({Settings:v.Settings},w);E&&(m=E.parentElement,w=E.elements),C=i.create("Balloon",{element:w,parentElement:m,position:v.Settings.Position,stepSettings:v.Settings,logger:t,isFirstStep:l.getIsFirstVisualStep(),text:y,configuration:f,siteConfig:d,data:{balloonEntityId:v.Id,containerEntityId:g,type:T,containerEntityType:"flow",balloonEntityType:"flow-balloon"},positionHelper:o,drawer:p,placeholderConfigurations:v.DesignTemplatePlaceholderConfigs,placeholderVariableValues:G(),initiatorData:{initiator:v,type:r.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP},bindButtonsFunc:function(e,t){x(e,S),u.bind(e,void 0,t)}}),C.Show(!0,function(e,t){I=!0,C.SetTimeoutOn(),h.notify("stageShown",{uiElementId:v.Id,siteElement:w})})}function x(e,t){V(),L(e);for(var n=[],r=0;r<E.length;r++)n.push({element:w,balloonDiv:e,logContext:m,balloonButtons:t,trigger:E[r],uiElementId:v.Id});var o={uiElementType:v.Type,triggers:n,uiElement:v};b=i.create("UITriggersManager",o),b.listen().then(M,B)}function L(e){F(e).on("click"+r.FLOW_TRIGGER_WORKSPACE,function(){B(!0)}),e.bind("click mousedown mouseup",function(e){e.stopPropagation()})}function F(t){return e(".walkme-action-close, .walkme-action-cancel",t)}function M(e){h.resolve(e),t.customerLog(cg("FlowBalloonDisplayer OnTrigger was called but no triggers were found for uiElement {0}",m),1,_)}function B(e){h.reject({wasElementShown:I,wasClosedByUser:e})}function R(){if(!C)return;var e=C.getBalloonDiv();F(e).off("click"+r.FLOW_TRIGGER_WORKSPACE),e.unbind("click mousedown mouseup")}function U(e){V(),C?C.destroy(!1,e):e&&e()}function V(){b&&(b.destroy(),b=void 0)}function W(){var e=G(),t=e.totalVisibleSteps,i=e.passedVisibleSteps,o=n.get().StepsInfoText;return f.isFeatureEnabled("floatingsubtext")?(o=o.replace("{0}",r.SUBTEXT_CURRENT_START+i+r.SUBTEXT_CURRENT_END),o=o.replace("{1}",r.SUBTEXT_TOTAL_START+t+r.SUBTEXT_TOTAL_END)):(o=o.replace("{0}",i),o=o.replace("{1}",t)),o}function G(){return{totalVisibleSteps:d.getTotalVisualSteps(),passedVisibleSteps:d.getNextVisualStepIndex(v.Id)}}k.apply(null,arguments)}i.register("UIPopUpBalloon").asCtor(Nd).asProto().dependencies("PopupStepElementProvider, UiUtils, Consts, FlowPopupBalloonButtonsProvider, UIPopupOverlayManager");function Nd(e,t,n,r,o,a){var s=this;s.show=g,s.destroy=h;var u,l,c,d,f="UIPopUpBalloon";function p(){l=a.Id,d=e.get();var t={uiElement:a,balloonButtons:y(),stepType:n.STEP_TYPE.Popup};c=i.create("FlowBalloonDisplayer",t),u=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function g(){return u.customerLog("{0}: Show Popup Balloon with id {1} step index {2}",f,l,a.PointIndex),c.showAndWaitForTrigger(d).done(m).fail(v)}function h(){return u.customerLog("{0}: Destroy Popup Balloon with id {1} step index {2}",f,l,a.PointIndex),c.destroy()}function m(e){e.nextStageId&&o.shouldKeepOverlay(e.nextStageId)||v()}function v(){t.removeOverlay()}function y(){return r.getButtons(a)}p.apply(null,arguments)}i.register("UIElementBalloon").asCtor(xd).asProto().dependencies("Consts, FlowElementBalloonButtonsProvider");function xd(t,n,r){var o=this;o.show=v,o.destroy=y;var a,s,u,l,c,d,f,p,g,h="UIElementBalloon";function m(){c=r.Id,d=r.PointIndex,r.score={};var e={uiElement:r,balloonButtons:T(),stepType:t.STEP_TYPE.Normal};f=i.create("FlowBalloonDisplayer",e),g=i.create("UiElementVisibilityManager",{uiElement:r,isSticky:E(),onShow:C,onRemove:w,onError:y}),l=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function v(){return l.customerLog("{0}: Show Balloon - Calling visibility manager for ui element with id {1} step index {2}",h,c,d),p=e.Deferred(),a=p.resolve,s=p.reject,u=p.notify,g.evaluateAsync(),p.promise().always(S)}function y(){return S(),w().always(s)}function E(){return void 0===r.IsSticky||r.IsSticky}function S(){g.cleanResources()}function T(){return n.getButtons(r)}function C(e){l.customerLog("{0}: showUIElement showing balloon with id {1} step index {2}",h,c,d),f.showAndWaitForTrigger(e).then(a).progress(u).fail(b)}function b(e){e.wasClosedByUser&&s(e)}function w(){return l.customerLog("{0}: removeUIElement removing balloon with id {1} step index {2}",h,c,d),f.destroy()}m.apply(null,arguments)}i.register("UiElementVisibilityManager").asCtor(Ld).asProto().dependencies("Consts, FlowDataPersister");function Ld(e,t,n){var r=this;r.evaluateAsync=p,r.cleanResources=f;var o,a,s,u,l,c=500;function d(){a=n.uiElement,s=n.onShow,u=n.onRemove,l=n.onError;var e={logContext:a.Id,findElementParams:{IdentifySettings:a.IdentifySettings,score:a.score},trackUIChanges:!0,elementEvaluationIntervalMs:n.isSticky?c:void 0};o=i.create("ElementVisibilityEvaluator",e)}function f(){o&&(o.cleanResources(),o=void 0)}function p(){t.getIsFirstVisualStep()?g():h()}function g(){var t=o.calculateElementVisibility();t==e.VISIBILITY_STATE.VISIBLE?h():(f(),l())}function h(){o.setOnVisibilityChanged(m),o.evaluateElementVisibilityAsynch()}function m(t){switch(t){case e.VISIBILITY_STATE.VISIBLE:s(o.getElement());break;case e.VISIBILITY_STATE.HIDDEN:u()}}d()}i.register("FlowElementBalloonButtonsProvider").asCtor(Fd).dependencies("UiFlowNodesExecutionStack, FlowBackBalloonButtonProvider, FlowContinueBalloonButtonProvider");function Fd(e,t,n){var r=this;r.getButtons=i;function i(e){var r=[],i=n.getContinueButton(e);return i&&(r.push(i),o()&&r.unshift(t.get())),r}function o(){return!e.isEmpty()}}i.register("FlowPopupBalloonButtonsConfigProvider").asCtor(Md).dependencies("Consts, UiFlowNodesExecutionStack, FlowBackBalloonButtonProvider, FlowContinueBalloonButtonProvider, FlowStartBalloonButtonProvider, FlowCancelBalloonButtonProvider");function Md(e,t,n,r,i,o){var a=this;a.get=u;var s={Cancel:{getButton:o.get,order:1},Back:{getButton:n.get,canAdd:l,order:2},"Next/Done":{getButton:function(e){return r.getContinueButton(e)},order:3},Start:{getButton:i.get,order:4}};function u(){return s}function l(){return!t.isEmpty()}}i.register("FlowPopupBalloonButtonsProvider").asCtor(Bd).dependencies("FlowPopupBalloonButtonsConfigProvider");function Bd(e){var t=this;t.getButtons=i;var n;function r(){n=e.get()}function i(e){for(var t=[],n=o(e),r=0;r<n.length;r++){var i=n[r];i.canAdd&&!i.canAdd()||t.push(i.getButton(e))}return t}function o(e){for(var t=[],r=e.Settings.popupStepButtons,i=0;i<r.length;i++){var o=n[r[i].name];t.push(o)}return t.sort(function(e,t){return e.order-t.order})}r()}i.register("FlowBackBalloonButtonProvider").asCtor(Rd).dependencies("Consts, UiFlowNodesExecutionStack, BalloonButtonDataGenerator");function Rd(e,t,n){var r=this;r.get=i;function i(){var t={selector:".walkme-action-back",template:n.generateWithoutBackground(e.BALLOON_BUTTON_TYPE.Back),action:o};return t}function o(e,n){n.resolve({nextStageId:t.pop(),isFlowGoingBack:!0})}}i.register("FlowCancelBalloonButtonProvider").asCtor(Ud).dependencies("Consts, WelcomeBalloonButtonDataGenerator");function Ud(e,t){var n=this;n.get=r;function r(){var n={selector:".walkme-action-cancel",template:t.generateWithoutBackground(e.BALLOON_BUTTON_TYPE.Cancel),action:i};return n}function i(e,t){t.reject({wasElementShown:!0,wasClosedByUser:!0})}}i.register("ButtonTriggersProvider").asCtor(Vd).dependencies("Consts");function Vd(t){var n=this;n.get=r;function r(n){return e(n.Triggers).filter(function(e,n){return n.Type==t.FLOW_TRIGGER_TYPE.Button})}}i.register("FlowContinueBalloonButtonProvider").asCtor(Wd).dependencies("ButtonTriggersProvider, FlowNodePlayIndicator, FlowNextBalloonButtonProvider, FlowDoneBalloonButtonProvider, CommonUtils, FlowGroupLastStageIndicator, FlowStack");function Wd(e,t,n,r,i,o,a){var s=this;s.getContinueButton=l;function u(){}function l(t){var i=a.peek().flowId,s=e.get(t);if(0==s.length)return;var u=o.isPreviousGroupHasNextStage(),l=c(i,s);return u||l?n.get():r.get()}function c(e,t){return i.doesAnyMeetCondition(t,function(t){return d(e,t)})}function d(e,n){if(!n.TargetFlowNodeId)return!1;var r=t.isPlayable(e,n.TargetFlowNodeId);return r}u()}i.register("FlowContinueBalloonButton").asFunction(Gd).asProto().dependencies("");function Gd(e){var t={selector:e.selector,template:e.template,action:n};return t;function n(e,t){t.resolve({nextStageId:e.TargetFlowNodeId})}}i.register("FlowDoneBalloonButtonProvider").asCtor(Hd).dependencies("Consts, BalloonButtonDataGenerator");function Hd(e,t){var n=this;n.get=r;function r(){var n={selector:".walkme-action-done",template:t.generate(e.BALLOON_BUTTON_TYPE.Done)};return i.create("FlowContinueBalloonButton",n)}}i.register("FlowNextBalloonButtonProvider").asCtor(jd).dependencies("Consts, BalloonButtonDataGenerator");
function jd(e,t){var n=this;n.get=r;function r(){var n={selector:".walkme-action-next, .walkme-action-start",template:t.generate(e.BALLOON_BUTTON_TYPE.Next)};return i.create("FlowContinueBalloonButton",n)}}i.register("FlowStartBalloonButtonProvider").asCtor(Yd).dependencies("Consts, WelcomeBalloonButtonDataGenerator");function Yd(e,t){var n=this;n.get=r;function r(){var n={selector:".walkme-action-start",template:t.generate(e.BALLOON_BUTTON_TYPE.Start)};return i.create("FlowContinueBalloonButton",n)}}i.register("ClickTriggersListCreator").asCtor(zd).dependencies("FeaturesManager");function zd(e){var t=this;t.get=n;function n(){var t=["click","mousedown","mouseup"];return e.isFeatureEnabled("ipad_touch_as_click")&&t.push("touchstart"),e.isFeatureEnabled("noFocusTrigger")||e.isFeatureEnabled("wmAccessibility")||t.push("focus"),t}}i.register("UITriggersManager").asCtor(Qd).asProto().dependencies("UITriggersFactory, FlowPlayerMetadata, Consts, MockDelayTriggerProvider");function Qd(t,n,r,i,o){var a=this,s=[];a.listen=g,a.destroy=h;var u={},l=[r.FLOW_TRIGGER_TYPE.Button];function c(){u[r.FLOW_TRIGGER_TYPE.PeerStep]=!0;for(var e=0;e<o.triggers.length;e++)u[o.triggers[e].trigger.Type]||(s=s.concat(d(o.triggers[e])))}function d(e){var t=[];return f(t,e),p(e.trigger)&&f(t,i.createMockDelayTriggerParams(e)),t}function f(e,n){e.push({trigger:t.createUITrigger(n),data:n.trigger})}function p(t){return e.inArray(t.Type,l)>-1&&o.uiElementType==r.FLOW_UIELEMENT_TYPE.Popup&&t.Settings&&t.Settings.Duration>=0}function g(){for(var t=e.Deferred(),n=0;n<s.length;n++){var r=s[n].trigger,i=s[n].data;m(r,i,t)}return t.promise()}function h(){for(var e=0;e<s.length;e++)s[e].trigger.destroy()}function m(t,n,r){t.listen().then(v(n)).then(function(t){t=e.extend({firedTrigger:n,uiElementId:o.uiElement.Id},t),r.resolve(t)})}function v(e){return function(t){return n.lastTriggerFired=e,t}}c.apply(null,arguments)}i.register("UITriggersFactory").asCtor(qd).dependencies("Consts, UITriggerTransitionDelayer");function qd(t,n){var r=this;r.createUITrigger=c;var o={},a=[{triggerName:t.FLOW_TRIGGER_TYPE.Click,className:"ClickUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Hover,className:"HoverUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Text,className:"TextUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Delay,className:"DelayUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.PageChanged,className:"PageChangedUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Button,className:"ButtonUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.SelectAny,className:"SelectAnyUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.SelectValue,className:"SelectValueUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.BbCode,className:"BBCodeUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Custom,className:"CustomUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Swipe,className:"SwipeUITrigger"}];function s(){u()}function u(){e.each(a,function(e,t){o[t.triggerName]=l(t)})}function l(e){return function(t){var r=i.create(e.className,t);return n.addDelay(r,e.triggerName),r}}function c(e){return o[e.trigger.Type](e)}s.apply(null,arguments)}i.register("UITriggerTransitionDelayer").asCtor(Kd).dependencies("FlowTransitionDelayer");function Kd(e){var t=this;t.addDelay=n;function n(e,t){e.listen=r(e.listen,e,t)}function r(t,n,r){return function(){return t().then(function(t){return e.setDelayByTrigger(n,r),t})}}}i.register("UITriggerEventBindingService").asCtor(Xd).dependencies("Consts, wmjQuerySafe");function Xd(e,t){var n=this;n.getFullEventNames=r,n.bindEventsToElement=i,n.unbindEventsFromElement=o;function r(t){for(var n=[],r=0;r<t.length;r++)n.push(t[r]+e.FLOW_TRIGGER_WORKSPACE);return n}function i(e,t,n,r){for(var i=0;i<t.length;i++){function o(e){function t(t){var i=r&&r[e];if(i&&!i(t))return;n(t)}return t}e.on(t[i],o(t[i]))}}function o(e,n){for(var r=t(e),i=0;i<n.length;i++)r.off(n[i])}}i.register("TriggerTimeoutService").asCtor(Jd).dependencies("TimerManager");function Jd(e){var t=this;t.createTimeout=r,t.cleanTimeout=i;var n={};function r(t,r,i,o){var a=e.setWalkmeTimeout(function(){i.customerLog("{0}: Executing {1} trigger with id {2} for {3} seconds to target node id {4}",o,r.Name,r.Id,r.Settings.Duration,r.TargetFlowNodeId),t.resolve({nextStageId:r.TargetFlowNodeId})},1e3*r.Settings.Duration);n[r.Id]=a}function i(e){var t=n[e.Id];t&&(t.clear(),t=null,delete n[e.Id])}}i.register("MockDelayTriggerProvider").asCtor($d).dependencies("Consts");function $d(t){var n=this;n.createMockDelayTriggerParams=r;function r(n){var r=e.extend(!0,{},n),i=n.trigger;return r.trigger={Type:t.FLOW_TRIGGER_TYPE.Delay,Id:"mock_delay_"+i.Id,Name:i.Name,TargetFlowNodeId:i.TargetFlowNodeId,Settings:{Duration:i.Settings.Duration}},r}}i.register("ClickUITrigger").asCtor(Zd).asProto().dependencies("UITriggerEventBindingService, ClickTriggersListCreator, Consts");function Zd(t,n,r,o){var a,s,u,l=this,c=[],d="ClickUITrigger";l.listen=p,l.destroy=g;function f(){a=o.element,s=o.trigger;var e=n.get();c=t.getFullEventNames(e),u=i.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function p(){var n=e.Deferred();return u.customerLog("{0}: Listening to Click trigger with id {1}",d,s.Id),t.bindEventsToElement(a,c,r),n.promise();function r(){u.customerLog("{0}: Executing Click trigger with id {1} to target node id {2}",d,s.Id,s.TargetFlowNodeId),n.resolve({nextStageId:s.TargetFlowNodeId})}}function g(){u.customerLog("{0}: Destroying Click trigger with id {1}",d,s.Id),t.unbindEventsFromElement(a,c)}f.apply(null,arguments)}i.register("HoverUITrigger").asCtor(ef).asProto().dependencies("UITriggerEventBindingService, Consts");function ef(t,n,r){var o,a,s,u=this,l=[],c="HoverUITrigger",d=["mouseenter"];u.listen=p,u.destroy=g;function f(){o=r.element,a=r.trigger,l=t.getFullEventNames(d),s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function p(){var n=e.Deferred();s.customerLog("{0}: Listening to Hover trigger with id {1}",c,a.Id);var r=function(){s.customerLog("{0}: Executing Hover trigger with id {1} to target node id {2}",c,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId})};return t.bindEventsToElement(o,l,r),n.promise()}function g(){s.customerLog("{0}: Destroying Hover trigger with id {1}",c,a.Id),t.unbindEventsFromElement(o,l)}f.apply(null,arguments)}i.register("TextUITrigger").asCtor(tf).asProto().dependencies("UITriggerEventBindingService, TimerManager, Consts, FeaturesManager");function tf(t,n,r,o,a){var s,u,l,c,d=this,f=[],p=[],g="TextUITrigger",h=["keydown","change"],m=["paste"],v=800,y=9,E=16;d.listen=T,d.destroy=b;function S(){s=a.element,u=a.trigger,f=t.getFullEventNames(h),p=t.getFullEventNames(m),c=i.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function T(){var n=e.Deferred();c.customerLog("{0}: Listening to Text trigger with id {1}",g,u.Id);var r=C();return t.bindEventsToElement(s,f,function(){w(n)},r),t.bindEventsToElement(s,p,function(){I(n)}),n.promise()}function C(){var e={};if(o.isFeatureEnabled("wmAccessibility")){var n=t.getFullEventNames(["keydown"]);function r(e){return e.which!=y&&e.which!=E}e[n]=r}return e}function b(){c.customerLog("{0}: Destroying Text trigger with id {1}",g,u.Id),P(),t.unbindEventsFromElement(s,f),t.unbindEventsFromElement(s,p)}function w(e){P(),l=n.libSetTimeout(function(){I(e)},v)}function I(e){c.customerLog("{0}: Executing Text trigger with id {1} to target node id {2}",g,u.Id,u.TargetFlowNodeId),e.resolve({nextStageId:u.TargetFlowNodeId})}function P(){l&&l.clear()}S.apply(null,arguments)}i.register("DelayUITrigger").asCtor(nf).asProto().dependencies("TriggerTimeoutService, Consts");function nf(t,n,r){var o,a,s,u=this,l="DelayUITrigger";u.listen=d,u.destroy=f;function c(){o=r.element,a=r.trigger,s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function d(){var n=e.Deferred();return s.customerLog("{0}: Listening to Delay trigger with id {1}",l,a.Id),t.createTimeout(n,a,s,l),n.promise()}function f(){s.customerLog("{0}: Destroying bbCode trigger with id {1}",l,a.Id),t.cleanTimeout(a)}c.apply(null,arguments)}i.register("PageChangedUITrigger").asCtor(rf).dependencies("Consts, FlowDataPersister").asProto();function rf(t,n,r){var o=this;o.listen=c,o.destroy=d;var a,s,u;function l(){a=r.element,s=r.trigger,u=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function c(){var t=e.Deferred();return n.saveWaitingForRefreshTrigger({refreshTrigger:s.TargetFlowNodeId,firedTrigger:s,uiElementId:r.uiElementId}),t.promise()}function d(){n.clearWaitingForRefreshTrigger()}l.apply(null,arguments)}i.register("ButtonUITrigger").asCtor(of).asProto().dependencies("Consts");function of(t,n){var r=this;r.listen=c,r.destroy=d;var o,a,s,u="ButtonUITrigger";function l(){o=n.balloonButtons,a=n.trigger;for(var e=0;e<o.length;e++)o[e].buttonElement=h(o[e].selector,n.balloonDiv);s=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function c(){return s.customerLog("{0}: Listening to Next trigger with id {1}",u,a.Id),f()}function d(){s.customerLog("{0}: Destroying Next trigger with id {1}",u,a.Id),g()}function f(){for(var t=e.Deferred(),n=0;n<o.length;n++){var r=o[n];p(r,t)}return t.promise()}function p(e,n){e.buttonElement.on("click"+t.FLOW_TRIGGER_WORKSPACE,function(){s.customerLog("{0}: Executing Next trigger with id {1} to target node id {2}",u,a.Id,a.TargetFlowNodeId),e.action(a,n)})}function g(){for(var e=0;e<o.length;e++)o[e].buttonElement&&(o[e].buttonElement.off("click"+t.FLOW_TRIGGER_WORKSPACE),o[e].buttonElement=void 0)}function h(t,n){var r=e(t,n);return r}l.apply(null,arguments)}i.register("SelectAnyUITrigger").asCtor(af).asProto().dependencies("UITriggerEventBindingService, Consts");function af(t,n,r){var o,a,s,u=this,l=[],c="SelectAnyUITrigger",d=["change"];u.listen=p,u.destroy=g;function f(){o=r.element,a=r.trigger,l=t.getFullEventNames(d),s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function p(){var n=e.Deferred();s.customerLog("{0}: Listening to Select Any trigger with id {1}",c,a.Id);var r=function(){s.customerLog("{0}: Executing Select Any trigger with id {1} to target node id {2}",c,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId})};return t.bindEventsToElement(o,l,r),n.promise()}function g(){s.customerLog("{0}: Destroying Select Any trigger with id {1}",c,a.Id),t.unbindEventsFromElement(o,l)}f.apply(null,arguments)}i.register("SelectValueUITrigger").asCtor(sf).asProto().dependencies("UITriggerEventBindingService, Consts");function sf(t,n,r){var o,a,s,u,l=this,c=[],d="SelectValueUITrigger",f=["change"];l.listen=g,l.destroy=h;function p(){o=r.element,a=r.trigger,s=a.Settings.complexHtml,c=t.getFullEventNames(f),u=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function g(){var n=e.Deferred();u.customerLog("{0}: Listening to Select Value trigger with id {1}",d,a.Id);var r=function(e){var t;t="option"==e.target.tagName.toLowerCase()?e.target:e.target.options[e.target.selectedIndex],t.value!=s.val&&t.text!=s.txt||(u.customerLog("{0}: Executing Select Value trigger with id {1} to target node id {2}",d,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId}))};return t.bindEventsToElement(o,c,r),n.promise()}function h(){u.customerLog("{0}: Destroying Select Value trigger with id {1}",d,a.Id),t.unbindEventsFromElement(o,c)}p.apply(null,arguments)}i.register("BBCodeUITrigger").asCtor(uf).asProto().dependencies("Consts, CommonEvents");function uf(t,n,r){var o,a,s,u,l,c=this,d="BBCodeUITrigger";c.listen=p,c.destroy=g;function f(){o=r.element,a=r.trigger,s=r.balloonDiv,l=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function p(){var t=e.Deferred();return l.customerLog("{0}: Listening to BBCode trigger with id {1}",d,a.Id),h(t),t.promise()}function g(){l.customerLog("{0}: Destroying BBCode trigger with id {1}",d,a.Id),m()}function h(r){var i=a.Settings.bbCodeId;u=e(".trg-"+i,s),u.on("click"+t.FLOW_TRIGGER_WORKSPACE,function(){l.customerLog("{0}: Executing BBCode trigger with id {1} and bbCode id {2} to target node id {3}",d,a.Id,a.Settings.bbCodeId,a.TargetFlowNodeId),r.resolve({nextStageId:a.TargetFlowNodeId})}),n.raiseEvent(t.EVENTS.RegisterBBCodeDeployableClick,{element:u})}function m(){u.off("click"+t.FLOW_TRIGGER_WORKSPACE)}f.apply(null,arguments)}i.register("CustomUITrigger").asCtor(lf).asProto().dependencies("Consts,ConditionCheckerFactory, ConditionTreeTraverser, FlowTransitionDelayerDefaultMap");function lf(t,n,r,o,a){var s,u,l,c=this,d="CustomUITrigger";c.listen=p,c.destroy=m,c.getDelay=g;function f(){s=a.trigger,l=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function p(){var t=e.Deferred();l.customerLog("{0}: Listening to Custom trigger with id {1}",d,s.Id);var r=s.ConditionTrees.CustomTrigger,i={evaluationPollingIntervalMs:500,featureName:"Custom Trigger",elementName:"Custom Trigger: "+s.Name};return u=n.createNew(i),u.onValueChanged(function(e){if(e)return l.customerLog("{0}: Executing Custom trigger with id {1} to target node id {2}",d,s.Id,s.TargetFlowNodeId),t.resolve({nextStageId:s.TargetFlowNodeId})}),u.evaluateAsync(r),t.promise()}function g(){if(h())return o[t.FLOW_TRIGGER_TYPE.Click]}function h(){return r.containsFuncName(s.ConditionTrees.CustomTrigger,["jQueryClickedSticky","ElementClickedSticky"])}function m(){l.customerLog("{0}: Destroying Custom trigger with id {1}",d,s.Id),u&&(u.cleanResources(),u=void 0)}f.apply(null,arguments)}i.register("SwipeUITrigger").asCtor(cf).asProto().dependencies("UITriggerEventBindingService, Consts");function cf(t,n,r){var o,a,s,u=this,l=[],c="SwipeUITrigger";u.listen=f,u.destroy=p;function d(){o=r.element,a=r.trigger,l=t.getFullEventNames(["swipe"]),s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function f(){var n=e.Deferred();s.customerLog("{0}: Listening to Swipe trigger with id {1}",c,a.Id);var r=function(){s.customerLog("{0}: Executing Swipe trigger with id {1} to target node id {2}",c,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId})};return t.bindEventsToElement(o,l,r),n.promise()}function p(){s.customerLog("{0}: Destroying Swipe trigger with id {1}",c,a.Id),t.unbindEventsFromElement(o,l)}d.apply(null,arguments)}i.register("StatesMachine").asCtor(df).asProto().dependencies("TimerManager, CommonUtils");function df(e,t,n){var r=this;r.evaluate=h,r.reset=g;var i,o,a,s,u,l,c,d,f;function p(){s=n.initState,o=n.transitions||[],a=n.timedOutTransitions||[],f=n.defaultTransitionValuesToReturn||[],u=n.globalActionFlags||{},c=n.onStateChangedCallback||function(){},g()}function g(){i=s,l={}}function h(e,t){m(e),v(e);var n=b(e);n&&E(n,t)}function m(e){u[e]&&u[e].addFlag&&y(u[e].addFlag,function(e){l[e]=!0})}function v(e){u[e]&&u[e].removeFlag&&y(u[e].removeFlag,function(e){delete l[e]})}function y(e,t){for(var n=0;n<e.length;n++){var r=e[n];t(r)}}function E(e,t){k(),T(e,t);var n=S(e);n&&_(function(){T(n,t)},n.timeout)}function S(e){for(var t=0;t<a.length;t++){var n=a[t];if(n.fromState==e.toState)return n}return null}function T(e,t){i=e.toState;var n=C(e);c(e.toState,n,t)}function C(e){if(e.valueToReturn)return e.valueToReturn;if(f)for(var t=0;t<f.length;t++){var n=f[t],r=!n.fromState||n.fromState==e.fromState,i=!n.toState||n.toState==e.toState;if(r&&i)return n.valueToReturn}return null}function b(e){for(var t=0;t<o.length;t++){var n=o[t],r=w(n,e);if(r)return n}return null}function w(e,t){var n=("*"==e.fromState||e.fromState==i)&&e.onAction==t;if(!n)return!1;var r=!e.ifFlagged||I(e.ifFlagged),o=!e.ifNotFlagged||P(e.ifNotFlagged),a=r&&o;return a}function I(e){return t.doesAnyMeetCondition(e,function(e){return void 0!=l[e]})}function P(e){return t.doAllMeetCondition(e,function(e){return void 0==l[e]})}function _(t,n){d=e.libSetTimeout(t,n)}function k(){d&&d.clear()}p()}i.register("StatesMachineCreator").asCtor(ff);function ff(){var e=this;e.create=n;function t(){}function n(e){return i.create("StatesMachine",e)}t.apply(null,arguments)}i.register("StagesFactory").asCtor(pf).dependencies("Logger, ActionStagesFactory, Consts");function pf(e,t,n){var r=this;r.createStage=a;var o=n.FEATURES_LOGS.Flows;function a(r){switch(r.Type){case n.FLOW_STEP_TYPE.UI:return i.create("UIFlowStage",r);case n.FLOW_STEP_TYPE.Action:return t.createActionStage(r);default:e.customerLog(cg("StagesFactory getStage - Unknown flow node type: {0}",r.FlowNodeType),1,o)}}}i.register("StageCreator").asCtor(gf).dependencies("StagesFactory");function gf(e){var t=this;t.createStage=n;function n(t,n){var r=t.Nodes[n];return r?e.createStage(r):void 0}}i.register("UIFlowStage").asCtor(hf).asProto().dependencies("UIElementFactory, CommonUtils, FlowDataPersister, Consts, FlowEventRaiser");function hf(t,n,r,o,a,s){var u=this;u.execute=g,u.destroy=h,u.Id=s.Id;var l,c=0,d=[],f="UIFlowStage";function p(){l=i.create("FeaturedLogger",{feature:o.FEATURES_LOGS.Flows});for(var e=0;e<s.UIElements.length;e++)d.push(t.createUIElement(s.UIElements[e]))}function g(){l.customerLog("{0}: Executing UI step with id {1}",f,u.Id);var t=e.Deferred();a.raiseEventOnCurrentFlow(o.EVENTS.Flows.LookingForElement,{step:s});for(var n=0;n<d.length;n++)m(t,d[n].show);return t.promise()}function h(){l.customerLog("{0}: Destroying UI step with id {1}",f,u.Id);var t=e.Deferred();return n.executeParallel({objectsArray:d,functionsToExecute:[function(e,t){e.destroy().then(function(){},t)}],successCallback:function(e){t.resolve(e)}}),d.length=0,t.promise()}function m(e,t){t().progress(function(t,n){var r=E(n.uiElementId);a.raiseEventOnCurrentFlow(o.EVENTS.Flows.UiElementFound,{step:s,score:r.score});var i={id:u.Id,uiElementId:n.uiElementId,triggers:r.Triggers,siteElement:n.siteElement};e.notify(t,i)}).then(function(t){v(e,t)},function(t){y(e,t)})}function v(e,t){l.customerLog("{0}: UI step - Moving to next step. From step id {1} to step id {2}",f,u.Id,t.nextStageId),r.saveIsFirstVisualStep(!1),e.resolve(t)}function y(e,t){l.customerLog("{0}: Balloon was closed for UI step with id {1}, params {2}",f,u.Id,n.toJSON(t)),c++,(t.wasClosedByUser||c==d.length)&&e.reject(t)}function E(e){for(var t=0;t<s.UIElements.length;t++)if(s.UIElements[t].Id==e)return s.UIElements[t]}p.apply(null,arguments)}i.register("ActionStagesFactory").asCtor(mf).dependencies("Consts");function mf(e){var t=this;t.createActionStage=a;var n={};function r(){o()}function o(){n[e.FLOW_ACTION_TYPE.ConnectToBizflow]=s,n[e.FLOW_ACTION_TYPE.Delay]=u,n[e.FLOW_ACTION_TYPE.OpenMenu]=l,n[e.FLOW_ACTION_TYPE.PassOwnership]=c,n[e.FLOW_ACTION_TYPE.Redirect]=d,n[e.FLOW_ACTION_TYPE.Refresh]=f,n[e.FLOW_ACTION_TYPE.Style]=p,n[e.FLOW_ACTION_TYPE.SetData]=g,n[e.FLOW_ACTION_TYPE.Split]=h,n[e.FLOW_ACTION_TYPE.Stop]=m,n[e.FLOW_ACTION_TYPE.WaitForCondition]=v,n[e.FLOW_ACTION_TYPE.OnPageAction]=y,n[e.FLOW_ACTION_TYPE.ErrorHandling]=E}function a(e){return n[e.ActionType](e)}function s(e){return i.create("BranchActionStage",e)}function u(e){return i.create("DelayActionStage",e)}function l(e){return i.create("OpenMenuActionStage",e)}function c(e){return i.create("PassOwnershipActionStage",e)}function d(e){return i.create("RedirectActionStage",e)}function f(e){return i.create("RefreshActionStage",e)}function p(e){return i.create("StyleActionStage",e)}function g(e){return i.create("SetDataActionStage",e)}function h(e){return i.create("SplitActionStage",{node:e})}function m(e){return i.create("StopActionStage",e)}function v(e){return i.create("WaitForConditionActionStage",e)}function y(e){return i.create("OnPageActionStage",e)}function E(e){return i.create("ErrorHandlingActionStage",e)}r.apply(null,arguments)}i.register("BranchActionStage").asCtor(vf).asProto().dependencies("Consts, FlowsContainer, FlowStack, FlowVisualStepsIndicator, TimerManager");function vf(t,n,r,o,a,s){var u=this;u.execute=f,u.destroy=p,u.backFromFlowGroup=g,u.Id=s.Id;var l,c="BranchActionStage";function d(){l=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function f(){var t=e.Deferred(),i=s.Settings.actionArgs;if(l.customerLog("{0}: Executing Connect To Bizflow with step id {1} step index {2}. Branching to flow: {3}, starting from {4}",c,u.Id,s.PointIndex,i.flowId,i.playFromBeginning?"the beginning of the flow":"stage"+i.startingNodeId),!n.getFlowById(i.flowId)){var o={nextStageId:s.Links[0].TargetFlowNodeId,nextFlowId:r.peek().flowId};return h(t,o)}var d=i.playFromBeginning?void 0:i.startingNodeId,o={currentNode:s,nextFlowId:i.flowId,nextStageId:d,shouldCreateFlowGroup:!0,isBranch:!0};return a.playSetTimeout(function(){h(t,o,i.flowId)},500),t}function p(){return l.customerLog("{0}: Destroying Connect To Bizflow with step id {1} step index {2}",c,u.Id,s.PointIndex),e.Deferred().resolve()}function g(){l.customerLog("{0}: Connect To Bizflow - Back from branch - Step id {1} step index {2}",c,u.Id,s.PointIndex);var t=e.Deferred(),n={currentNode:s,nextFlowId:void 0,nextStageId:s.Links[0].TargetFlowNodeId,shouldCreateFlowGroup:void 0};return h(t,n,r.peek().flowId)}function h(e,t,n){return l.customerLog("{0}: Connect To BizFlow - Moving to next stage. From step id {1} step index {2} to step id {3}, from flow id {4} to flow id {5}. (create flow group: {6})",c,u.Id,s.PointIndex,t.nextStageId,t.nextFlowId,r.peek().flowId,t.shouldCreateFlowGroup?t.shouldCreateFlowGroup:"false"),o.init(n),e.resolve(t)}d.apply(null,arguments)}i.register("DelayActionStage").asCtor(yf).asProto().dependencies("TimerManager, Consts, FlowDataPersister");function yf(t,n,r,o){var a=this;a.execute=d,a.destroy=f,a.Id=o.Id;var s,u,l="DelayActionStage";function c(){s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function d(){var n=e.Deferred(),i=o.Settings.actionArgs.Duration;s.customerLog("{0}: Executing Delay with step id {1} step index {2}. Waiting {3} seconds.",l,a.Id,o.PointIndex,i||"0");var c=o.Links[0].TargetFlowNodeId;return r.saveWaitingForRefreshTrigger({refreshTrigger:c}),u=t.playSetTimeout(function(){return p(n,c)},1e3*i),n.promise()}function f(){return s.customerLog("{0}: Destroying Delay with step id {1}",l,a.Id),r.clearWaitingForRefreshTrigger(),e.Deferred().resolve()}function p(e,t){s.customerLog("{0}: Delay - Moving to next step. From step id {0} to step id {1}",l,a.Id,t),r.clearWaitingForRefreshTrigger();var n={nextStageId:t};return e.resolve(n)}c.apply(null,arguments)}i.register("OpenMenuActionStage").asCtor(Ef).asProto().dependencies("Consts, win");function Ef(t,n,r){var o=this;o.execute=l,o.destroy=c,o.Id=r.Id;var a,s="OpenMenuActionStage";function u(){a=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function l(){a.customerLog("{0}: Executing Open Menu with step id {1}",s,o.Id);var i=e.Deferred(),u={appType:t.EVENT_SENDER_EVENT_APPS.BizFlowStep,objectId:r.Id,type:t.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP};return void 0!=n.WalkMePlayerAPI&&n.WalkMePlayerAPI.toggleMenu(u),d(i,r.Links[0].TargetFlowNodeId)}function c(){return a.customerLog("{0}: Destroying Open Menu with step id {1}",s,o.Id),e.Deferred().resolve()}function d(e,t){a.customerLog("{0}: Open Menu - Moving to next step. From step id {0} to step id {1}",s,o.Id,t);var n={nextStageId:t};return e.resolve(n)}u.apply(null,arguments)}i.register("StyleActionStage").asCtor(Sf).asProto().dependencies("Consts, WmInternals, SiteConfigManager");function Sf(t,n,r,o){var a=this;a.execute=c,a.destroy=d,a.Id=o.Id;var s,u="StyleActionStage";function l(){s=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function c(){s.customerLog("{0}: Executing Style with step id {1}",u,a.Id);var t=e.Deferred();if(!g())return s.customerLog("{0}: Style step not supported, skipping to next step",u),f(t,o.Links[0].TargetFlowNodeId);var r=i.create("DynamicCss",{css:o.Settings.actionArgs.css,Id:a.Id});return r.add(),n.one(p(),function(){s.customerLog("{0}: Removing Style with step id {1}",u,a.Id),r.remove()}),f(t,o.Links[0].TargetFlowNodeId)}function d(){return s.customerLog("{0}: Destroying Apply Css with step id {1}",u,a.Id),e.Deferred().resolve()}function f(e,t){s.customerLog("{0}: Apply Css - Moving to next step. From step id {0} to step id {1}",u,a.Id,t);var n={nextStageId:t};return e.resolve(n)}function p(){return[t.EVENTS.Flows.FlowStopped,t.EVENTS.Flows.FlowCompleted,t.EVENTS.Flows.FlowAborted].join(" ")}function g(){return r.get().Settings&&r.get().Settings.StyleActionStage}l.apply(null,arguments)}i.register("PassOwnershipActionStage").asCtor(Tf).asProto().dependencies("Consts, CrossDomainManager, FlowStack, FlowsContainer, ClientStorageManager, FlowEventRaiser");function Tf(t,n,r,o,a,s,u){var l=this;l.execute=p,l.destroy=g,l.Id=u.Id;var c,d="PassOwnershipActionStage";function f(){c=i.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function p(){var i=e.Deferred(),o=a.keysConfig.passOwnership.newWindowTime;a.saveData(o.key,(new Date).getTime(),o.expiry),c.customerLog("{0}: checking ownership for stage with step id {1}",d,l.Id);var f=n.get().determineOwnership(r.peek());if(!f)return s.raiseEventOnCurrentFlow(t.EVENTS.Flows.AfterCompletingFlowStage,{step:u}),r.updateTopStageId(u.Links[0].TargetFlowNodeId),m(i);return h(i,u.Links[0].TargetFlowNodeId)}function g(){return c.customerLog("{0}: Destroying PassOwnership stage with step id {1}",d,l.Id),e.Deferred().resolve()}function h(e,t){c.customerLog("{0}: Moving to next step. From step id {1} to step id {2}",d,l.Id,t);var n={nextStageId:t};return e.resolve(n)}function m(e){return e.reject({lostOwnership:!0})}f.apply(null,arguments)}i.register("RedirectActionStage").asCtor(Cf).asProto().dependencies("TimerManager, RedirectService, win, Consts, FlowDataPersister, BBCodeParser");function Cf(t,n,r,o,a,s,u){var l=this;l.execute=p,l.destroy=g,l.Id=u.Id;var c,d="RedirectActionStage";function f(){c=i.create("FeaturedLogger",{feature:o.FEATURES_LOGS.Flows})}function p(){var r=e.Deferred(),i=u.Settings.actionArgs,o=s.parse(i.url),f=i.dontRedirectIfIdentical,p=n.canRedirect(o,!f);c.customerLog("{0}: Executing Redirect with step id {1} to url {2}. dontRedirectIfIdentical: {3}, canRedirect: {4}",d,o,l.Id,f,p);var g=u.Links[0].TargetFlowNodeId;if(!p)return h(r,g);return a.saveWaitingForRefreshTrigger({refreshTrigger:g}),t.libSetTimeout(function(){var e=n.redirect(o);e&&h(r,g)},200),r.promise()}function g(){return c.customerLog("{0}: Destroying Redirect with step id {1}",d,l.Id),e.Deferred().resolve()}function h(e,t){c.customerLog("{0}: Redirect - Moving to next step. From step id {1} to step id {2}",d,l.Id,t);var n={nextStageId:t};return e.resolve(n)}f.apply(null,arguments)}i.register("RefreshActionStage").asCtor(bf).asProto().dependencies("TimerManager, win, Consts, FlowDataPersister");function bf(t,n,r,o,a){var s=this;s.execute=f,s.destroy=p,s.Id=a.Id;var u,l,c="RefreshActionStage";function d(){u=i.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function f(){u.customerLog("{0}: Executing Refresh with step id {1}",c,s.Id);var r=e.Deferred();return o.saveWaitingForRefreshTrigger({refreshTrigger:a.Links[0].TargetFlowNodeId}),l=t.libSetTimeout(function(){n.location.reload(!0)},200),r.promise()}function p(){return u.customerLog("{0}: Destroying Refresh with step id {1}",c,s.Id),l&&l.clear(),e.Deferred().resolve()}d.apply(null,arguments)}i.register("SetDataActionStage").asCtor(wf).asProto().dependencies("ClientOrServerStorageManager, CookiesManager, JQueryElementFinder, CommonUtils, Consts, Lib");function wf(t,n,r,o,a,s,u){var l=this;l.execute=g,l.destroy=h,l.Id=u.Id;var c,d="SetDataActionStage",f={Value:"Value",Variable:"Variable",jQuery:"jQuery",Cookie:"Cookie",OnScreenElement:"OnScreenElement"};function p(){c=i.create("FeaturedLogger",{feature:a.FEATURES_LOGS.Flows})}function g(){var t=e.Deferred(),n=u.Settings.actionArgs;return v(n),m(t,u.Links[0].TargetFlowNodeId)}function h(){return c.customerLog("{0}: Destroying Set WalkMe Data with step id {1} step index {2}",d,l.Id,u.PointIndex),e.Deferred().resolve()}function m(e,t){c.customerLog("{0}: Set WalkMe Data - Moving to next step. From step id {0} to step id {1} step index {2}",d,l.Id,t,u.PointIndex);var n={nextStageId:t};return e.resolve(n)}function v(i){var s,p=i.dataType,g=i.key,h=i.duration,m=i.value,v=i.IdentifySettings;switch(p){case f.Value:s=m;break;case f.Variable:s=o.getWindowData(a.WINDOW_CUSTOM_DATA_TYPE.Var,m);break;case f.jQuery:var E=r.findElementsByjQueryComplexSelector(m);s=o.checkElementText(e(E));break;case f.Cookie:s=n.getCookie(m);break;case f.OnScreenElement:s=v?y(v):""}c.customerLog("{0}: Executing Set WalkMe Data with step id {1} step index {2}. Type {3}, Value {4}, Duration {5}",d,l.Id,u.PointIndex,p,s,h),t.saveData(g,s,h)}function y(t){var n=s.findElement(t);return n?o.checkElementText(e(n)):""}p.apply(null,arguments)}i.register("SplitActionStage").asCtor(If).asProto().dependencies("SplitFlowNodePlayableLinkProvider, Consts");function If(t,n,r){var o=this;o.execute=c,o.destroy=d;var a,s,u="SplitActionStage";function l(){a=r.node,o.Id=a.Id,s=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function c(){var n=e.Deferred();s.customerLog("{0}: Executing Split with step id {1}",u,o.Id);var r=t.getPlayableLink(a);if(r)return s.customerLog("{0}: Split with step id {1} - Found link with id {2}",u,o.Id,r.Id),f(n,r);return s.customerLog("{0}: Split with step id {1} - No link was found"),p(n)}function d(){return s.customerLog("{0}: Destroying Split with step id {1}",u,o.Id),e.when()}function f(e,t){s.customerLog("{0}: Split - Moving to next step. From step id {0} to step id {1}",u,o.Id,t.TargetFlowNodeId);var n={nextStageId:t.TargetFlowNodeId,value:t.Name};return e.resolve(n)}function p(e){return e.reject()}l()}function Pf(t){var n=this;n.execute=i,n.destroy=o,n.Id=t.Id;function r(){}function i(){}function o(){return e.Deferred().resolve()}r.apply(null,arguments)}i.register("StopActionStage").asCtor(Pf).asProto(),i.register("WaitForConditionActionStage").asCtor(_f).asProto().dependencies("DebuggerManager, Consts, ConditionCheckerFactory, FlowEventRaiser");function _f(t,n,r,o,a){var s=this;s.execute=f,s.destroy=p,s.Id=a.Id;var u,l,c="WaitForConditionActionStage";function d(){l=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function f(){var i=e.Deferred(),d=a.ConditionTrees.WaitFor;l.customerLog("{0}: Executing Wait For Condition with step id {1}. Evaluating condition with id {2}",c,s.Id,d.Id);var f={evaluationPollingIntervalMs:500,featureName:"Wait For Condition",elementName:"Wait for condition node: "+a.Name};return u=r.createNew(f),u.onValueChanged(function(e){if(l.customerLog("{0}: Condition value changed for Wait For Condition step with id {1}. Result {2}",c,s.Id,e),t.isDebuggerOnWindow()&&o.raiseEventOnCurrentFlow(n.EVENTS.Flows.WaitForConditionEvaluated,{step:a}),e)return g(i,a.Links[0].TargetFlowNodeId)}),u.evaluateAsync(d),i.promise()}function p(){return l.customerLog("{0}: Destroying Wait For Condition with step id {1}",c,s.Id),u&&(u.cleanResources(),u=void 0),e.Deferred().resolve()}function g(e,t){l.customerLog("{0}: Wait For Condition - Moving to next step. From step id {0} to step id {1}",c,s.Id,t);var n={nextStageId:t};return e.resolve(n)}d.apply(null,arguments)}i.register("ErrorHandlingActionStage").asCtor(kf).asProto().dependencies("ErrorHandlingSegmentationChecker, Consts, TimerManager, FlowNodeExtensions");function kf(t,n,r,o,a){var s=this;s.execute=d,s.destroy=f,s.backFromFlowGroup=p,s.Id=a.Id;var u,l="ErrorHandlingActionStage";function c(){u=i.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function d(){var n=e.Deferred();if(u.customerLog("{0}: Executing Error Handling with step id {1} step index {2}",l,s.Id,a.PointIndex),t.isSegmented(a)){u.customerLog("{0}: Error Handling condition applies. Step id {1} step index {2}",l,s.Id,a.PointIndex);var i=a.Links[o.getErrorHandlingConnectorIndex(a)].TargetFlowNodeId||a.Id;return r.playSetTimeout(function(){g(n,i,!0)},500),n.promise()}return u.customerLog("{0}: Error Handling condition does not apply. Step id {1} step index {2}",l,s.Id,a.PointIndex),g(n,a.Links[0].TargetFlowNodeId)}function f(){return u.customerLog("{0}: Destroying Error Handling with step id {1} step index {2}",l,s.Id,a.PointIndex),e.Deferred().resolve()}function p(){return u.customerLog("{0}: Back from Error Handling group - Step id {1} step index {2}",l,s.Id,a.PointIndex),
d()}function g(e,t,n){u.customerLog("{0}: Error Handling - Moving to next step. From step id {1} step index {2} to step id {3}. (create flow group {4})",l,s.Id,a.PointIndex,t,n?n:"false");var r={currentNode:a,nextStageId:t,shouldCreateFlowGroup:n};return e.resolve(r)}c.apply(null,arguments)}i.register("ErrorHandlingSegmentationChecker").asCtor(Af).dependencies("ObjectJpath, ConditionCheckerFactory");function Af(e,t){var n=this;n.isSegmented=r;function r(t){var n=e.getValue(t,"ConditionTrees.ErrorHandle");if(!n||!n.Root)return!1;return i(t,n)}function i(e,n){var r={featureName:"evaluate error handling segmentation",elementName:e.Name},i=t.createNew(r);return i.getCurrentEvaluationValueAndStopEvaluating(n)}}i.register("OnPageActionStage").asCtor(Df).asProto().dependencies("OnElementActionVisibilityEvaluator, OnElementActionExecutor, Consts, OnPageActionStageValueProvider");function Df(t,n,r,o,a){var s=this;s.execute=f,s.destroy=p,s.Id=a.Id;var u,l="OnPageActionStage",c=!1;function d(){u=i.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function f(){var r=e.Deferred(),i=a.Settings.actionArgs;return u.customerLog("{0}: Evaluating visibility for On Page Action with id {1} step index {2}. On element action {3}",l,s.Id,a.PointIndex,i.onElementAction),t.evaluate(a.Id,i.IdentifySettings).then(function(){var e=t.getElement();u.customerLog("{0}: Element found. Executing On Page Action with step id {1} step index {2}",l,s.Id,a.PointIndex),n.execute(e,i,function(){c||g(r,a)})}),r.promise()}function p(){return c=!0,u.customerLog("{0}: Destroying On Page Action with step id {1} step index {2}",l,s.Id,a.PointIndex),t.cleanResources(),e.Deferred().resolve()}function g(e,t){var n=t.Links[0].TargetFlowNodeId,r=t.Settings.actionArgs;u.customerLog("{0}: On Page Action - Moving to next step. From step id {1} step index {2} to step id {3}",l,s.Id,t.PointIndex,n);var i={nextStageId:n,value:o.getValue(r)};return e.resolve(i)}d.apply(null,arguments)}i.register("OnPageActionStageValueProvider").asCtor(Of).asProto().dependencies("Consts");function Of(e){var t=this;t.getValue=i;var n;function r(){n={},n[e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE.FillText]="fillText",n[e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE.SelectListValue]="dropdownSelectedValue"}function i(e){var t=e.onElementAction;if(t in n){var r=n[t];return e[r]}}r()}i.register("StartPointSegmentationChecker").asCtor(Nf).dependencies("ObjectJpath, Consts");function Nf(e,t){var n=this;n.isSegmented=r;function r(t){var n=e.getValue(t,"ConditionTrees.StartPoint");if(!n||!n.Root)return!1;var r=o(t,n);return a(r)}function o(e,n){var r={logContext:e.Id,isRemoveByCondition:!1,stickyType:t.STICKY_TYPE.ONCE,conditionCheckerParams:{featureName:"evaluate start point segmentation",elementName:e.Title},conditionTree:n};return e.IdentifySettings&&(r.elementVisibilityParams={findElementParams:{IdentifySettings:e.IdentifySettings}},r.trackUIChanges=!0),r}function a(e){var t=i.create("UIVisibilityManager",e);t.watchForVisibility();var n=t.shouldShow();return t.cleanResources(),n}}i.register("FlowStartingStageProvider").asCtor(xf).dependencies("BaseGraphDfsService, StartPointSegmentationChecker");function xf(e,t){var n=this;n.getStageData=r;function r(t){var n={};return e.runDfs(t,{afterPointDescendantsVisited:function(e){i(e,n)}}),{startingNodeId:n.nodeId||t.RootFlowNodeId,startingUiElementId:n.uiElementId,startedFromStartPoint:!!n.nodeId}}function i(e,n){if(n.nodeId)return;t.isSegmented(e.point)&&(n.nodeId=e.node.Id,n.uiElementId=e.uiElement?e.uiElement.Id:void 0)}}i.register("FlowStartPointOrderCreator").asCtor(Lf).dependencies("Consts");function Lf(t){var n,r,i=this;i.createNodesStack=o;function o(e){n=[],r=[];var t=e.RootFlowNodeId;for(r.push(t);r.length>0;){var i=r.shift(),o=e.Nodes[i];a(o)}return n}function a(e){switch(e.Type){case t.FLOW_STEP_TYPE.UI:l(e);break;case t.FLOW_STEP_TYPE.Action:s(e)}}function s(e){f(e,e.Id),u(e)}function u(e){for(var t=e.Links,n=t.length-1;n>=0;n--)d(t[n])}function l(e){for(var t=e.UIElements,n=t.length-1;n>=0;n--){var r=t[n];f(r,e.Id),c(r)}}function c(e){for(var t=e.Triggers,n=t.length-1;n>=0;n--)d(t[n])}function d(e){var t=e.TargetFlowNodeId;t&&r.push(t)}function f(t,r){var i=t.ConditionTrees&&t.ConditionTrees.StartPoint;i&&!e.isEmptyObject(i)&&n.push({point:t,nodeId:r})}}i.register("OnElementActionVisibilityEvaluator").asCtor(Ff);function Ff(){var t=this;t.evaluate=r,t.cleanResources=a,t.getElement=o;var n;function r(t,r){var o=e.Deferred(),a={logContext:t,findElementParams:{IdentifySettings:r},elementEvaluationIntervalMs:500};return n=i.create("ElementVisibilityEvaluator",a),n.setOnVisibilityChanged(function(){o.resolve()}),n.evaluateElementVisibilityAsynch(),o.promise()}function o(){if(n)return n.getElement()}function a(){n&&n.cleanResources()}}i.register("OnElementActionExecutor").asCtor(Mf).dependencies("InputGenerator, HtmlDecoder, BBCodeParser, OnElementFillTextAction");function Mf(e,t,n,r){var i=this;i.execute=s;var o={Click:"Click",Hover:"Hover",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue",Tap:"Tap",Swipe:"Swipe"};function a(){}function s(t,i,a){var s=i.onElementAction;switch(s){case o.Click:case o.Tap:e.click(t,a);break;case o.Hover:e.hover(t,a);break;case o.Focus:e.focus(t,a);break;case o.FillText:var c=l(i.fillText),d=l(i.preText),f=l(i.postText);r.execute(t,c,d,f,a);break;case o.SelectListValue:var p=n.parse(u(i.dropdownSelectedValue));e.selectByText(t,p,a);break;case o.Swipe:e.swipe(t,a)}}function u(e){return t.decodeHtml(e,["&",">","<"])}function l(e){return e&&n.parse(u(e))}a.apply(null,arguments)}i.register("OnElementFillTextAction").asCtor(Bf).dependencies("InputGenerator, TextInjector, CommonUtils");function Bf(e,t,n){var r=this;r.execute=i;function i(t,n,r,i,a){e.text(t,o(t,n,r,i),100,a)}function o(e,r,i,o){if(r)return s(e,r);var u=a(t.retrieve(e)),l=s(e,i),c=s(e,o),d=n.formatString("{0}{1}{2}",l,u,c);return d}function a(e){return e||""}function s(e,n){return n?t.adaptText(e,n):""}}i.register("FlowManager").asCtor(Rf).asProto().dependencies("Consts, CommonEvents, wmjQuery, WalkMeGoalsManager, FlowDataPersister");function Rf(e,t,n,r,i,o){var a=this;a.unbindEventPropagation=f;var s;function u(){s=o.businessSolutionModel,l()}function l(){n(s.Flow).on(e.FLOW_INNER_EVENTS.EventPropogationPrefix,function(e,r){var i={businessSolutionId:s.Id,businessSolutionName:s.Name};i=n.extend(i,r),t.raiseEvent(r.eventType,i),c(r.eventType)})}function c(t){t==e.FLOW_INNER_EVENTS.FlowIsPlaying&&d()}function d(){r.startWatchingDeployable(s,i.getPlayGuid())}function f(){n(s.Flow).off(e.FLOW_INNER_EVENTS.EventPropogationPrefix)}u()}i.register("FlowManagerCreator").asCtor(Uf);function Uf(){var e=this;e.create=t;function t(e){return i.create("FlowManager",{businessSolutionModel:e})}}i.register("FlowsManager").asCtor(Vf).dependencies("FlowManagerCreator, PromiseUtils, FlowsContainer");function Vf(t,n,r){var i=this;i.init=s,i.stopAllFlowEventsPropagation=l;var o,a;function s(e){o=e;var t=u();r.init(t)}function u(){var e=[];a=[];for(var n=0;n<=o.length-1;n++){var r=o[n];a.push(t.create(r)),e.push(r.Flow)}return e}function l(){if(!a)return e.when();return n.executeParallelyOnArray(a,c)}function c(e){return e.unbindEventPropagation()}}var Wf=function(t){__extends(n,t);function n(e,n,r,i,o,a,s,u){t.call(this,{lib:e,type:n.DEPLOYABLE_TYPE.BusinessSolution}),this.consts=n,this.promiseUtils=r,this.smartTipSetsManager=i,this.flowsManager=o,this.permalinkManager=a,this.initiatorManager=s,this.logger=u,this._name="Flow",this._bizFlowApi=void 0,this.setDeployables([])}return n.prototype.setDeployables=function(n){if(!n)return;var r=e.grep(n,function(e){return e.SmartTips&&e.SmartTips.length>0});this.smartTipSetsManager.init(r);var i=e.grep(n,function(e){return!!e.Flow});this.flowsManager.init(i),t.prototype.setDeployables.call(this,n)},n.prototype.activateById=function(e,n,r){try{var i=t.prototype.getById.call(this,e);if(!i)return this.logger.customerLog(cg("Failed playing bizflow with id {0} - The Id {0} does not exist.",e),3),!1;if(void 0!=r&&!i.Flow.Nodes[r])return this.logger.customerLog(cg("Failed playing bizflow with id {0} - The NodeId {1} does not exist.",e,r),3),!1;var o=this.getBizFlowApi();return this.initiatorManager.setForScope(n,function(){o.start(i.Flow.Id,r,i.Name,n)}),!0}catch(a){return this.logger.customerLog(cg("Failed playing bizflow with id {0}. Exception is {1}",e,a),3),!1}},n.prototype.releaseAll=function(){return this.promiseUtils.executeParallely([this.destroySmartTipSetManagers(),this.destroyFlowPlayer(),this.destroyFlowManagers()])},n.prototype.restore=function(){return this.permalinkManager.isTrainingInStartingMode()?e.when():this.getBizFlowApi().restore()},n.prototype.autoStartEnabled=function(e){if(this.permalinkManager.isTrainingInStartingMode())return!1;return!0},n.prototype.destroyFlowPlayer=function(){return this.getBizFlowApi().pause()},n.prototype.destroySmartTipSetManagers=function(){return this.smartTipSetsManager.turnOffAllSets()},n.prototype.getBizFlowApi=function(){return this._bizFlowApi||(this._bizFlowApi=i.get("BizflowApi")),this._bizFlowApi},n.prototype.destroyFlowManagers=function(){return this.flowsManager.stopAllFlowEventsPropagation()},n}(Ei);i.register("BusinessSolutionsManager").asCtor(Wf).dependencies("Lib, Consts, PromiseUtils, SmartTipSetsManager, FlowsManager, PermalinkManager, InitiatorManager, Logger"),i.register("FlowsPlayer").asCtor(Gf).dependencies("StageCreator, FlowDataPersister, CommonUtils, Consts, FlowStack, FlowInnerGroupService, FlowTransitionChecker, FlowsContainer, FlowGroupEventRaiser, FlowEventRaiser, FlowGroupLastStageIndicator,FlowVisualStepsIndicator, DeployableSafeStartExecuter, DeployableTypes, LibDestroyer, FlowStartPointDataProvider");function Gf(t,n,r,o,a,s,u,l,c,d,f,p,g,h,m,v){var y=this;y.execute=F,y.backFromFlowGroup=L,y.stop=b,y.abort=w,y.pause=I,y.play=P;var E,S,T;function C(){E=void 0,S=i.create("FeaturedLogger",{feature:o.FEATURES_LOGS.Flows})}function b(){return S.customerLog("FlowPlayer stop - Stopping current flow"),V(o.EVENTS.Flows.FlowStopped)}function w(){if(a.isEmpty()&&!E)return e.when();return S.customerLog("FlowPlayer abort - Aborting current flow"),V(o.EVENTS.Flows.FlowAborted)}function I(){return S.customerLog("FlowPlayer pause - Pausing current flow"),A()}function P(e,t){S.customerLog("FlowPlayer play from flow with id {0} stage id {1}",e,t),m.releaseBalloons(),s.pushInnerGroupIfExists(e,t),a.push(e,t),n.saveIsFirstVisualStep(!0),p.init(e),c.raiseFlowStartedEvent(e,t),d.raiseEventOnCurrentFlow(o.FLOW_INNER_EVENTS.FlowIsPlaying,{}),F(e,t,o.FLOW_PLAY_MODES.PLAY)}function _(t){S.customerLog("FlowPlayer onStageSuccess - next stage id: {0}{1}",t.nextStageId,t.nextFlowId?", next flow id: "+t.nextFlowId:""),A();var n=a.peek();t=e.extend({step:l.getNodeById(n.flowId,n.stageId)},t),d.raiseEventOnCurrentFlow(o.EVENTS.Flows.AfterCompletingFlowStage,t);var r=t.nextStageId;if(t.currentNode&&f.setPreviousGroupHasNextStage(t.shouldCreateFlowGroup,t.currentNode),t.shouldCreateFlowGroup){var i=t.nextFlowId;i||(i=n.flowId),S.customerLog("FlowPlayer new flow group - flow {0} with node {1}",i,r);var s=a.peek();t.isBranch&&!t.currentNode.Links[0].TargetFlowNodeId&&a.pop(),r=v.get(i,r).startingNodeId,a.push(i,r),t.isBranch&&c.raiseFlowBranchedEvent(i,r,s.stageId),d.raiseEventOnCurrentFlow(o.FLOW_INNER_EVENTS.FlowIsPlaying,{}),F(i,r)}else r?D(r):R()}function k(e,t){if(S.customerLog("FlowPlayer onStageError - params: {0}",r.toJSON(e)),e&&e.nextStageId)_(e);else if(!e||!e.lostOwnership){var i;if(e&&!e.wasElementShown&&n.getIsFirstVisualStep()){if(T==o.FLOW_PLAY_MODES.PLAY){if(!n.getSafeStartFlowId()){var a=l.getFlowById(t);e.isSafeStartHandling=g.handleSafeStart(h.BusinessSolution,a,{flowId:t,eventParams:e})}i=o.EVENTS.Flows.FailedToStart}}else f.removePreviousGroupHasNextStage(),i=o.EVENTS.Flows.FlowStopped;V(i,e)}}function A(){if(!E)return e.when();var t=E.destroy();return E=null,t}function D(e){S.customerLog("FlowPlayer transition - Transitioning to node {0}",e),a.updateTopStageId(e),N().then(x)}function O(){var e=a.peek();n.saveIsGroupBack(!0),N().then(function(){L(e.flowId,e.stageId)})}function N(){return u.canContinue()}function x(){var e=a.peek();F(e.flowId,e.stageId)}function L(e,t,r){n.clearIsGroupBack(),M(e,t,o.FLOW_STAGE_ACTIONS.BACK_FROM_FLOW_GROUP,r)}function F(e,t,n){M(e,t,o.FLOW_STAGE_ACTIONS.EXECUTE,n)}function M(e,r,i,a){S.customerLog("FlowPlayer run - Running flow id: {0}, node id: {1} with action: {2}",e,r,i),a&&(T=a);var s=l.getFlowById(e);if(E=t.createStage(s,r)){d.raiseEventOnCurrentFlow(o.EVENTS.Flows.BeforeExecutingFlowStage,{step:l.getNodeById(e,r)});var u=n.getSafeStartFlowId();E[i]().progress(B).then(_,function(t){k(t,e)}).always(function(){u&&n.saveSafeStartFlowId(void 0)})}else R()}function B(e,t){if("stageShown"!=e)return;d.raiseEventOnCurrentFlow(o.EVENTS.Flows.UIFlowStageShown,t)}function R(){var e=a.pop();if(S.customerLog("FlowPlayer flowGroupCompleted - With previous group settings flowId: {0}, stageId: {1}",e.flowId,e.stageId),!a.isEmpty()){var t=a.peek().flowId;return O(),void(e.flowId!=t&&d.raiseEventOnCurrentFlow(o.EVENTS.Flows.FlowBranchReturned,{flowId:e.flowId}))}U(e.flowId)}function U(e){V(o.EVENTS.Flows.FlowCompleted,{flowId:e})}function V(e,t){return e&&d.raiseEventOnCurrentFlow(e,t),a.clear(),A()}C()}i.register("FlowsRestorer").asCtor(Hf).dependencies("Consts, FlowStack, FlowEventRaiser, FlowVisualStepsIndicator, FlowDataPersister, FlowsContainer,FlowsPlayer, FlowStartingStageProvider");function Hf(e,t,n,r,o,a,s,u){var l=this;l.restore=f;var c;function d(){c=i.create("FeaturedLogger",{feature:e.FEATURES_LOGS.Flows})}function f(){if(c.customerLog("FlowsRestorer restore - restoring current flow"),t.isEmpty())c.customerLog("FlowsRestorer restore - nothing to restore");else{n.raiseEventOnCurrentFlow(e.EVENTS.Flows.RestoringFlow,{});var i=t.peek();r.init(i.flowId),p(i)}}function p(t){var n=h(t),r=g();s[r](t.flowId,n,e.FLOW_PLAY_MODES.RESTORE)}function g(){return o.getIsGroupBack()?e.FLOW_STAGE_ACTIONS.BACK_FROM_FLOW_GROUP:e.FLOW_STAGE_ACTIONS.EXECUTE}function h(r){var i=o.getWaitingForRefreshTrigger(),s=r.stageId;return i?(c.customerLog("FlowsRestorer restore - refresh happened, skipping stage id {0} and moving to {1}",s,i.refreshTrigger),n.raiseEventOnCurrentFlow(e.EVENTS.Flows.AfterCompletingFlowStage,{step:a.getCurrentNode(),firedTrigger:i.firedTrigger,uiElementId:i.uiElementId}),o.clearWaitingForRefreshTrigger(),s=i.refreshTrigger,t.updateTopStageId(s)):s||(s=m(r.flowId),t.updateTopStageId(s)),s}function m(e){var t=a.getFlowById(e);return u.getStageData(t).startingNodeId}d()}i.register("FlowPlayerMetadata").asInstance({lastTriggerFired:void 0}),i.register("FlowDataValidator").asCtor(jf);function jf(){var t=this;t.isFlowsArrayValid=n;function n(t,n){return e.isArray(t)&&r(t,n)}function r(t,n){var r=e(t).filter(function(e,t){return void 0!=n&&t.flowId==n||void 0!=t.flowId&&void 0!=t.stageId});return r.length==t.length}}i.register("FlowDataPersister").asCtor(Yf).dependencies("ClientStorageManager, FlowDataValidator");function Yf(e,t){var n=this;n.getPlayGuid=h,n.getFlows=m,n.getIsFirstVisualStep=v,n.getWaitingForRefreshTrigger=y,n.getSafeStartFlowId=E,n.getPlayInitiator=S,n.getIsGroupBack=T,n.load=g,n.saveFlows=o,n.savePlayGuid=a,n.saveIsFirstVisualStep=s,n.saveWaitingForRefreshTrigger=u,n.saveSafeStartFlowId=l,n.savePlayInitiator=c,n.saveIsGroupBack=d,n.clearWaitingForRefreshTrigger=f,n.clearIsGroupBack=p;var r;function i(){r={}}function o(e){r.flows=e,C()}function a(e){r.playGuid=e,C()}function s(e){r.isFirstVisualStep=e,C()}function u(e){r.isWaitingForRefresh=e,C()}function l(e){r.safeStartFlowId=e,C()}function c(e){r.playInitiator=e,C()}function d(e){r.isGroupBack=e,C()}function f(){u(void 0)}function p(){d(void 0)}function g(){r=b()}function h(){return r.playGuid}function m(){return r.flows}function v(){return r.isFirstVisualStep}function y(){return r.isWaitingForRefresh}function E(){return r.safeStartFlowId}function S(){return r.playInitiator}function T(){return r.isGroupBack}function C(){e.saveData(e.keysConfig.flow.stack.key,r,e.keysConfig.flow.stack.expiry)}function b(){var n=e.getData(e.keysConfig.flow.stack.key);return n&&t.isFlowsArrayValid(n.flows,n.safeStartFlowId)?n:{flows:[]}}i.apply(null,arguments)}i.register("FlowStack").asFunction(zf).dependencies("FlowDataPersister");function zf(t){var n=i.create("Stack"),r=n.push;n.push=s,n.updateTopStageId=a,n.load=u;function o(){var t=["push","pop","updateTopStageId","clear"];e(t).each(function(e,t){n[t]=l(n[t])})}function a(e){var t=n.peek();t.stageId=e}function s(e,t){r({flowId:e,stageId:t})}function u(){t.load(),n.init(t.getFlows())}function l(e){return function(){var r=e.apply(n,arguments);return t.saveFlows(n.getAll()),r}}return o(),n}i.register("BizflowApi").asCtor(Qf).dependencies("FlowsPlayer, FlowsRestorer, BizflowOwnershipManager, Consts, FlowStack, FlowDataPersister, FlowGroupEventRaiser, FlowStartPointDataProvider");function Qf(e,t,n,r,o,a,s,u){var l=this;l.start=p,l.restore=f,l.stop=e.stop,l.pause=e.pause;var c;function d(){c=i.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function f(){o.load(),t.restore()}function p(t,r,i,o){c.customerLog("BizflowApi start - Starting flow {0} id {1}{2}",i,t,r?" from node "+r:""),e.abort().then(function(){a.savePlayInitiator(o);var e=u.get(t,r);s.raiseBeforeFlowStartedEvent(t,e),n.determineOwner(t,e.startingNodeId)})}d()}i.register("FlowEventRaiser").asCtor(qf).dependencies("Consts, FlowStack, FlowsContainer, wmjQuery");function qf(e,t,n,r){var i=this;i.raiseEventOnCurrentFlow=o,i.raiseEvent=a;function o(e,t){t=r.extend(s(),t),a(e,t)}function a(t,i){var o=n.getFlowById(i.flowId);i.eventType=t,r(o).trigger(e.FLOW_INNER_EVENTS.EventPropogationPrefix,i)}function s(){var e=t.peek();if(!e)return{};return{flowId:e.flowId,stageId:e.stageId}}}i.register("FlowGroupEventRaiser").asCtor(Kf).dependencies("Consts, FlowEventRaiser, FlowPlayerMetadata");function Kf(e,t,n){var r=this;r.raiseFlowStartedEvent=i,r.raiseFlowBranchedEvent=a,r.raiseBeforeFlowStartedEvent=o;function i(n,r){var i=s(n,r);t.raiseEvent(e.EVENTS.Flows.FlowStarted,i)}function o(n,r){t.raiseEvent(e.EVENTS.Flows.BeforeFlowStarted,{flowId:n,startPointUIElementId:r.startingUiElementId,startedFromStartPoint:r.startedFromStartPoint,startingStageId:r.startingNodeId})}function a(n,r,i){var o=s(n,r);o.branchOriginStageId=i,u()&&(o.isBbCodeTrigger=!0),t.raiseEvent(e.EVENTS.Flows.FlowBranched,o)}function s(e,t){return{flowId:e,requestedStageId:t,startingStageId:t}}function u(){return n.lastTriggerFired&&n.lastTriggerFired.Type==e.FLOW_TRIGGER_TYPE.BbCode}}i.register("FlowLinkedTaskCompletionHandler").asCtor(Xf).dependencies("Consts, TodoListManager, WmInternals");function Xf(e,t,n){var r=this;r.init=i;function i(){n.on(e.EVENTS.Flows.FlowCompleted,function(e,t){o(t.businessSolutionId)}),n.on(e.EVENTS.Flows.FlowBranchReturned,function(e,t){o(t.businessSolutionId)})}function o(n){t.updateDeployableCompleted(n,e.DEPLOYABLE_TYPE.BusinessSolution)}}i.register("BizFlowOnBeforeUnloadChecker").asCtor(Jf).dependencies("Consts, WindowBeforeUnloadHandler, SiteConfigManager, TimerManager, FlowTransitionChecker, CrossDomainManager, FeaturesManager, FlowStack");function Jf(t,n,r,i,o,a,s,u){var l=this;l.init=g,l.destroy=E;var c,d,f,p=3e3;function g(){h(),n.register(m),o.register(t.FLOW_TRANSITION_HANDLER_IDS.ON_BEFORE_UNLOAD,y)}function h(){c=!1,d=null,f=null}function m(){if(u.isEmpty())return;if(c=!0,i.pauseAllTimeouts(),!a.get().enabled()){d=e.Deferred(),f&&f.clear();var t=r.get().Settings.BeforeUnloadTimeout||p;f=i.setWalkmeTimeout(v,t)}}function v(){s.isFeatureEnabled("noUnload")&&i.resumeAllTimeouts(),d.resolve(),h()}function y(){return c?a.get().enabled()?(h(),a.get().loseOwnership(!1,!0),e.Deferred().reject()):d.promise():e.Deferred().resolve()}function E(){f&&f.clear(),h()}}i.register("SplitFlowNodePlayableLinkProvider").asCtor($f).dependencies("FlowLinkSegmentationChecker, ObjectJpath");function $f(e,t){var n=this;n.getPlayableLink=i;function r(){}function i(t){for(var n=o(t.Links),r=0;r<n.length;r++){var i=n[r];if(!a(i)||e.isSegmented(i))return i}return null}function o(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];a(i)?t.push(i):n.push(i)}return t=t.concat(n)}function a(e){var n=t.getValue(e,"ConditionTrees.Branch.Root");return!!n}r()}i.register("FlowLinkSegmentationChecker").asCtor(Zf).dependencies("ConditionCheckerFactory");function Zf(e){var t=this;t.isSegmented=r;function n(){}function r(t){var n={featureName:"evaluate split node link segmentation",elementName:t.Name},r=e.createNew(n),i=r.getCurrentEvaluationValueAndStopEvaluating(t.ConditionTrees.Branch);return i}n()}i.register("FlowsContainer").asCtor(ep).dependencies("FlowStack");function ep(e){var t=this;t.init=r,t.getNodeById=o,t.getFlowById=i,t.getCurrentNode=a;var n;function r(e){n={};for(var t=0;t<e.length;t++)n[e[t].Id]=e[t]}function i(e){return n[e]}function o(e,t){return n[e].Nodes[t]}function a(){if(e.isEmpty())return;var t=e.peek();return o(t.flowId,t.stageId)}}i.register("FlowSurveyActivator").asCtor(tp).dependencies("WmInternals, Consts, BusinessSolutionsManager, DeployableSurveyActivator, FlowDataPersister, StorageKeysConfigurations");function tp(t,n,r,i,o,a){function s(){t.on(n.EVENTS.Flows.FlowCompleted,u),t.on(n.EVENTS.Flows.FlowStopped,l)}function u(e,t){c(t.businessSolutionId,n.SURVEY_START_EVENTS.WalkThruCompleted)}function l(e,t){c(t.businessSolutionId,n.SURVEY_START_EVENTS.WalkThruExited)}function c(e,t){var s=r.getById(e);if(!s.Surveys||0==s.Surveys.length)return;var u=d(s.Surveys,t);if(!u)return;var l=a.flowSurveyActivator.surveyRepeat.key+n.DEPLOYABLE_TYPE.BusinessSolution+"-"+s.Id,c=n.SURVEY_FREQUENCY[u.Frequency],f={objectId:s.Id,type:n.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP},p={businessSolutionId:s.Id,eventSource:t,surveyPlayGUID:o.getPlayGuid()};i.activateSurvey(u.SurveyId,l,c,f,p)}function d(t,r){var i=n.SURVEY_START_EVENTS.Both,o=void 0;return e.each(t,function(e,t){t.TriggerType!=r&&t.TriggerType!=i||(o=t)}),o}s()}i.register("FlowTransitionChecker").asCtor(np).dependencies("Consts");function np(t){var n=this;n.register=s,n.canContinue=u;var r,i,o;function a(){i=[],o=[],r={},r[t.FLOW_TRANSITION_HANDLER_IDS.DELAYER]=!0}function s(e,t){r[e]?i.push(t):o.push(t)}function u(){var t=e.Deferred();return l(i).then(function(){l(o).then(t.resolve,t.reject)},t.reject),t.promise()}function l(t){var n=e.map(t,c);return e.when.apply(e,n)}function c(e){return e()}a()}i.register("FlowTransitionDelayer").asCtor(rp).dependencies("Consts, FlowTransitionChecker, TimerManager, FlowTransitionDelayProvider");function rp(e,t,n,r){var i=this;i.setDelayByTrigger=l,i.destroy=d;var o,a,s;function u(){s=mtjQuery.Deferred().resolve(),o=s,t.register(e.FLOW_TRANSITION_HANDLER_IDS.DELAYER,c)}function l(e,t){var i=r.getDelay(e,t);i&&(o=mtjQuery.Deferred()),a=n.setWalkmeTimeout(o.resolve,i)}function c(){return o.promise()}function d(){a&&(a.clear(),a=null,o.reject(),o=mtjQuery.Deferred().resolve())}u()}i.register("FlowTransitionDelayProvider").asCtor(ip).dependencies("SiteConfigManager, FlowTransitionDelayerDefaultMap");function ip(e,t){var n=this;n.getDelay=r;function r(e,n){return e.getDelay&&e.getDelay()||i()[n]||t[n]||0}function i(){return e.get().Settings.TriggersDelays||{}}}i.register("FlowTransitionDelayerDefaultMap").asCtor(op).dependencies("Consts");function op(e){var t={};return t[e.FLOW_TRIGGER_TYPE.Click]=1e3,t}i.register("NextExecutionFlowNodeProvider").asCtor(ap).dependencies("FlowNodeExtensions, SplitFlowNodeDecisionProvider, ErrorHandlingFlowNodeDecisionProvider");function ap(e,t,n){var r=this;r.getNextNodeToExecute=i;function i(t){return o(t)||a(t)||e.getNodeConnectors(t)[0].TargetFlowNodeId}function o(n){return e.isSplitNode(n)&&t.getNextNodeId(n)}function a(t){return e.isErrorHandlingNode(t)&&n.getNextNodeId(t)}}i.register("SplitFlowNodeDecisionProvider").asCtor(sp).asProto().dependencies("SplitFlowNodePlayableLinkProvider");function sp(e){var t=this;t.getNextNodeId=r;function n(){}function r(t){var n=e.getPlayableLink(t);if(!n)return null;var r=n.TargetFlowNodeId;return r}n()}i.register("ErrorHandlingFlowNodeDecisionProvider").asCtor(up).asProto().dependencies("ErrorHandlingSegmentationChecker, FlowNodeExtensions");function up(e,t){var n=this;n.getNextNodeId=r;function r(n){var r=0,i=e.isSegmented(n);return i&&(r=t.getErrorHandlingConnectorIndex(n)),n.Links[r].TargetFlowNodeId}}i.register("FlowExecutionTraverser").asCtor(lp).dependencies("FlowsContainer, NextExecutionFlowNodeProvider");function lp(e,t){var n=this;n.executionTraverse=i;function r(){}function i(n,r,i){var o={};a(r);function a(r){if(o[r])return;var s=e.getNodeById(n,r),u=i(s);if(!u)return;o[r]=1;var l=t.getNextNodeToExecute(s);l&&a(l)}}r()}i.register("FlowGroupLastStageIndicator").asCtor(cp).dependencies("ClientStorageManager");function cp(e){var t=this;t.setPreviousGroupHasNextStage=r,t.removePreviousGroupHasNextStage=i,t.isPreviousGroupHasNextStage=o;var n=e.keysConfig.flow.lastStage.key;function r(t,r){var s=o();t&&!s&&a(r)?e.saveData(n,r.Id,e.keysConfig.flow.lastStage.expiry):t||s!=r.Id||i()}function i(){e.removeData(n)}function o(){return e.getData(n,!1)}function a(e){return e.Links[0].TargetFlowNodeId}}i.register("UiFlowNodesExecutionStack").asCtor(dp).dependencies("Consts, FlowsContainer, FlowNodeExtensions, FlowStack, WmInternals, ButtonTriggersProvider");function dp(e,t,n,r,o,a){var s=this,u=i.create("Stack");s.clear=u.clear,s.push=u.push,s.pop=u.pop,s.isEmpty=u.isEmpty;function l(){c()}function c(){o.bind(e.EVENTS.Flows.FlowStarted,u.clear),o.bind(e.EVENTS.Flows.BeforeExecutingFlowStage,d),o.bind(e.EVENTS.Flows.AfterCompletingFlowStage,p)}function d(e,t){f(t)&&!v(t)||u.clear()}function f(e){var r=t.getNodeById(e.flowId,e.stageId),i=r&&n.isUiNode(r);return i}function p(e,t){g(t)&&m(t)&&u.push(r.peek().stageId)}function g(e){return!e.isFlowGoingBack}function h(e){var t=e.step,n=t.UIElements[0],r=a.get(n);return r.length>0}function m(e){return f(e)&&h(e)}function v(e){return f(e)&&!h(e)}l()}i.register("FlowInnerGroupService").asCtor(fp).dependencies("FlowsContainer, FlowStack, FlowGroupLastStageIndicator");function fp(e,t,n){var r=this;r.pushInnerGroupIfExists=i;function i(r,i){if(!i)return;var o,a=e.getFlowById(r),s=a.Nodes[i];o=s.ErrorHandlingParentId?s.ErrorHandlingParentId:s.Settings&&s.Settings.ErrorHandlingParentId,o&&(t.push(r,o),n.setPreviousGroupHasNextStage(!0,a.Nodes[o]))}}i.register("FlowVisualStepsIndicator").asCtor(pp).dependencies("Consts, FlowsContainer");function pp(t,n){var r=this;r.init=o,r.getTotalVisualSteps=a,r.getNextVisualStepIndex=s;var i;function o(e){u(e)}function a(){return i.length}function s(t){return e.inArray(t,i)+1}function u(e){var r,o=[],a=n.getFlowById(e),s=a.Nodes;for(var u in s)r=s[u],r.Type==t.FLOW_STEP_TYPE.UI&&(o=o.concat(r.UIElements));o.sort(c),i=l(o)}function l(t){return e.map(t,function(e){return e.Id})}function c(e,t){var n=e.PointIndex,r=t.PointIndex;return n<r?-1:1}}i.register("FlowSafeStartHandler").asCtor(gp).dependencies("RedirectService, Consts, FlowStack, FlowDataPersister, FlowEventRaiser");function gp(e,t,n,r,i){var o=this;o.auditSafeStartStatus=u,o.redirect=a,o.auditStayButtonClicked=s,o.auditSafeStartDisabled=l,o.auditSafeStartFirstStatus=u;function a(t,i){n.push(i.flowId),r.saveSafeStartFlowId(i.flowId),e.redirect(t)}function s(e){u(t.SAFESTART_ACTION.StayClicked,e)}function u(e,n){n.eventParams.status=e,n.eventParams.flowId=n.flowId,i.raiseEventOnCurrentFlow(t.EVENTS.Flows.SafeStartStatusChanged,n.eventParams)}function l(e){u(t.SAFESTART_ACTION.ErrorShown,e)}}var hp=function(){function t(e,t,n,r,i,o){var a=this,s=o.css,u=o.Id;this.resourceManager=e,this.uiChangeTracker=t,this.timerManager=n,this.cssUtils=r,this._logger=i,this.uiChangeListener=function(){a.jSelectorsOff(),a.jSelectorsOn()},this.Id=u,this.DYNAMIC_CSS_CLASS="wm-dynamic-css-"+u+"-",this.parseCss(s)}return t.prototype.parseCss=function(e){var t=this.cssUtils.clearComments(e),n=this.secureScreen(t),r=this.replaceJQuerySelectors(n),i=r.pureCss,o=r.jSelectors;this._jSelectors=o,this._css=i},t.prototype.secureScreen=function(e){if(!this.cssUtils.isSecure(e))return this._logger.customerLog("[Dynamic Css] - Forbidden tokens detected - css reset to empty",3),"";return e},t.prototype.add=function(){try{0==this.getStyleSheet().length&&this.resourceManager.injectCss(this._css,this.getStyleSheetId()),this.jSelectorsOn(),this.uiChangeTracker.bind(this.uiChangeListener),this.listenToMutations()}catch(e){this._logger.customerLog("[Dynamic Css] - Faied to add css",3)}},t.prototype.remove=function(){this.getStyleSheet().remove(),this.jSelectorsOff(),this.uiChangeTracker.unbind(this.uiChangeListener),this.observer&&this.observer.disconnect()},t.prototype.replaceJQuerySelectors=function(t){var n=this,r=this.cssUtils.getSelectors(t),i=e.grep(r,function(e){return e&&!n.isCss(e)}).map(function(e,t){return{selector:e,"class":""+n.DYNAMIC_CSS_CLASS+t}}),o=e(i).reduce(function(e,t){return e.replace(t.selector,"."+t["class"])},t);return{pureCss:o,jSelectors:i}},t.prototype.isCss=function(e){try{return document.querySelector(e),!0}catch(t){return!1}},t.prototype.listenToMutations=function(){var e=this;window.MutationObserver&&(this.observer=new MutationObserver(function(){return e.timerManager.libSetTimeout(e.uiChangeListener,0)}),this.observer.observe(document,{childList:!0,subtree:!0}))},t.prototype.jSelectorsOn=function(){e(this._jSelectors).safeEach(function(t,n){var r=e(n.selector);r.addClass(n["class"])})},t.prototype.jSelectorsOff=function(){e(this._jSelectors).safeEach(function(t,n){var r=e("."+n["class"]);r.removeClass(n["class"])})},t.prototype.getStyleSheet=function(){return e("#"+this.getStyleSheetId())},t.prototype.getStyleSheetId=function(){return"wm-dymanic-css-"+this.Id},t}();i.register("DynamicCss").asCtor(hp).asProto().dependencies("ResourceManager, UIChangeTracker, TimerManager, CssUtils, Logger"),i.register("FlowStartPointDataProvider").asCtor(mp).dependencies("FlowsContainer, FlowStartingStageProvider");function mp(e,t){var n=this;n.get=r;function r(n,r){if(r)return{startingNodeId:r};var i=e.getFlowById(n);return t.getStageData(i)}}i.register("FlowNodePlayIndicator").asCtor(vp).dependencies("FlowNodeExtensions, FlowExecutionTraverser");function vp(e,t){var n=this;n.isPlayable=i;function r(){}function i(e,n){var r=!1;return t.executionTraverse(e,n,function(e){var t=!0;return o(e)&&(r=!0,t=!1),t}),r}function o(t){return e.isConnectToBizFlowNode(t)||!e.isActionNode(t)}r()}i.register("FlowStartFailureListener").asCtor(yp).dependencies("Consts, WmInternals, PopupNotificationsService, FlowDataPersister, SiteConfigManager");function yp(e,t,n,r,i){var o=this;o.listen=a;function a(){t.bind(e.EVENTS.Flows.FailedToStart,function(e,t){if(!t.isSafeStartHandling&&!r.getSafeStartFlowId()){var o=i.get(),a=o.TutorialCantPlayText;n.showFailedToStartPopup(o,a)}})}}i.register("WalkMePlayerLazyAPI").asCtor(Ep).dependencies("WmInternals, Consts, UIChangeTracker, WidgetVisibilityEvaluator, TimerManager");function Ep(t,n,r,o,a){var s,u=this;u.hidePlayer=f("hidePlayer"),u.showPlayer=f("showPlayer"),u.removePlayer=f("removePlayer"),u.hideMenu=f("hideMenu"),u.showMenu=f("showMenu"),u.removeMenu=f("removeMenu"),u.toggleMenu=f("toggleMenu"),u.removeAttenGrab=f("removeAttenGrab"),u.showWalkthruPlayer=f("showWalkthruPlayer"),u.hideWalkthruPlayer=f("hideWalkthruPlayer"),u.removeWalkthruPlayer=f("removeWalkthruPlayer"),u.showWalkthruMenu=f("showWalkthruMenu"),u.hideWalkthruMenu=f("hideWalkthruMenu"),u.removeWalkthruMenu=f("removeWalkthruMenu"),u.redrawPlayer=d,u.isMenuOpen=p,u.isWalkthruMenuOpen=p;function l(){e(t).on(n.EVENTS.Widget.WidgetAPICreated,c)}function c(e,t){for(var n in t.WalkMePlayerAPI)t.WalkMePlayerAPI.hasOwnProperty(n)&&(u[n]=t.WalkMePlayerAPI[n]);s=!0}function d(){i.get("WidgetLoader").loadWidget()}function f(n){return function(){var r=arguments;e(t).one("PlayerInitComplete",function(){a.setWalkmeTimeout(function(){
var e=s?u:window.WalkMePlayerAPI;e[n].apply(null,r)},0)}),d()}}function p(){return!1}l()}i.register("LegacyWidgetApiModule").asCtor(Sp).dependencies("Lib, wmjQuery, DebuggerManager, LoggerManager, UiUtils, SiteConfigManager, ClickAuditManager, WmAjax, RecorderServerManager, AbPermutationManager, EndUsersManager, AuditSourceManager, Consts, WalkMeVisibilityChecker, WidgetApi, AttentionGrabberManagerAPI, Mustache, PerformanceAPI, WalkmeVisibleReporter, AutoStartManager, AuditingEnabledIndicator, BiggestFrameProvider, WidgetVisibilityEvaluator");function Sp(e,t,n,r,o,a,s,u,l,c,d,f,p,g,h,m,v,y,E,S,T,C,b){var w=this;w.searchTermChangedOnWidget=_,w.widgetLoaded=k,w.sendWidgetOpenLogToServer=A,w.sendSearchResultClickedToServer=D,w.getSearchResultsFromServer=O,w.saveSearchToServer=N,w.sendResultClickedBeforeSearchToServer=x,w.shouldShowWidgetAccordingToAbTesting=g.isWalkMeVisible,w.widgetApi=h,w.UiProperties=L,w.getAttentionGrabberManager=F,w.getMustache=M,w.getConsts=B,w.getEventsTrigger=R,w.auditClick=s.SendClickAudit,w.getClickAuditManager=U,w.userSawWalkMe=E.report,w.checkRepeatCookie=S.checkRepeatCookie,w.isAuditDisabled=V,w.getBiggestFrame=C.getBiggestFrame,w.checkShowOnlyInUrl=b.checkShowOnlyInUrl,w.playerCreationComplete=W,w.triangleLoaded=G,w.mt_log=H;var I=6e3;function P(){t.extend(e,w)}function _(e){}function k(e){y.measure("widgetEndLoad"),e&&e.bind("on-activate",o.fixFlash)}function A(){if(!T.isEnabled())return!0;s.SendWidgetOpen({})}function D(e,t,n,r,i,o){if(!T.isEnabled())return;var a=l.get(),s=u.execute({url:a+"/Search/SearchResultClicked",dataType:"jsonp",data:{userGuid:e,searchGuid:t,resultSearchProvider:n,selectedItem:r,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get()}});s.success(i),s.error(o)}function O(e,t,n,r,i){var o=l.get(),a=u.execute({url:o+"/Search/Search",data:{userGuid:e,query:t,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get(),saveSearch:!i},timeout:I});return a.success(n),a.error(r),a}function N(e,t,n,r){if(!T.isEnabled())return;var i=l.get(),o=u.execute({url:i+"/Search/SaveSearch",dataType:"jsonp",data:{userGuid:e,query:t,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get()},timeout:I});o.success(n),o.error(r)}function x(e,t,n,r,i){var o=l.get(),a=u.execute({url:o+"/Search/ResultClickedBeforeSearch",dataType:"jsonp",data:{userGuid:t,searchQuery:e,selectedItem:n,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:f.get()}});a.success(r),a.error(i)}function L(){return p.UI_PROPERTIES}function F(){return m}function M(){return v}function B(){return p}function R(){return i.get("EventsTrigger")}function U(){return s}function V(){return!T.isEnabled()}function W(e){if(e)return;var n=t("#mt-menu-closed, #walkme-menu-closed"),r={config:a.get(),player:n},o=i.get("CommonUtils").attentionGrabberClass(r);o.setupAttenGrab()}function G(e){i.get("PostDataFileLoadedHandler").dataFinishedLoading(e)}function H(e){i.get("Logger").customerLog(e,5)}P()}i.register("WidgetVisibilityEvaluator").asCtor(Tp).dependencies("LocationMatcher, SettingsValuesRetriever, SiteConfigManager, Consts, Lib, CommonEvents, UIChangeTracker, FeaturesManager, TimerManager");function Tp(e,t,n,r,i,o,a,s,u){var l=this;l.init=g,l.checkShowOnlyInUrl=v;var c,d=!0,f="monitorWidget",p=5e3;function g(){a.bindPreListener(y),h(),m()}function h(){(n.get().Settings[f]||s.isFeatureEnabled(f))&&(d=!1)}function m(e){y(),d||c||u.libSetTimeout(m,p)}function v(){return void 0!==c&&d||y(),c}function y(){var e=!!E(),t=void 0===c?e:e!==c;t&&(c=e,o.raiseEvent("WidgetVisibilityChanged",{isVisible:e}))}function E(){var a=!0,s=n.get(),u=t.getSettingsValue(s.Settings,r.DISPLAY_WIDGET_CONDITION,null);return u?(a=i.evaluateConditionTree(u),o.deprecatedRaiseEvent("WidgetConditionEvaluated",s)):null!=s.ShowInUrl&&0!=s.ShowInUrl.length&&(a=e.isLocationMatchString(s.ShowInUrl)),a}}i.register("WidgetApi").asCtor(Cp).dependencies();function Cp(){var e=this;e.getEventSender=function(){return i.get("EventSender")},e.getCtx=function(){return i}}i.register("WidgetLoader").asCtor(bp).dependencies("CommonUtils, CommonEvents, PerformanceAPI, Consts, WidgetVisibilityEvaluator, WmInternals, WalkMePlayerLazyAPI, Logger");function bp(t,n,r,i,o,a,s,u){var l=this;l.init=f,l.loadWidget=p;var c,d;function f(t){if(!t)return;c=t,window.WalkMePlayerAPI=s,u.customerLog("Waiting for widget visibility evaluator"),e(a).one("WidgetVisibilityChanged",p),o.init(),o.checkShowOnlyInUrl()}function p(){if(d)return;d=!0,e(a).off("WidgetVisibilityChanged",p),r.measure("widgetStartLoad");var o=[c];o.asyncCallback=function(){t.addScript(c)},n.raiseEvent(i.EVENTS.WidgetLoad,o)}}i.register("ElementFinderExtensionsProvider").asCtor(wp).dependencies("");function wp(){var e=this;e.register=n,e.getElementFinderExtension=r;var t=[];function n(e){t.push(e)}function r(e){for(var n=0;n<t.length;++n)if(t[n].isEnabled(e))return t[n]}}i.register("TestmeApi").asCtor(Ip).dependencies("WalkMeInfo, CommonUtils, ClientStorageManager, SettingsFile");function Ip(e,t,n,r){var i=this;i.loadTestMe=o,i.startTestMe=a,i.rememberTestMeIsOn=s,i.isTestMeLoaded=u;function o(n){var i,o;i||(i=r.getPlayerRelatedPath()+"testme/"),o||(o="walkme_testme_"+e.getLibVersion()+".js"),t.addScript(i+o,n)}function a(){u()?(window._testMe.exit(),window._testMe.start()):o()}function s(){var e=n.keysConfig.testMe.loadTestMe;n.saveData(e.key,1,e.expiry)}function u(){return!!window._testMe}}i.register("UiObjectsTreeConverter").asCtor(Pp).dependencies("Logger, Consts");function Pp(t,n){var r=this;r.convert=i;function i(n){if(!n||0==n.length)return;t.customerLog("converting objects tree started for root "+n[0]._name,4);var r=e.map(n,function(e){var t=i(e._children,e),n=o(e,t);return n});return t.customerLog("converting objects tree ended for root "+n[0]._name,4),r}function o(e,t){var r=a(e);return{getTitle:function(){return e._name},getDescription:function(){return e._description},getKeywords:function(){return e._keywords},getType:function(){return e._type},getChildren:function(){return t},getContentType:function(){return r.getContentType()},isVisible:function(){return r.isProperty(n.UI_PROPERTIES.Visible)},isCompleted:function(){return r.isProperty(n.UI_PROPERTIES.Completed)},isActive:function(){return r.isProperty(n.UI_PROPERTIES.Active)},isAccessible:function(){return r.isProperty(n.UI_PROPERTIES.Accessible)},isSearchSupported:function(){return r.isProperty(n.UI_PROPERTIES.Search)},activate:e.activate}}function a(e){var t=function(){var t;return function(){return t||(t=e.properties().getAll()),t}}();return{isProperty:function(e){return t().indexOf(e)>-1},getContentType:function(){if(t().indexOf(n.UI_PROPERTIES.Video)>-1)return n.UI_PROPERTIES.Video;if(t().indexOf(n.UI_PROPERTIES.Article)>-1)return n.UI_PROPERTIES.Article;return!1}}}}i.register("WidgetUiApi").asCtor(_p).dependencies("UiDataProvider, UiObjectsTreeConverter, Logger");function _p(e,t,n){var r=this;r.getObjectsTree=i;function i(){n.customerLog("getting objects tree",4);var r=e.uiObjectsTree();return t.convert(r)}}i.register("LegacyExternalApiModule").asCtor(kp).dependencies("Lib, wmjQuery, EndUsersManager, FramesetsUtils, RecorderServerManager, LanguageManager, PerformanceAPI, ElementFinder, Logger, CustomCssSetter, SiteConfigManager, ElementCenterer, DeployablesManagerFactory, FeaturesManager, WalkMeVisibilityChecker, AuditSourceManager, BBCodeEventsBinder, UserGuidContainer,LaunchersModule, LibDestroyer, DataFileDataLoader, PostDataFileLoadedHandler");function kp(e,t,n,r,o,a,s,u,l,c,d,f,p,g,h,m,v,y,E,S,T,C){var b=this;b.getTimerManager=I,b.getHostData=P,b.getClientStorageManager=_,b.getStorageManagerInstance=k,b.getServerStorageManager=A,b.getABPermutationId=i.get("AbPermutationManager").getPermutation,b.getEndUserGuid=n.getEndUserGuid,b.getUiTracker=D,b.getSalesForceManager=O,b.getUiUtils=N,b.getDataFileExtraData=x,b.getFramesetsUtils=L,b.getPlayerServer=o.get,b.getCurrentLanguage=a.getCurrentLanguage,b.addTimeStamp=s.measure,b.getUiDataProvider=F,b.generateNewGuid=i.get("GuidGenerator").generateGuid,b.getBrowser=M,b.isQuirksMode=P().isQuirksMode,b.getBiggestFrame=i.get("BiggestFrameProvider").getBiggestFrame,b.injectCustomCSS=c.setCustomCssIfNeeded,b.shouldHandlePageAsFramesets=r.shouldHandlePageAsFramesets,b.getServerDataSenderManager=B,b.getCommonUtils=R,b.getPositionHelper=U,b.getCommonEvents=V,b.getSiteConfig=d.get,b.setSiteConfig=d.set,b.centerElementInPage=f.centerElementInPage,b.getDeployablesManager=p.get,b.isFeatureActive=g.isFeatureEnabled,b.isWalkMeVisible=h.isWalkMeVisible,b.getWmAjax=W,b.getEnvId=m.get,b.getPlayInitiatorEnum=G,b.elkState=H,b.getIsInEditor=j,b.getCenteredElement=Y,b.startNewInteraction=z,b.registerFindElementPlugin=Q,b.getFindElementPluginManager=q,b.overrideBalloonEmbedder=X,b.getTodoListManager=J,b.getBalloonDrawer=$,b.getExecuteParallel=Z,b.getSurveys=ee,b.bindBBCodeEvents=v.bind,b.getBodyInheritedMargin=ne,b.setIsInEditor=re,b.setRecorderServer=ie,b.getElementStrength=oe,b.getUserGuid=y.getUserGuid,b.setUserGuid=y.setUserGuid,b.ConditionFunctionsObj=i.get("ConditionFunctions"),b.ResourceManager=i.get("ResourceManager"),b.Logger=l,b.lib_error=ae,b.getLaunchers=E.getLaunchers,b.setLaunchers=E.setLaunchers,b.showAllLaunchers=E.showAllLaunchers,b.getLauncherAction=E.getLauncherAction,b.releaseLaunchers=E.releaseLaunchers,b.releaseAllElements=S.releaseAllElements,b.releaseBalloons=S.releaseBalloons,b.releaseShoutOuts=S.releaseShoutOuts,b.releaseFlow=S.releaseFlow,b.removeWalkMe=S.removeWalkMe,b.destroyAll=S.destroyAll,b.appendDataPackage=T.appendDataPackage,b.appendWalkMeConfigData=T.appendWalkMeConfigData,b.dataFileLoaded=T.dataFileLoaded,b.dataFinishedLoading=C.dataFinishedLoading,b.setSurveysForRecorder=se,b.parseBBCode=i.get("BBCodeParser").parse,b.completeGoalById=i.get("GoalsManager").completeGoalById,b.getElementTextArray=i.get("ElementTextExtractor").getElementTextArray,b.wrapFESession=u.wrapSession,b.findElement=ue(u.findElement),b.getFEVersionName=K,b.setAuditSource=m.set,b.evaluateConditionTree=i.get("ConditionTreeEvaluator").evaluate,b.getWalkmeOOP=le,b.getEndUserId=ce,b.getStorageType=de,b.launchLogger=fe,b.getAbtestingGoalsManager=pe,b.getTutorials=te,b.getCurrentTutorial=se,b.getState=se;function w(){t.extend(e,b)}function I(){return i.get("TimerManager")}function P(){return i.get("HostData")}function _(){return i.get("ClientStorageManager")}function k(e){if(e)return i.get("StorageManagerFactory").byType(e);return _()}function A(){return i.get("ClientOrServerStorageManager")}function D(){return i.get("UIChangeTracker")}function O(){return i.get("SalesForceManager")}function N(){return i.get("UiUtils")}function x(){return i.get("DataFileExtraData").data}function L(){return r}function F(){return i.get("UiDataProvider")}function M(){return P().browser.string}function B(){return i.get("ServerDataSenderManager")}function R(){return i.get("CommonUtils")}function U(){return i.get("PositionHelper")}function V(){return i.get("CommonEvents")}function W(){return i.get("WmAjax")}function G(){return i.get("Consts").STEP_PLAY_INITIATOR_ENUM}function H(e){R().elementLastKeeper.setState(e)}function j(){return i.get("IsInEditor").get()}function Y(e){return i.get("CenteredElementProvider").get(e)}function z(){i.get("InteractionManager").beginNewInteraction()}function Q(e){q().registerPlugin(e)}function q(){return u.getFindElementPluginManager()}function K(){return u.initFE(),u.getFindElementCore().VersionName}function X(e){i.register("BalloonEmbedder").asCtor(e).dependencies("getTopContainer")}function J(){return i.get("TodoListManager")}function $(e){return i.get("BalloonDrawerProvider").getBalloonDrawer(e)}function Z(){return R().executeParallel}function ee(){return i.get("SurveysManager").getAll()}function te(){return[]}function ne(){return U().getBodyInheritedMargin()}function re(e){i.get("IsInEditor").set(e)}function ie(e){var t=i.get("RecorderServerManager");t.set(e);var n=i.get("LibInitializer").getPlayerServer();null!==n&&void 0!==n&&t.set(n)}function oe(t){var n={score:-1},r=i.get("StaticUtils").secureEvalJSON(t);i.get("DataFixer").fixStep(r,0,{BalloonSettings:{}});var o=e.findElement(r,null,n);if(o)return n.score;return null}function ae(e,t){l.error(e,t)}function se(){}function ue(e){return function(){try{return e.apply(null,arguments)}catch(t){l.error(t)}}}function le(){return Xp}function ce(){var e=!i.get("AbTestingManager").isAbTestingEnabled();return n.getEndUserGuid(e)}function de(){var e=i.get("ClientOrServerStorageManager").getStorageType();return e.mode+" - "+e.type}function fe(){var e=i.get("LoggerManager");e.isLoggerActivated()||e.launchLogger()}function pe(){return i.get("AbTestingGoalsManagerInstance").value}w()}i.register("CenteredElementProvider").asCtor(Ap).dependencies("Logger, StringUtils, ArrayUtils");function Ap(e,t,n){var r=this;r.get=a;var i=void 0,o=void 0;function a(t){for(var n=mtjQuery(t).parents(),r=null,i=n.length-1;i>=0;i--)try{var o=l(n[i]);if(o){var a=mtjQuery(n[i]),s=mtjQuery(window).width(),u=a.width(),c=a.offset().left,f=s-u;if(f>0&&f/2==c){r=a;break}if(f<0&&f==c){r=a;break}if(d(a)){r=mtjQuery(a);break}}}catch(p){e.customerLog("error-----------------------------------",5),e.error(p)}return r}function s(){return void 0==o&&(o=[],n.foreach(document.styleSheets,u)),o}var u=function y(e){try{for(var t=e.cssRules||e.rules,n=0;n<t.length;n++){var r=t[n];r.type&&r.type==window.CSSRule.IMPORT_RULE?y(r.styleSheet):p(r.style)&&o.push(r.selectorText)}}catch(i){}},l=function(e){var t=mtjQuery(e),n=t.data("mt_isElementFixedWidth");if(1==n)return!0;if(0==n)return!1;var r=c(e);return t.data("mt_isElementFixedWidth",r),r},c=function(e){if(g(e.style))return!0;var t=h(e,m());return t},d=function(e){var t=mtjQuery(e),n=t.data("mt_isElementMarginAuto");if(1==n)return!0;if(0==n)return!1;var r=f(e);return t.data("mt_isElementMarginAuto",r),r},f=function(e){if(p(e.style))return!0;var t=h(e,s());return t},p=function(e){if(e){var n=mtjQuery.trim(e.margin),r=mtjQuery.trim(e.marginLeft),i=mtjQuery.trim(e.marginRight),o=t.startsWith(n,"0")&&t.endsWith(n,"auto"),a="auto"==r&&"auto"==i;if(o||a)return!0}return!1},g=function(e){var t=e.width;if(t){for(var n="",r=0;r<t.length;r++)isNaN(t[r])||(n+=t[r]);if(n&&parseInt(n)>700&&(t.indexOf("p")!=-1||t.indexOf("e")!=-1||t.indexOf("m")!=-1||t.indexOf("i")!=-1))return!0}return!1},h=function(e,t){for(var n=!1,r=0;r<t.length;r++){var i=t[r];if(n=mtjQuery(e).is(mtjQuery(i)))return n}return n},m=function(){return void 0==i&&(i=[],n.foreach(document.styleSheets,v)),i},v=function E(e){try{for(var t=e.cssRules||e.rules,n=0;n<t.length;n++){var r=t[n];r.type&&r.type==window.CSSRule.IMPORT_RULE?E(r.styleSheet):g(r.style)&&i.push(r.selectorText)}}catch(o){}}}i.register("CustomVariableAuditor").asCtor(Dp).dependencies("SiteConfigManager,CommonUtils,CommonEvents,Consts");function Dp(e,t,n,r){var i=this,o=[];function a(){var t=e.get().Settings.customAuditVars;if(t)for(var n=0;n<t.length;n++){var r=t[n];r.value&&""!=r.value&&(r.value.indexOf("walkme_sf_vars")>-1?o.push({index:n+1,value:r.value}):s(n+1,r.value))}}i.handleSfVars=function(){for(var e=0;e<o.length;e++){var t=o[e];s(t.index,t.value)}};function s(e,t){var n=u(t);"string"==typeof n?WalkMeAPI.setAnalyticsCustomField(e,n):"boolean"==typeof n||"number"==typeof n&&!isNaN(n)?WalkMeAPI.setAnalyticsCustomField(e,n.toString()):void 0==n&&WalkMeAPI.setAnalyticsCustomField(e,"")}function u(e){var i={};return i.name=e,i.value=t.getWindowVar(e),i.defaultValue=i.value,n.raiseEvent(r.EVENTS.CustomAuditVar,i),i.returnValue}a()}i.register("BalloonEmbedder").asCtor(Op).dependencies("getTopContainer, ElementUtils, UiUtils, FeaturesManager, Consts, SiteConfigManager, wmjQuery");function Op(e,t,n,r,i,o,a){var s=this;s.getContainer=l,s.handleEmbedding=c,s.fixPosition=d,s.isEmbeded=f;function u(){var e=o.get().Custom,t=e&&e.walkMeNoEmbed&&e.walkMeNoEmbed.selectors;t&&a(t.join(",")).addClass("walkme-not-embed")}function l(t,o,s,u){if(r.isFeatureEnabled(i.FEATURES.EmbedInContainer)&&o.parents("dialog[open]").exist())return a("dialog[open]");if(f(t))return n.closestCanEmbed(o);var l=null;return s&&(l=e(o)),l&&l.length||(l=e(null,!0)),l}function c(e,t,n){if(!f(e))return;t.css("cursor","default")}function d(e,n,r){if(!f(n))return;if("BODY"==t.getElementTagName(r[0]))return;var i=r.offset();e.left-=i.left-r.scrollLeft(),e.top-=i.top-r.scrollTop()}function f(e){return e&&e.embed}u()}i.register("ElementInIframeIndicator").asCtor(Np).dependencies("FeaturesManager, Consts");function Np(e,t){var n=this;n.isInIframe=r;function r(n){if(e.isFeatureEnabled(t.FEATURES.OldIsInIframeIndication))return!!n.data("iframe");return n[0].ownerDocument!=window.document}}i.register("AuditSourceProvider").asCtor(xp).dependencies("AuditSourceManager, Consts");function xp(e,t){var n=this;n.isInPreviewMode=r,n.isInPlayMode=i,n.isProductionEnv=o;function r(){return e.get()===t.SOURCES.preview}function i(){return e.get()===t.SOURCES.play}function o(){return e.get()===t.SOURCES.production}}i.register("CorsSupportIndicator").asCtor(Lp);function Lp(){var e=this;e.hasCorsSupport=t;function t(){var e="withCredentials"in new XMLHttpRequest;return e}}i.register("BiggestFrameProvider").asCtor(Fp).dependencies("FramesetsUtils, Logger, FeaturesManager");function Fp(e,t,n){var r=this;r.getBiggestFrame=o;var i=null;function o(){var t=!1;try{t=!i||!e.isFrameActive(i)||mtjQuery("frameset",i.contentWindow.document).length>0}catch(r){t=!0}var o=i;return t&&(o=e.findBiggestFrame(),n.isFeatureEnabled("noBiggestFrameCache")||(i=o)),o}}i.register("CustomCssSetter").asCtor(Mp).dependencies("WalkMeVisibilityChecker, SiteConfigManager, IconTemplates, DirectHeadProvider, IsInEditor, HtmlDecoder, ResourceManager, CommonEvents, Consts, DesignTemplatesCalculatedCssGetter");function Mp(t,n,r,i,o,a,s,u,l,c){var d=this;d.setCustomCssIfNeeded=h,d.getAllCustomCssProp=C,d.setUiTemplates=g;var f,p;function g(e){p=e}function h(e,r){if(!t.isWalkMeVisible()&&!r)return;u.raiseEvent(l.EVENTS.BeforeSettingCustomCss,{element:e});var a=n.get().CustomCss||"",s=v()||"",d=m()||"",p=E()||"",g=c.get()||"",h=s+d+a+p+g;if(!S(h))return;var y=i.getDirectHead(e);if(!y)return;var C="wm_custom_css_set";o.get()&&y.data(C,!1);var b=y.data(C);if(!b)return f=h,T(h,y,C)}function m(){return y(r.customImages)}function v(){return y(r.htmlImages)}function y(e){for(var t="",n=0;n<e.length;n++){var r=e[n];r.Css&&(t+=r.Css)}return t}function E(){if(!p)return;var t="";return e.safeEach(p,function(e,n){for(var r in n)n[r].ExternalCss&&(t+=n[r].ExternalCss)}),t}function S(e){return void 0!=e&&e.length>0}function T(e,t,n){try{return e=a.decodeHtml(e,["&",'"',"'",">"]),s.injectCss(e,"walkme-custom-css",t,null,"walkme-player-css"),t.data(n,!0),!0}catch(r){return!1}}function C(){return f}}i.register("DirectHeadProvider").asCtor(Bp).dependencies("FramesetsUtils, FrameContentsProvider, IsInEditor, ElementInIframeIndicator, BiggestFrameProvider");function Bp(t,n,r,i,o){var a=this;a.getDirectHead=s;function s(a){if(!a){var s;return t.shouldHandlePageAsFramesets()&&(s=n.getFrameContents(e(o.getBiggestFrame()))),e("head",s)}if(r.get()||i.isInIframe(a))return a.parents("html").children("head")}}i.register("FrameContentsProvider").asCtor(Rp).dependencies("CommonUtils");function Rp(e){var t=this;t.getFrameContents=n;function n(t){var n=t[0];if(void 0==n)return[];var r;try{r=n.contentDocument?n.contentDocument:n.contentWindow?n.contentWindow.document:[],r=mtjQuery(r)}catch(i){e.handleCrossDomainError(i),r=[]}return r}}i.register("FocusedElementInElementChecker").asCtor(Up).dependencies("wmjQuery");function Up(e){var t=this;t.isFocusedElementOutsideElement=n;function n(t){var n=document.activeElement;return!t||!e.contains(t,n)}}i.register("WhiteListChecker").asCtor(Vp).dependencies("RecorderServerManager, ClientStorageManager, FeaturesManager, WmAjax");function Vp(t,n,r,i){var o=this;o.isUserInWhiteList=u;var a=1e4,s=n.keysConfig.whitelist.general.key;function u(t,i){var o=e.Deferred();if(r.isFeatureEnabled("whitelist")){var a=n.getData(s);1===a?o.resolve():0===a?o.reject():l(t,i,o)}else o.resolve();return o.promise()}function l(e,n,r){i.execute({dataType:"jsonp",url:t.get()+"/EndUser/IsEndUserInWhiteList",data:{endUserGuid:n,walkmeUserGuid:e},timeout:a,success:function(e){"true"==e.result?(c(e,1),r.resolve()):"false"==e.result?(c(e,0),r.reject()):r.reject()},error:function(){r.reject()}})}function c(e,t){n.saveData(s,t,e.cacheTimeInSeconds)}}i.register("AbTestingManager").asCtor(Wp).dependencies("ClientStorageManager, SiteConfigManager, Lib, Logger, RecorderServerManager, WmAjax, AuditSourceProvider, AuditingEnabledIndicator, FeaturesManager, UserGuidContainer");function Wp(e,t,n,r,i,o,a,s,u,l){var c,d,f,p,g=this;function h(){c=t.get(),f=n.getEndUserId,d=r.error}g.shouldLoadWalkme=function(){try{if(!g.isAbTestingEnabled())return!0;var t=e.keysConfig.abTesting.shouldLoadWalkme;return v(t.key,t.expiry,c.Settings.abTesting.loadPercentage)}catch(n){return d(n,"Could not check if Walkme should be loaded according to AB Testing"),!0}},g.shouldShowWidget=function(){try{if(!g.isAbTestingEnabled())return!0;var t=e.keysConfig.abTesting.shouldShowWidget,n=t.key;return window.walkme_ab_imp_cookie&&(n+="-"+f()),v(n,t.expiry,c.Settings.abTesting.showPercentage,m)}catch(r){return d(r,"Could not check if widget should be shown according to AB Testing"),!0}};function m(e){try{if(p||!s.isEnabled())return!0;var t=c.Settings.abTesting.testNumber,n=void 0!=window.wm_customData?wm_customData.abTestingData:null;o.execute({url:i.get()+"/Statistics/AddAbTestingWidgetVisible",data:{userGuid:l.getUserGuid(),endUserId:f(),testNumber:t,isVisible:e,customDataSerialized:rg(n)}})}catch(r){d(r,"Could not report ab testing result to server")}}g.isAbTestingEnabled=function(){var e=c.Settings&&c.Settings.abTesting&&parseInt(c.Settings.abTesting.enabled),t=u.isFeatureEnabled("abtesting")&&e&&!a.isInPreviewMode()&&!a.isInPlayMode();return t},g.disableReport=function(){p=!0};function v(t,n,r,i){var o=t+"-"+c.Settings.abTesting.testNumber,a=e.getData(o);if(a===!0||a===!1)return a;var s=y(1,100);return a=s<=r,e.saveData(o,a,n),i&&i(a),a}function y(e,t){return Math.floor(Math.random()*(t-e+1)+e)}h.apply(null,arguments)}i.register("AbTestingGoalsManagerInstance").asInstance({value:void 0}),i.register("DataFileKeyToDeployableType").asCtor(Gp).dependencies("DeployableTypes");function Gp(e){var t=this;t.Tutorials=e.Tutorial,t.Tasks=e.Task,t.Launchers=e.Launcher,t.Labels=e.LabelGroup,t.Surveys=e.Survey,t.Categories=e.Category,t.Contents=e.Content,t.Collections=e.Collection,t.Shuttles=e.Shuttle,t.Tags=e.Tag,t.ShoutOuts=e.ShoutOut,t.ConditionBlocks=e.ConditionBlock,t.BusinessSolutions=e.BusinessSolution,t.Lessons=e.Lesson,t.Courses=e.Course,t.TrackedPages=e.TrackedPage,t.TrackedElements=e.TrackedElement,t.SearchProviderUrls=e.SearchProviderUrl}i.register("DeployablesContainersFacade").asCtor(Hp).dependencies("LaunchersModule, DataFileKeyToDeployableType, DeployableTypes");function Hp(t,n,r){var o=this;o.emptyAllDeployablesContainers=a,o.addRangeToAllDeployablesContainers=s;function a(){t.setLaunchers([]),u(function(e,t){l(e,[])})}function s(e){var n=t.getLaunchers();n=n.concat(e[r.Launcher]),t.setLaunchers(n),u(function(t,n){c(t,e[n])})}function u(t){e.each(n,function(e,n){n!=r.Tutorial&&n!=r.Launcher&&t(e,n)})}function l(e,t){d(e,function(e){e.set(t)})}function c(e,t){d(e,function(e){e.addRange(t)})}function d(e,t){var n=e+"Container",r=i.get(n);t(r)}}i.register("LibInitializer").asCtor(jp).dependencies("Lib, AbPermutationManager, WalkMeInfo, ConditionTreeEvaluator, CommonUtils, SettingsFile, WmInternals,LanguageManager, WmAjax, WalkmeConfigManager, CommonEvents, Consts, TimerManager, LibDestroyer,IsInEditor, PerformanceAPI, Logger, UserGuidContainer, SiteConfigManager, MessageSender");function jp(e,n,r,o,a,s,u,l,c,d,f,p,g,h,m,v,y,E,S,T){var C,b,w,I,P=this,_="wm-customWidgetUrl",k=null,A=[],D=[],O=null,N=!1,x=!1,L=!1,F=!1,M=!1,B=!1,R=!0;P.releaseResources=h.releaseAllElements,this.isNextDataPackageIsHidden=function(){return N},this.getPlayerServer=function(){return w};function U(){C=a.addScript,V(),u&&!u.isSelfHosted||(R=!1)}function V(){window.wmPlaySnippet?(I=window.wmPlaySnippet,B=!0,F=!0):window.wmPreviewSnippet?(I=window.wmPreviewSnippet,M=!0,F=!0):window.wmSnippet&&(I=window.wmSnippet,F=!0)}this.changeLanguage=function(e,t){var n=function(n){n&&f.raiseEvent(p.EVENTS.LanguageChanged,{language:e}),t&&t(n)},r=l.changeLanguage(e,A);return r?h.releaseAllElements({isDuringLanguageChange:!0}).then(this.reloadDataFileAfterRelease(n)):n(r),r},this.reloadDataFileAfterRelease=function(e,t){t&&(A=t),L=!0,x=!0,O=e,k=0;var r=n.getPermutation();K(A,r)},this.isNewLanguage=function(){return L},this.startInitializer=function(e){te(function(){W(e)})};function W(t){var n=y.timer("init data files and widget");k=0;var r=!(M||B);if(f.raiseEvent(p.EVENTS.WalkmeLoaded),void 0!=window[p.EVENTS.WalkmeLoaded])_walkMe=_makeTutorial=e,window._walkmeInternals.continueLoad=function(){G(t)},window[p.EVENTS.WalkmeLoaded](e);else{if(!F)return;window.document.dontLoadTriangle&&r?(window._walkmeInternals.blocked=!0,window._walkmeInternals.continueLoad=function(){G(t)}):G(t)}n.stop()}function G(t){var n=s.getSettingsFile();n&&(i.get("PetaServerNameManager").set(n.PetaServer),n.IsInEditor&&m.set(!0),E.setUserGuid(n.UserGuids&&n.UserGuids[0]),w=n.PlayerServer,r.init(),B?n.data&&(n.data.tutorials?i.get("WalkthrusModuleLazyLoader").load(n.data.tutorials).then(function(){S.set(n.data.siteConfig),e.setTutorialsForEditor(n.data.tutorials,n.UserGuids[0]),g.setWalkmeTimeout(function(){i.get("PostDataFileLoadedHandler").dataFinishedLoading(!0,!0)},1)}):n.data.flows&&(S.set(n.data.siteConfig),i.get("BusinessSolutionsContainer").set(n.data.flows),g.setWalkmeTimeout(function(){i.get("PostDataFileLoadedHandler").dataFinishedLoading(!0,!0)},1))):H(n,function(e){Y(n,e)}))}function H(t,r){var i=d.Data;if(null==i||void 0==i.Permutations)r();else{var o=i.DefaultPermutation,a=i.Permutations;n.setPermutations(a,o);var s=j(i.ActivationRules);n.initGetPermutation(s,function(t){var o=n.getPermutationById(t);if(0===o.LoadWalkMe)return y.customerLog("WalkMe ABTesting - WalkMe Loading canceled. Stopping execution"),void h.removeWalkMe("AbTesting - LoadWalkMe is false");e.appendWalkMeConfigData(i),r(t)})}}function j(e){for(var t=0;t<e.length;t++){var n=e[t],r=o.evaluate(n.Settings.conditionTree);if(r===!0){var i=n.PermutationIds[0];return i}}return null}function Y(e,t){for(var n=e.DataFiles,r=0;r<n.length;r++)if(n[r].metaData)return void z(e,n[r]);Q(e.DataFiles,e.WidgetFile,t)}function z(e,t){c.loadTextFile(t.url,"fixedCallback",n,void 0,!1);function n(t,n,r){var i=[];t=I.fixAutoDetectPaths(t);for(var o=0;o<e.DataFiles.length;o++)1==e.DataFiles[o].metaData?i=i.concat(t.DataFiles):i.push(e.DataFiles[o]);Q(i,e.WidgetFile)}}function Q(e,t,n){A=ig(rg(e)),q(t),K(e,n)}function q(e){if(u&&u.localWidgetUrl)return void(b=u.localWidgetUrl);if(a.isLocalStorageEnabled()){var t=localStorage.getItem(_);if(t)return void(b=t)}b=e}function K(e,t){l.setLanguages(e),D=l.fixLanguageUrlInDataFiles(ig(rg(e)),x),void 0!==t&&t>-1&&(D=X(D,t)),Z()}function X(e,t){for(var n=0;n<e.length;n++)e[n].url=J(e[n],t);return e}function J(e,t){var n=e.url,r=".js";return n.substring(0,n.length-r.length)+"_"+t+r}function $(e){v.measure("dataFileStartLoad");var t=T.send(p.EVENTS.BeforeDataFileLoaded,{dataFileUrl:e});t||C(e)}function Z(){try{var e=D[k].url;N=void 0!=D[k].isHidden&&D[k].isHidden,$(e)}catch(t){y.error(t,"faild to load data file")}}this.dataFileLoadedWrapper=function(){if(v.measure("dataFileEndLoad"),N=!1,k++,L=!1,k==D.length){var e=i.get("CustomVariableAuditor");t.bind("SfVarsExposed",e.handleSfVars),ee()}else Z()};function ee(){var e={newLanguageFlag:x};e.asyncCallback=function(){if(!i.get("PostDataFileLoadedHandler").dataFinishedLoading())return;x?(x=!1,O&&O(!0)):i.get("WidgetLoader").init(b)},f.raiseEvent("DataLoadedEvent",e)}function te(e){var t=s.getSettingsFile();t.PostLibJsFile&&""!=t.PostLibJsFile?(window.walkme_post_lib_loaded=function(){e()},v.measure("postLibStartLoad"),C(t.PostLibJsFile)):e()}U.apply(null,arguments)}i.register("DataFileExtraData").asInstance({data:{}}),i.register("DataFileDataLoader").asCtor(Yp).dependencies("CommonUtils, UserGuidContainer, DataFileKeyToDeployableType, DeployableTypes, DeployablesContainersFacade, WalkthrusModuleLazyLoader");function Yp(t,n,r,o,a,s){var u=this;u.appendDataPackage=g,u.appendWalkMeConfigData=f,u.dataFileLoaded=c,u.registerDataAppender=p;var l=[];function c(){}function d(){i.get("LibInitializer").dataFileLoadedWrapper()}function f(e){i.get("AbExperimentsContainer").addRange(e.Experiments)}function p(e){l.push(e)}function g(e,t){var n=e;return void 0===e.Tutorials&&(n={Tutorials:e,SiteConfig:t}),s.load(n.Tutorials).then(function(){h(n)})}function h(s){var u={},c=s.SiteConfig,f=t.defaultValue(s.LauncherCustomImages,[]),p=t.defaultValue(s.LauncherHtmlImages,[]),g=t.defaultValue(s.DesignTemplates,[]),h=t.defaultValue(s.PluginConfigs,[]);e.each(r,function(e,n){u[n]=t.defaultValue(s[e],[])});var v=i.get("PlatformsService");u[o.ShoutOut]=v.filterByCurrentPlatform(u[o.ShoutOut]);var y=t.defaultValue(s.ExtraData,{isOldDataFile:!0});i.get("DataFileExtraData").data=y,i.get("PublishDataManager").init(y),n.setUserGuid(s.UserGuid),i.get("LibInitializer").isNewLanguage()&&(i.get("SiteConfigManager").set([]),i.get("IconTemplates").customImages=[],i.get("IconTemplates").htmlImages=[],i.get("DesignTemplates").reset(),i.get("PluginConfigs").reset(),a.emptyAllDeployablesContainers()),i.get("IconTemplates").customImages=i.get("IconTemplates").customImages.concat(f),i.get("IconTemplates").htmlImages=i.get("IconTemplates").htmlImages.concat(p),i.get("DesignTemplates").set(g),i.get("PluginConfigs").set(h),i.get("PageIdentifiersAPI").setPageIdentifiers(s.PageIdentifiers),i.get("CustomCssSetter").setUiTemplates(s.UITemplates);var E=i.get("SiteConfigManager");c&&0==E.get().length&&E.set(c),e.each(r,function(e,t){m(u[t],n.getUserGuid())}),a.addRangeToAllDeployablesContainers(u),i.get("UITemplates").concat(s.UITemplates),i.get("UIVariations").concat(s.UIVariations),i.get("DisabledSmartTipsRemover").remove(i.get("BusinessSolutionsContainer").get()),i.get("DisabledCourseQuizzesRemover").remove(i.get("CoursesContainer").get()),e.each(l,function(e,t){t.append(s,u)}),d()}function m(e,t){for(var n=0;n<e.length;n++)e[n].userGuid=t}}i.register("PostDataFileLoadedHandler").asCtor(zp).dependencies("Lib, CommonUtils, Consts, CommonEvents, FeaturesManager, LibDestroyer, Logger, DebuggerManager, WalkMeGoalsManager, CrossDomainManager, ClientStorageManager, WalkMeVisibilityChecker, PerformanceAPI, AuditSourceProvider, SiteConfigManager, WmInternals, TestmeApi, UserGuidContainer, AbTestingGoalsManagerInstance, EngagementRulesRepository, DeployablesRestorer");function zp(e,n,r,o,a,s,u,l,c,d,f,p,g,h,m,v,E,S,T,b,I){var P=this;P.dataFinishedLoading=k;var _="wm-lg-act";function k(t,l){var c=u.timer("lib init");if(i.get("SessionPersister").startPersisting(),i.get("SettingsCacheBusterActivator").activeIfPublishedRecently(i.get("SettingsFile").getPublishDate()),i.register("sfVarsRemovedFromLib").asInstance(function(){}),o.raiseEvent(r.EVENTS.DATA_FILES_LOADED),D())return;a.isFeatureEnabled("tagBody")&&n.setBodyUtils(i.get("TagBodyUtils"));try{window.walkme_data_finished_loading_callback&&walkme_data_finished_loading_callback()}catch(d){}var f=i.get("WalkmeClassesInitializer").initWalkMeClasses();if(!f.Succeeded)return s.removeWalkMe(f.ErrorMessage||"initWalkMeClassesFailed",{sendLog:!0,errorCode:f.ErrorCode}),e.initFailed=!0,!1;var p=i.get("EndUserDataConverter");p.convertData();var g=O(t,l);c.stop();var h=A(g);if(i.get("ClientOrServerStorageManager").init(h)===!1)return s.removeWalkMe("storageManagerInitFailed",{sendLog:!0}),!1;return!0}function A(e){return function(){var t={asyncCallback:e};o.raiseEvent(r.EVENTS.BeforeStorageLoadedCallback,t)}}function D(){var e=m.get();if(e.Settings&&e.Settings.rmWMCond&&i.get("ConditionTreeEvaluator").evaluate(e.Settings.rmWMCond)&&!window.editorAPI)return u.customerLog("Remove walkme condition is true. Removing WalkMe.",3),
s.removeWalkMe("Removed by condition"),!0;return!1}function O(n,a){u.customerLog("after loading storage",4),o.raiseEvent(r.EVENTS.StorageLoaded);var s=n?N:L,c=F();!a&&n||(M()&&!R()&&(v.dbgr={debuggerWasLoaded:s},s=l.loadDebuggerFromStorage),B()&&e.launchLogger()),c&&(t.testme||(t.testme={}),t.testme.testmeLoadedCallback=s,s=E.startTestMe),u.customerLog("willLoadTestMe: "+c,1);var d=i.get("TodoListManager");if(d.hasTaskGoalCompletionCondition()){var f=s,p=function(){h.isInPlayMode()||d.didTasksFinishLoading()?f():d.setTasksFinishedLoadingCallback(f)};s=p}return s}function N(){u.customerLog("after loading storage for play",4),c.init(),U(x),d.get().enabled()&&d.get().start(x)}function x(){u.customerLog("sending editor event: StorageManagerInitialized",4),o.raiseEvent("StorageManagerInitialized")}function L(){i.get("FlowStartFailureListener").listen(),U(),i.get("WhiteListChecker").isUserInWhiteList(S.getUserGuid(),e.getEndUserGuid()).then(G,Y)}function F(){var e=V()||W();return e||u.customerLog(y,"Not loading test me (checked window var, query string parameter and storage entry)",1),e}function M(){if(a.isFeatureEnabled("noDebugger"))return!1;var e=f.getData(r.DEBUGGER_STATE_NAME,w.Deactive,S.getUserGuid());return e==w.Active||e==w.ActiveAndReset}function B(){var e=f.getData(_,!1,S.getUserGuid());return e}function R(){return l.isDebuggerOnWindow()}function U(e){i.get("ClickAuditManager").init(),i.get("ServerDataSenderManager").start(),I.restore(e)}function V(){if(window.walkMeTestMeLoad)return u.customerLog(y,"ShouldLoadTestMe - True by window var",1),E.rememberTestMeIsOn(),window.walkMeTestMeLoad=void 0,!0}function W(){var e=f.getData(C,0,S.getUserGuid());if(e)return u.customerLog(y,"ShouldLoadTestMe - True by storage entry",1),!0}function G(){var r=u.timer("after loading storage"),o=[];if(d.get().enabled()&&o.push(d.get().start),h.isProductionEnv()){var a=e.getEndUserGuid(),l=t.walkme_userGuid_to_replace||S.getUserGuid();i.get("AnalyticsManager").auditUniqueEndUser(l,i.get("AbPermutationManager").getPermutation(),a)}o.push(T.value?T.value.startWatching:j),o.push(b.isReady),n.executeParallel({functionsToExecute:o,successCallback:function(){c.init(d.get().enabled()),g.measure("walkmeReady"),H(z),h.isInPreviewMode()||h.isInPlayMode()||i.get("EndUserLoggerManager").reportEndUser(function(){s.removeWalkMe("reportEndUserFailed")}),v.isSelfHosted?u.customerLog("Self Hosted - no need to check settings file",3):i.get("TimerManager").setWalkmeTimeout(function(){i.get("SettingsCacheManager").start()},5e3),r.stop()}})}function H(e){var t={asyncCallback:e};o.raiseEvent(r.EVENTS.BeforeWalkmeReady,t)}function j(e){e()}function Y(){s.removeWalkMe("user is not in the white list"),e.initFailed=!0}function z(){try{walkme_ready()}catch(e){}try{mt_ready()}catch(e){}try{t.walkme_ready()}catch(e){}o.raiseEvent(r.EVENTS.WalkmeReady),p.isWalkMeVisible()&&!E.isTestMeLoaded()&&(i.get("PlatformInitializer").run(),i.get("PermalinkManager").run(),i.get("AutoStartManager").run(),Q()),o.raiseEvent(r.EVENTS.ElementsTrackingReady),g.measure("walkmeReadyEnd"),i.get("LoadingTimeInformer").run()}function Q(){i.get("FramesetsUtils").waitForFramesToLoad().then(function(){i.get("ElementFinder").wrapSession(function(){q()})})}function q(){if(p.isWalkMeVisible()){var e=u.timer("show all launchers");i.get("LaunchersModule").showAllLaunchers(),e.stop(),i.get("SmartTipSetActivationInitiator").start()}i.get("TrackedPagesManager").start(),i.get("TrackedElementsManager").start()}}i.register("WalkmeClassesInitializer").asCtor(Qp).dependencies("Lib, Logger, SiteConfigManager, FeaturesManager, TimerManager, WalkMeGoalsManager, TagsManager, CommonEvents, Consts, CommonUtils, HostData, TopContainerProvider, WalkMeInfo, EngagementRulesRepository");function Qp(e,n,r,o,a,s,u,l,c,d,f,p,g,h){var m=this;m.initWalkMeClasses=y;function v(){}function y(){var d={Succeeded:!0};if(g.init(),i.get("JawsAccessibilityUtil").init(),E())return d.Succeeded=!1,d.ErrorMessage="WalkMe is not supported on that browser",n.customerLog(d.ErrorMessage),d;i.get("InteractionInitiationEventListener").init(),i.get("AnalyticsPropertiesManager").init(),i.get("BalloonDrawerProvider").getBalloonDrawer(r.get().BalloonSettings).loadResources(p.getTopContainer().siblings("head")),S(),i.get("WmAjax").setFeatures(o.isFeatureEnabled("blockJsonp"),o.isFeatureEnabled("corsJsonpFallback"));var f=i.get("AbTestingManager");if(!f.shouldLoadWalkme())return d.Succeeded=!1,d;a.overrideTimeouts();var m=r.get();if(m.EndUserSettings){var v=i.get("EndUsersManager");v.setEndUserSettings(m.EndUserSettings),v.createEndUserGuid()}h.init();var y=i.get("endUserGuidValidator").validate();if(y)return{Succeeded:!1,ErrorMessage:y.message,ErrorCode:y.code};var T=i.get("AbExperimentsContainer").get(),C=T.length>0;if(C){s.enableMultiUserStorage();var b=i.get("ExperimentsManager");b.setDeployables(T),i.get("AbTestingGoalsManagerInstance").value=new ts({deployablesGoalManager:s,experiments:b.getAll(),lib:e,getEndUserGuid:e.getEndUserGuid,getPermutationId:i.get("AbPermutationManager").getPermutation,getAuditSource:i.get("AuditSourceManager").get,serverAddress:i.get("RecorderServerManager").get(),storageManager:i.get("ClientStorageManager"),commonEvents:i.get("CommonEvents"),userGuidContainer:i.get("UserGuidContainer")})}i.get("ContentsManager").setDeployables(i.get("ContentsContainer").get()),i.get("CategoriesManager").setDeployables(i.get("CategoriesContainer").get()),i.get("CollectionsManager").setDeployables(i.get("CollectionsContainer").get()),i.get("LaunchersManager").setDeployables(i.get("LaunchersModule").getLaunchers()),i.get("ConditionBlocksManager").setDeployables(i.get("ConditionBlocksContainer").get()),i.get("SurveysManager").setDeployables(i.get("SurveysContainer").get()),i.get("ShuttlesManager").setDeployables(i.get("ShuttlesContainer").get()),i.get("ShoutOutsManager").setDeployables(i.get("ShoutOutsContainer").get()),i.get("BusinessSolutionsManager").setDeployables(i.get("BusinessSolutionsContainer").get()),i.get("TrackedPagesManager").setDeployables(i.get("TrackedPagesContainer").get()),i.get("CoursesManager").setDeployables(i.get("CoursesContainer").get()),i.get("LessonsManager").setDeployables(i.get("LessonsContainer").get()),u.setDeployables(i.get("TagsContainer").get()),i.get("TrackedElementsManager").setDeployables(i.get("TrackedElementsContainer").get()),i.get("SearchProviderUrlsManager").setDeployables(i.get("SearchProviderUrlsContainer").get());var w=i.get("TodoListManager");w.setDeployables(i.get("TasksContainer").get()),u.injectTagsToDeployables();var I=i.get("AbTasksValidator");if(I.shouldTrackAbTasks()){var P=new Aa({todoListManager:w,goalsManager:i.get("GoalsManager")});w.init(),w.loadTasks(P.startWatchingTasks)}else t.abTasksBlocked=!0,l.raiseEvent(c.EVENTS.AbTasksBlocked),n.customerLog("Not tracking ab testing and tasks - blocked in this browser."),f.disableReport();return f.isAbTestingEnabled()&&g.setAnalyticsCustomFields(0,e.getEndUserId()),i.get("BizFlowOnBeforeUnloadChecker").init(),i.get("UIChangeTracker").init(),i.get("PageChangeTracker").init(),i.get("jQueryCacheCleaner").init(),i.get("FlowLinkedTaskCompletionHandler").init(),i.get("BalloonLogEventHandler").init(),d}function E(){return f.isIEBrowser(8,"lt")&&!window.postMessage}function S(){d.setDefault(r.get(),"TodoListSettings",{})}v()}var qp=function(){function e(e){this._externalWalkMeConfig=e}return e.prototype.getCurrentPlatform=function(){return this._externalWalkMeConfig.get("platform")},e}(),Kp=function(e){__extends(t,e);function t(t){e.call(this,t)}return t.prototype.filterByCurrentPlatform=function(e){for(var t=[],n=0;n<e.length;n++)e[n].Settings&&e[n].Settings.platform||t.push(e[n]);return t},t}(qp);L.register([O.PLATFORM.Web,O.PLATFORM.MobileWeb],function(){i.register("PlatformsService").asCtor(Kp).dependencies("ExternalWalkMeConfig")}),i.register("WalkmeOOP").asCtor(Xp).asProto();function Xp(){var e,t=this,n=null,r=null,i={},o={},a={},s={},u={},l={};function c(n){e=n,e.__wmoop__=t,t.Virtual=new $p(t),t.Prop=new Jp(t)}t.Extends=function(e,r,i,o,a,s,u){n=new e(r,i,o,a,s,u),t.ExtendsInstance(n)},t.ExtendsInstance=function(e){r=e.__wmoop__,p(),d();var n=f();t._base=n},t.Override=function(e,t){return u[e]=t,t};function d(){for(var e in u){if(!r.IsVirtual(e))throw"Cannot override non-virtual method ["+e+"]. of class : "+r;r.DoOverride(e,u[e])}}t.DoOverride=function(e,t){s[e]=t},t.IsVirtual=function(e){return void 0!==s[e]};t.GetOriginalFunctions=function(){return a};function f(){var e={},t={},t=r.GetOriginalFunctions();for(var n in t){var i=t[n];e[n]=i}return e}function p(){var e=r.GetPublics();for(var n in e){var i=e[n];t.Public(n,i)}}t.Public=function(t,n,r){var o=g(t,n,r);return a[t]=n,e[t]=o,i[t]=o,o},t.Protected=function(e,t,n){var r=g(e,t,n);return a[e]=t,o[e]=r,r},t.GetProperties=function(){return l};function g(e,t,n){if(!n)return t;s[e]=t;function r(){return s[e](arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19])}return r}t.GetPublics=function(){return i},t.GetProtecteds=function(){return o},c.apply(null,arguments)}function Jp(){var e,t=this;function n(t){e=t}t.Public=function(t,n){var i=r(t,n);return e.Public(t,i),i},t.Protected=function(t,n){var i=r(t,n);return e.Protected(t,i),i},t.Private=function(e,t){var n=r(e,t);return n};function r(t,n){e.GetProperties()[t]=n;function r(n){if(void 0===n)return e.GetProperties()[t];e.GetProperties()[t]=n}return r}n.apply(null,arguments)}function $p(){var e;function t(t){e=t}function n(e){function t(){throw"["+e+"] is pure virtual and must be overriden"}return t}this.Public=function(t,r){return r=r?r:n(t),e.Public(t,r,!0)},this.Protected=function(t,r){return r=r?r:n(t),e.Protected(t,r,!0)},t.apply(null,arguments)}i.register("inArrayFunc").dependencies("ArrayUtils").asFunction(function(e){return e.inArray}),i.register("ArrayUtils").asCtor(Zp);function Zp(){var e=this;function t(e,t,n){return n=n||{},e=e||0,function(){return t.apply(n,[].slice.call(arguments,0,e))}}e.max=function(e,t){var n=null;if(e.length>0){var r=t(e[0]);n=e[0];for(var i=1;i<e.length;i++){var o=t(e[i]);o>r&&(r=o,n=e[i])}}return n},e.min=function(e,t){var n=null;if(e.length>0){var r=t(e[0]);n=e[0];for(var i=1;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}}return n},e.foreach=function(n,r){e.forEachSpec(n,t(1,r))},e.forEach=e.foreach,e.forEachSpec=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n,e)},e.reduce=function(n,r,i){return e.reduceSpec(n,t(2,i),r)},e.reduceSpec=function(e,t,n){for(var r=n,i=0;i<e.length;i++)r=t(r,e[i],i,e);return r},e.filter=function(n,r){return e.filterSpec(n,t(1,r))},e.filterSpec=function(e,t){for(var n=new Array,r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n},e.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},e.indexOf=e.inArray,e.map=function(n,r){return e.mapSpec(n,t(1,r))},e.mapSpec=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e));return n},e.shuffle=function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n),n--;var r=e[n];e[n]=e[t],e[t]=r}return e},e.any=function(t,n){return t&&t.length&&e.filter(t,n).length}}i.register("AccessibilityUtils").asCtor(eg).dependencies("TopContainerProvider, TimerManager");function eg(t,n){var r=this;r.getFocusablesInsideElement=o,r.announce=i,r.moveElementToEnd=a,r.orderElementsByTabIndex=s;function i(r){var i=t.getTopContainer(),o=e("#wm-announcement",i);o.length||(o=e(i[0].ownerDocument.createElement("div")),o.attr({id:"wm-announcement","aria-live":"polite"}),o.css("opacity","0"),o.css("height","0px"),e(i.append(o))),o.text(" "),n.libSetTimeout(function(){o.text(r)},100)}function o(t,n,r){var i=e(t),o=[];return i.first().focusable(0,n,r)&&o.push(i[0]),0!=i.children().length&&o.push.apply(o,t.find("*").filter(function(t,i){return e(i).focusable(0,n,r)}).toArray()),e(o)}function a(t,n){var r=e(n,t);0!=r.length&&e(t).append(r)}function s(t){for(var n=0,r=[],i={},o=0;o<t.length;o++){var a=t[o].tabIndex||0;n=Math.max(n,a),i[a]||(i[a]=[]),i[a].push(t[o])}if(0==n)return t;for(var s=1;s<=n;s++)i[s]&&r.push.apply(r,i[s]);return r.push.apply(r,i[0]),e(r)}}i.register("SpotlightChecker").asCtor(tg).dependencies("CommonUtils");function tg(e){var t=this;t.isSpotlight=n;function n(t){return 1==e.getSettingsValue(t,"fadeBackground",1)||1==e.getSettingsValue(t,"fadeBackground",!0)||"True"==e.getSettingsValue(t,"fadeBackground","True")}}i.register("StaticUtils").asCtor(ng);function ng(){var e=this;e.secureEvalJSON=ig}function rg(e){if(null!==e&&sg(e,function(e){try{e.toJSON&&(e.toJSON=null)}catch(t){}}),ag())return JSON.stringify(e);if(null===e)return"null";var t=typeof e;if("undefined"===t)return;if("number"===t||"boolean"===t)return""+e;if("string"===t)return yg(e);if("object"===t){if("function"==typeof e.toJSON)return rg(e.toJSON());if(e.constructor===Date){var n=e.getUTCMonth()+1,r=e.getUTCDate(),i=e.getUTCFullYear(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds(),u=e.getUTCMilliseconds();return n<10&&(n="0"+n),r<10&&(r="0"+r),o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),u<100&&(u="0"+u),u<10&&(u="0"+u),'"'+i+"-"+n+"-"+r+"T"+o+":"+a+":"+s+"."+u+'Z"'}if(e.constructor===Array){for(var l=[],c=0;c<e.length;c++)l.push(rg(e[c])||"null");return"["+l.join(",")+"]"}var d,f,p=[];for(var g in e){if(t=typeof g,"number"===t)d='"'+g+'"';else{if("string"!==t)continue;d=yg(g)}if(t=typeof e[g],"function"===t||"undefined"===t)continue;f=rg(e[g]),p.push(d+":"+f)}return"{"+p.join(",")+"}"}}function ig(e){if(og())return JSON.parse(e);var t=e.toString().replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(t))return _makeTutorialEv.Ev("("+e+")");throw new SyntaxError("Error parsing JSON, source is not valid.")}function og(){if("object"!=typeof JSON)return!1;if(!JSON.parse)return!1;if(!ug(JSON.parse))return!1;return!0}function ag(){if("object"!=typeof JSON)return!1;if(!JSON.stringify)return!1;if(!ug(JSON.stringify))return!1;return!0}function sg(e,t){if(void 0!=e&&"object"==typeof e)for(var n in e)if(Object.hasOwnProperty.call(e,n)){var r=e[n];null!==r&&void 0!==r&&sg(r,t)}null!==e&&void 0!==e&&t(e)}function ug(e){return e.toString().indexOf("[native code]")>-1}function lg(e){return ig(rg(e))}function cg(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t]||"")}return e}function dg(e,t,n){var r,i,o,a,s,u=e,l=u.length,c=l>>>0;if("function"!=typeof t)throw new TypeError;if(0===c&&void 0===n)throw new TypeError;if(r=0,void 0!==n)i=n;else{for(o=!1;!o&&r<c;)a=r.toString(),o=u.hasOwnProperty(a),o&&(i=u[a]),r+=1;if(!o)throw new TypeError}for(;r<c;)a=r.toString(),o=u.hasOwnProperty(a),o&&(s=u[a],i=t.call(void 0,i,s,r,u)),r+=1;return i}function fg(){var e=new Date,t=60*e.getTimezoneOffset()*1e3;return e.getTime()-t}function pg(e){return gg(e)}function gg(e){return i.get("DictionaryUtils").getDictionaryValues(e)}function hg(e,t){for(var n=e.length-1;n>=0;n--){for(var r=!1,i=t.length-1;i>=0&&!r;i--)t[i]==e[n]&&(r=!0);r||t.push(e[n])}return t}var mg=/["\\\x00-\x1f\x7f-\x9f]/g,vg={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function yg(e){if(e.match(mg))return'"'+e.replace(mg,function(e){var t=vg[e];if("string"==typeof t)return t;return t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16)})+'"';return'"'+e+'"'}var Eg=i.get("ArrayUtils").map;i.register("GeneralUtils").dependencies("DictionaryUtils").asFunction(function(e){return{getDictionaryKeys:e.getDictionaryKeys,reduce:dg,map:Eg}});var Sg=function(){function e(e,t){this.parent=e,this.key=t,this.children=[],this.templateIndex=null,this.links=[]}e.prototype.follow=function(t){return t in this.children?this.children[t]:(this.children[t]=new e(this,t),this.children[t])};function t(e,n){var r,i,o,s;if(null!==n&&"object"==typeof n)if(a(n))for(r=[],i=0;i<n.length;i++)r.push(t(e,n[i]));else{s=e,r={"":[]};for(o in n)Object.hasOwnProperty.call(n,o)&&(s=s.follow(o),r[""].push(t(e,n[o])));s.links.push(r)}else r=n;return r}function n(e){var t,n,r,i,o,a,s=[],u=[];e.templateIndex=0;for(o in e.children)Object.hasOwnProperty.call(e.children,o)&&u.push(e.children[o]);for(;u.length>0;){t=u.shift(),a=0;for(o in t.children)Object.hasOwnProperty.call(t.children,o)&&(u.push(t.children[o]),a+=1);if(a>1||t.links.length>0){for(n=[],r=t;null===r.templateIndex;)n.unshift(r.key),r=r.parent;for(n.unshift(r.templateIndex),s.push(n),t.templateIndex=s.length,i=0;i<t.links.length;i++)t.links[i][""].unshift(t.templateIndex)}}return s}function r(r){var i,o,a;return i=new e(null,""),a=t(i,r),o=n(i),o.length>0?rg({f:"cjson",t:o,v:a},null,null):rg(r)}function i(e,t){for(var n=[];t>0;)n=e[t-1].slice(1).concat(n),t=e[t-1][0];return n}function o(e,t){var n,r,s;if(null!==t&&"object"==typeof t)if(a(t))for(n=[],r=0;r<t.length;r++)n.push(o(e,t[r]));else for(n={},s=i(e,t[""][0]),r=0;r<s.length;r++){var u=o(e,t[""][r+1]);null!==u&&void 0!==u&&(n[s[r]]=u)}else n=t;return n}function a(e){return"undefined"!=typeof Array&&Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function s(e){var t=ig(e);if(null===t||"object"!=typeof t||!("f"in t)||"cjson"!==t.f)return t;return o(t.t,t.v)}return{stringify:r,parse:s}}();i.register("WalkmeLoadTimeManager").asCtor(Tg).dependencies("WmInternals");function Tg(e){var t=this;t.init=r,t.getWalkmeLoadTime=o;var n;function r(){i(),e.bind("NewWalkMeLoadTime",i)}function i(){n=(new Date).getTime()}function o(){return n}}i.register("WalkmeInternalsPersistWhitelist").asInstance(["removeWalkMeReason","dbgr"]),i.register("wmjQuery").asInstance(e),i.get("SimpleNLP").setJQuery(e),i.register("WmInternals").asInstance(t),i.register("CJson").asInstance(Sg),i.register("Lib").asInstance(n),i.register("win").asInstance(window),i.register("requestAnimationFrame").asInstance(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||!1),i.register("cancelAnimationFrame").asInstance(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||!1);function Cg(){i.get("LibCtorService").init()}t.addTimeStamp&&t.addTimeStamp("libStartInit"),Cg.apply(null,arguments)}window._makeTutorialEv={Ev:function(src){return eval(src)}},void 0==window._makeTutorial&&(window._walkMe=window._makeTutorial=new ClassMakeTutorial(window.wmjQuery,window._walkmeInternals),_makeTutorial.initFailed&&(window._walkMe=window._makeTutorial=void 0)),_walkmeInternals.addTimeStamp&&_walkmeInternals.addTimeStamp("libCodeEnd")}).call(window)}).call(exports,__webpack_require__(1))},function(e,t){e.exports=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}},function(e,t,n){window._walkmeInternals.ctx||n(3)(window._walkmeInternals),e.exports=_walkmeInternals.ctx},function(e,t,n){(function(t){!function(){function t(e,t){this._object=void 0,this._name=e,this._ctx=t,this.properties={strategy:a.defaults.strategy,factory:a.defaults.factory,injector:a.defaults.injector,load:a.defaults.load,wasReady:!1,initialize:!0}}t.prototype.name=function(){return this._name},t.prototype.asFactory=function(e,t){return void 0!=t&&this.type(t),this.factory(e),this},t.prototype.loadDependencies=function(e,t){return void 0!=t&&this.dependencies(t),this.load(e),this},t.prototype.asFunction=function(e){return this.asFactory(a.factory.func,e)},t.prototype.asInstance=function(e){return this.asFactory(a.factory.instance,e)},t.prototype.asCtor=function(e){return this.asFactory(a.factory.constructor,e)},t.prototype.asSingleton=function(){return this.strategy(a.strategy.singleton)},t.prototype.asProto=function(){return this.strategy(a.strategy.proto)},t.prototype.injectToCtor=function(){return this.injector(a.injector.ctor)},t.prototype.injectToReady=function(){return this.injector(a.injector.ready)},t.prototype.injectToProperty=function(){return this.injector(a.injector.property)},t.prototype.flatDependencies=function(e){return this.loadDependencies(a.load.flat,e)},t.prototype.recursiveDependencies=function(e){return this.loadDependencies(a.load.recursive,e)},t.prototype.useOnce=function(){var e=this.getObject;return this.getObject=function(){return this._ctx.map[this.name()]=null,e.apply(this,arguments)},this},t.prototype.depsDictionary=function(e){if(!arguments.length)return this.properties.depsDictionary||this.depsDictionary(this._ctx.resolve(this)),this.properties.depsDictionary;return this.properties.depsDictionary=e,this},t.prototype.create=function(e,t,n){n=n||a.load.recursive;var r=this.properties.strategy.test(this._object,n);if(t)return r;r&&(e=this.properties.injector.create(e?e:this.properties.args,this,this._ctx,n));var i=this.properties.strategy.create(this._object,this.properties.factory,this.properties.type,e,this._ctx,this,n);return this._ctx.ready(i,this)},t.prototype.getObject=function(e){return this.create(void 0,void 0,e)},t.prototype.object=function(e){return arguments.length?(this._object=e,this):this.create()};for(var n=["load","wasReady","strategy","injector","type","dependencies","args","factory","initialize"],r=0;r<n.length;r++){var i=n[r];o(i)}function o(e){t.prototype[e]=function(t){if(!arguments.length)return this.properties[e];return this.properties[e]=t,this}}var a=function(e){e=e||{},e.version="0.3.3";e.logger=function(e,t){},e.log=function(t,n,r){n&&(t="[class="+n.name()+"] "+t),e.logger("DI - "+t,r||4)},e.error=function(t,n,r){e.log(t,n,r)},e.createContext=function(){var t={map:{},decorators:{}};t.decorate=function(e,n){t.decorators[e]||(t.decorators[e]=[]),t.decorators[e].push(n)},t.entry=function(e){return t.map[e]},t.register=function(n,r,i){var o=e.entry(n,t).type(r).args(i);return t.map[n]=o,o},t.has=function(e){return null!=t.entry(e)},t.remove=function(e){if(t.has(e))return t.map[e]=null,!0;return!1},t.isEntryRemoved=function(e){return null===t.entry(e)},t.get=function(n,r){return t.isEntryRemoved(n)&&e.error("Object["+n+"] was removed"),t.has(n)||e.error("Object["+n+"] is not registered"),t.entry(n).getObject(r)},t.create=function(n,r){if(t.entry(n).strategy()==e.strategy.singleton&&e.error("Attempt to create singleton object ["+n+"]"),t.has(n))return t.entry(n).create(r);e.error("Object["+n+"] is not registered")},t.initialize=function(){function n(n){var r=t.entry(n);r?r.initialize()&&r.strategy().initialize()&&t.get(n):e.error("Object["+n+"] is not registered")}return function(e){if(e)n(e);else for(var e in t.map)n(e)}}(),t.clear=function(){this.map={},this.decorators={}};function n(e){for(;e.indexOf(" ")>=0;)e=e.replace(" ","");return e}return t.resolve=function(n){var r=n.load(),i={};return t.eachDependency(n.dependencies(),function(o,a){var s=t.get(o,r);t.ready(s,t.entry(o)),null==s&&e.error("Dependency ["+n.name()+"."+a+"]->["+o+"] can not be satisfied",n),i[a]=s}),i},t.eachDependency=function(t,r){if(t)for(var i=n(t).split(","),o=0;o<i.length;o++){var a=i[o];if(a){var s=e.dependencyExpression(a);try{r(s.name,s.property,o)}catch(u){e.error("An exception was thrown while the DI tried to resolve class '"+s.name+"'. Check the class name, or if it was registred correctly. \r\n inner exception: \r\n"+u.message)}}}},t.ready=function(e,n){if(null===n&&e)return e;var r=n.wasReady();if(n.wasReady(!0),!r){var i=t.createCallback();i&&i(n.name(),e),e&&"function"==typeof e.ready&&e!=window&&e!=window.document&&e!=window.document.body&&(n.wasReady(!0),e.ready.apply(e,n.injector().ready(e,n)||[]))}return e},t.createCallback=function(){var e;return function(n){if(0==arguments.length)return e;return e=n,t}}(),t},e.dependencyExpression=function(e){var t={},n=e,r=e;if(e.indexOf("=")>0){var i=e.split("=");n=i[0],r=i[1]}return t.name=r,t.property=n,t},e.entry=function(e,n){return new t(e,n)},e.strategy={proto:{test:function(e,t){return!t||t()},initialize:function(){return!1},create:function(e,t,r,i,o,a,s){return e=n(t,r,i,o,a),s()&&a.injector().ready(e,a),a.depsDictionary(void 0),a.wasReady(!1),e}},singleton:{test:function(e,t){return!e&&(!t||t())},initialize:function(){return!0},create:function(e,t,r,i,o,a,s){return e||(e=n(t,r,i,o,a),a.object(e),a.wasReady(!0),s()&&a.injector().ready(e,a),a.wasReady(!1)),e}}};function n(e,t,n,r,i){var o=e(t,n,i),a=r.decorators[i.name()];if(a)for(var s=0;s<a.length;s++)o=a[s](o);return o}return e.factory={constructor:function(t,n,r){if(!(n instanceof Array))return new t(n);if(n.length<=10)return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);if(n.length<=30)return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23],n[24],n[25],n[26],n[27],n[28],n[29]);e.error("trying to create a class with too many args!",r)},func:function(e,t,n){return t instanceof Array?e.apply(e,t):e(t)},instance:function(e,t,n){return e}},e.injector={property:{create:function(e,t,n){return e},ready:function(e,t){var n=t.depsDictionary();for(var r in n)e[r]=n[r];var i=t.args();void 0==i||n.hasOwnProperty("args")||(e.args=i)}},ready:{create:function(e,t,n){return e},ready:function(e,t){var n=t.args(),r=[],i=t.depsDictionary();if(s.eachDependency(t.dependencies(),function(e,t,n){r[n]=i[t]}),n){n=n instanceof Array?n:[n];for(var o=0;o<n.length;o++)r.push(n[o])}return r}},ctor:{create:function(e,t,n){var r=[],i=t.depsDictionary();if(n.eachDependency(t.dependencies(),function(e,t,n){r[n]=i[t]}),e){e=e instanceof Array?e:[e];for(var o=0;o<e.length;o++)r.push(e[o])}return r},ready:function(e,t){}}},e.load={flat:function(e,t,n){return!1},recursive:function(e,t,n){return!0}},e.defaults={strategy:e.strategy.singleton,factory:e.factory.constructor,injector:e.injector.ctor,load:e.load.recursive},e}(),s=a.createContext();e.exports=function(e){e.di=a,e.ctx=s}}()}).call(t,n(2))},function(e,t){/*! wm-simple-nlp - v1.0.8 - 2016-09-13
	* Copyright (c) 2016 WalkMe; Licensed ISC */
var n;!function(e){var t,n;!function(e){e[e.Digit=0]="Digit",e[e.Alphabet=1]="Alphabet",e[e.Other=2]="Other"}(n||(n={}));function r(e){t=e}e.setJQuery=r;function i(e){var t=new l,n=new a(e),r=t.isHuman(n);return r}e.isPhraseHuman=i;function o(e){if(0===e.search("[a-zA-Z]"))return n.Alphabet;if(0===e.search("[0-9]"))return n.Digit;return n.Other}var a=function(){function e(e){this.words=[],this.raw=e,this.buildWords()}return e.prototype.buildWords=function(){this.splitCategories()},e.prototype.addWord=function(e){var r=this;if(e=t.trim(e),!e)return;if(o(e[0])!==n.Alphabet)this.words.push(e);else{var i=this.splitCamelCase(e);t.each(i,function(e,t){return r.words.push(t.toLowerCase())})}},e.prototype.splitCamelCase=function(e){var t=e.replace(/([a-z](?=[A-Z]))/g,"$1 "),n=t.split(" ");return n},e.prototype.splitCategories=function(){for(var e,t=o(this.raw[0]),n=0,r=0;r<this.raw.length;r++){var i=this.raw[r],a=o(i);a!=t&&(e=this.raw.substring(r,n),this.addWord(e),n=r,t=a)}e=this.raw.substring(n,r+1),this.addWord(e)},e}();e.Sentence=a;var s=5,u=function(){function e(){var e=this;this.WHITE_LIST=["html","css","btn","js","http","a"],this.VOWELS="aeiou",this.pointers={},this.pointers[n.Alphabet]=function(t){return e.alphabetPred(t)},this.pointers[n.Digit]=function(t){return e.numberPred(t)},this.pointers[n.Other]=function(t){return e.otherPred(t)}}return e.prototype.numberPred=function(e){return!1},e.prototype.otherPred=function(e){return!0},e.prototype.alphabetPred=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];if(this.VOWELS.indexOf(r)==-1?t++:t=0,t>=s)return!1}return!0},e.prototype.isHuman=function(e){if(this.contains(this.WHITE_LIST,e))return!0;var t=o(e[0]),n=this.pointers[t],r=n(e);return r},e.prototype.contains=function(e,n){return t.inArray(n,e)!==-1},e}();e.WordClassifier=u;var l=function(){function e(){}return e.prototype.isHuman=function(e){if(e.raw.length<=2)return!1;if(this.isUrl(e))return!1;var n=new u,r=t.map(e.words,function(e,t){return n.isHuman(e)}),i=this.all(r);return i},e.prototype.all=function(e){for(var t=e.length-1;t>=0;t--)if(!e[t])return!1;return!0},e.prototype.isUrl=function(e){var t=0==e.raw.indexOf("/")||0==e.raw.indexOf("http");return t},e}();e.SentanceClassifier=l}(n||(n={})),e.exports=n},function(e,t,n){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=n:t.mapper=n}(this,function(){var e=new(n(6)),t=new(n(7))(e);return{objectJpath:e,objectMapper:t}})},function(e,t){e.exports=n;function n(){var e=this,t="@dot@",n=new RegExp(t,"g");e.getValue=r,e.setValue=i;function r(e,t){t=a(t),t=o(t);for(var n=t.split("."),r=e,i=0;i<n.length;i++){var u=s(n[i]);if(void 0==r)return;r=r[u]}return r}function i(e,t,n){for(var r=t.split("."),i=0;i<r.length-1;i++){var o=r[i];e[o]||(e[o]={}),e=e[r[i]]}var a=r.length-1,s=r[a];e[s]=n}function o(e){return e.replace(/[\'\"\]]|&quot;|&#39;/g,"").replace(/\[/g,".")}function a(e){return e.replace(/(["']|&quot;|&#39;).*?\1/g,function(e){return e.replace(/\./g,t)})}function s(e){return e.replace(n,".")}}},function(e,t){e.exports=n;function n(e){var t=this;t.merge=n;function n(t,n,r){for(var i in r){var o=r[i],a=u(i);if(o.transform&&(a=o.transform(a)),o.where&&!o.where(a,u))continue;var s="string"==typeof o?o:o.destination;e.setValue(n,s,a)}function u(n){return e.getValue(t,n)}}}},function(e,t,n){var r=new(n(9)),i=new(n(10))(r),o=new(n(11)),a=new(n(12))(i,o),s=new(n(13))(o,a),u=new(n(14)),l=new(n(15))(s,u);e.exports={bizFlowConsts:r,bizFlowExtensions:i,baseGraphDfsService:l,baseGraphDfsServiceWithRevisiting:s}},function(e,t){e.exports=n;function n(){var e=this;e.FLOW_NODE_TYPE={UI:"UI",Action:"Action"},e.FLOW_NODE_ACTION_TYPE={Split:"Split",Redirect:"Redirect",WaitForCondition:"WaitForCondition",Stop:"Stop",Refresh:"Refresh",SetData:"SetData",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",ConnectToBizflow:"ConnectToBizflow",Survey:"Survey",Popup:"Popup",ErrorHandling:"ErrorHandling",OnPageAction:"OnPageAction"}}},function(e,t){e.exports=n;function n(e){var t=this;t.isUiNode=n,t.getNodeConnectors=i,t.isActionNode=r,t.isSplitNode=u,t.isConnectToBizFlowNode=l,t.isErrorHandlingNode=s,t.getErrorHandlingConnectorIndex=d;function n(t){return t.Type==e.FLOW_NODE_TYPE.UI}function r(e){return!n(e)}function i(e){if(n(e))return a(e);return o(e)}function o(e){return e.Links}function a(e){for(var t=[],n=0;n<e.UIElements.length;n++){var r=e.UIElements[n];t.push.apply(t,r.Triggers)}return t}function s(t){return c(t,e.FLOW_NODE_ACTION_TYPE.ErrorHandling)}function u(t){return c(t,e.FLOW_NODE_ACTION_TYPE.Split)}function l(t){return c(t,e.FLOW_NODE_ACTION_TYPE.ConnectToBizflow)}function c(e,t){return r(e)&&e.ActionType==t}function d(e){if(s(e))return e.Links.length-1}}},function(e,t){e.exports=n;function n(){var e=this;e.createNodeData=t,e.createUiElementData=n;function t(e,t,n,i){var o=r(e,e,e.Links,t,n,i);return o}function n(e,t){var n=r(t.node,e,e.Triggers,t.parentConnector,t.parentConnectorIndex,t.parentPoint);return n.uiElement=e,n}function r(e,t,n,r,i,o){return{node:e,point:t,connectors:n,parentConnector:r,parentConnectorIndex:i,parentPoint:o}}}},function(e,t){e.exports=n;function n(e,t){var n=this;n.traverse=r;function r(n,r){var i=n.node;if(e.isActionNode(i))r(n);else for(var o=0;o<i.UIElements.length;o++){var a=i.UIElements[o],s=t.createUiElementData(a,n);r(s)}}}},function(e,t){e.exports=n;function n(e,t){var n=this;n.runDfs=i;var r=["visitNode","visitPoint","afterPointDescendantsVisited","afterNodeDescendantsVisited"];function i(n,i,o){for(var a=!0,s={},u={},l=0;l<r.length;l++)g(r[l]);o=o||n.RootFlowNodeId,c(o);function c(r,i,o,s){if(!r||!a)return;var l=n.Nodes[r],c=e.createNodeData(l,i,o,s);u.visitNode(c),t.traverse(c,d),u.afterNodeDescendantsVisited(c)}function d(e){u.visitPoint(e);var t=f(e);if(!s[t]){s[t]=!0;for(var n=e.connectors,r=0;r<n.length;r++){var i=n[r];c(i.TargetFlowNodeId,i,r,e)}}u.afterPointDescendantsVisited(e)}function f(e){return e.uiElement?e.node.Id+"-"+e.uiElement.Id:e.node.Id}function p(){}function g(e){var t=i[e]||p;u[e]=function(){if(!a||!t)return;a=t.apply(null,arguments)!==!1}}}}},function(e,t){e.exports=n;function n(){var e=this;e.wrapHandlers=i;var t,n,r=["visitPoint","afterPointDescendantsVisited"];function i(e){n={};for(var i=function(){},o=e.visitNode||i,a=e.afterNodeDescendantsVisited||i,s=0;s<r.length;s++){var u=r[s];e[u]=l(e[u])}e.visitNode=function(e){if(t)return;var r=c(e);if(n[r])return void(t=e);return n[r]=!0,o(e)},e.afterNodeDescendantsVisited=function(e){if(t)return void(e==t&&(t=void 0));return a(e)};function l(e){if(!e)return;return function(){if(t)return;return e.apply(null,arguments)}}function c(e){return e.node&&e.node.Id}}}},function(e,t){e.exports=n;function n(e,t){var n=this;n.runDfs=r;function r(n,r,i){return t.wrapHandlers(r),e.runDfs(n,r,i)}}},function(e,t){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=n:t.deployableConsts=n}(this,function(){return{DEPLOYABLE_TYPE:{Walkthru:0,Task:1,Launcher:2,LabelGroup:3,Survey:4,AbExperiment:5,Category:6,Content:7,Collection:8,Shuttle:9,Tag:10,TestCase:11,PreTestSet:12,Template:13,ShoutOut:14,TestSuite:16,ConditionBlock:17,BusinessSolution:19,Lesson:20,Course:21,TrackedPage:22,Spotlight:23,Tooltip:24,TrackedElement:25,SearchProviderUrl:26}}})},function(e,t,n){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=n:t.uiComponents=n}(this,function(e){var t=n(18)(),r=n(19),i=n(20)(e,t),o=n(22)(i),a=n(23)(o);return{eventBasedObject:t,idisplayer:r,uiComponentBase:i,popupBase:o,shoutOutBase:a}})},function(e,t){e.exports=function(){return n};var n=function(){function e(){this.eventBase=wmjQuery({})}return e.prototype.once=function(e,t){this.eventBase.one(e,t)},e.prototype.bind=function(e,t){this.eventBase.bind(e,t)},e.prototype.unbind=function(e,t){this.eventBase.unbind(e,t)},e.prototype.trigger=function(e,t){this.eventBase.trigger(e,t)},e}()},function(e,t){},function(e,t,n){var r,i=n(21)();e.exports=function(e,t){r=e;var n=function(e){i(t,e);function t(t){e.call(this),this.LocalSVNRevision="$Rev: 4206 $",this._uiComponent=t,this._settings=t.Settings||{},this._variations=this.createVariations(),this._uiCreator=r.get("UICreator")}return t.prototype.getComponent=function(){return this._uiComponent},t.prototype.getUI=function(){return this._uiCreator.getUI()},t.prototype.createUi=function(){this._displayer=r.get("DisplayersFactory").get(this._uiComponent.DisplayerId,[this._uiComponent.Settings]);var e=this._displayer.getContainer(),t=e?e[0].document:document;this._uiCreator.setUI(this._uiComponent,this._variations,this.createConfig(),t,this),this.registerEvents(),this._displayer.setUiObject(this._uiCreator.getUI())},t.prototype.registerEvents=function(){},t.prototype.createVariations=function(){for(var e=r.get("UIVariations"),t=[],n=this._uiComponent.UIVariationsIds||[],i=0;i<n.length;i++)t.push(e.get(n[i]));return this._settings.variation&&t.push(this._settings.variation),t},t.prototype.createConfig=function(){return{}},t.prototype.append=function(){var e=this;this.trigger("append-begin"),r.get("TemplatesFactory").addResources(this._uiComponent.UITemplateId,this._uiComponent.UITemplateVersion,this._variations,wmjQuery.proxy(function(){e._displayer.append(wmjQuery.proxy(function(){return e.trigger("append-end")},e))},this))},t.prototype.destroy=function(){var e=this;if(this._isDead)return;this.trigger("destroy-begin"),this._displayer.remove(wmjQuery.proxy(function(){e._isDead=!0,e.trigger("destroy-end")},this))},t.prototype.show=function(){this.trigger("show-begin"),this._displayer.show(wmjQuery.proxy(function(){this.trigger("show-end")},this))},t.prototype.hide=function(){this.trigger("hide-begin"),this._displayer.hide(wmjQuery.proxy(function(){this.trigger("hide-end")},this))},t.prototype.toggle=function(){this._displayer.isVisible()?this.hide():this.show()},t}(t);return n}},function(e,t){!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=n:t.typescriptHelper=n}(this,function(){var e=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r};return e})},function(e,t,n){var r=n(21)();e.exports=function(e){var t=function(e){r(t,e);function t(t,n){e.call(this,t),this.LocalSVNRevision="$Rev: 4206 $",this.CLASS_X_BUTTON="walkme-x-button",this._consts=n}return t.prototype.registerEvents=function(){e.prototype.registerEvents.call(this),this.registerXButton()},t.prototype.registerXButton=function(){var e=wmjQuery.proxy(function(){this.trigger("x-clicked"),this.destroy()},this);this._uiCreator.registerEvents("."+this.CLASS_X_BUTTON,"click",this._consts.MOBILE_COMMANDS.ACTION.libAction,{libAction:e},"Close")},t.prototype.createConfig=function(){var t=e.prototype.createConfig.call(this);return t.Id=this._uiComponent.Id,t.Name=this._uiComponent.Name,t.XButtonClass=this.CLASS_X_BUTTON,t.Settings=this._uiComponent.Settings,t},t}(e);return t}},function(e,t,n){var r=n(21)();e.exports=function(e){var t=function(e){r(t,e);function t(t,n,r,i,o){e.call(this,o,i),this.LocalSVNRevision="$Rev: 4206 $",this.CLOSE_ACTIONS_TYPE="destroy",this.CLASS_ACTION_PREFIX="walkme-action-",this._actionsFactory=t,this._bbCodeParser=r,this._commonUtils=n,this._actions=this.getActions(o),this._position=0==o.Settings.position?"top":"bottom"}return t.prototype.getActions=function(e){var t=[];if(!e.Actions)return t;for(var n=0,r=e.Actions.length;n<r;n++){var i=e.Actions[n];i.IsActive&&(this.isCloseAction(i)?i[this.CLOSE_ACTIONS_TYPE]=!0:i[i.Type]=!0,i.CssClass=this.generateActionClass(t.length,e.Actions[n]),t.push(e.Actions[n]))}return t},t.prototype.registerEvents=function(){e.prototype.registerEvents.call(this),this.registerActions()},t.prototype.registerActions=function(){for(var e=0,t=this._actions.length;e<t;e++){var n=this._actions[e];n.Args=n.Args||{},n.Args.uiComponent=this;var r,i=this._actionsFactory.get(n.Type,n.Args,this.getInitiatorType(),this._uiComponent),o=this.generateActionClass(e,this._actions[e]),a=o.replace(/-/gi,"_"),s=i.args||{};r=i.mobileAction?wmjQuery.proxy(function(e){this.trigger("action-start",e),this.destroy()},this,i.Type):wmjQuery.proxy(function(e){this.trigger("action-start",e.Type),e.doAction(),e.Type!=this._consts.DEPLOYABLE_ACTION_TYPES.Close&&this.destroy()},this,i),s.libAction=r,this._uiCreator.registerEvents("."+o,"click",i.mobileAction||this._consts.MOBILE_COMMANDS.ACTION.libAction,s,a||"")}},t.prototype.getInitiatorType=function(){},t.prototype.isCloseAction=function(e){var t=this._actionsFactory.get(e.Type).Type;return t===this._consts.DEPLOYABLE_ACTION_TYPES.Close||t===this._consts.DEPLOYABLE_ACTION_TYPES.RemindMeLater},t.prototype.generateActionClass=function(e,t){return this.CLASS_ACTION_PREFIX+t.Type+"-"+e},t.prototype.createConfig=function(){var t=e.prototype.createConfig.call(this);return t.Title=this.handleText(this._uiComponent.Title),t.Description=this.handleText(this._uiComponent.Description),t.Actions=this.handleActions(this._actions),t.Position=this._position,t},t.prototype.handleText=function(e){return this._bbCodeParser.parse(this._commonUtils.nl2br(e),this._settings.v)},t.prototype.handleActions=function(e){if(e)for(var t=0;t<e.length;t++)e[t].Text=this.handleText(e[t].Text);return e},t}(e);return t}},function(e,t,n){var r=n(25),i=n(27);e.exports={oldToNewConditionConverter:r,newToOldConditionConverter:i}},function(e,t,n){var r=n(26);function i(){var e=this;e.convert=t;function t(e){if(!e)return;return{Root:n(e,!0)}}function n(e){return e?"Func"==e.nodeType?i(e):e.rightSon?a(e):o(e):void 0}function i(e){return{Type:r.NEW_CONDITION_NODE_TYPE.Condition,Id:e.ConditionId,Settings:{funcName:e.funcName,funcArgs:e.funcArgs}}}function o(e){return n(e.leftSon)}function a(e){var t={Type:r.NEW_CONDITION_NODE_TYPE[e.nodeType],Nodes:[]};return t.Nodes.push(n(e.leftSon)),t.Nodes.push(n(e.rightSon)),t}}e.exports=new i},function(e,t){var n={NEW_CONDITION_NODE_TYPE:{Condition:0,And:1,Or:2,Group:3}};e.exports=n},function(e,t,n){var r=n(26);function i(){var e=this;e.convert=n;function t(){}function n(e){if(!e)return;var t=0;return i(e,t)}function i(e,t){switch(e.Type){case r.NEW_CONDITION_NODE_TYPE.Condition:return o(e,t);case r.NEW_CONDITION_NODE_TYPE.Group:return a(e,t);default:return s(e,t)}}function o(e,t){return{nodeType:"Func",nodeDepth:t,ConditionId:e.Id,funcName:e.Settings.funcName,funcArgs:e.Settings.funcArgs}}function a(e,t){return i(e.Nodes[0],t+1)}function s(e,t){var n=e.Type==r.NEW_CONDITION_NODE_TYPE.And?"And":"Or";return{nodeType:n,nodeDepth:t,ConditionId:e.Id,leftSon:i(e.Nodes[0],t),rightSon:i(e.Nodes[1],t)}}t()}e.exports=new i},function(e,t,n){!function(){var e=t,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var t,i,o=String(e),a=0,s=n,u="";o.charAt(0|a)||(s="=",a%1);u+=s.charAt(63&t>>8-a%1*8)){if(i=o.charCodeAt(a+=.75),i>255)throw new r("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|i}return u}),e.atob||(e.atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,a=0,s=0,u="";o=t.charAt(s++);~o&&(i=a%4?64*i+o:o,a++%4)?u+=String.fromCharCode(255&i>>(-2*a&6)):0)o=n.indexOf(o);return u})}()},function(e,t,n){(function(t){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.0
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}var r=void 0;r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var i=r,o=0,a=void 0,s=void 0,u=function(e,t){T[o]=e,T[o+1]=t,o+=2,2===o&&(s?s(C):w())};function l(e){s=e}function c(e){u=e}var d="undefined"!=typeof window?window:void 0,f=d||{},p=f.MutationObserver||f.WebKitMutationObserver,g=!1,h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){return function(){}}function v(){if("undefined"!=typeof a)return function(){a(C)};return S()}function y(){var e=0,t=new p(C),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function E(){var e=new MessageChannel;return e.port1.onmessage=C,function(){return e.port2.postMessage(0)}}function S(){var e=setTimeout;return function(){return e(C,1)}}var T=new Array(1e3);function C(){for(var e=0;e<o;e+=2){var t=T[e],n=T[e+1];t(n),T[e]=void 0,T[e+1]=void 0}o=0}function b(){try{var e=n(!function(){var e=new Error('Cannot find module "vertx"');throw e.code="MODULE_NOT_FOUND",e}());return a=e.runOnLoop||e.runOnContext,v()}catch(t){return S()}}var w=void 0;w=g?m():p?y():h?E():void 0===d?b():S();function I(e,t){var n=arguments,r=this,i=new this.constructor(k);void 0===i[_]&&Z(i);var o=r._state;return o?!function(){var e=n[o-1];u(function(){return K(o,i,e,r._result)})}():j(r,i,e,t),i}function P(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(k);return V(n,e),n}var _=Math.random().toString(36).substring(16);function k(){}var A=void 0,D=1,O=2,N=new z;function x(){return new TypeError("You cannot resolve a promise with itself")}function L(){return new TypeError("A promises callback cannot return that same promise.")}function F(e){try{return e.then}catch(t){return N.error=t,N}}function M(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function B(e,t,n){u(function(e){var r=!1,i=M(n,t,function(n){if(r)return;r=!0,t!==n?V(e,n):G(e,n)},function(t){if(r)return;r=!0,H(e,t)},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,H(e,i))},e)}function R(e,t){t._state===D?G(e,t._result):t._state===O?H(e,t._result):j(t,void 0,function(t){return V(e,t)},function(t){return H(e,t)})}function U(e,n,r){n.constructor===e.constructor&&r===I&&n.constructor.resolve===P?R(e,n):r===N?(H(e,N.error),N.error=null):void 0===r?G(e,n):t(r)?B(e,n,r):G(e,n)}function V(t,n){t===n?H(t,x()):e(n)?U(t,n,F(n)):G(t,n)}function W(e){e._onerror&&e._onerror(e._result),Y(e)}function G(e,t){if(e._state!==A)return;e._result=t,e._state=D,0!==e._subscribers.length&&u(Y,e)}function H(e,t){if(e._state!==A)return;e._state=O,e._result=t,u(W,e)}function j(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+D]=n,i[o+O]=r,0===o&&e._state&&u(Y,e)}function Y(e){var t=e._subscribers,n=e._state;if(0===t.length)return;for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?K(n,r,i,o):i(o);e._subscribers.length=0}function z(){this.error=null}var Q=new z;function q(e,t){try{return e(t)}catch(n){return Q.error=n,Q}}function K(e,n,r,i){var o=t(r),a=void 0,s=void 0,u=void 0,l=void 0;if(o){if(a=q(r,i),a===Q?(l=!0,s=a.error,a.error=null):u=!0,n===a)return void H(n,L())}else a=i,u=!0;n._state!==A||(o&&u?V(n,a):l?H(n,s):e===D?G(n,a):e===O&&H(n,a))}function X(e,t){try{t(function(t){V(e,t)},function(t){H(e,t)})}catch(n){H(e,n)}}var J=0;function $(){return J++}function Z(e){e[_]=J++,e._state=void 0,e._result=void 0,e._subscribers=[]}function ee(e,t){this._instanceConstructor=e,this.promise=new e(k),this.promise[_]||Z(this.promise),i(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?G(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&G(this.promise,this._result))):H(this.promise,te())}function te(){return new Error("Array Methods must be provided an Array")}ee.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===A&&n<e;n++)this._eachEntry(t[n],n)},ee.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===P){var i=F(e);if(i===I&&e._state!==A)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===se){var o=new n(k);U(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},ee.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===A&&(this._remaining--,e===O?H(r,n):this._result[t]=n),0===this._remaining&&G(r,this._result)},ee.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){return n._settledAt(D,t,e)},function(e){return n._settledAt(O,t,e)})};function ne(e){return new ee(this,e).promise}function re(e){var t=this;return new t(i(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function ie(e){var t=this,n=new t(k);return H(n,e),n}function oe(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ae(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function se(e){this[_]=$(),this._result=this._state=void 0,this._subscribers=[],k!==e&&("function"!=typeof e&&oe(),this instanceof se?X(this,e):ae())}se.all=ne,se.race=re,se.resolve=P,se.reject=ie,se._setScheduler=l,se._setAsap=c,se._asap=u,se.prototype={constructor:se,then:I,"catch":function(e){return this.then(null,e)}};function ue(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}e.Promise=se}return se.polyfill=ue,se.Promise=se,se})}).call(t,n(29))},function(e,t,n){var r=new(n(31)),i=new(n(32)),o=new(n(33)),a=new(n(34)),s=new(n(35)),u=new(n(36)),l=new(n(37)),c=new(n(38)),d=new(n(39)),f=new(n(40)),p=new(n(41)),g=new(n(42)),h=new(n(43)),m=new(n(44)),v=new(n(45)),y=new(n(46)),E=new(n(47)),S=new(n(48)),T=new(n(49));e.exports={conditionBuilderPreview:r,drawablePosition:i,stepTrigger:o,stepType:a,ENTITY_TYPE:s,surveyQuestionType:u,contentType:l,POPUP_BUTTON_ACTIONS:{NextDone:0,Start:1,Back:2,Cancel:3},designTemplateType:c,designTemplateCssClassPrefix:"wm-design-template-",smarttipMode:d,stickinessType:f,flowNodeType:p,searchProvider:g,screenshotMode:h,scrollType:m,deployableGroupType:v,teachMeCompletionType:y,teachMeQuestionType:E,templateEntityType:S,designTemplateDefaultFieldText:T}},function(e,t){e.exports=n;function n(){var e={TYPES:{BAD_INPUT:-2,NO_INPUT:-1,TRUE:0,FALSE:1,CANNOT_ASSERT:2,CONTEXT_ERROR:3,CANT_INTERACT:4,DIFFERENT_RESULTS:5},TOOLTIPS:{"true-indicator":"The statement is true for the current user and page settings","false-indicator":"The statement is not true for the current user and page settings","not-defined-indicator":"Waiting. Complete the condition to evaluate the status","cannot-assert-indicator":"The validity of this statement can only be assessed when played","cannot-assert-context-error-indicator":"The validity of this statement cannot be determined because the related Switch Step cannot be played in current page","cannot-interact-error-indicator":"The validity of this statement cannot be determined because we can't interact with this page","different-results-indicator":"Different results from iframes"},INDICATOR_CLASSES:{}},t=e.INDICATOR_CLASSES;return t[e.TYPES.NO_INPUT]="no-input",t[e.TYPES.BAD_INPUT]="bad-input",t[e.TYPES.TRUE]="true",t[e.TYPES.FALSE]="false",t[e.TYPES.CANNOT_ASSERT]="cannot-assert",t[e.TYPES.CONTEXT_ERROR]="cannot-assert-context-error",t[e.TYPES.CANT_INTERACT]="cannot-interact-error",t[e.TYPES.DIFFERENT_RESULTS]="different-results",e}},function(e,t){function n(){return{Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}}e.exports=n},function(e,t){function n(){return{Nothing:0,Button:1,Click:2,Hover:3,PageChanged:4,Text:5,Delay:6,SelectAny:7,SelectValue:8,Swipe:9,PeerStep:10,Custom:11,BbCode:12}}e.exports=n},function(e,t){function n(){return{Simple:0,Popup:1,Action:2}}e.exports=n},function(e,t){function n(){return{step:0,launcher:1,conditionBuilder:2,smartTip:3,balloon:4,balloonTrigger:5,flowNode:6,flowLink:7,smartTipUiComponent:8,conditionNode:9,trackedElementsSet:10,businessSolution:11,trackedElement:12,onScreenElement:13,shoutout:17}}e.exports=n},function(e,t){function n(){return{FreeText:0,RadioButtons:1,CheckBoxes:2,PersonalDetails:3}}e.exports=n},function(e,t){function n(){return{Article:0,Video:1}}e.exports=n},function(e,t){function n(){return{Shared:0,Copied:1,Specific:2}}e.exports=n},function(e,t){function n(){return{Info:0,Validation:1,InfoAndValidation:2}}e.exports=n},function(e,t){function n(){return{soft:0,strong:1}}e.exports=n},function(e,t){function n(){return{UI:0,Action:1}}e.exports=n},function(e,t){function n(){return{NoAction:-1,WalkMe:0,Google:1,Bing:2,Desk:3,Zendesk:4,Custom:5,SalesForce:6,Parature:7}}e.exports=n},function(e,t){function n(){return{Regular:0,Blurred:1,None:2}}e.exports=n},function(e,t){function n(){return{Animated:0,Normal:1,None:2}}e.exports=n},function(e,t){function n(){return{Label:0,Category:1,Collection:2,Tag:3,Course:4,Lesson:5}}e.exports=n},function(e,t){function n(){return{byComplete:0,byGoal:1}}e.exports=n},function(e,t){function n(){return{SingleSelection:0,MultipleSelection:1}}e.exports=n},function(e,t){function n(){return{balloon:0,popup:17}}e.exports=n},function(e,t){function n(){return{TITLE:"Put your title here",CONTENT:"Put your text here",ACTION_BUTTON:"Action",CLOSE_BUTTON:"Close",ACTION_PLACEHOLDER:"Click Here",X_BUTTON:"x",NEXT_BUTTON:"Next",BACK_BUTTOM:"Back"}}e.exports=n},function(e,t,n){var r=n(51),i=n(52),o=n(53),a=n(54);e.exports={TemplateWrap:r,TopArrow:i,CssResetRules:o,ShoutOutTemplateWrap:a}},function(e,t){var n="<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-v3 {{designTemplateCssClass}}' style='{{{cssReset}}} width: auto; min-width: 190px; position: absolute; direction: {{direction.basic}};'><div class='walkme-custom-balloon-mid-div' style='{{{cssReset}}} direction: {{direction.basic}}; position: relative; {{#shadow}}-webkit-box-shadow: {{shadow}}; -moz-box-shadow: {{shadow}}; box-shadow: {{shadow}};{{/shadow}} font-family: {{{font}}}; border-radius:{{radiuses.balloon}}; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='{{{cssReset}}} direction: {{direction.basic}}; background-color:{{colors.mainBg}}; border:{{border.size}} solid {{colors.border}}; border-radius:{{radiuses.balloon}}; border-{{position.side}}: none; overflow: hidden;'><div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='{{{cssReset}}} font-size: 12px; color: {{colors.xBtn}}; position: absolute; {{direction.oppositeSide}}: 0px; top: 0px; padding-{{direction.oppositeSide}}: {{xBtn.marginHorizental}}; margin-top: {{xBtn.marginTop}}; cursor: pointer;font-weight:normal;' title='{{data.balloonCloseTooltip}}'>&#215;</div>{template}</div></div><div class='walkme-custom-side-border' style='{{{cssReset}}} background-color:{{colors.buttonBg}}; width: 4px; height: 100%;  top:0px; {{direction.side}}:0px; border:{{border.side.size}} solid {{colors.buttonBg}}; border-{{direction.oppositeSide}}: none; border-top: none; border-bottom: none;position: absolute;border-radius: 5px 0 0 5px;'></div></div>";e.exports=n},function(e,t){var n="<div class='walkme-custom-balloon-arrow walkme-custom-balloon-arrow-bottom walkme-custom-balloon-arrow-outer walkme-custom-balloon-arrow-outer-bottom {{designTemplateCssClass}} SkipThisFixedPosition' style='width: 0px; height: 0px; border-width: 0px 11px 11px; border-style: solid outset solid solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: rgb(198, 198, 198); border-left-color: transparent; border-image: initial; line-height: 0; position: absolute; top: 137px; left: 319px;'></div><div class='walkme-custom-balloon-arrow walkme-custom-balloon-arrow-bottom walkme-custom-balloon-arrow-inner walkme-custom-balloon-arrow-inner-bottom {{designTemplateCssClass}} SkipThisFixedPosition' style='width: 0px; height: 0px; border-width: 0px 10px 10px; border-style: solid outset solid solid; border-top-color: initial; border-right-color: transparent; border-bottom-color: rgb(255, 255, 255); border-left-color: transparent; border-image: initial; line-height: 0; position: absolute; top: 138px; left: 320px;'></div>";e.exports=n},function(e,t){var n="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit; letter-spacing: normal; text-transform: none; outline: invert none medium; width: auto; box-shadow:none; text-shadow:none; border-top: none; border-right: none; border-bottom: none; border-left: none; position: static; top: auto; left: auto; transition: none;";e.exports=n},function(e,t){var n='<div class="wm-outer-div wm-shoutout wm-shoutout-{{Id}} wm-template-bg {{designTemplateCssClass}}" id="wm-shoutout-{{Id}}" style="z-index: 2147483630;">{template}</div>';e.exports=n},function(e,t,n){var r=n(56);e.exports={abPermutation:{currentPermutation:{key:"wm-ABPer",expiry:r.tenYears},forcedPermutation:{key:"wm-frcd",expiry:r.tenYears},permutationOverride:{key:"wm-force-permutation",expiry:r.tenYears}},abTesting:{shouldLoadWalkme:{key:"wm-absl",expiry:r.tenYears},shouldShowWidget:{key:"wm-abss",expiry:r.tenYears}},abTestingGoals:{endUserUniqueKey:{key:"wm_abg_"}},analytics:{lastAuditedUser:{key:"wm-ueuT",expiryFunc:r.todayFunc}},autoStart:{repeat:{key:"wm-ASRep"}},wmDebugger:{config:{key:"wm-ftr-cnf",expiry:r.oneYear},state:{key:"wm-ftr",expiry:r.oneYear}},endUserLogging:{auditFreq:{key:"wm-euaf",expiryFunc:r["60times"]}},endUser:{guid:{key:"wm-ueug",expiry:r.tenYears},forcedGenerate:{key:"wm-fgug",expiry:r.tenYears}},goals:{blocked:{key:"wm-gb",expiry:r.oneDay}},hiddenIframe:{popupHackTries:{key:"wm-popup",expiry:r.tenYears}},publishData:{lastDataVersion:{key:"wm-ldv",expiry:r.tenYears}},serverDataSender:{serverSick:{key:"wm-sk"},serverSickAttempts:{key:"wm-sat"},serverSickTimestamp:{key:"wm-sst"}},serverStorage:{invalidateIntervalKey:{key:"ss_ii"},currentEndUserGuid:{key:"wm-ceug",expiry:r.tenYears},currentEnvironment:{key:"wm-cenv",expiry:r.tenYears},lastGetDataTime:{key:"wm-lgt",expiry:r.oneYear}},testMe:{loadTestMe:{key:"wm-ltm",expiry:900}},versions:{appVersion:{key:"wm-av",expiry:r.oneYear},appWasUpdated:{key:"wm-awu",expiry:r.oneYear}},visits:{numberOfVisits:{key:"wm-nov",expiry:r.oneYear},lastVisit:{key:"wm-lv",expiry:r.oneYear}},passOwnership:{newWindowTime:{key:"wm-cond-win",expiry:r.oneHour},stopOwnership:{key:"wm-cdstop",expiry:2},play:{key:"wm-cdplay",expiry:r.oneHour}},tabbedOwnership:{priorityCheck:{key:"wm-po-pc",expiry:r.oneHour},lastPriority:{key:"wm-po-p",expiry:r.oneHour},currentOwner:{key:"wm-po-r",expiry:r.oneHour},prioritiesQueue:{key:"wm-po-q",expiry:r.oneHour},priority:{key:"priority"}},remindMeLater:{remindMeLater:{key:"wm-RML"}},attentionGrabber:{data:{key:"wm-ag-d",expiry:r.tenYears},sessionLength:{key:"wm-ag-sl"},repeat:{key:"wm-ag-rep"}},engagementRules:{uniqueData:{key:"wm-engagementRules",expiry:r.thirtyMinutes},fileExists:{key:"wm-engagementRulesFileExists",expiry:r.oneWeek}},flow:{stack:{key:"wm-flow-stack",expiry:r.tenMinutes},lastStage:{key:"wm-nls",expiry:r.thirtyMinutes},beforePlay:{key:"wm-flw-preplay",expiry:r.oneMonth}},language:{current:{key:"wm-lang",expiry:r.oneYear}},session:{session:{key:"wm-ssn",expiry:r.thirtyMinutes}},teachMe:{quizResult:{key:"wm-lms-quiz-res",expiry:r.tenYears}},walkthru:{waitForOtherWindow:{key:"wm-wfow",expiry:r.tenMinutes},persistenceData:{key:"wm-prsst",expiry:r.tenMinutes}},survey:{repeat:{key:"wm-SrvRep",expiry:r.tenMinutes}},whitelist:{general:{key:"wm-wl"}},storage:{dataPrefix:{key:"wm-dt"},numberOfEntries:{key:"wm-ne"}},typedDataSender:{nextItemNumber:{key:"wm-nx"}},todoList:{endUserUniqueKey:{key:"wm_ct_"},progressPercentDataKey:{key:"wm_ct_pp",expiry:r.oneDay}},walkmeVisibleReporter:{walkmeVisibleReported:{key:"wm-wmv",expiry:r.oneDay}},deployableViewsCounter:{viewsCount:{key:"wm-views-",expiry:r.tenYears}},flowSurveyActivator:{surveyRepeat:{key:"wm-SrvWtRep-"}},walkthruSurveyActivator:{surveyRepeat:{key:"wm-SrvWtRep-"}},smartTipSet:{initiator:{key:"wm-smtp-init",expiry:r.tenMinutes}}}},function(e,t){e.exports={todayFunc:n,oneHour:3600,oneDay:86400,oneWeek:604800,oneMonth:2678400,oneYear:31536e3,tenMinutes:600,thirtyMinutes:1800,tenYears:31536e4,"60times":function(e){return 60*e}};function n(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0),n=Math.floor((t.getTime()-e.getTime())/1e3);return 0==n&&(n=1),n}},function(e,t){function n(e){return e=e.replace(/&quot;/gi,'"'),e=e.replace(/&apos;/gi,"'"),e=e.replace(/&#39;/gi,"'"),e=e.replace(/&amp;/gi,"&"),e=e.replace(/&gt;/gi,">"),e=e.replace(/&lt;/gi,"<")}e.exports={decode:n}},function(e,t,n){e.exports=function(e){return e||(e=n(57).decode),new r(e)};function r(e){var t=this;t.decodeJsonNodes=n;function n(e,t){return r(e)}function r(t,n){if(n=n||0,n>10)throw new Error("decodeHtml: json is too deep, defensively throwing: "+t);for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];"string"==typeof o&&(t[i]=e(o)),"object"==typeof o&&r(o,n+1)}}}},function(e,t){!function(){function t(e){var t=this;t.addElementClass=i,t.removeElementClass=s;var n;function r(){n=e.jQ}function i(e,t){for(var n=!0,r=e[0].ownerDocument,i=r.styleSheets,a=0;a<i.length;a++){var s=i[a];try{for(var u=s.cssRules||s.rules,l=0;l<(u&&u.length);l++){var c=u[l];if(c&&c.selectorText&&c.selectorText.indexOf(t)>-1){var d=o(e,c,t);n&&!d&&(n=!1)}}}catch(f){n=!1}}return n}function o(e,t,r){var i=!0,o=a(t,r);if(!o)return i;var s=t.selectorText.split(","),u=new RegExp("([^:]*)"+r+"(.*)");try{n.each(s,function(t,i){var a=u.exec(i);if(!a||i.indexOf(" > "+r)>-1)return!0;var s=a[1],l=e.parents().andSelf().filter(s),c=a[2];""!=c&&(l=l.find(c).andSelf()),n.each(l,function(e,t){var r=t.ownerDocument,i=r.createElement("style");i.type="text/css",i.title="walkme-hover-css-style",i.innerHTML=o,r.getElementsByTagName("head")[0].appendChild(i),n(t).addClass("walkme-hover-css")})})}catch(l){i=!1}return i}function a(e,t){var n=void 0;try{var r=new RegExp(t,"g");return n=e.cssText.replace(r,".walkme-hover-css")}catch(i){return}return n}function s(){n(".walkme-hover-css").removeClass("walkme-hover-css")}r.apply(null,arguments)}"object"==typeof e&&"object"==typeof e.exports&&(e.exports=t)}()},function(e,t,n){"use strict";t.__esModule=!0;var r=n(61);t.LoggerManager=r.LoggerManager;var i=n(62);t.DebuggerManager=i.DebuggerManager;var o=n(63);t.PerformanceManager=o.PerformanceManager},function(e,t){"use strict";t.__esModule=!0;function n(e,t,n){var r=this,i="wmLogger.js",o="logger/"+i;r.launchLogger=u,r.isLoggerActivated=l;function a(){n.bind(t.EVENTS.Widget.SearchTermChanged,s),n.bind("removeWalkMe",c)}function s(e,t){"walkmelogger"!=t.searchTerm||l()||u()}function u(){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e.getPlayerRelatedPath()+o),document.getElementsByTagName("head")[0].appendChild(t)}function l(){return wmjQuery("script[src*='"+i+"']").length>0}function c(){n.unbind(t.EVENTS.Widget.SearchTermChanged,s)}a.apply(null,arguments)}t.LoggerManager=n},function(e,t){"use strict";t.__esModule=!0;var n={Deactive:0,Active:1,ActiveAndReset:2};function r(e,t,r,i,o,a,s){var u=this,l=t.keysConfig.wmDebugger.config,c=t.keysConfig.wmDebugger.state;u.launchDebugger=g,u.isDebuggerOnWindow=v,u.launchDebuggerIfEnabled=p,u.closeDebugger=h,u.loadDebuggerForEditor=y,u.loadDebuggerFromStorage=m,u.clearDebuggerState=E;function d(){e.bind(s.EVENTS.Widget.SearchTermChanged,f),e.bind("removeWalkMe",I)}function f(e,t){"walkmetracker"!=t.searchTerm||v()||p()}function p(e,t){S()&&u.launchDebugger(e,t)}function g(n,r){u.isDebuggerOnWindow()||(n?t.saveData(l.key,n,l.expiry):t.removeData(l.key),r&&(e.dbgr||(e.dbgr={}),e.dbgr.debuggerWasLoaded=r),C(!0),i.postMessageToFrameAndDescendants(window.top,i.toJSON({requestType:"DEBUGGER_LOADED"})))}function h(){if(u.isDebuggerOnWindow()){var t=e.dbgr.close;t&&t()}delete e.dbgr}function m(){T(),C()}function v(){return!!e.dbgr}function y(e){u.closeDebugger(),t.saveData(l.key,{uiState:"wmd-minimize"},l.expiry),t.saveData(c.key,n.ActiveAndReset,c.expiry),t.refreshGetData(void 0,e)}function E(){t.removeData(c.key),t.removeData(l.key)}function S(){return r.get().DebuggerSettings&&"1"==r.get().DebuggerSettings.IsInPublish}function T(){window._walkmeInternals.ctx.get("PostMessageListener").listen(function(e){try{var t=i.secureEvalJSON(e.data);"DEBUGGER_LOADED"==t.requestType&&C()}catch(n){o.customerLog("Error loading debugger from post message: "+n,4)}})}function C(t){w(t),e.dbgr.shouldClear=t;var n;n||(n=a.getPlayerRelatedPath()+"debugger/"+window._walkmeInternals.ctx.get("WalkMeInfo").getLibVersion()+"/"),e.dbgr||(e.dbgr={}),e.dbgr.rootPath=n,i.addScript(n+"walkme_debugger.js",null,b)}function b(){o.customerLog("Failed loading the Flow Tracker!",1);var t=e.dbgr;t&&t.debuggerWasLoaded&&t.debuggerWasLoaded()}function w(t){e.dbgr||(e.dbgr={})}function I(){e.dbgr&&(e.dbgr.debuggerWasLoaded=null),e.unbind(s.EVENTS.Widget.SearchTermChanged,f)}d()}t.DebuggerManager=r},function(e,t,n){(function(e){"use strict";t.__esModule=!0;var r="wm-perf-toolkit",i=36e5,o=function(){function t(e,t){this.localStorage=e,this.commonUtils=t,this._wmInternals=window._walkmeInternals}return t.prototype.init=function(){if(this.createStub(),this.isEnabled())return this.loadToolkit()},t.prototype.loadToolkit=function(){var t=this;return new e(function(e){n.e(1,function(n){var r=[n(64)];(function(n){t.createApi(n),e()}).apply(null,r)})})},t.prototype.createApi=function(e){var t=wmjQuery(this._wmInternals),n=new e.PerformanceProfilerLib({on:function(e,n){return t.on(e,n)},once:function(e,n){return t.one(e,n)}});this._wmInternals.performance.profiler=n.getAPI()},t.prototype.createStub=function(){var e=this;this._wmInternals.performance={profiler:{startSession:function(t){e.enable(),e.loadToolkit().then(function(){e._wmInternals.performance.profiler.startSession(t)})}}}},t.prototype.enable=function(){if(!this.localStorage)return;this.localStorage.setItem(r,this.commonUtils.toJSON({started:(new Date).getTime()}))},t.prototype.isEnabled=function(){var e=this.localStorage&&this.localStorage.getItem(r);if(!e)return!1;return e=this.commonUtils.secureEvalJSON(e),(new Date).getTime()<e.started+i},t}();t.PerformanceManager=o}).call(t,n(29))},,,,,,,,,,,,,function(e,t,n){var r=n(77),i=n(80),o=n(81),a=n(82),s=n(83),u=n(84),l=n(85),c=n(86),d=n(87),f=["JQueryElementFinder","PositionHelper","HtmlDecoder","Logger","Consts","CommonUtils","ArrayUtils","TimerManager","FeaturesManager","SimpleNLP","win","FindElementPlugins","ElementFinderExtensionsProvider"];function p(e,t,n,f,p,g,h,m,v,y,E,S,T,C){var b=C.ctx,w=new c(b),I=new i(d,h,f,p),P=new o(w),_=new a(v),k=new s(m,_,h,g,P,w),A=new u(S,g,w),D=new l(y,E,_,w),O=new r(e,t,n,A,_,k,f,p,d,I,D,g,T);return O}function g(e){var t=f.join(",");e.register("FindElementPlugins").asInstance([]),e.register("ElementFinder").asFunction(p).dependencies(t).args({ctx:e}).asSingleton()}e.exports={registerToCtx:g}},function(e,t,n){var r=n(78);r.VersionName="classic";var i=n(79);i.VersionName="next-gen",e.exports=o;function o(e,t,n,o,a,s,u,l,c,d,f,p,g){var h,m,v=this,y=!1;function E(){m=u.wrapCustomerLog(l.FEATURES_LOGS.ElementFinder)}v.initFE=function(){if(y)return;a.isFeatureManagerReady()?(y=!0,h=!a.isFeatureEnabled("enableFEAllTypes")&&!window.walkMeGermany||a.isFeatureEnabled("dw5")?r:i):h=r,h.ElementRecognition.setJQuery(wmjQuery),h.ElementRecognition.setCommonUtils(p)};function S(e){var t={0:h.ElementRecognition.AlgorithmSensitivity.Low,1:h.ElementRecognition.AlgorithmSensitivity.Medium,2:h.ElementRecognition.AlgorithmSensitivity.High};return t[e]}function T(e,t){var n=h.ElementRecognition.SearchOptions.IGNORE_NOTHING,r=[],i=a.isFeatureEnabled("forceIgnorePosition");e.IsIdentifyByText&&r.push("IDENTIFY_TEXT"),e.IsIgnoreText&&r.push("IGNORE_TEXT"),e.IsIgnoreId&&(r.push("IGNORE_ID"),r.push("IGNORE_NAME")),(i||0!=e.IgnorePosition)&&r.push("IGNORE_POSITION"),e.IsIdentifyById&&r.push("IDENTIFY_ID_AND_NAME"),e.IgnoreShapeProportion&&r.push("IGNORE_SHAPE_PROPORTION"),e.IgnoreClass&&r.push("IGNORE_CLASS"),e.IgnoreStyle&&r.push("IGNORE_STYLE"),e.IgnoreHref&&r.push("IGNORE_HREF"),t["data-walkmeid"]&&r.push("IDENTIFY_WALKME_ID"),a.isFeatureEnabled("noAutoQuery")||r.push("USE_AUTO_SELECTOR");for(var o=0;o<r.length;o++)n|=h.ElementRecognition.SearchOptions[r[o]];return n}v.getFindElementCore=function(){return h},v.getVersion=function(){return h.Version},v.adaptDescription=function(e,r,i,o){var s=!a.isFeatureEnabled("fe_no_xpath_cache"),u=new h.ElementRecognition.ElementDescription(s);u.preDefinedSuspects=o,u.elementType=C(r.elementXpath.toLowerCase()),u.uppercaseElementType=u.elementType.toUpperCase(),u.width=r.elementWidth,u.height=r.elementHeight,u.relativeLeft=r.relativeLeft,u.absY=r.elementAbsY,u.centeredElementWidth=r.centeredElementWidth,u.xpathArrayOriginal=h.XpathLib.xpathStringToArray(r.elementXpath.toUpperCase()),u.xpathArray=h.XpathLib.removeHtmlAndBodyFromXpathArray(u.xpathArrayOriginal),u.xpathArrayToIframe=h.XpathLib.removeHtmlAndBodyFromXpathArray(h.ContextUtils.getXpathUpToIframe(u.xpathArrayOriginal)),u.text=r.textArray&&r.textArray.length>0?n.decodeHtml(r.textArray[0],["&",'"',"'",">","<"]):"",u.autoQuery=r.autoQuery?n.decodeHtml(r.autoQuery,['"']).replace(/([.:])/gm,function(e,t,n,r){return"\\"!==r[n-1]?"\\"+t:t}):null,r["data-walkmeid"]?u.customSelector="[data-walkmeid='"+r["data-walkmeid"]+"']":(void 0==i||i)&&(u.visibilityFilter=t.getVisibleFilter(e));var l={elementClass:"class",elementId:"id",elementName:"name"};u.attributes={};for(var c in l)u.attributes[l[c]]=r[c];for(var d in r)!r.hasOwnProperty(d)||u.attributes.hasOwnProperty(d)||l[d]||(u.attributes[d]=r[d]);return u};function C(e){var t=e.split("/"),n=t[t.length-1],r=n.split("[")[0];return r}v.wrapSession=function(e,t){return s.wrapSession(e,t)},v.startSessionForEditor=function(e,t){return s.startSessionForEditor(e,t)},v.endSessionForEditor=function(){return s.endSessionForEditor()},v.recognizeElement=function(e,t,n,r,i){v.initFE();var a=s.getSession(r,h);p.isDefined(e.StepSensitivity)&&a.setAlgorithmSensitivity(S(e.StepSensitivity)),a.setSearchOptions(T(e,t));var u=v.adaptDescription(e,t,n,i);o.extendAdaptedSettings(e,u);var l=a.recognize(u);return o.extendResult(e,u,l),s.addMeasurement(l.timeMeasurements),l},v.getWinner=function(e){var t=e&&e.elements&&e.elements.length&&e.elements[0];return t};function b(e,t,n,r,i,o){var a=v.recognizeElement(e,t,n,i,o),s=v.getWinner(a),u=s&&s.element&&s.element.length&&s.element[0];return s&&r&&(r.score=s.totalScore,r.details=s.details,r.losers=a.losers),u&&wmjQuery(u).data("iframe",a.context),u}v.findElement=function(t,n,r,i,s){var u=g.getElementFinderExtension(t);if(u)return u.findElement(t,n,r,i,s);if(!1===o.extendOriginalSettings(t))return!1;if(m(t,5),f.isEnabled()&&f.getPageKey(t)){var l=f.compareCurrent(t);if(!l.match)return!1}var c;if(t.IsJquerySelector){t.ElementDescription.extended=t.ElementDescription.extended||{},t.ElementDescription.extended.elementIframe=null;var d=e.findElements(t,n);if(c=d&&d.length&&d[0])return c=wmjQuery(c),t.ElementDescription.extended&&c.data("iframe",t.ElementDescription.extended.elementIframe),c;return!1}if(c=o.findElement(t,r),void 0!==c)return c?wmjQuery(c):c;if(t.ElementDescription.r===!0&&a.isFeatureEnabled("disableDefaultFE"))return!1;return c=b(t,t.ElementDescription,n,r,i,s),!!c&&wmjQuery(c)},v.getFindElementPluginManager=function(){return o},v.getPageComparerCacheManagerEditorApi=function(){return f.editorApi},E.apply(this,arguments)}},function(e,t){var n;!function(e){function t(t){return e.S(t,"parentNode")}function n(t,i){i=i||[],t=t||document;for(var o=e.$("iframe,frame",t).toArray(),a=0;a<o.length;a++){var s=r(e.$(o[a]))[0];i.push(s),s&&(i=n(s,i))}return i}function r(t){if(void 0!=t){if(t=t[0],void 0==t)return e.$();var n;try{n=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:[],n=e.$(n)}catch(r){return e.ea.handleCrossDomainError(r),e.$()}return n}}e.$,e.q,e.S=function(e,t){return e[t]},e.ea,e.setJQuery=function(t){e.$=t,e.q=t,e.$.fnHelpers&&(e.S=function(t,n){return e.$.fnHelpers[n](t)})},e.setCommonUtils=function(t){e.ea=t},e.cb=function(e){return e=e.tagName,e.toUpperCase&&(e=e.toUpperCase()),e},e.parentNode=t,e.childNodes=function(t){return e.S(t,"childNodes")},e.ga=function(e,n){for(var r=t(e[0]),i=n&&n[0]&&t(n[0]),o=[];r&&1==r.nodeType&&r!=i;r=t(r))o.push(r);return o},e.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},e.reduce=function(e,t,n){for(var r=0;r<e.length;r++)n=t(n,e[r]);return n},e.bc=function(e){var t={};e=e.prop("attributes");for(var n=0;n<e.length;n++){var r=e[n];t[r.name]=r.value}return t},e.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},e.filter=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},e.wa=function(t,n,r){t=e.filter(t.split(n),function(t){return e.$.trim(t)}),t=e.map(t,function(e){return e.split(r)}),n={};for(var i=0;i<t.length;i++){var o=t[i],a=e.$.trim(o[0]),s="";o[1]&&(s=e.$.trim(o[1])),n[a]=s}return n};var i=function(){function e(){this.start=this.now()}return e.prototype.now=function(){return window.performance&&performance.now?performance.now():(new Date).getTime()},e.prototype.G=function(){return Math.round(1e3*(this.now()-this.start))/1e3},e}();e.Wb=i,e.F=function(){return new i},e.cc=function(){for(var e=0;e<arguments.length;e++);for(var e=arguments[0],t=1;t<arguments.length;t++)e=e.replace(new RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},e.ec=function(e){return void 0!=e&&0<e.length},e.getAllElements=function(t,r){t=t||document,r=r||"*";var i=n(t,[t]);return e.$(r,i)},e.dc=n,e.s=r,e.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},e.min=function(e,t){var n=null;if(0<e.length)for(var r=t(e[0]),n=e[0],i=1;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}return n},e.la=function(){return(new Date).getTime()%1e9}}(n||(n={}));var r,i=function(){function e(){this.buffer=[]}return e.prototype.append=function(e){this.buffer.push(e)},e.prototype.toString=function(){return this.buffer.join("")},e}();!function(e){function t(e,t){function n(n){return r(t,n,function(t){return t==e},!1)}for(var i=n(0),o=[];0<=i&&i<t.count()-1;)o.push(t.slice(0,i+1)),i=n(i+1);return o}function r(e,t,n,r){var i=e.count();if(r){for(t=i-1-t;0<=t;t--)if(n(e.get(t).tag))return t}else for(;t<=i-1;t++)if(n(e.get(t).tag))return t;return-1}function o(e,t,n,r){for(var i,o=[],a=0;a<t.length;a++)i=t[a],o.push(u(e,i,n,r)),e=i;return o=o.reverse(),s(o,n)}function a(e,t,r,i){var o=(e=e[0])&&n.parentNode(e);r=r&&r[0];for(var a=[];e&&1==e.nodeType&&e!=r;e=o,o=n.parentNode(e))a.push(u(e,o,t,i));return a=a.reverse(),s(a,t)}function s(e,t){return t?new y(e):new v(e)}function u(e,t,n,r){return n?n.eb(e,t,r):d(e,t,r)}function c(e,t,n){return new l(null,function(){return d(e,t,n)})}function d(e,t,r){var i=1;if("HTML"!=n.cb(e)){t=n.childNodes(t);for(var o=0;o<t.length&&t[o]!=e;o++){var a=t[o];a.tagName==e.tagName&&0>n.inArray(a,r)&&i++}}return{tag:e.tagName.toUpperCase(),
index:i}}function p(e){return!e||0>=e.length?null:1==e.get(0).nodeType?e:(e=e.find(":first"))&&e.length&&1==e.get(0).nodeType?e:null}function g(e,t,r,i){if(i=i||[],t=t||m.$(document),0<t.find(e).length)e.data("iframe",r),i.unshift(t);else{r=i.length,t=t.find(f.ka);for(var o=0;o<t.length;o++){var a=t.eq(o);if(i=g(e,n.s(a),a,i),i.length>r){m.$(i[0]).data("iframe",a),i.unshift(a);break}}}return i}function h(e){for(var t=["HTML","BODY"],r=0;r<e.count()&&-1<n.inArray(e.get(r).tag,t);r++);return e.slice(r)}var v=function(){function e(e){this.xpathArray=e}return e.prototype.count=function(){return this.xpathArray.length},e.prototype.get=function(e){return this.xpathArray[e]},e.prototype.slice=function(t,n){return new e(this.xpathArray.slice.apply(this.xpathArray,arguments))},e}();e.Xb=v;var y=function(){function e(e){this.xpathArray=e}return e.prototype.count=function(){return this.xpathArray.length},e.prototype.get=function(e){return this.xpathArray[e].get()},e.prototype.slice=function(t,n){return new e(this.xpathArray.slice.apply(this.xpathArray,arguments))},e}();e.Yb=y,e.m=1,e.Ca=1;var E=function(){function e(e,t,n){this.l=this.t=this.b=0,this.b=e,this.t=t,this.l=n}return e.prototype.clone=function(){return new e(this.b,this.t,this.l)},e.prototype.p=function(){return this.b+this.t/4+this.l/10},e.max=function(){return new e(1e4,0,0)},e.p=function(e){return e.p()},e}();e.Zb=E,e.M=function(t,r,i){function o(t,r,a,s,u){if(Math.abs(r-s)>i||u.b>i)return E.max();if(0==r||0==s)return u=u.clone(),u.b+=Math.max(r,s,0),u.b>i?E.max():u;var l,c=t.get(r-1),d=a.get(s-1),f=0;if(c.tag!==d.tag)f=e.m,l=E.max();else{if(c.index===d.index)return o(t,r-1,a,s-1,u);f=e.Ca}var p=u.clone();p.b+=f;var f=o(t,r-1,a,s,p),g=o(t,r,a,s-1,p);return l||(c=Math.abs(c.index-d.index),p=u.clone(),0<c&&(p.t++,p.l+=c),l=o(t,r-1,a,s-1,p)),n.min([f,g,l],E.p)}return o(t,t.count(),r,r.count(),new E(0,0,0))},e.ha=function(e,t,r,i){var o=e.count();if(0>=o)return null;t=m.$(t||document),i=i?":not("+i+")":"";for(var a=0;a<o;a++){var s=e.get(a);if(t=t.children(s.tag+i).eq(s.index-1),-1!=n.inArray(s.tag,["IFRAME","FRAME"])&&o>a+1&&(0<t.length&&(r&&t.data("iframe",r),r=t),t=n.s(t)),!t||0==t.length||!t.get(0)){t=null;break}}return t&&0<t.length&&r&&t.data("iframe",r),t},e.Nb=function(r,i){if(!i||0>=i.count())return 0;for(var o=i.get(i.count()-1).tag,a=t(o,r),o=E.max().p(),s=2*e.m,u=o,l=[],c=0;c<a.length;c++){var d=a[c],f=e.M(d,i,s).p();f<u?(u=f,l=[d]):f==u&&l.push(d)}return a=0,u<o&&(a=n.min(l,function(e){return Math.abs(i.count()-e.count())}).count()),a},e.Q=r,e.$b=o,e.Sa=a;var S=function(){function e(){this.xa={}}return e.prototype.eb=function(e,t,n){var r=null,i=this.u(e);return void 0!==i&&(r=this.xa[i]),r||(r=c(e,t,n),t=this.w(),this.B(e,t),this.xa[t]=r),r},e.prototype.u=function(t){return t&&t[e.Z]||void 0},e.prototype.B=function(t,n){t&&(t[e.Z]=n)},e.prototype.w=function(){return++e.T},e.T=n.la(),e.Z="__WM_XPATH_ENTRY_KEY__",e}();e.Ka=S,e.Ta=function(e,t,n,r){return e=o(e[0],t,n,r),e=h(e)},e.Qa=function(e,t,r){var i=p(e);if(!i||0>=i.length)return new v([]);return i=g(i),i=n.reduce(i,function(e,n){return e.concat(a(n,t,null,r).xpathArray)},[]),s(i.concat(a(e,t,null,r).xpathArray),t)},e.removeHtmlAndBodyFromXpathArray=h,e.Sb=function(e){for(var t=new i,n=0;n<e.count();n++){var r=e.get(n);t.append(r.tag),t.append(r.index)}return t.toString()},e.xpathStringToArray=function(e){var t=[];return m.$.each(e.split("/"),function(e,n){if(0!=e){var r=n.indexOf("[");t[e-1]={tag:n.substring(0,r),index:parseInt(n.substring(r+1,n.length-1))}}}),new v(t)}}(r||(r={}));function o(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n}var a;!function(e){var t=function(){function e(e,t){this.Hb=e,this.weight=t,this.name=e.name}return e.prototype.d=function(e,t){var n=this.Hb.d(e,t);return this.weight*n},e}();e.Ja=t,t=function(){function e(e){this.attributeName=e,this.name="Attribute Scorer : "+e}return e.prototype.d=function(e,t){var n=e.element.attr(this.attributeName),r=t.attributes[this.attributeName];return n&&r&&n.toLowerCase()===r.toLowerCase()?1:0},e}(),e.Tb=t,t=function(e){function t(t,n){e.call(this,t),this.Qb=n}return o(t,e),t.prototype.d=function(t,n){return n.attributes[this.attributeName]==this.Qb?0:e.prototype.d.call(this,t,n)},t}(t),e.za=t,t=function(){function e(e){this.name="XpathScorer",this.h=e}return e.prototype.d=function(e,t){var n=e.xpath.get(),n=this.h.v(n,t.xpathArrayToIframe);if(n.b>r.m)return 0;return n=1-.1*(n.b+n.l/10),0>n?0:n},e}(),e.La=t,t=function(){function e(){this.name="ShapeProportionScorer"}return e.prototype.d=function(e,t){if(!this.ub(e.element))return 0;var n=e.width.get(),r=e.height.get();return 0!=n*r?(n=this.na(n,t.width)/2+this.na(r,t.height)/2,.6<=n?n:0):0},e.prototype.na=function(e,t){var n=e/t;return 1<n&&(n=1/n),Math.pow(n,4)},e.prototype.ub=function(t){return t=t.prop("tagName"),-1!==n.indexOf(e.Pb,t)},e.Pb="DIV TABLE TR TD TBODY TH".split(" "),e}(),e.Ha=t,t=function(){function e(e,t,n){this.name="ComplexAttributeScorer",this.name=this.name+" : "+e,this.attributeName=e,this.Cb=t,this.ob=n}return e.prototype.d=function(e,t){if(!t.attributes[this.attributeName]||!e.element.attr(this.attributeName))return 0;var r=t.complexAttributes[this.attributeName].get(),i=n.wa(e.element.attr(this.attributeName),this.Cb,this.ob);return 1==this.Wa(r,i)?1:0},e.prototype.Wa=function(e,t){var n,r=0,i=0;for(n in e)e.hasOwnProperty(n)&&(i++,e[n]==t[n]&&r++);return n=0,0<i&&(n=r/i),n},e}(),e.W=t,t=function(){function e(){this.name="TextScorer"}return e.prototype.d=function(e,t){return t.text&&e.text.get()==t.text?1:0},e}(),e.Ia=t}(a||(a={}));var s,u=function(){function e(e){this.data=Array(e),this.size=e,this.count=0}return e.prototype.getItem=function(e){if(0>e||e>=this.count)throw Error("Out of range exception");return this.data[e]},e.prototype.clear=function(){this.count=0},e.prototype.push=function(e){if(this.count==this.size)throw Error("FastArray exceeded it's limits");this.data[this.count]=e,this.count++},e.prototype.ib=function(){return this.data.slice(0,this.count)},e}(),l=function(){function e(e,t){this.Eb=t,this.hasData=!1,this.context=e}return e.prototype.get=function(){return this.hasData||(this.data=this.Eb.apply(this.context),this.hasData=!0),this.data},e.prototype.clear=function(){this.hasData=!1},e}(),c=function(){function e(){}return e.prototype.v=function(e,t){return r.M(e,t,r.m)},e.prototype.P=function(e){return new m.ScoredElement(e,this.c)},e.prototype.o=function(e){this.c=e},e.prototype.O=function(e,t){return t(e)},e.prototype.Lb=function(e){e.H=this.c&&e&&this.c.ignoreWalkmeElementsSelector===e.ignoreWalkmeElementsSelector?this.c.H:e&&e.ignoreWalkmeElementsSelector?n.getAllElements(document,e.ignoreWalkmeElementsSelector).toArray():[]},e}(),d=function(e){function t(){e.apply(this,arguments),this.U={},this.D=[],this.ia={},this.i={}}return o(t,e),t.prototype.o=function(t){this.Ua(t),e.prototype.o.call(this,t)},t.prototype.wb=function(e,t){return(e&&e[0]||null)===(t&&t[0]||null)},t.prototype.Ua=function(e){if(this.i={},0<this.D.length){var t=!1;this.c&&(t=!this.wb(this.c.n,e.n));for(var n=0;n<this.D.length;n++){var r=this.U[this.D[n]];r.totalScore=0,r.details=[],r.fa=!1,r.o(e,t)}}},t.prototype.u=function(e){return e&&e[0]&&e[0][t.X]||null},t.prototype.B=function(e,n){e&&e[0]&&(e[0][t.X]=n)},t.prototype.w=function(){return++t.T},t.prototype.P=function(t){var n=null,r=this.u(t);return void 0!==r&&(n=this.U[r]),n||(n=e.prototype.P.call(this,t),r=this.w(),this.B(t,r),this.U[r]=n,this.D.push(r)),n},t.prototype.v=function(t,n){var i,o=r.Sb(t);return this.i.hasOwnProperty(o)||(i=e.prototype.v.call(this,t,n),this.i[o]=i),this.i[o]},t.prototype.mb=function(e){var t=this.c.n;if(t&&0<t.length){var n=this.u(t);n||(n=this.w(),this.B(t,n)),n&&(e+="__"+n)}return e},t.prototype.O=function(t,n){var r=this.mb(t),i=this.ia[r]||null;return i||(i=e.prototype.O.call(this,t,n),this.ia[r]=i),i},t.T=n.la(),t.X="__WM_SUSPECT_KEY__",t}(c);!function(e){function t(o){var a="";if(3===o.nodeType||4===o.nodeType){a=o.nodeValue,o=[160,10,13,9];for(var s=new i,u=0;u<a.length;u++)0>n.indexOf(o,a.charCodeAt(u))&&s.append(a.charAt(u).toLowerCase());if(a=s.toString().replace(/ /g,""),a=m.$.trim(a),a=a.substring(0,e.zb),null!=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(a)){for(o=-1,s=a.length,u=new i;++o<s;){var l=a.charAt(o);/[\uD800-\uDBFF]/.test(l)||/[\uDC00-\uDFFF]/.test(l)?u.append(r(l)):u.append(l)}a=u}}else if(1===o.nodeType&&!o.tagName.match(/^(script|style)$/i))for(o=n.childNodes(o),s=0,u=o.length;s<u&&!(a=t(o[s]));s++);return a}function r(e){e=e.charCodeAt(0).toString(16).toUpperCase();var t=2<e.length;return"\\"+(t?"u":"x")+("0000"+e).slice(t?-4:-2)}e.zb=70;var o;!function(e){e[e.ElementNode=1]="ElementNode",e[e.Text=3]="Text",e[e.CDATASection=4]="CDATASection"}(o||(o={})),e.extractFirstOccuringText=function(e){return t(e[0])},e.ac=t}(s||(s={}));var f;!function(e){function t(){for(var e=0;e<arguments.length;e++);return m.$.apply(m.$,arguments)}function i(e){if(1==e.count())return e;var t=r.Q(e,1,o,!0);return-1==t?e:e.slice(t+1)}function o(e){return-1!=n.inArray(e,s)}function a(i,s,u,l,c,d){var f=r.Q(i,0,o,!1);if(0>f)return u;var p=i.slice(0,f+1);if(i=i.slice(f+1),f=t(e.Rb,c||u),0==f.length)return null;return f=1==f.length?f[0]:n.min(f,function(e){return e=r.Sa(t(e),s,t(u),l),r.M(e,p,r.m).p()}),(d||u&&0<u.length&&c&&0<c.length)&&t(f).data("iframe",d||u),a(i,s,t(f),l,n.s(t(f)))}var s=["IFRAME","FRAME"];e.Rb=s.join(":mt_visible,")+":mt_visible",e.ka=s.join(","),e.getXpathUpToIframe=i,e.Db=function(s){var u,l=s.a,c=r.Qa(l.customContext,l.i,l.H),d=r.Nb(l.xpathArrayOriginal,c),f=l.xpathArrayOriginal.slice(d);u=l.i;var p=l.customContext,g=l.H,h=l.ignoreWalkmeElementsSelector;if(1==f.count())u=p;else{var m=r.Q(f,1,o,!0);if(-1==m)u=p;else{var v=n.s(p),y=(v=v&&0<v.length?v:null)?p:p?p.data("iframe"):null,m=f.slice(0,m+1);(h=r.ha(m,v||p,y,h))&&h.is(":mt_visible")||(h=null),h||(h=a(f,u,p,g,v,y)),u=h}}g=(p=(u=u||l.customContext)&&u.is(e.ka))?n.s(u):u&&0<u.length?u:void 0,u={context:u,vb:p,contents:g},l.n=u.contents,s.setSearchOptions(s.g&-257),c&&c.count()&&l.n==l.customContext&&(0>=d&&s.setSearchOptions(256|s.g),l.xpathArrayToIframe=r.removeHtmlAndBodyFromXpathArray(i(f)));var E;return u&&(E=u.vb?u.context:t(u.context).data("iframe")),E}}(f||(f={}));var p;!function(e){e.$,e.q,e.setJQuery=function(t){e.$=t,e.q=t};var t=function(){function t(){this.name="PositionScorer"}return t.prototype.d=function(e,t){return this.Gb(e,t)},t.prototype.Gb=function(e,t){var n=t.centeredElementWidth,r=0;if(n){var r=t.relativeLeft,i=this.jb(e),r=Math.abs(r-i),n=n/5;if(r>(30>n?30:n))return 0;n=1-r/20,r=t.absY,i=e.element.offset().top,r=1-Math.abs(r-i)/20,i=.3,.9<n&&(i=.9),r=n*(1-i)+r*i,r=0>r?0:r}return r},t.prototype.jb=function(e){var t=this.bb(e),t=t?t.offset().left:0;return e.element.offset().left-t},t.prototype.bb=function(t){t=t.Na.get();for(var n=null,r=t.length-1;0<=r;r--)try{if(this.rb(t[r])){var i=e.$(t[r]),o=e.$(window).width(),a=i.width(),s=i.offset().left,u=o-a;if(0<u&&u/2==s){n=i;break}if(0>u&&u==s){n=i;break}if(this.tb(i)){n=e.$(i);break}}}catch(l){}return n},t.prototype.rb=function(t){var n=e.$(t),r=n.data("mt_isElementFixedWidth");if(1==r)return!0;if(0==r)return!1;return t=this.qb(t),n.data("mt_isElementFixedWidth",t),t},t.prototype.tb=function(t){var n=e.$(t),r=n.data("mt_isElementMarginAuto");if(1==r)return!0;if(0==r)return!1;return t=this.sb(t),n.data("mt_isElementMarginAuto",t),t},t.prototype.oa=function(t,n){for(var r=!1,i=0;i<n.length&&(r=n[i],!(r=e.$(t).is(e.$(r))));i++);return r},t.prototype.qb=function(e){return!!this.pa(e.style)||this.oa(e,this.fb())},t.prototype.Ob=function(e){return 0==e.indexOf("0")},t.prototype.Ya=function(e){return 4<=e.length&&e.lastIndexOf("auto")+4==e.length},t.prototype.qa=function(t){if(t){var n=e.$.trim(t.margin),r=e.$.trim(t.marginLeft);if(t=e.$.trim(t.marginRight),(n=this.Ob(n)&&this.Ya(n))||"auto"==r&&"auto"==t)return!0}return!1},t.prototype.sb=function(e){return!!this.qa(e.style)||this.oa(e,this.hb())},t.prototype.hb=function(){return void 0==this.K&&(this.K=[],this.ja(this.va)),this.K},t.prototype.va=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.va(n.styleSheet):this.qa(n.style)&&this.K.push(n.selectorText)}}catch(r){}},t.prototype.ja=function(e){for(var t=document.styleSheets,n=0;n<t.length;n++)e.call(this,t[n])},t.prototype.ua=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.ua(n.styleSheet):this.pa(n.style)&&this.L.push(n.selectorText)}}catch(r){}},t.prototype.fb=function(){return void 0==this.L&&(this.L=[],this.ja(this.ua)),this.L},t.prototype.pa=function(e){if(e=e.width){for(var t="",n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n]);if(t&&700<parseInt(t)&&(-1!=e.indexOf("p")||-1!=e.indexOf("e")||-1!=e.indexOf("m")||-1!=e.indexOf("i")))return!0}},t}();e.Ea=t}(p||(p={}));var g;!function(e){!function(e){e[e.Indifferent=0]="Indifferent",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"}(e.Ga||(e.Ga={}));var t=function(){function e(e,t){this.sa=e,this.Bb=t,this.isEqual=e===t}return e.prototype.k=function(){throw Error("childScreen must be overriden by subclass")},e.prototype.screen=function(e,t){return this.isEqual?this.sa:this.k(e,t)?this.sa:this.Bb},e}();e.Vb=t;var n=function(){function e(){}return e.prototype.ta=function(){throw Error("rejectFn must be overriden by subclass")},e.prototype.aa=function(){throw Error("acceptFn must be overriden by subclass")},e.prototype.screen=function(e,t){return this.ta(e,t)?2:this.aa(e,t)?1:0},e}();e.Ub=n,n=function(e){function t(t,n){e.call(this),this.name="IdScreen",this.pb=t,this.xb=n,this.da=new i("id",0,0)}return o(t,e),t.prototype.ta=function(e,t){if(this.xb){var n=e.I("id");return!(!n||30<=n.length)&&!this.da.k(e,t)}},t.prototype.aa=function(e,t){if(this.pb)return this.da.k(e,t)},t}(n),e.Ba=n;var i=function(e){function t(t,n,r){e.call(this,n,r),this.attrName=t,this.name="AttributeScreen["+this.attrName+"]"}return o(t,e),t.prototype.k=function(e,t){var n=e.I(this.attrName),r=t.attributes[this.attrName];return!(!r||!n)&&n===r},t}(t);e.r=i,n=function(e){function t(t,n,r){e.call(this,t,n),this.Pa=r,this.name="XpathScreen"}return o(t,e),t.prototype.k=function(e,t){var n=e.xpath.get(),i=r.m;return this.Pa.v(n,t.xpathArrayToIframe).b<=i},t}(t),e.Ma=n,n=function(e){function t(t,n,i){e.call(this,n,i);var o=t.xpathArrayOriginal;this.yb=new l(this,function(){return r.ha(o,void 0,void 0,t.ignoreWalkmeElementsSelector)}),this.name="ExactXpathScreen"}return o(t,e),t.prototype.k=function(e){var t=this.yb.get();return t&&t[0]==e.element[0]},t}(t),e.Aa=n,t=function(e){function t(t,n){e.call(this,t,n),this.name="TextScreen"}return o(t,e),t.prototype.k=function(e,t){return!(!t.text||0===t.text.length)&&e.text.get()===t.text},t}(t),e.Y=t}(g||(g={}));var h;!function(e){var t={value:10,src:3,title:3,colspan:.3,cellpadding:.3,cellspacing:.3,border:.3,dir:.3,width:.3,placeholder:3,"data-walkmeid":1e3,id:10,name:8,alt:1},n={id:1,name:4,title:8},r=function(){function e(e,t){this.V=[],this.name="Multiple attributes",this.options=t,this.description=e,this.weight=this.Ra()}return e.prototype.Ra=function(){var e,t=0;for(e in this.description.attributes)this.description.attributes.hasOwnProperty(e)&&this.Mb(e)&&this.R(this.description.attributes[e])&&(t+=this.N(e),this.V.push(e));return t},e.prototype.Mb=function(e){var t=0!==this.N(e);return!(n.hasOwnProperty(e)&&n[e]&this.options)&&t},e.prototype.d=function(e,t){for(var n=0,r=0;r<this.V.length;r++){var i=this.V[r],o=t.attributes[i],a=e.I(i);this.R(a)&&this.R(o)&&a==o&&(n+=this.N(i))}return n},e.prototype.R=function(e){return void 0!=e&&null!=e&&""!=e},e.prototype.N=function(e){return t.hasOwnProperty(e)?t[e]:0},e}();e.Fa=r}(h||(h={}));var m;!function(e){function t(){}e.$,e.q,e.setJQuery=function(t){e.$=t,e.q=t,n.setJQuery(t),p.setJQuery(t)},e.setCommonUtils=function(e){n.setCommonUtils(e)},e.setLogFunc=function(e){t=e};var i=function(){function e(e,t){var i=this;this.totalScore=0,this.width=new l(this,function(){return i.element.width()}),this.height=new l(this,function(){return i.element.height()}),this.parents=new l(this,function(){return n.ga(i.element,i.c.n)}),this.Na=new l(this,function(){return n.ga(i.element)}),this.text=new l(this,function(){return s.extractFirstOccuringText(i.element)}),this.I=function(e){return this.J.hasOwnProperty(e)||(this.J[e]=this.element.attr(e)),this.J[e]},this.xpath=new l(this,function(){return r.Ta(i.element,i.parents.get(),i.c.i,i.c.H)}),this.element=e,this.details=[],this.J={},this.o(t)}return e.prototype.o=function(e,t){this.c&&t&&(this.parents.clear(),this.xpath.clear()),this.c=e},e}();e.ScoredElement=i;var o=function(){return function(){this.elements=[],this.losers=void 0}}();e.RecognitionResult=o,i=function(){function e(e){this.attributes={},this.complexAttributes={},this.ba("style",";",":"),this.ba("class"," ",null),e&&(this.i=new r.Ka)}return e.prototype.ba=function(e,t,r){var i=this;this.complexAttributes[e]=new l(this,function(){return n.wa(i.attributes[e],t,r)})},e}(),e.ElementDescription=i,function(e){e[e.Efficient=0]="Efficient",e[e.Verbouse=1]="Verbouse",e[e.Fast=2]="Fast",e[e.VerbouseDebug=3]="VerbouseDebug"}(e.ya||(e.ya={})),function(e){e[e.Suspects=1]="Suspects",e[e.Screened=2]="Screened",e[e.Scored=3]="Scored",e[e.Screen_Attr_id=4]="Screen_Attr_id",e[e.Screen_Attr_name=5]="Screen_Attr_name",e[e.Screen_Text=6]="Screen_Text",e[e.Screen_Attr_walkmeid=7]="Screen_Attr_walkmeid",e[e.Screen_Exact_Xpath=8]="Screen_Exact_Xpath",e[e.Screen_Xpath=9]="Screen_Xpath",e[e.Screen_Attr_src=10]="Screen_Attr_src",e[e.Score_Xpath=11]="Score_Xpath",e[e.Score_Multi=12]="Score_Multi",e[e.Score_Text=13]="Score_Text",e[e.Score_Shape_Proportion=14]="Score_Shape_Proportion",e[e.Score_Complex_Class=15]="Score_Complex_Class",e[e.Score_Complex_Style=16]="Score_Complex_Style",e[e.Score_Attr_href=17]="Score_Attr_href",e[e.Score_Position=18]="Score_Position"}(e.Da||(e.Da={})),function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low"}(e.AlgorithmSensitivity||(e.AlgorithmSensitivity={})),function(e){e[e.IGNORE_ALL=4294967295]="IGNORE_ALL",e[e.IGNORE_NOTHING=0]="IGNORE_NOTHING",e[e.IGNORE_ID=1]="IGNORE_ID",e[e.IGNORE_POSITION=2]="IGNORE_POSITION",e[e.IGNORE_NAME=4]="IGNORE_NAME",e[e.IGNORE_TEXT=8]="IGNORE_TEXT",e[e.IDENTIFY_TEXT=32]="IDENTIFY_TEXT",e[e.IDENTIFY_ID_AND_NAME=64]="IDENTIFY_ID_AND_NAME",e[e.IDENTIFY_WALKME_ID=128]="IDENTIFY_WALKME_ID",e[e.IGNORE_XPATH=256]="IGNORE_XPATH",e[e.IGNORE_SHAPE_PROPORTION=512]="IGNORE_SHAPE_PROPORTION",e[e.IGNORE_CLASS=1024]="IGNORE_CLASS",e[e.IGNORE_STYLE=2048]="IGNORE_STYLE",e[e.IGNORE_HREF=4096]="IGNORE_HREF",e[e.USE_AUTO_SELECTOR=8192]="USE_AUTO_SELECTOR"}(e.SearchOptions||(e.SearchOptions={}));var m=function(){function e(e){this.list=[],this.g=e}return e.prototype.Oa=function(e){return this.list.push(e),this},e.prototype.j=function(e,t,n){var r=!1;return void 0!==n&&(r=0<(this.g&n)),r||this.list.push(new a.Ja(e,t)),this},e.prototype.sort=function(){return this.list.sort(function(e,t){return t.weight-e.weight}),this},e}(),i=function(){function r(e,t,n){void 0===n&&(n={}),this.g=0,this.ca=1,this.mode=e,this.e=n.measureTime||3===e,this.ra=1==this.mode||3==this.mode,this.timeMeasurements=[],this.h=t?new d:new c}return r.prototype.Kb=function(e){this.a=e},r.prototype.setSearchOptions=function(e){this.g=e},r.prototype.setAlgorithmSensitivity=function(e){this.ca=e},r.prototype.A=function(e){this.e&&this.timeMeasurements.push(e)},r.prototype.Va=function(){this.timeMeasurements=[]},r.prototype.C=function(e){return r.Ab[e]},r.prototype.recognize=function(e){var t,r=new o;3==this.mode&&(r.debug={minimumScore:this.ma(),screeners:null,measurements:[],eliminationDetails:[]}),this.Kb(e),this.h.Lb(e);var i=f.Db(this);return this.h.o(e),this.e&&(t=n.F()),e=this.ab(),this.e&&(t=t.G(),this.A({name:this.C("suspects"),duration:t,misc:{amount:e.length}}),t=n.F()),e=this.Jb(e,r),this.e&&(t=t.G(),this.A({name:this.C("screened"),duration:t,misc:{amount:e.count}}),t=n.F()),e=this.Fb(e),this.e&&(t=t.G(),this.A({name:this.C("scored"),duration:t,misc:{amount:e.length}}),r.debug&&(r.debug.measurements=this.timeMeasurements),r.timeMeasurements=this.timeMeasurements,this.Va()),r.elements=this.$a(e),r.losers=this.Za(r,e),r.context=i,r},r.prototype.ab=function(){var n,r=this;if(this.a.preDefinedSuspects&&this.a.preDefinedSuspects[0])return this.a.preDefinedSuspects;return n=this.a.customSelector?this.a.customSelector:this.f(8192)&&this.a.autoQuery?this.a.autoQuery:this.a.elementType.replace(":","\\:"),this.a.visibilityFilter&&(n+=this.a.visibilityFilter),this.a.ignoreWalkmeElementsSelector&&(n+=":not("+this.a.ignoreWalkmeElementsSelector+")"),t("Finding suspects using : "+n),this.h.O(n,function(t){return e.$(t,r.a.n)})},r.prototype.Xa=function(t){for(var n=new u(t.length),r=0;r<t.length;r++){var i=e.$(t[r]),i=this.h.P(i);n.push(i)}return n},r.prototype.Jb=function(e,t){var n=this.Xa(e),r=this.lb(e.length);t.debug&&(t.debug.screeners=r);for(var i=new u(e.length),o=0;o<n.count;o++){var a=n.getItem(o),s=this.Ib(a,r,t),l=1&s;2&s||!l||i.push(a)}return i},r.prototype.nb=function(){var e,t={32:function(){return[new g.Y(1,2)]},64:function(){return[new g.r("id",1,0),new g.r("name",1,0)]},128:function(){return[new g.r("data-walkmeid",1,0)]}};for(e in t)if(this.f(e))return t[e]();return null},r.prototype.gb=function(e){var t=[],n=new g.r("src",1,0);return t.push(n),n=new g.Y(1,0),!this.f(8)&&t.push(n),void 0!=this.a.attributes.id&&(n=new g.Ba(!this.f(1)&&0<this.a.attributes.id.length,(!this.f(161))),t.push(n)),n=new g.r("name",1,0),!this.f(4)&&t.push(n),n=new g.Ma(1,0,this.h),2e3>e&&!this.f(256)&&t.push(n),n=new g.Aa(this.a,1,0),2e3<=e&&!this.f(256)&&t.push(n),t},r.prototype.lb=function(e){var t=this.nb();return t||(t=this.gb(e)),t},r.prototype.Ib=function(e,t,n){for(var r=0,i=0;i<t.length;i++){var o=t[i].screen(e,this.a),r=r|o;if(2==o){n.debug&&n.debug.eliminationDetails.push({element:e.element,screenerName:t[i].name});break}}return r},r.prototype.Fb=function(e){var t=this.kb(),r=n.reduce(t,function(e,t){return e+t.weight},0),i=e,o=new u(e.count);e=new u(e.count);for(var a=0,s=0;s<t.length;s++){var l=t[s];if(this.e)var c=n.F(),d=0;for(var f=0;f<i.count;f++){var p=i.getItem(f);if(r+p.totalScore<a&&0==this.mode?(p.fa=!0,o.push(p)):e.push(p),!p.fa||0!=this.mode){var g=l.d(p,this.a);this.e&&d++,this.ra&&p.details.push({scorerName:l.name,scorerWeight:l.weight,relativeScore:g/l.weight,absoluteScore:g}),p.totalScore+=g,p.totalScore>a&&(a=p.totalScore)}}this.e&&this.A({name:this.C(l.name),duration:c.G(),misc:{count:d}}),r-=l.weight,r=Math.max(r,0),l=i,i=e,e=l,e.clear()}return i.ib()},r.prototype.f=function(e){return!!(this.g&e)},r.prototype.kb=function(){var e=new m(this.g);return e.Oa(new h.Fa(this.a,this.g)).j(new a.Ia,3,8).j(new a.La(this.h),1,256).j(new a.Ha,.7,512).j(new a.W("class"," ",null),.7,1024).j(new a.W("style",";",":"),.5,2048).j(new a.za("href","#"),3,4096).sort().j(new p.Ea,1,2),e.list},r.prototype.$a=function(e){for(var t=0,n=0;n<e.length;n++)var r=e[n].totalScore,t=r<=t?t:r;if(r=[],t>this.ma())for(n=0;n<e.length;n++)e[n].totalScore==t&&r.push(e[n]);return r},r.prototype.Za=function(e,t){if(this.ra){var n=[];if(0<e.elements.length)for(var r=e.elements[0].totalScore,i=0;i<t.length;i++)t[i].totalScore<r&&n.push(t[i]);else n=t;return n}},r.prototype.ma=function(){var e={2:0,1:1.45,0:3},t=e[this.ca];return void 0==t&&(t=e[1]),t},r.Ab={suspects:1,screened:2,scored:3,"AttributeScreen[src]":10,TextScreen:6,IdScreen:4,"AttributeScreen[name]":5,XpathScreen:9,"Multiple attributes":12,TextScorer:13,"Attribute Scorer : href":17,XpathScorer:11,ShapeProportionScorer:14,"ComplexAttributeScorer : class":15,"ComplexAttributeScorer : style":16,PositionScorer:18},r}();e.ElementRecognizerSession=i}(m||(m={})),e.exports={Version:"1.0.2",ElementRecognition:m,TempUtils:n,ContextUtils:f,TextUtils:s,XpathLib:r}},function(e,t){var n;!function(e){function t(t){return e.V(t,"parentNode")}function n(t,i){i=i||[],t=t||document;for(var o=e.$("iframe,frame",t).toArray(),a=0;a<o.length;a++){var s=r(e.$(o[a]))[0];i.push(s),s&&(i=n(s,i))}return i}function r(t){if(void 0!=t){if(t=t[0],void 0==t)return e.$();var n;try{n=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:[],n=e.$(n)}catch(r){return e.ja.handleCrossDomainError(r),e.$()}return n}}e.$,e.q,e.V=function(e,t){return e[t]},e.ja,e.setJQuery=function(t){e.$=t,e.q=t,e.$.fnHelpers&&(e.V=function(t,n){return e.$.fnHelpers[n](t)})},e.setCommonUtils=function(t){e.ja=t},e.ib=function(e){return e=e.tagName,e.toUpperCase&&(e=e.toUpperCase()),e},e.parentNode=t,e.childNodes=function(t){return e.V(t,"childNodes")},e.ka=function(e,n){for(var r=t(e[0]),i=n&&n[0]&&t(n[0]),o=[];r&&1==r.nodeType&&r!=i;r=t(r))o.push(r);return o},e.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},e.reduce=function(e,t,n){for(var r=0;r<e.length;r++)n=t(n,e[r]);return n},e.kc=function(e){var t={};e=e.prop("attributes");for(var n=0;n<e.length;n++){var r=e[n];t[r.name]=r.value}return t},e.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},e.filter=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},e.Ca=function(t,n,r){t=e.filter(t.split(n),function(t){return e.$.trim(t)}),t=e.map(t,function(e){return e.split(r)}),n={};for(var i=0;i<t.length;i++){var o=t[i],a=e.$.trim(o[0]),s="";o[1]&&(s=e.$.trim(o[1])),n[a]=s}return n};var i=function(){function e(){this.start=this.now()}return e.prototype.now=function(){return window.performance&&performance.now?performance.now():(new Date).getTime()},e.prototype.H=function(){return Math.round(1e3*(this.now()-this.start))/1e3},e}();e.dc=i,e.G=function(){return new i},e.lc=function(){for(var e=0;e<arguments.length;e++);for(var e=arguments[0],t=1;t<arguments.length;t++)e=e.replace(new RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},e.nc=function(e){return void 0!=e&&0<e.length},e.getAllElements=function(t,r){t=t||document,r=r||"*";var i=n(t,[t]);return e.$(r,i)},e.mc=n,e.s=r,e.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},e.min=function(e,t){var n=null;if(0<e.length)for(var r=t(e[0]),n=e[0],i=1;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}return n},e.pa=function(){return(new Date).getTime()%1e9}}(n||(n={}));var r,i=function(){function e(){this.buffer=[]}return e.prototype.append=function(e){this.buffer.push(e)},e.prototype.toString=function(){return this.buffer.join("")},e}();!function(e){function t(e,t){function n(n){return r(t,n,function(t){return t==e},!1)}for(var i=n(0),o=[];0<=i&&i<t.count()-1;)o.push(t.slice(0,i+1)),i=n(i+1);return o}function r(e,t,n,r){var i=e.count();if(r){for(t=i-1-t;0<=t;t--)if(n(e.get(t).tag))return t}else for(;t<=i-1;t++)if(n(e.get(t).tag))return t;return-1}function o(e,t,n,r){for(var i,o=[],a=0;a<t.length;a++)i=t[a],o.push(u(e,i,n,r)),e=i;return o=o.reverse(),s(o,n)}function a(e,t,r,i){var o=(e=e[0])&&n.parentNode(e);r=r&&r[0];for(var a=[];e&&1==e.nodeType&&e!=r;e=o,o=n.parentNode(e))a.push(u(e,o,t,i));return a=a.reverse(),s(a,t)}function s(e,t){return t?new y(e):new v(e)}function u(e,t,n,r){return n?n.kb(e,t,r):d(e,t,r)}function c(e,t,n){return new l(null,function(){return d(e,t,n)})}function d(e,t,r){var i=1;if("HTML"!=n.ib(e)){t=n.childNodes(t);for(var o=0;o<t.length&&t[o]!=e;o++){var a=t[o];a.tagName==e.tagName&&0>n.inArray(a,r)&&i++}}return{tag:e.tagName.toUpperCase(),index:i}}function p(e){return!e||0>=e.length?null:1==e.get(0).nodeType?e:(e=e.find(":first"))&&e.length&&1==e.get(0).nodeType?e:null}function g(e,t,r,i){if(i=i||[],t=t||m.$(document),0<t.find(e).length)e.data("iframe",r),i.unshift(t);else{r=i.length,t=t.find(f.oa);for(var o=0;o<t.length;o++){var a=t.eq(o);if(i=g(e,n.s(a),a,i),i.length>r){m.$(i[0]).data("iframe",a),i.unshift(a);break}}}return i}function h(e){for(var t=["HTML","BODY"],r=0;r<e.count()&&-1<n.inArray(e.get(r).tag,t);r++);return e.slice(r)}var v=function(){function e(e){this.xpathArray=e}return e.prototype.count=function(){return this.xpathArray.length},e.prototype.get=function(e){return this.xpathArray[e]},e.prototype.slice=function(t,n){return new e(this.xpathArray.slice.apply(this.xpathArray,arguments))},e}();e.ec=v;var y=function(){function e(e){this.xpathArray=e}return e.prototype.count=function(){return this.xpathArray.length},e.prototype.get=function(e){return this.xpathArray[e].get()},e.prototype.slice=function(t,n){return new e(this.xpathArray.slice.apply(this.xpathArray,arguments))},e}();e.fc=y,e.j=1,e.Ia=1;var E=function(){function e(e,t,n){this.l=this.t=this.b=0,this.b=e,this.t=t,this.l=n}return e.prototype.clone=function(){return new e(this.b,this.t,this.l)},e.prototype.p=function(){return this.b+this.t/4+this.l/10},e.max=function(){return new e(1e4,0,0)},e.p=function(e){return e.p()},e}();e.gc=E,e.N=function(t,r,i){function o(t,r,a,s,u){if(Math.abs(r-s)>i||u.b>i)return E.max();if(0==r||0==s)return u=u.clone(),u.b+=Math.max(r,s,0),u.b>i?E.max():u;var l,c=t.get(r-1),d=a.get(s-1),f=0;if(c.tag!==d.tag)f=e.j,l=E.max();else{if(c.index===d.index)return o(t,r-1,a,s-1,u);f=e.Ia}var p=u.clone();p.b+=f;var f=o(t,r-1,a,s,p),g=o(t,r,a,s-1,p);return l||(c=Math.abs(c.index-d.index),p=u.clone(),0<c&&(p.t++,p.l+=c),l=o(t,r-1,a,s-1,p)),n.min([f,g,l],E.p)}return o(t,t.count(),r,r.count(),new E(0,0,0))},e.la=function(e,t,r,i){var o=e.count();if(0>=o)return null;t=m.$(t||document),i=i?":not("+i+")":"";for(var a=0;a<o;a++){var s=e.get(a);if(t=t.children(s.tag+i).eq(s.index-1),-1!=n.inArray(s.tag,["IFRAME","FRAME"])&&o>a+1&&(0<t.length&&(r&&t.data("iframe",r),r=t),t=n.s(t)),!t||0==t.length||!t.get(0)){t=null;break}}return t&&0<t.length&&r&&t.data("iframe",r),t},e.Ub=function(r,i){if(!i||0>=i.count())return 0;for(var o=i.get(i.count()-1).tag,a=t(o,r),o=E.max().p(),s=2*e.j,u=o,l=[],c=0;c<a.length;c++){var d=a[c],f=e.N(d,i,s).p();f<u?(u=f,l=[d]):f==u&&l.push(d)}return a=0,u<o&&(a=n.min(l,function(e){return Math.abs(i.count()-e.count())}).count()),a},e.T=r,e.hc=o,e.Xa=a;var S=function(){function e(){this.Da={}}return e.prototype.kb=function(e,t,n){var r=null,i=this.v(e);return void 0!==i&&(r=this.Da[i]),r||(r=c(e,t,n),t=this.A(),this.C(e,t),this.Da[t]=r),r},e.prototype.v=function(t){return t&&t[e.da]||void 0},e.prototype.C=function(t,n){t&&(t[e.da]=n)},e.prototype.A=function(){return++e.X},e.X=n.pa(),e.da="__WMWA_XPATH_ENTRY_KEY__",e}();e.Qa=S,e.Ya=function(e,t,n,r){return e=o(e[0],t,n,r),e=h(e)},e.Va=function(e,t,r){var i=p(e);if(!i||0>=i.length)return new v([]);return i=g(i),i=n.reduce(i,function(e,n){return e.concat(a(n,t,null,r).xpathArray)},[]),s(i.concat(a(e,t,null,r).xpathArray),t)},e.removeHtmlAndBodyFromXpathArray=h,e.Zb=function(e){for(var t=new i,n=0;n<e.count();n++){var r=e.get(n);t.append(r.tag),t.append(r.index)}return t.toString()},e.xpathStringToArray=function(e){var t=[];return m.$.each(e.split("/"),function(e,n){if(0!=e){var r=n.indexOf("[");t[e-1]={tag:n.substring(0,r),index:parseInt(n.substring(r+1,n.length-1))}}}),new v(t)}}(r||(r={}));function o(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n}var a;!function(e){var t=function(){function e(e,t){this.Ob=e,this.weight=t,this.name=e.name}return e.prototype.c=function(e,t){var n=this.Ob.c(e,t);return this.weight*n},e}();e.Pa=t,t=function(){function e(){this.name="TagScorer",this.weight=3}return e.prototype.c=function(e,t){var n=e.elementType.get(),r=t.uppercaseElementType,i=n&&r,o=t.autoQuery,o=!o||e.element.is(o);return i&&n===r&&o?3:0},e}(),e.Na=t,t=function(){function e(e){this.attributeName=e,this.name="Attribute Scorer : "+e}return e.prototype.c=function(e,t){var n=e.element.attr(this.attributeName),r=t.attributes[this.attributeName];return n&&r&&n.toLowerCase()===r.toLowerCase()?1:0},
e}(),e.$b=t,t=function(e){function t(t,n){e.call(this,t),this.Xb=n}return o(t,e),t.prototype.c=function(t,n){return n.attributes[this.attributeName]==this.Xb?0:e.prototype.c.call(this,t,n)},t}(t),e.Fa=t,t=function(){function e(e){this.name="XpathScorer",this.h=e}return e.prototype.c=function(e,t){if(e.elementType.get()!==t.uppercaseElementType)return 0;var n=e.xpath.get(),n=this.h.w(n,t.xpathArrayToIframe,r.j);if(n.b>r.j)return 0;return n=1-.1*(n.b+n.l/10),0>n?0:n},e}(),e.Ra=t,t=function(){function e(){this.name="ShapeProportionScorer"}return e.prototype.c=function(e,t){if(!this.ta(e.elementType.get()))return 0;var n=e.width.get(),r=e.height.get();return 0!=n*r?(n=this.qa(n,t.width)/2+this.qa(r,t.height)/2,.6<=n?n:0):0},e.prototype.qa=function(e,t){var n=e/t;return 1<n&&(n=1/n),Math.pow(n,4)},e.prototype.ta=function(t){return e.Wb[t]},e.Wb={DIV:1,TABLE:1,TR:1,TD:1,TBODY:1,TH:1},e}(),e.Ma=t,t=function(){function e(e,t,n){this.name="ComplexAttributeScorer",this.name=this.name+" : "+e,this.attributeName=e,this.Jb=t,this.zb=n}return e.prototype.c=function(e,t){if(!t.attributes[this.attributeName]||!e.element.attr(this.attributeName))return 0;var r=t.complexAttributes[this.attributeName].get(),i=n.Ca(e.element.attr(this.attributeName),this.Jb,this.zb);return 1==this.ab(r,i)?1:0},e.prototype.ab=function(e,t){var n,r=0,i=0;for(n in e)e.hasOwnProperty(n)&&(i++,e[n]==t[n]&&r++);return n=0,0<i&&(n=r/i),n},e}(),e.aa=t,t=function(){function e(){this.name="TextScorer"}return e.prototype.c=function(e,t){return e.text.get()==t.text?1:0},e}(),e.Oa=t}(a||(a={}));var s,u=function(){function e(e){this.data=Array(e),this.size=e,this.count=0}return e.prototype.getItem=function(e){if(0>e||e>=this.count)throw Error("Out of range exception");return this.data[e]},e.prototype.clear=function(){this.count=0},e.prototype.push=function(e){if(this.count==this.size)throw Error("FastArray exceeded it's limits");this.data[this.count]=e,this.count++},e.prototype.qb=function(){return this.data.slice(0,this.count)},e}(),l=function(){function e(e,t){this.Lb=t,this.hasData=!1,this.context=e}return e.prototype.get=function(){return this.hasData||(this.data=this.Lb.apply(this.context),this.hasData=!0),this.data},e.prototype.clear=function(){this.hasData=!1},e}(),c=function(){function e(){}return e.prototype.w=function(e,t){return r.N(e,t,r.j)},e.prototype.S=function(e){return new m.ScoredElement(e,this.d)},e.prototype.o=function(e){this.d=e},e.prototype.Q=function(e,t){return t(e)},e.prototype.Sb=function(e){e.I=this.d&&e&&this.d.ignoreWalkmeElementsSelector===e.ignoreWalkmeElementsSelector?this.d.I:e&&e.ignoreWalkmeElementsSelector?n.getAllElements(document,e.ignoreWalkmeElementsSelector).toArray():[]},e}(),d=function(e){function t(){e.apply(this,arguments),this.Y={},this.F=[],this.ma={},this.i={}}return o(t,e),t.prototype.o=function(t){this.Za(t),e.prototype.o.call(this,t)},t.prototype.Fb=function(e,t){return(e&&e[0]||null)===(t&&t[0]||null)},t.prototype.Za=function(e){if(this.i={},0<this.F.length){var t=!1;this.d&&(t=!this.Fb(this.d.n,e.n));for(var n=0;n<this.F.length;n++){var r=this.Y[this.F[n]];r.totalScore=0,r.details=[],r.jc=!1,r.o(e,t)}}},t.prototype.v=function(e){return e&&e[0]&&e[0][t.ba]||null},t.prototype.C=function(e,n){e&&e[0]&&(e[0][t.ba]=n)},t.prototype.A=function(){return++t.X},t.prototype.S=function(t){var n=null,r=this.v(t);return void 0!==r&&(n=this.Y[r]),n||(n=e.prototype.S.call(this,t),r=this.A(),this.C(t,r),this.Y[r]=n,this.F.push(r)),n},t.prototype.w=function(t,n,i){var o=r.Zb(t);return this.i.hasOwnProperty(o)||(t=e.prototype.w.call(this,t,n,i),this.i[o]=t),this.i[o]},t.prototype.ub=function(e){var t=this.d.n;if(t&&0<t.length){var n=this.v(t);n||(n=this.A(),this.C(t,n)),n&&(e+="__"+n)}return e},t.prototype.Q=function(t,n){var r=this.ub(t),i=this.ma[r]||null;return i||(i=e.prototype.Q.call(this,t,n),this.ma[r]=i),i},t.X=n.pa(),t.ba="__WMWA_SUSPECT_KEY__",t}(c);!function(e){function t(o){var a="";if(3===o.nodeType||4===o.nodeType){a=o.nodeValue,o=[160,10,13,9];for(var s=new i,u=0;u<a.length;u++)0>n.indexOf(o,a.charCodeAt(u))&&s.append(a.charAt(u).toLowerCase());if(a=s.toString().replace(/ /g,""),a=m.$.trim(a),a=a.substring(0,e.Hb),null!=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(a)){for(o=-1,s=a.length,u=new i;++o<s;){var l=a.charAt(o);/[\uD800-\uDBFF]/.test(l)||/[\uDC00-\uDFFF]/.test(l)?u.append(r(l)):u.append(l)}a=u}}else if(1===o.nodeType&&!o.tagName.match(/^(script|style)$/i))for(o=n.childNodes(o),s=0,u=o.length;s<u&&!(a=t(o[s]));s++);return a}function r(e){e=e.charCodeAt(0).toString(16).toUpperCase();var t=2<e.length;return"\\"+(t?"u":"x")+("0000"+e).slice(t?-4:-2)}e.Hb=70;var o;!function(e){e[e.ElementNode=1]="ElementNode",e[e.Text=3]="Text",e[e.CDATASection=4]="CDATASection"}(o||(o={})),e.extractFirstOccuringText=function(e){return t(e[0])},e.ic=t}(s||(s={}));var f;!function(e){function t(){for(var e=0;e<arguments.length;e++);return m.$.apply(m.$,arguments)}function i(e){if(1==e.count())return e;var t=r.T(e,1,o,!0);return-1==t?e:e.slice(t+1)}function o(e){return-1!=n.inArray(e,s)}function a(i,s,u,l,c,d){var f=r.T(i,0,o,!1);if(0>f)return u;var p=i.slice(0,f+1);if(i=i.slice(f+1),f=t(e.Yb,c||u),0==f.length)return null;return f=1==f.length?f[0]:n.min(f,function(e){return e=r.Xa(t(e),s,t(u),l),r.N(e,p,r.j).p()}),(d||u&&0<u.length&&c&&0<c.length)&&t(f).data("iframe",d||u),a(i,s,t(f),l,n.s(t(f)))}var s=["IFRAME","FRAME"];e.Yb=s.join(":mt_visible,")+":mt_visible",e.oa=s.join(","),e.getXpathUpToIframe=i,e.Kb=function(s){var u,l=s.a,c=r.Va(l.customContext,l.i,l.I),d=r.Ub(l.xpathArrayOriginal,c),f=l.xpathArrayOriginal.slice(d);u=l.i;var p=l.customContext,g=l.I,h=l.ignoreWalkmeElementsSelector;if(1==f.count())u=p;else{var m=r.T(f,1,o,!0);if(-1==m)u=p;else{var v=n.s(p),y=(v=v&&0<v.length?v:null)?p:p?p.data("iframe"):null,m=f.slice(0,m+1);(h=r.la(m,v||p,y,h))&&h.is(":mt_visible")||(h=null),h||(h=a(f,u,p,g,v,y)),u=h}}g=(p=(u=u||l.customContext)&&u.is(e.oa))?n.s(u):u&&0<u.length?u:void 0,u={context:u,Eb:p,contents:g},l.n=u.contents,s.setSearchOptions(s.g&-257),c&&c.count()&&l.n==l.customContext&&(0>=d&&s.setSearchOptions(256|s.g),l.xpathArrayToIframe=r.removeHtmlAndBodyFromXpathArray(i(f)));var E;return u&&(E=u.Eb?u.context:t(u.context).data("iframe")),E}}(f||(f={}));var p;!function(e){e.$,e.q,e.setJQuery=function(t){e.$=t,e.q=t};var t=function(){function t(){this.name="PositionScorer"}return t.prototype.c=function(e,t){return this.Nb(e,t)},t.prototype.Nb=function(e,t){var n=t.centeredElementWidth,r=0;if(n){var r=t.relativeLeft,i=this.rb(e),r=Math.abs(r-i),n=n/5;if(r>(30>n?30:n))return 0;n=1-r/20,r=t.absY,i=e.element.offset().top,r=1-Math.abs(r-i)/20,i=.3,.9<n&&(i=.9),r=n*(1-i)+r*i,r=0>r?0:r}return r},t.prototype.rb=function(e){var t=this.hb(e),t=t?t.offset().left:0;return e.element.offset().left-t},t.prototype.hb=function(t){t=t.Ta.get();for(var n=null,r=t.length-1;0<=r;r--)try{if(this.Bb(t[r])){var i=e.$(t[r]),o=e.$(window).width(),a=i.width(),s=i.offset().left,u=o-a;if(0<u&&u/2==s){n=i;break}if(0>u&&u==s){n=i;break}if(this.Db(i)){n=e.$(i);break}}}catch(l){}return n},t.prototype.Bb=function(t){var n=e.$(t),r=n.data("mt_isElementFixedWidth");if(1==r)return!0;if(0==r)return!1;return t=this.Ab(t),n.data("mt_isElementFixedWidth",t),t},t.prototype.Db=function(t){var n=e.$(t),r=n.data("mt_isElementMarginAuto");if(1==r)return!0;if(0==r)return!1;return t=this.Cb(t),n.data("mt_isElementMarginAuto",t),t},t.prototype.sa=function(t,n){for(var r=!1,i=0;i<n.length&&(r=n[i],!(r=e.$(t).is(e.$(r))));i++);return r},t.prototype.Ab=function(e){return!!this.ua(e.style)||this.sa(e,this.lb())},t.prototype.Vb=function(e){return 0==e.indexOf("0")},t.prototype.bb=function(e){return 4<=e.length&&e.lastIndexOf("auto")+4==e.length},t.prototype.va=function(t){if(t){var n=e.$.trim(t.margin),r=e.$.trim(t.marginLeft);if(t=e.$.trim(t.marginRight),(n=this.Vb(n)&&this.bb(n))||"auto"==r&&"auto"==t)return!0}return!1},t.prototype.Cb=function(e){return!!this.va(e.style)||this.sa(e,this.ob())},t.prototype.ob=function(){return void 0==this.L&&(this.L=[],this.na(this.Ba)),this.L},t.prototype.Ba=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.Ba(n.styleSheet):this.va(n.style)&&this.L.push(n.selectorText)}}catch(r){}},t.prototype.na=function(e){for(var t=document.styleSheets,n=0;n<t.length;n++)e.call(this,t[n])},t.prototype.Aa=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.Aa(n.styleSheet):this.ua(n.style)&&this.M.push(n.selectorText)}}catch(r){}},t.prototype.lb=function(){return void 0==this.M&&(this.M=[],this.na(this.Aa)),this.M},t.prototype.ua=function(e){if(e=e.width){for(var t="",n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n]);if(t&&700<parseInt(t)&&(-1!=e.indexOf("p")||-1!=e.indexOf("e")||-1!=e.indexOf("m")||-1!=e.indexOf("i")))return!0}},t}();e.bc=t}(p||(p={}));var g;!function(e){!function(e){e[e.Indifferent=0]="Indifferent",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"}(e.La||(e.La={}));var t=function(){function e(e,t){this.W=e,this.ya=t,this.isEqual=e===t}return e.prototype.k=function(){throw Error("childScreen must be overriden by subclass")},e.prototype.screen=function(e,t){return this.isEqual?this.W:this.k(e,t)?this.W:this.ya},e.prototype.O=function(){return 1===this.W},e.prototype.u=function(){return 2===this.ya},e}();e.cc=t;var n=function(){function e(){}return e.prototype.za=function(){throw Error("rejectFn must be overriden by subclass")},e.prototype.ea=function(){throw Error("acceptFn must be overriden by subclass")},e.prototype.screen=function(e,t){return this.za(e,t)?2:this.ea(e,t)?1:0},e.prototype.O=function(){throw Error("canAccept must be overriden by subclass")},e.prototype.u=function(){throw Error("canReject must be overriden by subclass")},e}();e.ac=n,n=function(e){function t(t,n){e.call(this),this.name="IdScreen",this.ra=t,this.wa=n,this.ia=new i("id",0,0)}return o(t,e),t.prototype.za=function(e,t){if(this.wa){var n=e.J("id");return!(!n||30<=n.length)&&!this.ia.k(e,t)}},t.prototype.ea=function(e,t){if(this.ra)return this.ia.k(e,t)},t.prototype.O=function(){return this.ra},t.prototype.u=function(){return this.wa},t}(n),e.Ha=n;var i=function(e){function t(t,n,r){e.call(this,n,r),this.attrName=t,this.name="AttributeScreen["+this.attrName+"]"}return o(t,e),t.prototype.k=function(e,t){var n=e.J(this.attrName),r=t.attributes[this.attrName];return!(!r||!n)&&n===r},t}(t);e.r=i,n=function(e){function t(t,n,r){e.call(this,t,n),this.Ua=r,this.name="XpathScreen"}return o(t,e),t.prototype.k=function(e,t){var n=e.xpath.get(),i=r.j;return this.Ua.w(n,t.xpathArrayToIframe,i).b<=i},t}(t),e.Sa=n,n=function(e){function t(t,n,i){e.call(this,n,i);var o=t.xpathArrayOriginal;this.Gb=new l(this,function(){return r.la(o,void 0,void 0,t.ignoreWalkmeElementsSelector)}),this.name="ExactXpathScreen"}return o(t,e),t.prototype.k=function(e){var t=this.Gb.get();return t&&t[0]==e.element[0]},t}(t),e.Ga=n,t=function(e){function t(t,n){e.call(this,t,n),this.name="TextScreen"}return o(t,e),t.prototype.k=function(e,t){return!(!t.text||0===t.text.length)&&e.text.get()===t.text},t}(t),e.ca=t}(g||(g={}));var h;!function(e){var t={value:10,src:3,title:3,colspan:.3,cellpadding:.3,cellspacing:.3,border:.3,dir:.3,width:.3,placeholder:3,"data-walkmeid":1e3,id:10,name:8,alt:1},n={id:1,name:4,title:8},r=function(){function e(e,t){this.Z=[],this.name="Multiple attributes",this.options=t,this.description=e,this.weight=this.Wa()}return e.prototype.Wa=function(){var e,t=0;for(e in this.description.attributes)this.description.attributes.hasOwnProperty(e)&&this.Tb(e)&&this.U(this.description.attributes[e])&&(t+=this.P(e),this.Z.push(e));return t},e.prototype.Tb=function(e){var t=0!==this.P(e);return!(n.hasOwnProperty(e)&&n[e]&this.options)&&t},e.prototype.c=function(e,t){for(var n=0,r=0;r<this.Z.length;r++){var i=this.Z[r],o=t.attributes[i],a=e.J(i);this.U(a)&&this.U(o)&&a==o&&(n+=this.P(i))}return n},e.prototype.U=function(e){return void 0!=e&&null!=e&&""!=e},e.prototype.P=function(e){return t.hasOwnProperty(e)?t[e]:0},e}();e.Ka=r}(h||(h={}));var m;!function(e){function t(){}e.$,e.q,e.setJQuery=function(t){e.$=t,e.q=t,n.setJQuery(t),p.setJQuery(t)},e.setCommonUtils=function(e){n.setCommonUtils(e)},e.setLogFunc=function(e){t=e};var i=function(){function e(e,t){this.totalScore=0,this.width=new l(this,this.xb),this.height=new l(this,this.nb),this.parents=new l(this,this.pb),this.Ta=new l(this,this.gb),this.text=new l(this,this.wb),this.xpath=new l(this,this.yb),this.elementType=new l(this,this.jb),this.element=e,this.details=[],this.K={},this.o(t)}return e.prototype.o=function(e,t){this.d&&t&&(this.parents.clear(),this.xpath.clear()),this.d=e},e.prototype.xb=function(){return this.element[0].clientWidth},e.prototype.nb=function(){return this.element[0].clientHeight},e.prototype.pb=function(){return n.ka(this.element,this.d.n)},e.prototype.gb=function(){return n.ka(this.element)},e.prototype.wb=function(){return s.extractFirstOccuringText(this.element)},e.prototype.J=function(e){return this.K.hasOwnProperty(e)||(this.K[e]=this.element[0].getAttribute(e)),this.K[e]},e.prototype.yb=function(){return r.Ya(this.element,this.parents.get(),this.d.i,this.d.I)},e.prototype.jb=function(){var e=this.element[0];return e?e.tagName:""},e}();e.ScoredElement=i;var o=function(){return function(){this.elements=[],this.losers=void 0}}();e.RecognitionResult=o,i=function(){function e(e){this.attributes={},this.complexAttributes={},this.ga("style",";",":"),this.ga("class"," ",null),e&&(this.i=new r.Qa)}return e.prototype.ga=function(e,t,r){var i=this;this.complexAttributes[e]=new l(this,function(){return n.Ca(i.attributes[e],t,r)})},e}(),e.ElementDescription=i,function(e){e[e.Efficient=0]="Efficient",e[e.Verbouse=1]="Verbouse",e[e.Fast=2]="Fast",e[e.VerbouseDebug=3]="VerbouseDebug"}(e.Ea||(e.Ea={})),function(e){e[e.Suspects=1]="Suspects",e[e.Screened=2]="Screened",e[e.Scored=3]="Scored",e[e.Screen_Attr_id=4]="Screen_Attr_id",e[e.Screen_Attr_name=5]="Screen_Attr_name",e[e.Screen_Text=6]="Screen_Text",e[e.Screen_Attr_walkmeid=7]="Screen_Attr_walkmeid",e[e.Screen_Exact_Xpath=8]="Screen_Exact_Xpath",e[e.Screen_Xpath=9]="Screen_Xpath",e[e.Screen_Attr_src=10]="Screen_Attr_src",e[e.Score_Xpath=11]="Score_Xpath",e[e.Score_Multi=12]="Score_Multi",e[e.Score_Text=13]="Score_Text",e[e.Score_Shape_Proportion=14]="Score_Shape_Proportion",e[e.Score_Complex_Class=15]="Score_Complex_Class",e[e.Score_Complex_Style=16]="Score_Complex_Style",e[e.Score_Attr_href=17]="Score_Attr_href",e[e.Score_Position=18]="Score_Position",e[e.Score_Tag=19]="Score_Tag"}(e.Ja||(e.Ja={})),function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low"}(e.AlgorithmSensitivity||(e.AlgorithmSensitivity={})),function(e){e[e.IGNORE_ALL=4294967295]="IGNORE_ALL",e[e.IGNORE_NOTHING=0]="IGNORE_NOTHING",e[e.IGNORE_ID=1]="IGNORE_ID",e[e.IGNORE_POSITION=2]="IGNORE_POSITION",e[e.IGNORE_NAME=4]="IGNORE_NAME",e[e.IGNORE_TEXT=8]="IGNORE_TEXT",e[e.IDENTIFY_TEXT=32]="IDENTIFY_TEXT",e[e.IDENTIFY_ID_AND_NAME=64]="IDENTIFY_ID_AND_NAME",e[e.IDENTIFY_WALKME_ID=128]="IDENTIFY_WALKME_ID",e[e.IGNORE_XPATH=256]="IGNORE_XPATH",e[e.IGNORE_SHAPE_PROPORTION=512]="IGNORE_SHAPE_PROPORTION",e[e.IGNORE_CLASS=1024]="IGNORE_CLASS",e[e.IGNORE_STYLE=2048]="IGNORE_STYLE",e[e.IGNORE_HREF=4096]="IGNORE_HREF",e[e.USE_AUTO_SELECTOR=8192]="USE_AUTO_SELECTOR"}(e.SearchOptions||(e.SearchOptions={}));var m=function(){function e(e){this.list=[],this.g=e}return e.prototype.fa=function(e){return this.list.push(e),this},e.prototype.m=function(e,t,n){var r=!1;return void 0!==n&&(r=0<(this.g&n)),r||this.list.push(new a.Pa(e,t)),this},e.prototype.sort=function(){return this.list.sort(function(e,t){return t.weight-e.weight}),this},e}(),i=function(){function r(e,t,n){void 0===n&&(n={}),this.g=0,this.ha=1,this.mode=e,this.e=n.measureTime||3===e,this.xa=1==this.mode||3==this.mode,this.timeMeasurements=[],this.h=t?new d:new c}return r.prototype.Rb=function(e){this.a=e},r.prototype.setSearchOptions=function(e){this.g=e},r.prototype.setAlgorithmSensitivity=function(e){this.ha=e},r.prototype.B=function(e){this.e&&this.timeMeasurements.push(e)},r.prototype.$a=function(){this.timeMeasurements=[]},r.prototype.D=function(e){return r.Ib[e]},r.prototype.recognize=function(e){var t,r=new o;3==this.mode&&(r.debug={minimumScore:this.R(),screeners:null,measurements:[],eliminationDetails:[]}),this.Rb(e),this.h.Sb(e);var i=f.Kb(this);return this.h.o(e),this.e&&(t=n.G()),e=this.fb(),this.e&&(t=t.H(),this.B({name:this.D("suspects"),duration:t,misc:{amount:e.length}}),t=n.G()),e=this.Qb(e,r),this.e&&(t=t.H(),this.B({name:this.D("screened"),duration:t,misc:{amount:e.count}}),t=n.G()),e=this.Mb(e),this.e&&(t=t.H(),this.B({name:this.D("scored"),duration:t,misc:{amount:e.length}}),r.debug&&(r.debug.measurements=this.timeMeasurements),r.timeMeasurements=this.timeMeasurements,this.$a()),r.elements=this.eb(e),r.losers=this.cb(r,e),r.context=i,r},r.prototype.fb=function(){var n,r=this;if(this.a.preDefinedSuspects&&this.a.preDefinedSuspects[0])return this.a.preDefinedSuspects;return n=this.a.customSelector?this.a.customSelector:this.f(8192)&&this.a.autoQuery?this.a.autoQuery.replace(/([^\[\s]+)(\[[^\]]+\])?$/,"*$2"):"*",this.a.ignoreWalkmeElementsSelector&&(n+=":not("+this.a.ignoreWalkmeElementsSelector+")"),t("Finding suspects using : "+n),this.h.Q(n,function(t){return e.$(t,r.a.n)})},r.prototype.Qb=function(t,n){var r=t.filter(this.a.elementType.replace(":","\\:")).length,r=this.tb(r);n.debug&&(n.debug.screeners=r);for(var i=new u(t.length),o=0;o<t.length;o++){var a=this.h.S(e.$(t[o])),s=this.Pb(a,r,n),l=1&s;2&s||!l||i.push(a)}return i},r.prototype.vb=function(){var e,t={32:function(){return[new g.ca(1,2)]},64:function(){return[new g.r("id",1,0),new g.r("name",1,0)]},128:function(){return[new g.r("data-walkmeid",1,0)]}};for(e in t)if(this.f(e))return t[e]();return null},r.prototype.mb=function(e){function t(e,t){e&&(t.O()||t.u())&&n.push(t)}var n=[];return void 0!=this.a.attributes.id&&t(!0,new g.Ha(!this.f(1)&&0<this.a.attributes.id.length,(!this.f(161)))),t(!0,new g.r("src",1,0)),t(!this.f(4),new g.r("name",1,0)),t(!this.f(8),new g.ca(1,0)),t(2e3>e&&!this.f(256),new g.Sa(1,0,this.h)),t(2e3<=e&&!this.f(256),new g.Ga(this.a,1,0)),n},r.prototype.tb=function(e){var t=this.vb();return t||(t=this.mb(e)),t},r.prototype.Pb=function(e,t,n){if(e.elementType.get()!==this.a.uppercaseElementType)return 1;for(var r=0,i=0;i<t.length;i++){var o=t[i];if((!(1&r)||o.u())&&(o=o.screen(e,this.a),r|=o,2==o)){n.debug&&n.debug.eliminationDetails.push({element:e.element,screenerName:t[i].name});break}}return r},r.prototype.Mb=function(e){var t=this.sb(),r=n.reduce(t,function(e,t){return e+t.weight},0),i=e;e=new u(e.count);for(var o=this.R()+3,a=r,r=0;r<t.length;r++){var s=t[r];if(this.e)var l=n.G(),c=0;for(var d=0;d<i.count;d++){var f=i.getItem(d),p=!1,g=a+f.totalScore<o&&0==this.mode;if(!g){var h=s.c(f,this.a);this.e&&c++,this.xa&&f.details.push({scorerName:s.name,scorerWeight:s.weight,relativeScore:h/s.weight,absoluteScore:h}),f.totalScore+=h,f.totalScore>o&&(!this.a.visibilityFilter||f.element.is(this.a.visibilityFilter)?o=f.totalScore:p=!0)}p||g||e.push(f)}this.e&&this.B({name:this.D(s.name),duration:l.H(),misc:{count:c}}),a=Math.max(a-s.weight,0),s=i,i=e,e=s,e.clear()}for(t=i.qb(),r=0;r<t.length;r++)t[r].totalScore-=3;return t},r.prototype.f=function(e){return!!(this.g&e)},r.prototype.sb=function(){var e=new m(this.g);e.fa(new h.Ka(this.a,this.g)).m(new a.Fa("href","#"),3,4096).sort().m(new a.aa("class"," ",null),.7,1024).m(new a.aa("style",";",":"),.5,2048),this.a.text&&e.m(new a.Oa,3,8),e.m(new a.Ra(this.h),1,256);var t=new a.Ma;return t.ta(this.a.uppercaseElementType)&&e.m(t,.7,512),e.fa(new a.Na),e.list},r.prototype.eb=function(e){for(var t=0,n=0;n<e.length;n++)var r=e[n].totalScore,t=r<=t?t:r;if(r=[],t>this.R())for(n=0;n<e.length;n++)e[n].totalScore==t&&r.push(e[n]);return r},r.prototype.cb=function(e,t){if(this.xa){var n=[];if(0<e.elements.length)for(var r=e.elements[0].totalScore,i=0;i<t.length;i++)t[i].totalScore<r&&n.push(t[i]);else n=t;return n}},r.prototype.R=function(){var e={2:0,1:1.45,0:3},t=e[this.ha];return void 0==t&&(t=e[1]),t},r.Ib={suspects:1,screened:2,scored:3,"AttributeScreen[src]":10,TextScreen:6,IdScreen:4,"AttributeScreen[name]":5,XpathScreen:9,"Multiple attributes":12,TextScorer:13,"Attribute Scorer : href":17,XpathScorer:11,ShapeProportionScorer:14,"ComplexAttributeScorer : class":15,"ComplexAttributeScorer : style":16,PositionScorer:18,TagScorer:19},r}();e.ElementRecognizerSession=i}(m||(m={})),e.exports={Version:"1.0.9",ElementRecognition:m,TempUtils:n,ContextUtils:f,TextUtils:s,XpathLib:r}},function(e,t){e.exports=n;function n(e,t,n,r){}},function(e,t){e.exports=n;function n(e){var t=this;t.shouldMeasure=function(){return e.getBILogger().isEnabled()&&Math.random()<.005}}},function(e,t){e.exports=n;function n(e){var t=this;function n(){}t.isFeatureManagerReady=function(){return e.isReady()},t.isFeatureEnabled=function(t){if(e.isReady())return e.isFeatureEnabled(t);if(_walkmeInternals.findElementFeatures)return!!_walkmeInternals.findElementFeatures[t];return!1},n.apply(this,arguments)}},function(e,t){e.exports=n;function n(e,t,n,r,i,o){var a,s,u,l,c,d,f,p=this;function g(){v()}p.getSession=function(e,t){return d=t,y()||m(e),a},p.wrapSession=function(e,t){var n=h();T(t,n);var r=e&&e();return b(n),r},p.startSessionForEditor=function(e,t){var n=h();return p.setAutoCloseSessionFlag(t),T(e,n)},p.endSessionForEditor=function(){var e=h();if(e)return;return v(),!0},p.setAutoCloseSessionFlag=function(e){void 0!==e&&null!==e&&(f=e)},p.setSessionCacheFlag=function(e){void 0!==e&&null!==e&&(u=e)},p.addMeasurement=function(e){c&&e&&l.push(e)},p.closeSession=v;function h(){return t.isFeatureEnabled("fe_no_session_cache")}function m(e){i.shouldMeasure()?(c=!0,l=[]):e=e||0,a=new d.ElementRecognition.ElementRecognizerSession(e,u,{measureTime:c}),u=!1,S()}function v(){s=0,a=null,u=!1,f=!0,c&&(C(),c=!1,l=[])}function y(){return a&&s>0}function E(){s<0&&(s=0)}function S(){f&&e.libSetTimeout(v,0)}function T(e,t){if(t)return;return y()||u||(u=!0),E(),s+=1,!0}function C(){var e=P(r.generateGUID(),l);n.foreach(e,function(e){o.getBILogger().send("feperf",e)})}function b(e){if(e)return;s-=1,a&&s<=0&&v()}function w(e,t){return function(n){return I(e,t,n)}}function I(e,t,n){return wmjQuery.extend({type:"feperf",name:n.name,duration:n.duration,instanceId:t,sessionId:e,version:d.Version},n.misc||{})}function P(e,t){return n.reduceSpec(t,function(t,r,i){return t.concat(n.mapSpec(r,w(e,i)))},[])}g.apply(this,arguments)}},function(e,t){e.exports=n;function n(e,t,n){this.registerPlugin=function(t){e.push(t),t&&t.init&&t.init(n.getElementFinder())},this.findElement=function(e,t){var n;return r(function(r){return n=r.findElement&&r.findElement(e,t),void 0!==n}),n},this.extendDescription=function(e,n){var i=t.secureEvalJSON(n);return r(function(t){t.extendDescription&&t.extendDescription(e,i)}),t.toJSON(i)},this.extendResult=function(e,t,n){r(function(r){r.extendResult&&r.extendResult(e,t,n)})},this.extendOriginalSettings=function(e){try{r(function(t){t.extendOriginalSettings&&t.extendOriginalSettings(e)})}catch(t){return!1}return!0},this.extendAdaptedSettings=function(e,t){r(function(n){n.extendAdaptedSettings&&n.extendAdaptedSettings(e,t)})};function r(t){for(var n=!1,r=0;!n&&r<e.length;r++)n=t(e[r])}}},function(e,t){e.exports=n;function n(e,t,n,r){var i,o,a,s,u,l,c=this,d=!1;function f(){}function p(){return i=r.getPlatformPageIdentifier()}c.init=function(){if(d||!p())return d;d=!0;var n=function(){return t.location},r=function(t){return e.isPhraseHuman(t)},o=[new i.GeneralCapture(r),new i.SFPlatformCapture(n)];return a=new i.PlatformPageCapture(o),s=i.ComparersFactory.createSalesForce(),c.resetCollection(),d},c.isEnabled=function(){return d},c.captureCurrentPage=function(){return a.capture()},c.resetCollection=function(){u=new i.PageDescriptionCollection(s)},c.addSerializedPage=function(e,t){var n=i.PageDescription.deserialize(e);u.add(n,t)},c.updateCurrentPage=function(){l={},o=a.capture()},c.getPageKey=function(e){var t=e.ElementDescription.pageKey;if(c.getPageDesc(t))return t},c.getPageDesc=function(e){return u.getPage(e)},c.getComparer=function(){return s},c.compareCurrent=function(e){var t=c.getPageKey(e);return l[t]||(l[t]=s.compareCurrent(o,c.getPageDesc(t),u)),l[t]},c.editorApi={isEnabled:c.isEnabled,updateCurrentPage:c.updateCurrentPage,addSerializedPage:c.addSerializedPage,resetCollection:c.resetCollection,captureCurrentPage:function(){var e=c.captureCurrentPage(),t=s.compareDescriptions(e,e);if(t&&t.match)return e.serialize()}},f.apply(this,arguments)}},function(e,t){e.exports=n;function n(e){this.getBILogger=function(){return e.get("BILogger")},this.getPlatformPageIdentifier=function(){return e.has("PlatformPageIdentifier")?e.get("PlatformPageIdentifier"):null},this.getElementFinder=function(){return e.get("ElementFinder")}}},function(e,t){var n={color:!1,print_scores:!1,print_find:!1};e.exports=n}]);